/**
* plotly.js (gl3d - minified) v1.35.2
* Copyright 2012-2018, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=t()}}(function(){var t={exports:{}};!function(){var e={version:"3.5.17"},r=[].slice,n=function(t){return r.call(t)},i=this.document;function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(i)try{n(i.documentElement.childNodes)[0].nodeType}catch(t){n=function(t){for(var e=t.length,r=new Array(e);e--;)r[e]=t[e];return r}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var s=this.Element.prototype,l=s.setAttribute,u=s.setAttributeNS,c=this.CSSStyleDeclaration.prototype,h=c.setProperty;s.setAttribute=function(t,e){l.call(this,t,e+"")},s.setAttributeNS=function(t,e,r){u.call(this,t,e,r+"")},c.setProperty=function(t,e,r){h.call(this,t,e+"",r)}}function f(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function d(t){return null===t?NaN:+t}function p(t){return!isNaN(t)}function g(t){return{left:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);n<i;){var a=n+i>>>1;t(e[a],r)<0?n=a+1:i=a}return n},right:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);n<i;){var a=n+i>>>1;t(e[a],r)>0?i=a:n=a+1}return n}}}e.ascending=f,e.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},e.min=function(t,e){var r,n,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<a;)null!=(n=t[i])&&r>n&&(r=n)}else{for(;++i<a;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=n;break}for(;++i<a;)null!=(n=e.call(t,t[i],i))&&r>n&&(r=n)}return r},e.max=function(t,e){var r,n,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<a;)null!=(n=t[i])&&n>r&&(r=n)}else{for(;++i<a;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=n;break}for(;++i<a;)null!=(n=e.call(t,t[i],i))&&n>r&&(r=n)}return r},e.extent=function(t,e){var r,n,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(n=t[a])&&n>=n){r=i=n;break}for(;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else{for(;++a<o;)if(null!=(n=e.call(t,t[a],a))&&n>=n){r=i=n;break}for(;++a<o;)null!=(n=e.call(t,t[a],a))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]},e.sum=function(t,e){var r,n=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)p(r=+t[a])&&(n+=r);else for(;++a<i;)p(r=+e.call(t,t[a],a))&&(n+=r);return n},e.mean=function(t,e){var r,n=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)p(r=d(t[a]))?n+=r:--o;else for(;++a<i;)p(r=d(e.call(t,t[a],a)))?n+=r:--o;if(o)return n/o},e.quantile=function(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),i=+t[n-1],a=r-n;return a?i+a*(t[n]-i):i},e.median=function(t,r){var n,i=[],a=t.length,o=-1;if(1===arguments.length)for(;++o<a;)p(n=d(t[o]))&&i.push(n);else for(;++o<a;)p(n=d(r.call(t,t[o],o)))&&i.push(n);if(i.length)return e.quantile(i.sort(f),.5)},e.variance=function(t,e){var r,n,i=t.length,a=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)p(r=d(t[s]))&&(o+=(n=r-a)*(r-(a+=n/++l)));else for(;++s<i;)p(r=d(e.call(t,t[s],s)))&&(o+=(n=r-a)*(r-(a+=n/++l)));if(l>1)return o/(l-1)},e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};var v=g(f);function m(t){return t.length}e.bisectLeft=v.left,e.bisect=e.bisectRight=v.right,e.bisector=function(t){return g(1===t.length?function(e,r){return f(t(e),r)}:t)},e.shuffle=function(t,e,r){(a=arguments.length)<3&&(r=t.length,a<2&&(e=0));for(var n,i,a=r-e;a;)i=Math.random()*a--|0,n=t[a+e],t[a+e]=t[i+e],t[i+e]=n;return t},e.permute=function(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n},e.pairs=function(t){for(var e=0,r=t.length-1,n=t[0],i=new Array(r<0?0:r);e<r;)i[e]=[n,n=t[++e]];return i},e.transpose=function(t){if(!(a=t.length))return[];for(var r=-1,n=e.min(t,m),i=new Array(n);++r<n;)for(var a,o=-1,s=i[r]=new Array(a);++o<a;)s[o]=t[o][r];return i},e.zip=function(){return e.transpose(arguments)},e.keys=function(t){var e=[];for(var r in t)e.push(r);return e},e.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},e.entries=function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e},e.merge=function(t){for(var e,r,n,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(r=new Array(o);--i>=0;)for(e=(n=t[i]).length;--e>=0;)r[--o]=n[e];return r};var y=Math.abs;function b(t,e){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],enumerable:!1})}function x(){this._=Object.create(null)}e.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r==1/0)throw new Error("infinite range");var n,i=[],a=function(t){var e=1;for(;t*e%1;)e*=10;return e}(y(r)),o=-1;if(t*=a,e*=a,(r*=a)<0)for(;(n=t+r*++o)>e;)i.push(n/a);else for(;(n=t+r*++o)<e;)i.push(n/a);return i},e.map=function(t,e){var r=new x;if(t instanceof x)t.forEach(function(t,e){r.set(t,e)});else if(Array.isArray(t)){var n,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)r.set(i,t[i]);else for(;++i<a;)r.set(e.call(t,n=t[i],i),n)}else for(var o in t)r.set(o,t[o]);return r};var _="__proto__",w="\0";function M(t){return(t+="")===_||t[0]===w?w+t:t}function A(t){return(t+="")[0]===w?t.slice(1):t}function T(t){return M(t)in this._}function k(t){return(t=M(t))in this._&&delete this._[t]}function E(){var t=[];for(var e in this._)t.push(A(e));return t}function L(){var t=0;for(var e in this._)++t;return t}function C(){for(var t in this._)return!1;return!0}function S(){this._=Object.create(null)}function P(t){return t}function R(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}function O(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var r=0,n=I.length;r<n;++r){var i=I[r]+e;if(i in t)return i}}b(x,{has:T,get:function(t){return this._[M(t)]},set:function(t,e){return this._[M(t)]=e},remove:k,keys:E,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:A(e),value:this._[e]});return t},size:L,empty:C,forEach:function(t){for(var e in this._)t.call(this,A(e),this._[e])}}),e.nest=function(){var t,r,n={},i=[],a=[];function o(e,a,s){if(s>=i.length)return r?r.call(n,a):t?a.sort(t):a;for(var l,u,c,h,f=-1,d=a.length,p=i[s++],g=new x;++f<d;)(h=g.get(l=p(u=a[f])))?h.push(u):g.set(l,[u]);return e?(u=e(),c=function(t,r){u.set(t,o(e,r,s))}):(u={},c=function(t,r){u[t]=o(e,r,s)}),g.forEach(c),u}return n.map=function(t,e){return o(e,t,0)},n.entries=function(t){return function t(e,r){if(r>=i.length)return e;var n=[],o=a[r++];return e.forEach(function(e,i){n.push({key:e,values:t(i,r)})}),o?n.sort(function(t,e){return o(t.key,e.key)}):n}(o(e.map,t,0),0)},n.key=function(t){return i.push(t),n},n.sortKeys=function(t){return a[i.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return r=t,n},n},e.set=function(t){var e=new S;if(t)for(var r=0,n=t.length;r<n;++r)e.add(t[r]);return e},b(S,{has:T,add:function(t){return this._[M(t+="")]=!0,t},remove:k,values:E,size:L,empty:C,forEach:function(t){for(var e in this._)t.call(this,A(e))}}),e.behavior={},e.rebind=function(t,e){for(var r,n=1,i=arguments.length;++n<i;)t[r=arguments[n]]=R(t,e,e[r]);return t};var I=["webkit","ms","moz","Moz","o","O"];function N(){}function D(){}function z(t){var e=[],r=new x;function n(){for(var r,n=e,i=-1,a=n.length;++i<a;)(r=n[i].on)&&r.apply(this,arguments);return t}return n.on=function(n,i){var a,o=r.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,a=e.indexOf(o)).concat(e.slice(a+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function F(){e.event.preventDefault()}function j(){for(var t,r=e.event;t=r.sourceEvent;)r=t;return r}function B(t){for(var r=new D,n=0,i=arguments.length;++n<i;)r[arguments[n]]=z(r);return r.of=function(n,i){return function(a){try{var o=a.sourceEvent=e.event;a.target=t,e.event=a,r[a.type].apply(n,i)}finally{e.event=o}}},r}e.dispatch=function(){for(var t=new D,e=-1,r=arguments.length;++e<r;)t[arguments[e]]=z(t);return t},D.prototype.on=function(t,e){var r=t.indexOf("."),n="";if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},e.event=null,e.requote=function(t){return t.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)t[r]=e[r]};function H(t){return V(t,W),t}var q=function(t,e){return e.querySelector(t)},G=function(t,e){return e.querySelectorAll(t)},X=function(t,e){var r=t.matches||t[O(t,"matchesSelector")];return(X=function(t,e){return r.call(t,e)})(t,e)};"function"==typeof Sizzle&&(q=function(t,e){return Sizzle(t,e)[0]||null},G=Sizzle,X=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var W=e.selection.prototype=[];function Y(t){return"function"==typeof t?t:function(){return q(t,this)}}function Z(t){return"function"==typeof t?t:function(){return G(t,this)}}W.select=function(t){var e,r,n,i,a=[];t=Y(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var l=-1,u=n.length;++l<u;)(i=n[l])?(e.push(r=t.call(i,i.__data__,l,o)),r&&"__data__"in i&&(r.__data__=i.__data__)):e.push(null)}return H(a)},W.selectAll=function(t){var e,r,i=[];t=Z(t);for(var a=-1,o=this.length;++a<o;)for(var s=this[a],l=-1,u=s.length;++l<u;)(r=s[l])&&(i.push(e=n(t.call(r,r.__data__,l,a))),e.parentNode=r);return H(i)};var Q="http://www.w3.org/1999/xhtml",K={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $(t,r){return t=e.ns.qualify(t),null==r?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof r?t.local?function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,r)}:function(){this.setAttribute(t,r)}}function J(t){return t.trim().replace(/\s+/g," ")}function tt(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function rt(t,e){var r=(t=et(t).map(nt)).length;return"function"==typeof e?function(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}:function(){for(var n=-1;++n<r;)t[n](this,e)}}function nt(t){var e=tt(t);return function(r,n){if(i=r.classList)return n?i.add(t):i.remove(t);var i=r.getAttribute("class")||"";n?(e.lastIndex=0,e.test(i)||r.setAttribute("class",J(i+" "+t))):r.setAttribute("class",J(i.replace(e," ")))}}function it(t,e,r){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}:function(){this.style.setProperty(t,e,r)}}function at(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}:function(){this[t]=e}}function ot(t){return"function"==typeof t?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Q&&e.documentElement.namespaceURI===Q?e.createElement(t):e.createElementNS(r,t)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function lt(t){return{__data__:t}}function ut(t){return function(){return X(this,t)}}function ct(t,e){for(var r=0,n=t.length;r<n;r++)for(var i,a=t[r],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,r);return t}function ht(t){return V(t,ft),t}e.ns={prefix:K,qualify:function(t){var e=t.indexOf(":"),r=t;return e>=0&&"xmlns"!==(r=t.slice(0,e))&&(t=t.slice(e+1)),K.hasOwnProperty(r)?{space:K[r],local:t}:t}},W.attr=function(t,r){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=e.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(r in t)this.each($(r,t[r]));return this}return this.each($(t,r))},W.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node(),n=(t=et(t)).length,i=-1;if(e=r.classList){for(;++i<n;)if(!e.contains(t[i]))return!1}else for(e=r.getAttribute("class");++i<n;)if(!tt(t[i]).test(e))return!1;return!0}for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},W.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.each(it(r,t[r],e));return this}if(n<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}r=""}return this.each(it(t,e,r))},W.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},W.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},W.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},W.append=function(t){return t=ot(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},W.insert=function(t,e){return t=ot(t),e=Y(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},W.remove=function(){return this.each(st)},W.data=function(t,e){var r,n,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++i<a;)(n=r[i])&&(t[i]=n.__data__);return t}function o(t,r){var n,i,a,o=t.length,c=r.length,h=Math.min(o,c),f=new Array(c),d=new Array(c),p=new Array(o);if(e){var g,v=new x,m=new Array(o);for(n=-1;++n<o;)(i=t[n])&&(v.has(g=e.call(i,i.__data__,n))?p[n]=i:v.set(g,i),m[n]=g);for(n=-1;++n<c;)(i=v.get(g=e.call(r,a=r[n],n)))?!0!==i&&(f[n]=i,i.__data__=a):d[n]=lt(a),v.set(g,!0);for(n=-1;++n<o;)n in m&&!0!==v.get(m[n])&&(p[n]=t[n])}else{for(n=-1;++n<h;)i=t[n],a=r[n],i?(i.__data__=a,f[n]=i):d[n]=lt(a);for(;n<c;++n)d[n]=lt(r[n]);for(;n<o;++n)p[n]=t[n]}d.update=f,d.parentNode=f.parentNode=p.parentNode=t.parentNode,s.push(d),l.push(f),u.push(p)}var s=ht([]),l=H([]),u=H([]);if("function"==typeof t)for(;++i<a;)o(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<a;)o(r=this[i],t);return l.enter=function(){return s},l.exit=function(){return u},l},W.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},W.filter=function(t){var e,r,n,i=[];"function"!=typeof t&&(t=ut(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var s=0,l=r.length;s<l;s++)(n=r[s])&&t.call(n,n.__data__,s,a)&&e.push(n)}return H(i)},W.order=function(){for(var t=-1,e=this.length;++t<e;)for(var r,n=this[t],i=n.length-1,a=n[i];--i>=0;)(r=n[i])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},W.sort=function(t){t=function(t){arguments.length||(t=f);return function(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}}.apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},W.each=function(t){return ct(this,function(e,r,n){t.call(e,e.__data__,r,n)})},W.call=function(t){var e=n(arguments);return t.apply(e[0]=this,e),this},W.empty=function(){return!this.node()},W.node=function(){for(var t=0,e=this.length;t<e;t++)for(var r=this[t],n=0,i=r.length;n<i;n++){var a=r[n];if(a)return a}return null},W.size=function(){var t=0;return ct(this,function(){++t}),t};var ft=[];function dt(t,r,i){var a="__on"+t,o=t.indexOf("."),s=gt;o>0&&(t=t.slice(0,o));var l=pt.get(t);function u(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}return l&&(t=l,s=vt),o?r?function(){var e=s(r,n(arguments));u.call(this),this.addEventListener(t,this[a]=e,e.$=i),e._=r}:u:r?N:function(){var r,n=new RegExp("^__on([^.]+)"+e.requote(t)+"$");for(var i in this)if(r=i.match(n)){var a=this[i];this.removeEventListener(r[1],a,a.$),delete this[i]}}}e.selection.enter=ht,e.selection.enter.prototype=ft,ft.append=W.append,ft.empty=W.empty,ft.node=W.node,ft.call=W.call,ft.size=W.size,ft.select=function(t){for(var e,r,n,i,a,o=[],s=-1,l=this.length;++s<l;){n=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(a=i[u])?(e.push(n[u]=r=t.call(i.parentNode,a.__data__,u,s)),r.__data__=a.__data__):e.push(null)}return H(o)},ft.insert=function(t,e){var r,n,i;return arguments.length<2&&(r=this,e=function(t,e,a){var o,s=r[a].update,l=s.length;for(a!=i&&(i=a,n=0),e>=n&&(n=e+1);!(o=s[n])&&++n<l;);return o}),W.insert.call(this,t,e)},e.select=function(t){var e;return"string"==typeof t?(e=[q(t,i)]).parentNode=i.documentElement:(e=[t]).parentNode=a(t),H([e])},e.selectAll=function(t){var e;return"string"==typeof t?(e=n(G(t,i))).parentNode=i.documentElement:(e=n(t)).parentNode=null,H([e])},W.on=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=!1),t)this.each(dt(r,t[r],e));return this}if(n<2)return(n=this.node()["__on"+t])&&n._;r=!1}return this.each(dt(t,e,r))};var pt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gt(t,r){return function(n){var i=e.event;e.event=n,r[0]=this.__data__;try{t.apply(this,r)}finally{e.event=i}}}function vt(t,e){var r=gt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||r.call(this,t)}}i&&pt.forEach(function(t){"on"+t in i&&pt.remove(t)});var mt,yt=0;function bt(t){var r=".dragsuppress-"+ ++yt,n="click"+r,i=e.select(o(t)).on("touchmove"+r,F).on("dragstart"+r,F).on("selectstart"+r,F);if(null==mt&&(mt=!("onselectstart"in t)&&O(t.style,"userSelect")),mt){var s=a(t).style,l=s[mt];s[mt]="none"}return function(t){if(i.on(r,null),mt&&(s[mt]=l),t){var e=function(){i.on(n,null)};i.on(n,function(){F(),e()},!0),setTimeout(e,0)}}}e.mouse=function(t){return _t(t,j())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _t(t,r){r.changedTouches&&(r=r.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(xt<0){var a=o(t);if(a.scrollX||a.scrollY){var s=(n=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(s.f||s.e),n.remove()}}return xt?(i.x=r.pageX,i.y=r.pageY):(i.x=r.clientX,i.y=r.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var l=t.getBoundingClientRect();return[r.clientX-l.left-t.clientLeft,r.clientY-l.top-t.clientTop]}function wt(){return e.event.changedTouches[0].identifier}e.touch=function(t,e,r){if(arguments.length<3&&(r=e,e=j().changedTouches),e)for(var n,i=0,a=e.length;i<a;++i)if((n=e[i]).identifier===r)return _t(t,n)},e.behavior.drag=function(){var t=B(a,"drag","dragstart","dragend"),r=null,n=s(N,e.mouse,o,"mousemove","mouseup"),i=s(wt,e.touch,P,"touchmove","touchend");function a(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function s(n,i,a,o,s){return function(){var l,u=e.event.target.correspondingElement||e.event.target,c=this.parentNode,h=t.of(this,arguments),f=0,d=n(),p=".drag"+(null==d?"":"-"+d),g=e.select(a(u)).on(o+p,function(){var t,e,r=i(c,d);if(!r)return;t=r[0]-m[0],e=r[1]-m[1],f|=t|e,m=r,h({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:e})}).on(s+p,function(){if(!i(c,d))return;g.on(o+p,null).on(s+p,null),v(f),h({type:"dragend"})}),v=bt(u),m=i(c,d);l=r?[(l=r.apply(this,arguments)).x-m[0],l.y-m[1]]:[0,0],h({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(r=t,a):r},e.rebind(a,t,"on")},e.touches=function(t,e){return arguments.length<2&&(e=j().touches),e?n(e).map(function(e){var r=_t(t,e);return r.identifier=e.identifier,r}):[]};var Mt=1e-6,At=Mt*Mt,Tt=Math.PI,kt=2*Tt,Et=kt-Mt,Lt=Tt/2,Ct=Tt/180,St=180/Tt;function Pt(t){return t>0?1:t<0?-1:0}function Rt(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0])}function Ot(t){return t>1?0:t<-1?Tt:Math.acos(t)}function It(t){return t>1?Lt:t<-1?-Lt:Math.asin(t)}function Nt(t){return((t=Math.exp(t))+1/t)/2}function Dt(t){return(t=Math.sin(t/2))*t}var zt=Math.SQRT2;e.interpolateZoom=function(t,e){var r,n,i=t[0],a=t[1],o=t[2],s=e[0],l=e[1],u=e[2],c=s-i,h=l-a,f=c*c+h*h;if(f<At)n=Math.log(u/o)/zt,r=function(t){return[i+t*c,a+t*h,o*Math.exp(zt*t*n)]};else{var d=Math.sqrt(f),p=(u*u-o*o+4*f)/(2*o*2*d),g=(u*u-o*o-4*f)/(2*u*2*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);n=(m-v)/zt,r=function(t){var e,r=t*n,s=Nt(v),l=o/(2*d)*(s*(e=zt*r+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[i+l*c,a+l*h,o*s/Nt(zt*r+v)]}}return r.duration=1e3*n,r},e.behavior.zoom=function(){var t,r,n,a,s,l,u,c,h,f={x:0,y:0,k:1},d=[960,500],p=Bt,g=250,v=0,m="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",_=B(w,"zoomstart","zoom","zoomend");function w(t){t.on(m,P).on(jt+".zoom",O).on("dblclick.zoom",I).on(x,R)}function M(t){return[(t[0]-f.x)/f.k,(t[1]-f.y)/f.k]}function A(t){f.k=Math.max(p[0],Math.min(p[1],t))}function T(t,e){e=function(t){return[t[0]*f.k+f.x,t[1]*f.k+f.y]}(e),f.x+=t[0]-e[0],f.y+=t[1]-e[1]}function k(t,n,i,a){t.__chart__={x:f.x,y:f.y,k:f.k},A(Math.pow(2,a)),T(r=n,i),t=e.select(t),g>0&&(t=t.transition().duration(g)),t.call(w.event)}function E(){u&&u.domain(l.range().map(function(t){return(t-f.x)/f.k}).map(l.invert)),h&&h.domain(c.range().map(function(t){return(t-f.y)/f.k}).map(c.invert))}function L(t){v++||t({type:"zoomstart"})}function C(t){E(),t({type:"zoom",scale:f.k,translate:[f.x,f.y]})}function S(t){--v||(t({type:"zoomend"}),r=null)}function P(){var t=this,r=_.of(t,arguments),n=0,i=e.select(o(t)).on(y,function(){n=1,T(e.mouse(t),a),C(r)}).on(b,function(){i.on(y,null).on(b,null),s(n),S(r)}),a=M(e.mouse(t)),s=bt(t);ss.call(t),L(r)}function R(){var t,r=this,n=_.of(r,arguments),i={},a=0,o=".zoom-"+e.event.changedTouches[0].identifier,l="touchmove"+o,u="touchend"+o,c=[],h=e.select(r),d=bt(r);function p(){var n=e.touches(r);return t=f.k,n.forEach(function(t){t.identifier in i&&(i[t.identifier]=M(t))}),n}function g(){var t=e.event.target;e.select(t).on(l,v).on(u,y),c.push(t);for(var n=e.event.changedTouches,o=0,h=n.length;o<h;++o)i[n[o].identifier]=null;var d=p(),g=Date.now();if(1===d.length){if(g-s<500){var m=d[0];k(r,m,i[m.identifier],Math.floor(Math.log(f.k)/Math.LN2)+1),F()}s=g}else if(d.length>1){m=d[0];var b=d[1],x=m[0]-b[0],_=m[1]-b[1];a=x*x+_*_}}function v(){var o,l,u,c,h=e.touches(r);ss.call(r);for(var f=0,d=h.length;f<d;++f,c=null)if(u=h[f],c=i[u.identifier]){if(l)break;o=u,l=c}if(c){var p=(p=u[0]-o[0])*p+(p=u[1]-o[1])*p,g=a&&Math.sqrt(p/a);o=[(o[0]+u[0])/2,(o[1]+u[1])/2],l=[(l[0]+c[0])/2,(l[1]+c[1])/2],A(g*t)}s=null,T(o,l),C(n)}function y(){if(e.event.touches.length){for(var t=e.event.changedTouches,r=0,a=t.length;r<a;++r)delete i[t[r].identifier];for(var s in i)return void p()}e.selectAll(c).on(o,null),h.on(m,P).on(x,R),d(),S(n)}g(),L(n),h.on(m,null).on(x,g)}function O(){var i=_.of(this,arguments);a?clearTimeout(a):(ss.call(this),t=M(r=n||e.mouse(this)),L(i)),a=setTimeout(function(){a=null,S(i)},50),F(),A(Math.pow(2,.002*Ft())*f.k),T(r,t),C(i)}function I(){var t=e.mouse(this),r=Math.log(f.k)/Math.LN2;k(this,t,M(t),e.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return jt||(jt="onwheel"in i?(Ft=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Ft=function(){return e.event.wheelDelta},"mousewheel"):(Ft=function(){return-e.event.detail},"MozMousePixelScroll")),w.event=function(t){t.each(function(){var t=_.of(this,arguments),n=f;cs?e.select(this).transition().each("start.zoom",function(){f=this.__chart__||{x:0,y:0,k:1},L(t)}).tween("zoom:zoom",function(){var i=d[0],a=d[1],o=r?r[0]:i/2,s=r?r[1]:a/2,l=e.interpolateZoom([(o-f.x)/f.k,(s-f.y)/f.k,i/f.k],[(o-n.x)/n.k,(s-n.y)/n.k,i/n.k]);return function(e){var r=l(e),n=i/r[2];this.__chart__=f={x:o-r[0]*n,y:s-r[1]*n,k:n},C(t)}}).each("interrupt.zoom",function(){S(t)}).each("end.zoom",function(){S(t)}):(this.__chart__=f,L(t),C(t),S(t))})},w.translate=function(t){return arguments.length?(f={x:+t[0],y:+t[1],k:f.k},E(),w):[f.x,f.y]},w.scale=function(t){return arguments.length?(f={x:f.x,y:f.y,k:null},A(+t),E(),w):f.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?Bt:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],w):n},w.size=function(t){return arguments.length?(d=t&&[+t[0],+t[1]],w):d},w.duration=function(t){return arguments.length?(g=+t,w):g},w.x=function(t){return arguments.length?(u=t,l=t.copy(),f={x:0,y:0,k:1},w):u},w.y=function(t){return arguments.length?(h=t,c=t.copy(),f={x:0,y:0,k:1},w):h},e.rebind(w,_,"on")};var Ft,jt,Bt=[0,1/0];function Ut(){}function Vt(t,e,r){return this instanceof Vt?(this.h=+t,this.s=+e,void(this.l=+r)):arguments.length<2?t instanceof Vt?new Vt(t.h,t.s,t.l):ce(""+t,he,Vt):new Vt(t,e,r)}e.color=Ut,Ut.prototype.toString=function(){return this.rgb()+""},e.hsl=Vt;var Ht=Vt.prototype=new Ut;function qt(t,e,r){var n,i;function a(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?n+(i-n)*t/60:t<180?i:t<240?n+(i-n)*(240-t)/60:n}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=2*(r=r<0?0:r>1?1:r)-(i=r<=.5?r*(1+e):r+e-r*e),new ae(a(t+120),a(t),a(t-120))}function Gt(t,r,n){return this instanceof Gt?(this.h=+t,this.c=+r,void(this.l=+n)):arguments.length<2?t instanceof Gt?new Gt(t.h,t.c,t.l):ee(t instanceof Yt?t.l:(t=fe((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Gt(t,r,n)}Ht.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Vt(this.h,this.s,this.l/t)},Ht.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Vt(this.h,this.s,t*this.l)},Ht.rgb=function(){return qt(this.h,this.s,this.l)},e.hcl=Gt;var Xt=Gt.prototype=new Ut;function Wt(t,e,r){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Yt(r,Math.cos(t*=Ct)*e,Math.sin(t)*e)}function Yt(t,e,r){return this instanceof Yt?(this.l=+t,this.a=+e,void(this.b=+r)):arguments.length<2?t instanceof Yt?new Yt(t.l,t.a,t.b):t instanceof Gt?Wt(t.h,t.c,t.l):fe((t=ae(t)).r,t.g,t.b):new Yt(t,e,r)}Xt.brighter=function(t){return new Gt(this.h,this.c,Math.min(100,this.l+Zt*(arguments.length?t:1)))},Xt.darker=function(t){return new Gt(this.h,this.c,Math.max(0,this.l-Zt*(arguments.length?t:1)))},Xt.rgb=function(){return Wt(this.h,this.c,this.l).rgb()},e.lab=Yt;var Zt=18,Qt=.95047,Kt=1,$t=1.08883,Jt=Yt.prototype=new Ut;function te(t,e,r){var n=(t+16)/116,i=n+e/500,a=n-r/200;return new ae(ie(3.2404542*(i=re(i)*Qt)-1.5371385*(n=re(n)*Kt)-.4985314*(a=re(a)*$t)),ie(-.969266*i+1.8760108*n+.041556*a),ie(.0556434*i-.2040259*n+1.0572252*a))}function ee(t,e,r){return t>0?new Gt(Math.atan2(r,e)*St,Math.sqrt(e*e+r*r),t):new Gt(NaN,NaN,t)}function re(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ne(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ie(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ae(t,e,r){return this instanceof ae?(this.r=~~t,this.g=~~e,void(this.b=~~r)):arguments.length<2?t instanceof ae?new ae(t.r,t.g,t.b):ce(""+t,ae,qt):new ae(t,e,r)}function oe(t){return new ae(t>>16,t>>8&255,255&t)}function se(t){return oe(t)+""}Jt.brighter=function(t){return new Yt(Math.min(100,this.l+Zt*(arguments.length?t:1)),this.a,this.b)},Jt.darker=function(t){return new Yt(Math.max(0,this.l-Zt*(arguments.length?t:1)),this.a,this.b)},Jt.rgb=function(){return te(this.l,this.a,this.b)},e.rgb=ae;var le=ae.prototype=new Ut;function ue(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,r){var n,i,a,o=0,s=0,l=0;if(n=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=n[2].split(","),n[1]){case"hsl":return r(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(pe(i[0]),pe(i[1]),pe(i[2]))}return(a=ge.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function he(t,e,r){var n,i,a=Math.min(t/=255,e/=255,r/=255),o=Math.max(t,e,r),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),n=t==o?(e-r)/s+(e<r?6:0):e==o?(r-t)/s+2:(t-e)/s+4,n*=60):(n=NaN,i=l>0&&l<1?0:n),new Vt(n,i,l)}function fe(t,e,r){var n=ne((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(r=de(r)))/Qt),i=ne((.2126729*t+.7151522*e+.072175*r)/Kt);return Yt(116*i-16,500*(n-i),200*(i-ne((.0193339*t+.119192*e+.9503041*r)/$t)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}le.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,r=this.g,n=this.b,i=30;return e||r||n?(e&&e<i&&(e=i),r&&r<i&&(r=i),n&&n<i&&(n=i),new ae(Math.min(255,e/t),Math.min(255,r/t),Math.min(255,n/t))):new ae(i,i,i)},le.darker=function(t){return new ae((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},le.hsl=function(){return he(this.r,this.g,this.b)},le.toString=function(){return"#"+ue(this.r)+ue(this.g)+ue(this.b)};var ge=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ve(t){return"function"==typeof t?t:function(){return t}}function me(t){return function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),ye(e,r,t,n)}}function ye(t,r,i,a){var o={},s=e.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;function h(){var t,e=u.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||e>=200&&e<300||304===e){try{t=i.call(o,u)}catch(t){return void s.error.call(o,t)}s.load.call(o,t)}else s.error.call(o,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=h:u.onreadystatechange=function(){u.readyState>3&&h()},u.onprogress=function(t){var r=e.event;e.event=t;try{s.progress.call(o,u)}finally{e.event=r}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",o):r},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return i=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(n(arguments)))}}),o.send=function(e,n,i){if(2===arguments.length&&"function"==typeof n&&(i=n,n=null),u.open(e,t,!0),null==r||"accept"in l||(l.accept=r+",*/*"),u.setRequestHeader)for(var a in l)u.setRequestHeader(a,l[a]);return null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=c&&(u.responseType=c),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(o,u),u.send(null==n?null:n),o},o.abort=function(){return u.abort(),o},e.rebind(o,s,"on"),null==a?o:o.get(function(t){return 1===t.length?function(e,r){t(null==e?r:null)}:t}(a))}ge.forEach(function(t,e){ge.set(t,oe(e))}),e.functor=ve,e.xhr=me(P),e.dsv=function(t,e){var r=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function i(t,r,n){arguments.length<3&&(n=r,r=null);var i=ye(t,e,null==r?a:o(r),n);return i.row=function(t){return arguments.length?i.response(null==(r=t)?a:o(t)):r},i}function a(t){return i.parse(t.responseText)}function o(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return r.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var r;return i.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,r){return e(i(t),r)}:i})},i.parseRows=function(t,e){var r,i,a={},o={},s=[],l=t.length,u=0,c=0;function h(){if(u>=l)return o;if(i)return i=!1,a;var e=u;if(34===t.charCodeAt(e)){for(var r=e;r++<l;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return u=r+2,13===(s=t.charCodeAt(r+1))?(i=!0,10===t.charCodeAt(r+2)&&++u):10===s&&(i=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;u<l;){var s,c=1;if(10===(s=t.charCodeAt(u++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(u)&&(++u,++c);else if(s!==n)continue;return t.slice(e,u-c)}return t.slice(e)}for(;(r=h())!==o;){for(var f=[];r!==a&&r!==o;)f.push(r),r=h();e&&null==(f=e(f,c++))||s.push(f)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var r=new S,n=[];return e.forEach(function(t){for(var e in t)r.has(e)||n.push(r.add(e))}),[n.map(l).join(t)].concat(e.map(function(e){return n.map(function(t){return l(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("\t","text/tab-separated-values");var be,xe,_e,we,Me=this[O(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Ae(t,e,r){var n=arguments.length;n<2&&(e=0),n<3&&(r=Date.now());var i={c:t,t:r+e,n:null};return xe?xe.n=i:be=i,xe=i,_e||(we=clearTimeout(we),_e=1,Me(Te)),i}function Te(){var t=ke(),e=Ee()-t;e>24?(isFinite(e)&&(clearTimeout(we),we=setTimeout(Te,e)),_e=0):(_e=1,Me(Te))}function ke(){for(var t=Date.now(),e=be;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ee(){for(var t,e=be,r=1/0;e;)e.c?(e.t<r&&(r=e.t),e=(t=e).n):e=t?t.n=e.n:be=e.n;return xe=t,r}function Le(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}e.timer=function(){Ae.apply(this,arguments)},e.timer.flush=function(){ke(),Ee()},e.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ce=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var r=Math.pow(10,3*y(8-e));return{scale:e>8?function(t){return t/r}:function(t){return t*r},symbol:t}});e.formatPrefix=function(t,r){var n=0;return(t=+t)&&(t<0&&(t*=-1),r&&(t=e.round(t,Le(t,r))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ce[8+n/3]};var Se=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Pe=e.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,r){return(t=e.round(t,Le(t,r))).toFixed(Math.max(0,Math.min(20,Le(t*(1+1e-15),r))))}});function Re(t){return t+""}var Oe=e.time={},Ie=Date;function Ne(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ne.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){De.setUTCDate.apply(this._,arguments)},setDay:function(){De.setUTCDay.apply(this._,arguments)},setFullYear:function(){De.setUTCFullYear.apply(this._,arguments)},setHours:function(){De.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){De.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){De.setUTCMinutes.apply(this._,arguments)},setMonth:function(){De.setUTCMonth.apply(this._,arguments)},setSeconds:function(){De.setUTCSeconds.apply(this._,arguments)},setTime:function(){De.setTime.apply(this._,arguments)}};var De=Date.prototype;function ze(t,e,r){function n(e){var r=t(e),n=a(r,1);return e-r<n-e?r:n}function i(r){return e(r=t(new Ie(r-1)),1),r}function a(t,r){return e(t=new Ie(+t),r),t}function o(t,n,a){var o=i(t),s=[];if(a>1)for(;o<n;)r(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<n;)s.push(new Date(+o)),e(o,1);return s}t.floor=t,t.round=n,t.ceil=i,t.offset=a,t.range=o;var s=t.utc=Fe(t);return s.floor=s,s.round=Fe(n),s.ceil=Fe(i),s.offset=Fe(a),s.range=function(t,e,r){try{Ie=Ne;var n=new Ne;return n._=t,o(n,e,r)}finally{Ie=Date}},t}function Fe(t){return function(e,r){try{Ie=Ne;var n=new Ne;return n._=e,t(n,r)._}finally{Ie=Date}}}Oe.year=ze(function(t){return(t=Oe.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Oe.years=Oe.year.range,Oe.years.utc=Oe.year.utc.range,Oe.day=ze(function(t){var e=new Ie(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Oe.days=Oe.day.range,Oe.days.utc=Oe.day.utc.range,Oe.dayOfYear=function(t){var e=Oe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var r=Oe[t]=ze(function(t){return(t=Oe.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var r=Oe.year(t).getDay();return Math.floor((Oe.dayOfYear(t)+(r+e)%7)/7)-(r!==e)});Oe[t+"s"]=r.range,Oe[t+"s"].utc=r.utc.range,Oe[t+"OfYear"]=function(t){var r=Oe.year(t).getDay();return Math.floor((Oe.dayOfYear(t)+(r+e)%7)/7)}}),Oe.week=Oe.sunday,Oe.weeks=Oe.sunday.range,Oe.weeks.utc=Oe.sunday.utc.range,Oe.weekOfYear=Oe.sundayOfYear;var je={"-":"",_:" ",0:"0"},Be=/^\s*\d+/,Ue=/^%/;function Ve(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function He(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function qe(t){for(var e=new x,r=-1,n=t.length;++r<n;)e.set(t[r].toLowerCase(),r);return e}function Ge(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Xe(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r));return n?(t.U=+n[0],r+n[0].length):-1}function We(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r));return n?(t.W=+n[0],r+n[0].length):-1}function Ye(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Ze(t,e,r){Be.lastIndex=0;var n,i=Be.exec(e.slice(r,r+2));return i?(t.y=(n=+i[0])+(n>68?1900:2e3),r+i[0].length):-1}function Qe(t,e,r){return/^[+-]\d{4}$/.test(e=e.slice(r,r+5))?(t.Z=-e,r+5):-1}function Ke(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function $e(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Je(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+3));return n?(t.j=+n[0],r+n[0].length):-1}function tr(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function er(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function rr(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function nr(t,e,r){Be.lastIndex=0;var n=Be.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function ir(t){var e=t.getTimezoneOffset(),r=e>0?"-":"+",n=y(e)/60|0,i=y(e)%60;return r+Ve(n,"0",2)+Ve(i,"0",2)}function ar(t,e,r){Ue.lastIndex=0;var n=Ue.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function or(t){for(var e=t.length,r=-1;++r<e;)t[r][0]=this(t[r][0]);return function(e){for(var r=0,n=t[r];!n[1](e);)n=t[++r];return n[0](e)}}e.locale=function(t){return{numberFormat:function(t){var r=t.decimal,n=t.thousands,i=t.grouping,a=t.currency,o=i&&n?function(t,e){for(var r=t.length,a=[],o=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),a.push(t.substring(r-=s,r+s)),!((l+=s+1)>e));)s=i[o=(o+1)%i.length];return a.reverse().join(n)}:P;return function(t){var n=Se.exec(t),i=n[1]||" ",s=n[2]||">",l=n[3]||"-",u=n[4]||"",c=n[5],h=+n[6],f=n[7],d=n[8],p=n[9],g=1,v="",m="",y=!1,b=!0;switch(d&&(d=+d.substring(1)),(c||"0"===i&&"="===s)&&(c=i="0",s="="),p){case"n":f=!0,p="g";break;case"%":g=100,m="%",p="f";break;case"p":g=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(v="0"+p.toLowerCase());case"c":b=!1;case"d":y=!0,d=0;break;case"s":g=-1,p="r"}"$"===u&&(v=a[0],m=a[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d)))),p=Pe.get(p)||Re;var x=c&&f;return function(t){var n=m;if(y&&t%1)return"";var a=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(g<0){var u=e.formatPrefix(t,d);t=u.scale(t),n=u.symbol+m}else t*=g;var _,w,M=(t=p(t,d)).lastIndexOf(".");if(M<0){var A=b?t.lastIndexOf("e"):-1;A<0?(_=t,w=""):(_=t.substring(0,A),w=t.substring(A))}else _=t.substring(0,M),w=r+t.substring(M+1);!c&&f&&(_=o(_,1/0));var T=v.length+_.length+w.length+(x?0:a.length),k=T<h?new Array(T=h-T+1).join(i):"";return x&&(_=o(k+_,k.length?h-w.length:1/0)),a+=v,t=_+w,("<"===s?a+t+k:">"===s?k+a+t:"^"===s?k.substring(0,T>>=1)+a+t+k.substring(T):a+(x?t:k+t))+n}}}(t),timeFormat:function(t){var r=t.dateTime,n=t.date,i=t.time,a=t.periods,o=t.days,s=t.shortDays,l=t.months,u=t.shortMonths;function c(t){var e=t.length;function r(r){for(var n,i,a,o=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=je[n=t.charAt(++s)])&&(n=t.charAt(++s)),(a=_[n])&&(n=a(r,null==i?"e"===n?" ":"0":i)),o.push(n),l=s+1);return o.push(t.slice(l,s)),o.join("")}return r.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(h(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var n=null!=r.Z&&Ie!==Ne,i=new(n?Ne:Ie);return"j"in r?i.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),i.setFullYear(r.y,0,1),i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(i.getDay()+5)%7:r.w+7*r.U-(i.getDay()+6)%7)):i.setFullYear(r.y,r.m,r.d),i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),n?i._:i},r.toString=function(){return t},r}function h(t,e,r,n){for(var i,a,o,s=0,l=e.length,u=r.length;s<l;){if(n>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=w[o in je?e.charAt(s++):o])||(n=a(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}c.utc=function(t){var e=c(t);function r(t){try{var r=new(Ie=Ne);return r._=t,e(r)}finally{Ie=Date}}return r.parse=function(t){try{Ie=Ne;var r=e.parse(t);return r&&r._}finally{Ie=Date}},r.toString=e.toString,r},c.multi=c.utc.multi=or;var f=e.map(),d=He(o),p=qe(o),g=He(s),v=qe(s),m=He(l),y=qe(l),b=He(u),x=qe(u);a.forEach(function(t,e){f.set(t.toLowerCase(),e)});var _={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:c(r),d:function(t,e){return Ve(t.getDate(),e,2)},e:function(t,e){return Ve(t.getDate(),e,2)},H:function(t,e){return Ve(t.getHours(),e,2)},I:function(t,e){return Ve(t.getHours()%12||12,e,2)},j:function(t,e){return Ve(1+Oe.dayOfYear(t),e,3)},L:function(t,e){return Ve(t.getMilliseconds(),e,3)},m:function(t,e){return Ve(t.getMonth()+1,e,2)},M:function(t,e){return Ve(t.getMinutes(),e,2)},p:function(t){return a[+(t.getHours()>=12)]},S:function(t,e){return Ve(t.getSeconds(),e,2)},U:function(t,e){return Ve(Oe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ve(Oe.mondayOfYear(t),e,2)},x:c(n),X:c(i),y:function(t,e){return Ve(t.getFullYear()%100,e,2)},Y:function(t,e){return Ve(t.getFullYear()%1e4,e,4)},Z:ir,"%":function(){return"%"}},w={a:function(t,e,r){g.lastIndex=0;var n=g.exec(e.slice(r));return n?(t.w=v.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(t,e,r){d.lastIndex=0;var n=d.exec(e.slice(r));return n?(t.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(t,e,r){b.lastIndex=0;var n=b.exec(e.slice(r));return n?(t.m=x.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(t,e,r){m.lastIndex=0;var n=m.exec(e.slice(r));return n?(t.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(t,e,r){return h(t,_.c.toString(),e,r)},d:$e,e:$e,H:tr,I:tr,j:Je,L:nr,m:Ke,M:er,p:function(t,e,r){var n=f.get(e.slice(r,r+=2).toLowerCase());return null==n?-1:(t.p=n,r)},S:rr,U:Xe,w:Ge,W:We,x:function(t,e,r){return h(t,_.x.toString(),e,r)},X:function(t,e,r){return h(t,_.X.toString(),e,r)},y:Ze,Y:Ye,Z:Qe,"%":ar};return c}(t)}};var sr=e.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lr(){}e.format=sr.numberFormat,e.geo={},lr.prototype={s:0,t:0,add:function(t){cr(t,this.t,ur),cr(ur.s,this.s,this),this.s?this.t+=ur.t:this.s=ur.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ur=new lr;function cr(t,e,r){var n=r.s=t+e,i=n-t,a=n-i;r.t=t-a+(e-i)}function hr(t,e){t&&dr.hasOwnProperty(t.type)&&dr[t.type](t,e)}e.geo.stream=function(t,e){t&&fr.hasOwnProperty(t.type)?fr[t.type](t,e):hr(t,e)};var fr={Feature:function(t,e){hr(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)hr(r[n].geometry,e)}},dr={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){pr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)pr(r[n],e,0)},Polygon:function(t,e){gr(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)gr(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)hr(r[n],e)}};function pr(t,e,r){var n,i=-1,a=t.length-r;for(e.lineStart();++i<a;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function gr(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)pr(t[r],e,1);e.polygonEnd()}e.geo.area=function(t){return vr=0,e.geo.stream(t,Cr),vr};var vr,mr,yr,br,xr,_r,wr,Mr,Ar,Tr,kr,Er,Lr=new lr,Cr={sphere:function(){vr+=4*Tt},point:N,lineStart:N,lineEnd:N,polygonStart:function(){Lr.reset(),Cr.lineStart=Sr},polygonEnd:function(){var t=2*Lr;vr+=t<0?4*Tt+t:t,Cr.lineStart=Cr.lineEnd=Cr.point=N}};function Sr(){var t,e,r,n,i;function a(t,e){e=e*Ct/2+Tt/4;var a=(t*=Ct)-r,o=a>=0?1:-1,s=o*a,l=Math.cos(e),u=Math.sin(e),c=i*u,h=n*l+c*Math.cos(s),f=c*o*Math.sin(s);Lr.add(Math.atan2(f,h)),r=t,n=l,i=u}Cr.point=function(o,s){Cr.point=a,r=(t=o)*Ct,n=Math.cos(s=(e=s)*Ct/2+Tt/4),i=Math.sin(s)},Cr.lineEnd=function(){a(t,e)}}function Pr(t){var e=t[0],r=t[1],n=Math.cos(r);return[n*Math.cos(e),n*Math.sin(e),Math.sin(r)]}function Rr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Or(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ir(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Nr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Dr(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zr(t){return[Math.atan2(t[1],t[0]),It(t[2])]}function Fr(t,e){return y(t[0]-e[0])<Mt&&y(t[1]-e[1])<Mt}e.geo.bounds=function(){var t,r,n,i,a,o,s,l,u,c,h,f={point:d,lineStart:g,lineEnd:v,polygonStart:function(){f.point=m,f.lineStart=b,f.lineEnd=x,u=0,Cr.polygonStart()},polygonEnd:function(){Cr.polygonEnd(),f.point=d,f.lineStart=g,f.lineEnd=v,Lr<0?(t=-(n=180),r=-(i=90)):u>Mt?i=90:u<-Mt&&(r=-90),h[0]=t,h[1]=n}};function d(e,a){c.push(h=[t=e,n=e]),a<r&&(r=a),a>i&&(i=a)}function p(e,o){var s=Pr([e*Ct,o*Ct]);if(l){var u=Or(l,s),c=Or([u[1],-u[0],0],u);Dr(c),c=zr(c);var h=e-a,f=h>0?1:-1,p=c[0]*St*f,g=y(h)>180;if(g^(f*a<p&&p<f*e))(v=c[1]*St)>i&&(i=v);else if(g^(f*a<(p=(p+360)%360-180)&&p<f*e)){var v;(v=-c[1]*St)<r&&(r=v)}else o<r&&(r=o),o>i&&(i=o);g?e<a?_(t,e)>_(t,n)&&(n=e):_(e,n)>_(t,n)&&(t=e):n>=t?(e<t&&(t=e),e>n&&(n=e)):e>a?_(t,e)>_(t,n)&&(n=e):_(e,n)>_(t,n)&&(t=e)}else d(e,o);l=s,a=e}function g(){f.point=p}function v(){h[0]=t,h[1]=n,f.point=d,l=null}function m(t,e){if(l){var r=t-a;u+=y(r)>180?r+(r>0?360:-360):r}else o=t,s=e;Cr.point(t,e),p(t,e)}function b(){Cr.lineStart()}function x(){m(o,s),Cr.lineEnd(),y(u)>Mt&&(t=-(n=180)),h[0]=t,h[1]=n,l=null}function _(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function M(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(a){if(i=n=-(t=r=1/0),c=[],e.geo.stream(a,f),u=c.length){c.sort(w);for(var o=1,s=[g=c[0]];o<u;++o)M((d=c[o])[0],g)||M(d[1],g)?(_(g[0],d[1])>_(g[0],g[1])&&(g[1]=d[1]),_(d[0],g[1])>_(g[0],g[1])&&(g[0]=d[0])):s.push(g=d);for(var l,u,d,p=-1/0,g=(o=0,s[u=s.length-1]);o<=u;g=d,++o)d=s[o],(l=_(g[1],d[0]))>p&&(p=l,t=d[0],n=g[1])}return c=h=null,t===1/0||r===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,r],[n,i]]}}(),e.geo.centroid=function(t){mr=yr=br=xr=_r=wr=Mr=Ar=Tr=kr=Er=0,e.geo.stream(t,jr);var r=Tr,n=kr,i=Er,a=r*r+n*n+i*i;return a<At&&(r=wr,n=Mr,i=Ar,yr<Mt&&(r=br,n=xr,i=_r),(a=r*r+n*n+i*i)<At)?[NaN,NaN]:[Math.atan2(n,r)*St,It(i/Math.sqrt(a))*St]};var jr={sphere:N,point:Br,lineStart:Vr,lineEnd:Hr,polygonStart:function(){jr.lineStart=qr},polygonEnd:function(){jr.lineStart=Vr}};function Br(t,e){t*=Ct;var r=Math.cos(e*=Ct);Ur(r*Math.cos(t),r*Math.sin(t),Math.sin(e))}function Ur(t,e,r){br+=(t-br)/++mr,xr+=(e-xr)/mr,_r+=(r-_r)/mr}function Vr(){var t,e,r;function n(n,i){n*=Ct;var a=Math.cos(i*=Ct),o=a*Math.cos(n),s=a*Math.sin(n),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=e*l-r*s)*u+(u=r*o-t*l)*u+(u=t*s-e*o)*u),t*o+e*s+r*l);yr+=u,wr+=u*(t+(t=o)),Mr+=u*(e+(e=s)),Ar+=u*(r+(r=l)),Ur(t,e,r)}jr.point=function(i,a){i*=Ct;var o=Math.cos(a*=Ct);t=o*Math.cos(i),e=o*Math.sin(i),r=Math.sin(a),jr.point=n,Ur(t,e,r)}}function Hr(){jr.point=Br}function qr(){var t,e,r,n,i;function a(t,e){t*=Ct;var a=Math.cos(e*=Ct),o=a*Math.cos(t),s=a*Math.sin(t),l=Math.sin(e),u=n*l-i*s,c=i*o-r*l,h=r*s-n*o,f=Math.sqrt(u*u+c*c+h*h),d=r*o+n*s+i*l,p=f&&-Ot(d)/f,g=Math.atan2(f,d);Tr+=p*u,kr+=p*c,Er+=p*h,yr+=g,wr+=g*(r+(r=o)),Mr+=g*(n+(n=s)),Ar+=g*(i+(i=l)),Ur(r,n,i)}jr.point=function(o,s){t=o,e=s,jr.point=a,o*=Ct;var l=Math.cos(s*=Ct);r=l*Math.cos(o),n=l*Math.sin(o),i=Math.sin(s),Ur(r,n,i)},jr.lineEnd=function(){a(t,e),jr.lineEnd=Hr,jr.point=Br}}function Gr(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r}function Xr(){return!0}function Wr(t,e,r,n,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r=t[0],n=t[e];if(Fr(r,n)){i.lineStart();for(var s=0;s<e;++s)i.point((r=t[s])[0],r[1]);i.lineEnd()}else{var l=new Zr(r,t,null,!0),u=new Zr(r,null,l,!1);l.o=u,a.push(l),o.push(u),u=new Zr(n,null,l=new Zr(n,t,null,!1),!0),l.o=u,a.push(l),o.push(u)}}}),o.sort(e),Yr(a),Yr(o),a.length){for(var s=0,l=r,u=o.length;s<u;++s)o[s].e=l=!l;for(var c,h,f=a[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,u=c.length;s<u;++s)i.point((h=c[s])[0],h[1]);else n(d.x,d.n.x,1,i);d=d.n}else{if(p)for(s=(c=d.p.z).length-1;s>=0;--s)i.point((h=c[s])[0],h[1]);else n(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}}function Yr(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Zr(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Qr(t,r,n,i){return function(a,o){var s,l=r(o),u=a.invert(i[0],i[1]),c={point:h,lineStart:d,lineEnd:p,polygonStart:function(){c.point=x,c.lineStart=_,c.lineEnd=w,s=[],g=[]},polygonEnd:function(){c.point=h,c.lineStart=d,c.lineEnd=p,s=e.merge(s);var t=function(t,e){var r=t[0],n=t[1],i=[Math.sin(r),-Math.cos(r),0],a=0,o=0;Lr.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var h=u[0],f=h[0],d=h[1]/2+Tt/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===c&&(v=0);var m=(t=u[v])[0],y=t[1]/2+Tt/4,b=Math.sin(y),x=Math.cos(y),_=m-f,w=_>=0?1:-1,M=w*_,A=M>Tt,T=p*b;if(Lr.add(Math.atan2(T*w*Math.sin(M),g*x+T*Math.cos(M))),a+=A?_+w*kt:_,A^f>=r^m>=r){var k=Or(Pr(h),Pr(t));Dr(k);var E=Or(i,k);Dr(E);var L=(A^_>=0?-1:1)*It(E[2]);(n>L||n===L&&(k[0]||k[1]))&&(o+=A^_>=0?1:-1)}if(!v++)break;f=m,p=b,g=x,h=t}}return(a<-Mt||a<Mt&&Lr<-Mt)^1&o}(u,g);s.length?(b||(o.polygonStart(),b=!0),Wr(s,Jr,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),s=g=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function h(e,r){var n=a(e,r);t(e=n[0],r=n[1])&&o.point(e,r)}function f(t,e){var r=a(t,e);l.point(r[0],r[1])}function d(){c.point=f,l.lineStart()}function p(){c.point=h,l.lineEnd()}var g,v,m=$r(),y=r(m),b=!1;function x(t,e){v.push([t,e]);var r=a(t,e);y.point(r[0],r[1])}function _(){y.lineStart(),v=[]}function w(){x(v[0][0],v[0][1]),y.lineEnd();var t,e=y.clean(),r=m.buffer(),n=r.length;if(v.pop(),g.push(v),v=null,n)if(1&e){var i,a=-1;if((n=(t=r[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<n;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else n>1&&2&e&&r.push(r.pop().concat(r.shift())),s.push(r.filter(Kr))}return c}}function Kr(t){return t.length>1}function $r(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:N,buffer:function(){var r=e;return e=[],t=null,r},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Jr(t,e){return((t=t.x)[0]<0?t[1]-Lt-Mt:Lt-t[1])-((e=e.x)[0]<0?e[1]-Lt-Mt:Lt-e[1])}var tn=Qr(Xr,function(t){var e,r=NaN,n=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Tt:-Tt,l=y(a-r);y(l-Tt)<Mt?(t.point(r,n=(n+o)/2>0?Lt:-Lt),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(a,n),e=0):i!==s&&l>=Tt&&(y(r-i)<Mt&&(r-=i*Mt),y(a-s)<Mt&&(a-=s*Mt),n=function(t,e,r,n){var i,a,o=Math.sin(t-r);return y(o)>Mt?Math.atan((Math.sin(e)*(a=Math.cos(n))*Math.sin(r)-Math.sin(n)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+n)/2}(r,n,a,o),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(s,n),e=0),t.point(r=a,n=o),i=s},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var i;if(null==t)i=r*Lt,n.point(-Tt,i),n.point(0,i),n.point(Tt,i),n.point(Tt,0),n.point(Tt,-i),n.point(0,-i),n.point(-Tt,-i),n.point(-Tt,0),n.point(-Tt,i);else if(y(t[0]-e[0])>Mt){var a=t[0]<e[0]?Tt:-Tt;i=r*a/2,n.point(-a,i),n.point(0,i),n.point(a,i)}else n.point(e[0],e[1])},[-Tt,-Tt/2]);function en(t,e,r,n){return function(i){var a,o=i.a,s=i.b,l=o.x,u=o.y,c=0,h=1,f=s.x-l,d=s.y-u;if(a=t-l,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>c&&(c=a)}if(a=r-l,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<h&&(h=a)}if(a=e-u,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>c&&(c=a)}if(a=n-u,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<h&&(h=a)}return c>0&&(i.a={x:l+c*f,y:u+c*d}),h<1&&(i.b={x:l+h*f,y:u+h*d}),i}}}}}}var rn=1e9;function nn(t,r,n,i){return function(l){var u,c,h,f,d,p,g,v,m,y,b,x=l,_=$r(),w=en(t,r,n,i),M={point:k,lineStart:function(){M.point=E,c&&c.push(h=[]);y=!0,m=!1,g=v=NaN},lineEnd:function(){u&&(E(f,d),p&&m&&_.rejoin(),u.push(_.buffer()));M.point=k,m&&l.lineEnd()},polygonStart:function(){l=_,u=[],c=[],b=!0},polygonEnd:function(){l=x,u=e.merge(u);var r=function(t){for(var e=0,r=c.length,n=t[1],i=0;i<r;++i)for(var a,o=1,s=c[i],l=s.length,u=s[0];o<l;++o)a=s[o],u[1]<=n?a[1]>n&&Rt(u,a,t)>0&&++e:a[1]<=n&&Rt(u,a,t)<0&&--e,u=a;return 0!==e}([t,i]),n=b&&r,a=u.length;(n||a)&&(l.polygonStart(),n&&(l.lineStart(),A(null,null,1,l),l.lineEnd()),a&&Wr(u,o,r,A,l),l.polygonEnd()),u=c=h=null}};function A(e,o,l,u){var c=0,h=0;if(null==e||(c=a(e,l))!==(h=a(o,l))||s(e,o)<0^l>0)do{u.point(0===c||3===c?t:n,c>1?i:r)}while((c=(c+l+4)%4)!==h);else u.point(o[0],o[1])}function T(e,a){return t<=e&&e<=n&&r<=a&&a<=i}function k(t,e){T(t,e)&&l.point(t,e)}function E(t,e){var r=T(t=Math.max(-rn,Math.min(rn,t)),e=Math.max(-rn,Math.min(rn,e)));if(c&&h.push([t,e]),y)f=t,d=e,p=r,y=!1,r&&(l.lineStart(),l.point(t,e));else if(r&&m)l.point(t,e);else{var n={a:{x:g,y:v},b:{x:t,y:e}};w(n)?(m||(l.lineStart(),l.point(n.a.x,n.a.y)),l.point(n.b.x,n.b.y),r||l.lineEnd(),b=!1):r&&(l.lineStart(),l.point(t,e),b=!1)}g=t,v=e,m=r}return M};function a(e,i){return y(e[0]-t)<Mt?i>0?0:3:y(e[0]-n)<Mt?i>0?2:1:y(e[1]-r)<Mt?i>0?1:0:i>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var r=a(t,1),n=a(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}}function an(t){var e=0,r=Tt/3,n=En(t),i=n(e,r);return i.parallels=function(t){return arguments.length?n(e=t[0]*Tt/180,r=t[1]*Tt/180):[e/Tt*180,r/Tt*180]},i}function on(t,e){var r=Math.sin(t),n=(r+Math.sin(e))/2,i=1+r*(2*n-r),a=Math.sqrt(i)/n;function o(t,e){var r=Math.sqrt(i-2*n*Math.sin(e))/n;return[r*Math.sin(t*=n),a-r*Math.cos(t)]}return o.invert=function(t,e){var r=a-e;return[Math.atan2(t,r)/n,It((i-(t*t+r*r)*n*n)/(2*n))]},o}e.geo.clipExtent=function(){var t,e,r,n,i,a,o={stream:function(t){return i&&(i.valid=!1),(i=a(t)).valid=!0,i},extent:function(s){return arguments.length?(a=nn(t=+s[0][0],e=+s[0][1],r=+s[1][0],n=+s[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[r,n]]}};return o.extent([[0,0],[960,500]])},(e.geo.conicEqualArea=function(){return an(on)}).raw=on,e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},e.geo.albersUsa=function(){var t,r,n,i,a=e.geo.albers(),o=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,r){t=[e,r]}};function u(e){var a=e[0],o=e[1];return t=null,r(a,o),t||(n(a,o),t)||i(a,o),t}return u.invert=function(t){var e=a.scale(),r=a.translate(),n=(t[0]-r[0])/e,i=(t[1]-r[1])/e;return(i>=.12&&i<.234&&n>=-.425&&n<-.214?o:i>=.166&&i<.234&&n>=-.214&&n<-.115?s:a).invert(t)},u.stream=function(t){var e=a.stream(t),r=o.stream(t),n=s.stream(t);return{point:function(t,i){e.point(t,i),r.point(t,i),n.point(t,i)},sphere:function(){e.sphere(),r.sphere(),n.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),n.polygonEnd()}}},u.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),u):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),c=+t[0],h=+t[1];return r=a.translate(t).clipExtent([[c-.455*e,h-.238*e],[c+.455*e,h+.238*e]]).stream(l).point,n=o.translate([c-.307*e,h+.201*e]).clipExtent([[c-.425*e+Mt,h+.12*e+Mt],[c-.214*e-Mt,h+.234*e-Mt]]).stream(l).point,i=s.translate([c-.205*e,h+.212*e]).clipExtent([[c-.214*e+Mt,h+.166*e+Mt],[c-.115*e-Mt,h+.234*e-Mt]]).stream(l).point,u},u.scale(1070)};var sn,ln,un,cn,hn,fn,dn={point:N,lineStart:N,lineEnd:N,polygonStart:function(){ln=0,dn.lineStart=pn},polygonEnd:function(){dn.lineStart=dn.lineEnd=dn.point=N,sn+=y(ln/2)}};function pn(){var t,e,r,n;function i(t,e){ln+=n*t-r*e,r=t,n=e}dn.point=function(a,o){dn.point=i,t=r=a,e=n=o},dn.lineEnd=function(){i(t,e)}}var gn={point:function(t,e){t<un&&(un=t);t>hn&&(hn=t);e<cn&&(cn=e);e>fn&&(fn=e)},lineStart:N,lineEnd:N,polygonStart:N,polygonEnd:N};function vn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var mn,yn={point:bn,lineStart:xn,lineEnd:_n,polygonStart:function(){yn.lineStart=wn},polygonEnd:function(){yn.point=bn,yn.lineStart=xn,yn.lineEnd=_n}};function bn(t,e){br+=t,xr+=e,++_r}function xn(){var t,e;function r(r,n){var i=r-t,a=n-e,o=Math.sqrt(i*i+a*a);wr+=o*(t+r)/2,Mr+=o*(e+n)/2,Ar+=o,bn(t=r,e=n)}yn.point=function(n,i){yn.point=r,bn(t=n,e=i)}}function _n(){yn.point=bn}function wn(){var t,e,r,n;function i(t,e){var i=t-r,a=e-n,o=Math.sqrt(i*i+a*a);wr+=o*(r+t)/2,Mr+=o*(n+e)/2,Ar+=o,Tr+=(o=n*t-r*e)*(r+t),kr+=o*(n+e),Er+=3*o,bn(r=t,n=e)}yn.point=function(a,o){yn.point=i,bn(t=r=a,e=n=o)},yn.lineEnd=function(){i(t,e)}}function Mn(t){var e=.5,r=Math.cos(30*Ct),n=16;function i(e){return(n?function(e){var r,i,o,s,l,u,c,h,f,d,p,g,v={point:m,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function m(r,n){r=t(r,n),e.point(r[0],r[1])}function y(){h=NaN,v.point=b,e.lineStart()}function b(r,i){var o=Pr([r,i]),s=t(r,i);a(h,f,c,d,p,g,h=s[0],f=s[1],c=r,d=o[0],p=o[1],g=o[2],n,e),e.point(h,f)}function x(){v.point=m,e.lineEnd()}function _(){y(),v.point=w,v.lineEnd=M}function w(t,e){b(r=t,e),i=h,o=f,s=d,l=p,u=g,v.point=b}function M(){a(h,f,c,d,p,g,i,o,r,s,l,u,n,e),v.lineEnd=x,x()}return v}:function(e){return Tn(e,function(r,n){r=t(r,n),e.point(r[0],r[1])})})(e)}function a(n,i,o,s,l,u,c,h,f,d,p,g,v,m){var b=c-n,x=h-i,_=b*b+x*x;if(_>4*e&&v--){var w=s+d,M=l+p,A=u+g,T=Math.sqrt(w*w+M*M+A*A),k=Math.asin(A/=T),E=y(y(A)-1)<Mt||y(o-f)<Mt?(o+f)/2:Math.atan2(M,w),L=t(E,k),C=L[0],S=L[1],P=C-n,R=S-i,O=x*P-b*R;(O*O/_>e||y((b*P+x*R)/_-.5)>.3||s*d+l*p+u*g<r)&&(a(n,i,o,s,l,u,C,S,E,w/=T,M/=T,A,v,m),m.point(C,S),a(C,S,E,w,M,A,c,h,f,d,p,g,v,m))}}return i.precision=function(t){return arguments.length?(n=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function An(t){this.stream=t}function Tn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function kn(t){return En(function(){return t})()}function En(t){var r,n,i,a,o,s,l=Mn(function(t,e){return[(t=r(t,e))[0]*u+a,o-t[1]*u]}),u=150,c=480,h=250,f=0,d=0,p=0,g=0,v=0,m=tn,b=P,x=null,_=null;function w(t){return[(t=i(t[0]*Ct,t[1]*Ct))[0]*u+a,o-t[1]*u]}function M(t){return(t=i.invert((t[0]-a)/u,(o-t[1])/u))&&[t[0]*St,t[1]*St]}function A(){i=Gr(n=Pn(p,g,v),r);var t=r(f,d);return a=c-t[0]*u,o=h+t[1]*u,T()}function T(){return s&&(s.valid=!1,s=null),w}return w.stream=function(t){return s&&(s.valid=!1),(s=Ln(m(n,l(b(t))))).valid=!0,s},w.clipAngle=function(t){return arguments.length?(m=null==t?(x=t,tn):function(t){var e=Math.cos(t),r=e>0,n=y(e)>Mt;return Qr(i,function(t){var e,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d,p=[h,f],g=i(h,f),v=r?g?0:o(h,f):g?o(h+(h<0?Tt:-Tt),f):0;if(!e&&(u=l=g)&&t.lineStart(),g!==l&&(d=a(e,p),(Fr(e,d)||Fr(p,d))&&(p[0]+=Mt,p[1]+=Mt,g=i(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(n&&e&&r^g){var m;v&s||!(m=a(p,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&Fr(e,p)||t.point(p[0],p[1]),e=p,l=g,s=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}},Nn(t,6*Ct),r?[0,-t]:[-Tt,t-Tt]);function i(t,r){return Math.cos(t)*Math.cos(r)>e}function a(t,r,n){var i=[1,0,0],a=Or(Pr(t),Pr(r)),o=Rr(a,a),s=a[0],l=o-s*s;if(!l)return!n&&t;var u=e*o/l,c=-e*s/l,h=Or(i,a),f=Nr(i,u);Ir(f,Nr(a,c));var d=h,p=Rr(f,d),g=Rr(d,d),v=p*p-g*(Rr(f,f)-1);if(!(v<0)){var m=Math.sqrt(v),b=Nr(d,(-p-m)/g);if(Ir(b,f),b=zr(b),!n)return b;var x,_=t[0],w=r[0],M=t[1],A=r[1];w<_&&(x=_,_=w,w=x);var T=w-_,k=y(T-Tt)<Mt;if(!k&&A<M&&(x=M,M=A,A=x),k||T<Mt?k?M+A>0^b[1]<(y(b[0]-_)<Mt?M:A):M<=b[1]&&b[1]<=A:T>Tt^(_<=b[0]&&b[0]<=w)){var E=Nr(d,(-p+m)/g);return Ir(E,f),[b,zr(E)]}}}function o(e,n){var i=r?t:Tt-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}}((x=+t)*Ct),T()):x},w.clipExtent=function(t){return arguments.length?(_=t,b=t?nn(t[0][0],t[0][1],t[1][0],t[1][1]):P,T()):_},w.scale=function(t){return arguments.length?(u=+t,A()):u},w.translate=function(t){return arguments.length?(c=+t[0],h=+t[1],A()):[c,h]},w.center=function(t){return arguments.length?(f=t[0]%360*Ct,d=t[1]%360*Ct,A()):[f*St,d*St]},w.rotate=function(t){return arguments.length?(p=t[0]%360*Ct,g=t[1]%360*Ct,v=t.length>2?t[2]%360*Ct:0,A()):[p*St,g*St,v*St]},e.rebind(w,l,"precision"),function(){return r=t.apply(this,arguments),w.invert=r.invert&&M,A()}}function Ln(t){return Tn(t,function(e,r){t.point(e*Ct,r*Ct)})}function Cn(t,e){return[t,e]}function Sn(t,e){return[t>Tt?t-kt:t<-Tt?t+kt:t,e]}function Pn(t,e,r){return t?e||r?Gr(On(t),In(e,r)):On(t):e||r?In(e,r):Sn}function Rn(t){return function(e,r){return[(e+=t)>Tt?e-kt:e<-Tt?e+kt:e,r]}}function On(t){var e=Rn(t);return e.invert=Rn(-t),e}function In(t,e){var r=Math.cos(t),n=Math.sin(t),i=Math.cos(e),a=Math.sin(e);function o(t,e){var o=Math.cos(e),s=Math.cos(t)*o,l=Math.sin(t)*o,u=Math.sin(e),c=u*r+s*n;return[Math.atan2(l*i-c*a,s*r-u*n),It(c*i+l*a)]}return o.invert=function(t,e){var o=Math.cos(e),s=Math.cos(t)*o,l=Math.sin(t)*o,u=Math.sin(e),c=u*i-l*a;return[Math.atan2(l*i+u*a,s*r+c*n),It(c*r-s*n)]},o}function Nn(t,e){var r=Math.cos(t),n=Math.sin(t);return function(i,a,o,s){var l=o*e;null!=i?(i=Dn(r,i),a=Dn(r,a),(o>0?i<a:i>a)&&(i+=o*kt)):(i=t+o*kt,a=t-.5*l);for(var u,c=i;o>0?c>a:c<a;c-=l)s.point((u=zr([r,-n*Math.cos(c),-n*Math.sin(c)]))[0],u[1])}}function Dn(t,e){var r=Pr(e);r[0]-=t,Dr(r);var n=Ot(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-Mt)%(2*Math.PI)}function zn(t,r,n){var i=e.range(t,r-Mt,n).concat(r);return function(t){return i.map(function(e){return[t,e]})}}function Fn(t,r,n){var i=e.range(t,r-Mt,n).concat(r);return function(t){return i.map(function(e){return[e,t]})}}function jn(t){return t.source}function Bn(t){return t.target}e.geo.path=function(){var t,r,n,i,a,o=4.5;function s(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=n(i)),e.geo.stream(t,a)),i.result()}function l(){return a=null,s}return s.area=function(t){return sn=0,e.geo.stream(t,n(dn)),sn},s.centroid=function(t){return br=xr=_r=wr=Mr=Ar=Tr=kr=Er=0,e.geo.stream(t,n(yn)),Er?[Tr/Er,kr/Er]:Ar?[wr/Ar,Mr/Ar]:_r?[br/_r,xr/_r]:[NaN,NaN]},s.bounds=function(t){return hn=fn=-(un=cn=1/0),e.geo.stream(t,n(gn)),[[un,cn],[hn,fn]]},s.projection=function(e){return arguments.length?(n=(t=e)?e.stream||(r=e,i=Mn(function(t,e){return r([t*St,e*St])}),function(t){return Ln(i(t))}):P,l()):t;var r,i},s.context=function(t){return arguments.length?(i=null==(r=t)?new function(){var t=vn(4.5),e=[],r={point:n,lineStart:function(){r.point=i},lineEnd:o,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=o,r.point=n},pointRadius:function(e){return t=vn(e),r},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function n(r,n){e.push("M",r,",",n,t)}function i(t,n){e.push("M",t,",",n),r.point=a}function a(t,r){e.push("L",t,",",r)}function o(){r.point=n}function s(){e.push("Z")}return r}:new function(t){var e=4.5,r={point:n,lineStart:function(){r.point=i},lineEnd:o,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=o,r.point=n},pointRadius:function(t){return e=t,r},result:N};function n(r,n){t.moveTo(r+e,n),t.arc(r,n,e,0,kt)}function i(e,n){t.moveTo(e,n),r.point=a}function a(e,r){t.lineTo(e,r)}function o(){r.point=n}function s(){t.closePath()}return r}(t),"function"!=typeof o&&i.pointRadius(o),l()):r},s.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),s):o},s.projection(e.geo.albersUsa()).context(null)},e.geo.transform=function(t){return{stream:function(e){var r=new An(e);for(var n in t)r[n]=t[n];return r}}},An.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},e.geo.projection=kn,e.geo.projectionMutator=En,(e.geo.equirectangular=function(){return kn(Cn)}).raw=Cn.invert=Cn,e.geo.rotation=function(t){function e(e){return(e=t(e[0]*Ct,e[1]*Ct))[0]*=St,e[1]*=St,e}return t=Pn(t[0]%360*Ct,t[1]*Ct,t.length>2?t[2]*Ct:0),e.invert=function(e){return(e=t.invert(e[0]*Ct,e[1]*Ct))[0]*=St,e[1]*=St,e},e},Sn.invert=Cn,e.geo.circle=function(){var t,e,r=[0,0],n=6;function i(){var t="function"==typeof r?r.apply(this,arguments):r,n=Pn(-t[0]*Ct,-t[1]*Ct,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=St,t[1]*=St}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(r=t,i):r},i.angle=function(r){return arguments.length?(e=Nn((t=+r)*Ct,n*Ct),i):t},i.precision=function(r){return arguments.length?(e=Nn(t*Ct,(n=+r)*Ct),i):n},i.angle(90)},e.geo.distance=function(t,e){var r,n=(e[0]-t[0])*Ct,i=t[1]*Ct,a=e[1]*Ct,o=Math.sin(n),s=Math.cos(n),l=Math.sin(i),u=Math.cos(i),c=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((r=h*o)*r+(r=u*c-l*h*s)*r),l*c+u*h*s)},e.geo.graticule=function(){var t,r,n,i,a,o,s,l,u,c,h,f,d=10,p=d,g=90,v=360,m=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return e.range(Math.ceil(i/g)*g,n,g).map(h).concat(e.range(Math.ceil(l/v)*v,s,v).map(f)).concat(e.range(Math.ceil(r/d)*d,t,d).filter(function(t){return y(t%g)>Mt}).map(u)).concat(e.range(Math.ceil(o/p)*p,a,p).filter(function(t){return y(t%v)>Mt}).map(c))}return b.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},b.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(f(s).slice(1),h(n).reverse().slice(1),f(l).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.majorExtent(t).minorExtent(t):b.minorExtent()},b.majorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],l=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),l>s&&(t=l,l=s,s=t),b.precision(m)):[[i,l],[n,s]]},b.minorExtent=function(e){return arguments.length?(r=+e[0][0],t=+e[1][0],o=+e[0][1],a=+e[1][1],r>t&&(e=r,r=t,t=e),o>a&&(e=o,o=a,a=e),b.precision(m)):[[r,o],[t,a]]},b.step=function(t){return arguments.length?b.majorStep(t).minorStep(t):b.minorStep()},b.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],b):[g,v]},b.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],b):[d,p]},b.precision=function(e){return arguments.length?(m=+e,u=zn(o,a,90),c=Fn(r,t,m),h=zn(l,s,90),f=Fn(i,n,m),b):m},b.majorExtent([[-180,-90+Mt],[180,90-Mt]]).minorExtent([[-180,-80-Mt],[180,80+Mt]])},e.geo.greatArc=function(){var t,r,n=jn,i=Bn;function a(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),r||i.apply(this,arguments)]}}return a.distance=function(){return e.geo.distance(t||n.apply(this,arguments),r||i.apply(this,arguments))},a.source=function(e){return arguments.length?(n=e,t="function"==typeof e?null:e,a):n},a.target=function(t){return arguments.length?(i=t,r="function"==typeof t?null:t,a):i},a.precision=function(){return arguments.length?a:0},a},e.geo.interpolate=function(t,e){return r=t[0]*Ct,n=t[1]*Ct,i=e[0]*Ct,a=e[1]*Ct,o=Math.cos(n),s=Math.sin(n),l=Math.cos(a),u=Math.sin(a),c=o*Math.cos(r),h=o*Math.sin(r),f=l*Math.cos(i),d=l*Math.sin(i),p=2*Math.asin(Math.sqrt(Dt(a-n)+o*l*Dt(i-r))),g=1/Math.sin(p),(v=p?function(t){var e=Math.sin(t*=p)*g,r=Math.sin(p-t)*g,n=r*c+e*f,i=r*h+e*d,a=r*s+e*u;return[Math.atan2(i,n)*St,Math.atan2(a,Math.sqrt(n*n+i*i))*St]}:function(){return[r*St,n*St]}).distance=p,v;var r,n,i,a,o,s,l,u,c,h,f,d,p,g,v},e.geo.length=function(t){return mn=0,e.geo.stream(t,Un),mn};var Un={sphere:N,point:N,lineStart:function(){var t,e,r;function n(n,i){var a=Math.sin(i*=Ct),o=Math.cos(i),s=y((n*=Ct)-t),l=Math.cos(s);mn+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-e*o*l)*s),e*a+r*o*l),t=n,e=a,r=o}Un.point=function(i,a){t=i*Ct,e=Math.sin(a*=Ct),r=Math.cos(a),Un.point=n},Un.lineEnd=function(){Un.point=Un.lineEnd=N}},lineEnd:N,polygonStart:N,polygonEnd:N};function Vn(t,e){function r(e,r){var n=Math.cos(e),i=Math.cos(r),a=t(n*i);return[a*i*Math.sin(e),a*Math.sin(r)]}return r.invert=function(t,r){var n=Math.sqrt(t*t+r*r),i=e(n),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,n*o),Math.asin(n&&r*a/n)]},r}var Hn=Vn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(e.geo.azimuthalEqualArea=function(){return kn(Hn)}).raw=Hn;var qn=Vn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},P);function Gn(t,e){var r=Math.cos(t),n=function(t){return Math.tan(Tt/4+t/2)},i=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(n(e)/n(t)),a=r*Math.pow(n(t),i)/i;if(!i)return Yn;function o(t,e){a>0?e<-Lt+Mt&&(e=-Lt+Mt):e>Lt-Mt&&(e=Lt-Mt);var r=a/Math.pow(n(e),i);return[r*Math.sin(i*t),a-r*Math.cos(i*t)]}return o.invert=function(t,e){var r=a-e,n=Pt(i)*Math.sqrt(t*t+r*r);return[Math.atan2(t,r)/i,2*Math.atan(Math.pow(a/n,1/i))-Lt]},o}function Xn(t,e){var r=Math.cos(t),n=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),i=r/n+t;if(y(n)<Mt)return Cn;function a(t,e){var r=i-e;return[r*Math.sin(n*t),i-r*Math.cos(n*t)]}return a.invert=function(t,e){var r=i-e;return[Math.atan2(t,r)/n,i-Pt(n)*Math.sqrt(t*t+r*r)]},a}(e.geo.azimuthalEquidistant=function(){return kn(qn)}).raw=qn,(e.geo.conicConformal=function(){return an(Gn)}).raw=Gn,(e.geo.conicEquidistant=function(){return an(Xn)}).raw=Xn;var Wn=Vn(function(t){return 1/t},Math.atan);function Yn(t,e){return[t,Math.log(Math.tan(Tt/4+e/2))]}function Zn(t){var e,r=kn(t),n=r.scale,i=r.translate,a=r.clipExtent;return r.scale=function(){var t=n.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.translate=function(){var t=i.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.clipExtent=function(t){var o=a.apply(r,arguments);if(o===r){if(e=null==t){var s=Tt*n(),l=i();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},r.clipExtent(null)}(e.geo.gnomonic=function(){return kn(Wn)}).raw=Wn,Yn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Lt]},(e.geo.mercator=function(){return Zn(Yn)}).raw=Yn;var Qn=Vn(function(){return 1},Math.asin);(e.geo.orthographic=function(){return kn(Qn)}).raw=Qn;var Kn=Vn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function $n(t,e){return[Math.log(Math.tan(Tt/4+e/2)),-t]}function Jn(t){return t[0]}function ti(t){return t[1]}function ei(t){for(var e=t.length,r=[0,1],n=2,i=2;i<e;i++){for(;n>1&&Rt(t[r[n-2]],t[r[n-1]],t[i])<=0;)--n;r[n++]=i}return r.slice(0,n)}function ri(t,e){return t[0]-e[0]||t[1]-e[1]}(e.geo.stereographic=function(){return kn(Kn)}).raw=Kn,$n.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Lt]},(e.geo.transverseMercator=function(){var t=Zn($n),e=t.center,r=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?r([t[0],t[1],t.length>2?t[2]+90:90]):[(t=r())[0],t[1],t[2]-90]},r([0,0,90])}).raw=$n,e.geom={},e.geom.hull=function(t){var e=Jn,r=ti;if(arguments.length)return n(t);function n(t){if(t.length<3)return[];var n,i=ve(e),a=ve(r),o=t.length,s=[],l=[];for(n=0;n<o;n++)s.push([+i.call(this,t[n],n),+a.call(this,t[n],n),n]);for(s.sort(ri),n=0;n<o;n++)l.push([s[n][0],-s[n][1]]);var u=ei(s),c=ei(l),h=c[0]===u[0],f=c[c.length-1]===u[u.length-1],d=[];for(n=u.length-1;n>=0;--n)d.push(t[s[u[n]][2]]);for(n=+h;n<c.length-f;++n)d.push(t[s[c[n]][2]]);return d}return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n},e.geom.polygon=function(t){return V(t,ni),t};var ni=e.geom.polygon.prototype=[];function ii(t,e,r){return(r[0]-e[0])*(t[1]-e[1])<(r[1]-e[1])*(t[0]-e[0])}function ai(t,e,r,n){var i=t[0],a=r[0],o=e[0]-i,s=n[0]-a,l=t[1],u=r[1],c=e[1]-l,h=n[1]-u,f=(s*(l-u)-h*(i-a))/(h*o-s*c);return[i+f*o,l+f*c]}function oi(t){var e=t[0],r=t[t.length-1];return!(e[0]-r[0]||e[1]-r[1])}ni.area=function(){for(var t,e=-1,r=this.length,n=this[r-1],i=0;++e<r;)t=n,n=this[e],i+=t[1]*n[0]-t[0]*n[1];return.5*i},ni.centroid=function(t){var e,r,n=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++n<i;)e=s,s=this[n],r=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*r,o+=(e[1]+s[1])*r;return[a*t,o*t]},ni.clip=function(t){for(var e,r,n,i,a,o,s=oi(t),l=-1,u=this.length-oi(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],a=e[(n=e.length-s)-1],r=-1;++r<n;)ii(o=e[r],c,i)?(ii(a,c,i)||t.push(ai(a,o,c,i)),t.push(o)):ii(a,c,i)&&t.push(ai(a,o,c,i)),a=o;s&&t.push(t[0]),c=i}return t};var si,li,ui,ci,hi,fi=[],di=[];function pi(t){var e=fi.pop()||new function(){Si(this),this.edge=this.site=this.circle=null};return e.site=t,e}function gi(t){Mi(t),ui.remove(t),fi.push(t),Si(t)}function vi(t){var e=t.circle,r=e.x,n=e.cy,i={x:r,y:n},a=t.P,o=t.N,s=[t];gi(t);for(var l=a;l.circle&&y(r-l.circle.x)<Mt&&y(n-l.circle.cy)<Mt;)a=l.P,s.unshift(l),gi(l),l=a;s.unshift(l),Mi(l);for(var u=o;u.circle&&y(r-u.circle.x)<Mt&&y(n-u.circle.cy)<Mt;)o=u.N,s.push(u),gi(u),u=o;s.push(u),Mi(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],Ei(u.edge,l.site,u.site,i);l=s[0],(u=s[h-1]).edge=ki(l.site,u.site,null,i),wi(l),wi(u)}function mi(t){for(var e,r,n,i,a=t.x,o=t.y,s=ui._;s;)if((n=yi(s,o)-a)>Mt)s=s.L;else{if(!((i=a-bi(s,o))>Mt)){n>-Mt?(e=s.P,r=s):i>-Mt?(e=s,r=s.N):e=r=s;break}if(!s.R){e=s;break}s=s.R}var l=pi(t);if(ui.insert(e,l),e||r){if(e===r)return Mi(e),r=pi(e.site),ui.insert(l,r),l.edge=r.edge=ki(e.site,l.site),wi(e),void wi(r);if(r){Mi(e),Mi(r);var u=e.site,c=u.x,h=u.y,f=t.x-c,d=t.y-h,p=r.site,g=p.x-c,v=p.y-h,m=2*(f*v-d*g),y=f*f+d*d,b=g*g+v*v,x={x:(v*y-d*b)/m+c,y:(f*b-g*y)/m+h};Ei(r.edge,u,p,x),l.edge=ki(u,t,null,x),r.edge=ki(t,p,null,x),wi(e),wi(r)}else l.edge=ki(e.site,l.site)}}function yi(t,e){var r=t.site,n=r.x,i=r.y,a=i-e;if(!a)return n;var o=t.P;if(!o)return-1/0;var s=(r=o.site).x,l=r.y,u=l-e;if(!u)return s;var c=s-n,h=1/a-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+i-a/2)))/h+n:(n+s)/2}function bi(t,e){var r=t.N;if(r)return yi(r,e);var n=t.site;return n.y===e?n.x:1/0}function xi(t){this.site=t,this.edges=[]}function _i(t,e){return e.angle-t.angle}function wi(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,a=r.site;if(n!==a){var o=i.x,s=i.y,l=n.x-o,u=n.y-s,c=a.x-o,h=2*(l*(v=a.y-s)-u*c);if(!(h>=-At)){var f=l*l+u*u,d=c*c+v*v,p=(v*f-u*d)/h,g=(l*d-c*f)/h,v=g+s,m=di.pop()||new function(){Si(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=t,m.site=i,m.x=p+o,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,b=hi._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}hi.insert(y,m),y||(ci=m)}}}}function Mi(t){var e=t.circle;e&&(e.P||(ci=e.N),hi.remove(e),di.push(e),Si(e),t.circle=null)}function Ai(t,e){var r=t.b;if(r)return!0;var n,i,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,h=t.r,f=c.x,d=c.y,p=h.x,g=h.y,v=(f+p)/2,m=(d+g)/2;if(g===d){if(v<o||v>=s)return;if(f>p){if(a){if(a.y>=u)return}else a={x:v,y:l};r={x:v,y:u}}else{if(a){if(a.y<l)return}else a={x:v,y:u};r={x:v,y:l}}}else if(i=m-(n=(f-p)/(g-d))*v,n<-1||n>1)if(f>p){if(a){if(a.y>=u)return}else a={x:(l-i)/n,y:l};r={x:(u-i)/n,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-i)/n,y:u};r={x:(l-i)/n,y:l}}else if(d<g){if(a){if(a.x>=s)return}else a={x:o,y:n*o+i};r={x:s,y:n*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:n*s+i};r={x:o,y:n*o+i}}return t.a=a,t.b=r,!0}function Ti(t,e){this.l=t,this.r=e,this.a=this.b=null}function ki(t,e,r,n){var i=new Ti(t,e);return si.push(i),r&&Ei(i,t,e,r),n&&Ei(i,e,t,n),li[t.i].edges.push(new Li(i,t,e)),li[e.i].edges.push(new Li(i,e,t)),i}function Ei(t,e,r,n){t.a||t.b?t.l===r?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=r)}function Li(t,e,r){var n=t.a,i=t.b;this.edge=t,this.site=e,this.angle=r?Math.atan2(r.y-e.y,r.x-e.x):t.l===e?Math.atan2(i.x-n.x,n.y-i.y):Math.atan2(n.x-i.x,i.y-n.y)}function Ci(){this._=null}function Si(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Pi(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function Ri(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function Oi(t){for(;t.L;)t=t.L;return t}function Ii(t,e){var r,n,i,a=t.sort(Ni).pop();for(si=[],li=new Array(t.length),ui=new Ci,hi=new Ci;;)if(i=ci,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===r&&a.y===n||(li[a.i]=new xi(a),mi(a),r=a.x,n=a.y),a=t.pop();else{if(!i)break;vi(i.arc)}e&&(function(t){for(var e,r=si,n=en(t[0][0],t[0][1],t[1][0],t[1][1]),i=r.length;i--;)(!Ai(e=r[i],t)||!n(e)||y(e.a.x-e.b.x)<Mt&&y(e.a.y-e.b.y)<Mt)&&(e.a=e.b=null,r.splice(i,1))}(e),function(t){for(var e,r,n,i,a,o,s,l,u,c,h=t[0][0],f=t[1][0],d=t[0][1],p=t[1][1],g=li,v=g.length;v--;)if((a=g[v])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)n=(c=s[o].end()).x,i=c.y,e=(u=s[++o%l].start()).x,r=u.y,(y(n-e)>Mt||y(i-r)>Mt)&&(s.splice(o,0,new Li((m=a.site,b=c,x=y(n-h)<Mt&&p-i>Mt?{x:h,y:y(e-h)<Mt?r:p}:y(i-p)<Mt&&f-n>Mt?{x:y(r-p)<Mt?e:f,y:p}:y(n-f)<Mt&&i-d>Mt?{x:f,y:y(e-f)<Mt?r:d}:y(i-d)<Mt&&n-h>Mt?{x:y(r-d)<Mt?e:h,y:d}:null,_=void 0,_=new Ti(m,null),_.a=b,_.b=x,si.push(_),_),a.site,null)),++l);var m,b,x,_}(e));var o={cells:li,edges:si};return ui=hi=si=li=null,o}function Ni(t,e){return e.y-t.y||e.x-t.x}xi.prototype.prepare=function(){for(var t,e=this.edges,r=e.length;r--;)(t=e[r].edge).b&&t.a||e.splice(r,1);return e.sort(_i),e.length},Li.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ci.prototype={insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=Oi(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(Pi(this,r),r=(t=r).U),r.C=!1,n.C=!0,Ri(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(Ri(this,r),r=(t=r).U),r.C=!1,n.C=!0,Pi(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,a=t.L,o=t.R;if(r=a?o?Oi(o):a:o,i?i.L===t?i.L=r:i.R=r:this._=r,a&&o?(n=r.C,r.C=t.C,r.L=a,a.U=r,r!==o?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=o,o.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Pi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ri(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Pi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ri(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Pi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ri(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},e.geom.voronoi=function(t){var e=Jn,r=ti,n=e,i=r,a=Di;if(t)return o(t);function o(t){var e=new Array(t.length),r=a[0][0],n=a[0][1],i=a[1][0],o=a[1][1];return Ii(s(t),a).cells.forEach(function(a,s){var l=a.edges,u=a.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=i&&u.y>=n&&u.y<=o?[[r,o],[i,o],[i,n],[r,n]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(n(t,e)/Mt)*Mt,y:Math.round(i(t,e)/Mt)*Mt,i:e}})}return o.links=function(t){return Ii(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(t){var e=[];return Ii(s(t)).cells.forEach(function(r,n){for(var i,a,o,s,l=r.site,u=r.edges.sort(_i),c=-1,h=u.length,f=u[h-1].edge,d=f.l===l?f.r:f.l;++c<h;)f,i=d,d=(f=u[c].edge).l===l?f.r:f.l,n<i.i&&n<d.i&&(o=i,s=d,((a=l).x-s.x)*(o.y-a.y)-(a.x-o.x)*(s.y-a.y)<0)&&e.push([t[n],t[i.i],t[d.i]])}),e},o.x=function(t){return arguments.length?(n=ve(e=t),o):e},o.y=function(t){return arguments.length?(i=ve(r=t),o):r},o.clipExtent=function(t){return arguments.length?(a=null==t?Di:t,o):a===Di?null:a},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):a===Di?null:a&&a[1]},o};var Di=[[-1e6,-1e6],[1e6,1e6]];function zi(t){return t.x}function Fi(t){return t.y}function ji(t,r){t=e.rgb(t),r=e.rgb(r);var n=t.r,i=t.g,a=t.b,o=r.r-n,s=r.g-i,l=r.b-a;return function(t){return"#"+ue(Math.round(n+o*t))+ue(Math.round(i+s*t))+ue(Math.round(a+l*t))}}function Bi(t,e){var r,n={},i={};for(r in t)r in e?n[r]=Gi(t[r],e[r]):i[r]=t[r];for(r in e)r in t||(i[r]=e[r]);return function(t){for(r in n)i[r]=n[r](t);return i}}function Ui(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Vi(t,e){var r,n,i,a=Hi.lastIndex=qi.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(r=Hi.exec(t))&&(n=qi.exec(e));)(i=n.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:Ui(r,n)})),a=qi.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var r,n=0;n<e;++n)s[(r=l[n]).i]=r.x(t);return s.join("")})}e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(t,e,r,n,i){var a,o=Jn,s=ti;if(a=arguments.length)return o=zi,s=Fi,3===a&&(i=r,n=e,r=e=0),l(t);function l(t){var l,u,c,h,f,d,p,g,v,m=ve(o),b=ve(s);if(null!=e)d=e,p=r,g=n,v=i;else if(g=v=-(d=p=1/0),u=[],c=[],f=t.length,a)for(h=0;h<f;++h)(l=t[h]).x<d&&(d=l.x),l.y<p&&(p=l.y),l.x>g&&(g=l.x),l.y>v&&(v=l.y),u.push(l.x),c.push(l.y);else for(h=0;h<f;++h){var x=+m(l=t[h],h),_=+b(l,h);x<d&&(d=x),_<p&&(p=_),x>g&&(g=x),_>v&&(v=_),u.push(x),c.push(_)}var w=g-d,M=v-p;function A(t,e,r,n,i,a,o,s){if(!isNaN(r)&&!isNaN(n))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(y(l-r)+y(u-n)<.01)T(t,e,r,n,i,a,o,s);else{var c=t.point;t.x=t.y=t.point=null,T(t,c,l,u,i,a,o,s),T(t,e,r,n,i,a,o,s)}else t.x=r,t.y=n,t.point=e}else T(t,e,r,n,i,a,o,s)}function T(t,e,r,n,i,a,o,s){var l=.5*(i+o),u=.5*(a+s),c=r>=l,h=n>=u,f=h<<1|c;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){A(k,t,+m(t,++h),+b(t,h),d,p,g,v)}}),c?i=l:o=l,h?a=u:s=u,A(t,e,r,n,i,a,o,s)}w>M?v=p+w:g=d+M;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){A(k,t,+m(t,++h),+b(t,h),d,p,g,v)}};if(k.visit=function(t){!function t(e,r,n,i,a,o){if(!e(r,n,i,a,o)){var s=.5*(n+a),l=.5*(i+o),u=r.nodes;u[0]&&t(e,u[0],n,i,s,l),u[1]&&t(e,u[1],s,i,a,l),u[2]&&t(e,u[2],n,l,s,o),u[3]&&t(e,u[3],s,l,a,o)}}(t,k,d,p,g,v)},k.find=function(t){return function(t,e,r,n,i,a,o){var s,l=1/0;return function t(u,c,h,f,d){if(!(c>a||h>o||f<n||d<i)){if(p=u.point){var p,g=e-u.x,v=r-u.y,m=g*g+v*v;if(m<l){var y=Math.sqrt(l=m);n=e-y,i=r-y,a=e+y,o=r+y,s=p}}for(var b=u.nodes,x=.5*(c+f),_=.5*(h+d),w=(r>=_)<<1|e>=x,M=w+4;w<M;++w)if(u=b[3&w])switch(3&w){case 0:t(u,c,h,x,_);break;case 1:t(u,x,h,f,_);break;case 2:t(u,c,_,x,d);break;case 3:t(u,x,_,f,d)}}}(t,n,i,a,o),s}(k,t[0],t[1],d,p,g,v)},h=-1,null==e){for(;++h<f;)A(k,t[h],u[h],c[h],d,p,g,v);--h}else t.forEach(k.add);return u=c=t=l=null,k}return l.x=function(t){return arguments.length?(o=t,l):o},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=r=n=i=null:(e=+t[0][0],r=+t[0][1],n=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,r],[n,i]]},l.size=function(t){return arguments.length?(null==t?e=r=n=i=null:(e=r=0,n=+t[0],i=+t[1]),l):null==e?null:[n-e,i-r]},l},e.interpolateRgb=ji,e.interpolateObject=Bi,e.interpolateNumber=Ui,e.interpolateString=Vi;var Hi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qi=new RegExp(Hi.source,"g");function Gi(t,r){for(var n,i=e.interpolators.length;--i>=0&&!(n=e.interpolators[i](t,r)););return n}function Xi(t,e){var r,n=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(r=0;r<s;++r)n.push(Gi(t[r],e[r]));for(;r<a;++r)i[r]=t[r];for(;r<o;++r)i[r]=e[r];return function(t){for(r=0;r<s;++r)i[r]=n[r](t);return i}}e.interpolate=Gi,e.interpolators=[function(t,e){var r=typeof e;return("string"===r?ge.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?ji:Vi:e instanceof Ut?ji:Array.isArray(e)?Xi:"object"===r&&isNaN(e)?Bi:Ui)(t,e)}],e.interpolateArray=Xi;var Wi=function(){return P},Yi=e.map({linear:Wi,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return $i},cubic:function(){return Ji},sin:function(){return ea},exp:function(){return ra},circle:function(){return na},elastic:function(t,e){var r;arguments.length<2&&(e=.45);arguments.length?r=e/kt*Math.asin(1/t):(t=1,r=e/4);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-r)*kt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ia}}),Zi=e.map({in:P,out:Qi,"in-out":Ki,"out-in":function(t){return Ki(Qi(t))}});function Qi(t){return function(e){return 1-t(1-e)}}function Ki(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function $i(t){return t*t}function Ji(t){return t*t*t}function ta(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function ea(t){return 1-Math.cos(t*Lt)}function ra(t){return Math.pow(2,10*(t-1))}function na(t){return 1-Math.sqrt(1-t*t)}function ia(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function aa(t,e){return e-=t,function(r){return Math.round(t+e*r)}}function oa(t){var e,r,n,i=[t.a,t.b],a=[t.c,t.d],o=la(i),s=sa(i,a),l=la(((e=a)[0]+=(n=-s)*(r=i)[0],e[1]+=n*r[1],e))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*St,this.translate=[t.e,t.f],this.scale=[o,l],this.skew=l?Math.atan2(s,l)*St:0}function sa(t,e){return t[0]*e[0]+t[1]*e[1]}function la(t){var e=Math.sqrt(sa(t,t));return e&&(t[0]/=e,t[1]/=e),e}e.ease=function(t){var e,n=t.indexOf("-"),i=n>=0?t.slice(0,n):t,a=n>=0?t.slice(n+1):"in";return i=Yi.get(i)||Wi,a=Zi.get(a)||P,e=a(i.apply(null,r.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},e.interpolateHcl=function(t,r){t=e.hcl(t),r=e.hcl(r);var n=t.h,i=t.c,a=t.l,o=r.h-n,s=r.c-i,l=r.l-a;isNaN(s)&&(s=0,i=isNaN(i)?r.c:i);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return Wt(n+o*t,i+s*t,a+l*t)+""}},e.interpolateHsl=function(t,r){t=e.hsl(t),r=e.hsl(r);var n=t.h,i=t.s,a=t.l,o=r.h-n,s=r.s-i,l=r.l-a;isNaN(s)&&(s=0,i=isNaN(i)?r.s:i);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return qt(n+o*t,i+s*t,a+l*t)+""}},e.interpolateLab=function(t,r){t=e.lab(t),r=e.lab(r);var n=t.l,i=t.a,a=t.b,o=r.l-n,s=r.a-i,l=r.b-a;return function(t){return te(n+o*t,i+s*t,a+l*t)+""}},e.interpolateRound=aa,e.transform=function(t){var r=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(t){if(null!=t){r.setAttribute("transform",t);var e=r.transform.baseVal.consolidate()}return new oa(e?e.matrix:ua)})(t)},oa.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ua={a:1,b:0,c:0,d:1,e:0,f:0};function ca(t){return t.length?t.pop()+",":""}function ha(t,r){var n=[],i=[];return t=e.transform(t),r=e.transform(r),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var i=r.push("translate(",null,",",null,")");n.push({i:i-4,x:Ui(t[0],e[0])},{i:i-2,x:Ui(t[1],e[1])})}else(e[0]||e[1])&&r.push("translate("+e+")")}(t.translate,r.translate,n,i),function(t,e,r,n){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),n.push({i:r.push(ca(r)+"rotate(",null,")")-2,x:Ui(t,e)})):e&&r.push(ca(r)+"rotate("+e+")")}(t.rotate,r.rotate,n,i),function(t,e,r,n){t!==e?n.push({i:r.push(ca(r)+"skewX(",null,")")-2,x:Ui(t,e)}):e&&r.push(ca(r)+"skewX("+e+")")}(t.skew,r.skew,n,i),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var i=r.push(ca(r)+"scale(",null,",",null,")");n.push({i:i-4,x:Ui(t[0],e[0])},{i:i-2,x:Ui(t[1],e[1])})}else 1===e[0]&&1===e[1]||r.push(ca(r)+"scale("+e+")")}(t.scale,r.scale,n,i),t=r=null,function(t){for(var e,r=-1,a=i.length;++r<a;)n[(e=i[r]).i]=e.x(t);return n.join("")}}function fa(t,e){return e=(e-=t=+t)||1/e,function(r){return(r-t)/e}}function da(t,e){return e=(e-=t=+t)||1/e,function(r){return Math.max(0,Math.min(1,(r-t)/e))}}function pa(t){for(var e=t.source,r=t.target,n=function(t,e){if(t===e)return t;var r=ga(t),n=ga(e),i=r.pop(),a=n.pop(),o=null;for(;i===a;)o=i,i=r.pop(),a=n.pop();return o}(e,r),i=[e];e!==n;)e=e.parent,i.push(e);for(var a=i.length;r!==n;)i.splice(a,0,r),r=r.parent;return i}function ga(t){for(var e=[],r=t.parent;null!=r;)e.push(t),t=r,r=r.parent;return e.push(t),e}function va(t){t.fixed|=2}function ma(t){t.fixed&=-7}function ya(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ba(t){t.fixed&=-5}e.interpolateTransform=ha,e.layout={},e.layout.bundle=function(){return function(t){for(var e=[],r=-1,n=t.length;++r<n;)e.push(pa(t[r]));return e}},e.layout.chord=function(){var t,r,n,i,a,o,s,l={},u=0;function c(){var l,c,f,d,p,g={},v=[],m=e.range(i),y=[];for(t=[],r=[],l=0,d=-1;++d<i;){for(c=0,p=-1;++p<i;)c+=n[d][p];v.push(c),y.push(e.range(i)),l+=c}for(a&&m.sort(function(t,e){return a(v[t],v[e])}),o&&y.forEach(function(t,e){t.sort(function(t,r){return o(n[e][t],n[e][r])})}),l=(kt-u*i)/l,c=0,d=-1;++d<i;){for(f=c,p=-1;++p<i;){var b=m[d],x=y[b][p],_=n[b][x],w=c,M=c+=_*l;g[b+"-"+x]={index:b,subindex:x,startAngle:w,endAngle:M,value:_}}r[b]={index:b,startAngle:f,endAngle:c,value:v[b]},c+=u}for(d=-1;++d<i;)for(p=d-1;++p<i;){var A=g[d+"-"+p],T=g[p+"-"+d];(A.value||T.value)&&t.push(A.value<T.value?{source:T,target:A}:{source:A,target:T})}s&&h()}function h(){t.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return l.matrix=function(e){return arguments.length?(i=(n=e)&&n.length,t=r=null,l):n},l.padding=function(e){return arguments.length?(u=e,t=r=null,l):u},l.sortGroups=function(e){return arguments.length?(a=e,t=r=null,l):a},l.sortSubgroups=function(e){return arguments.length?(o=e,t=null,l):o},l.sortChords=function(e){return arguments.length?(s=e,t&&h(),l):s},l.chords=function(){return t||c(),t},l.groups=function(){return r||c(),r},l},e.layout.force=function(){var t,r,n,i,a,o,s={},l=e.dispatch("start","tick","end"),u=[1,1],c=.9,h=xa,f=_a,d=-30,p=wa,g=.1,v=.64,m=[],y=[];function b(t){return function(e,r,n,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-r,l=a*a+o*o;if(s*s/v<l){if(l<p){var u=e.charge/l;t.px-=a*u,t.py-=o*u}return!0}if(e.point&&l&&l<p){u=e.pointCharge/l;t.px-=a*u,t.py-=o*u}}return!e.charge}}function x(t){t.px=e.event.x,t.py=e.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return t=null,l.end({type:"end",alpha:n=0}),!0;var r,s,h,f,p,v,x,_,w,M=m.length,A=y.length;for(s=0;s<A;++s)f=(h=y[s]).source,(v=(_=(p=h.target).x-f.x)*_+(w=p.y-f.y)*w)&&(_*=v=n*a[s]*((v=Math.sqrt(v))-i[s])/v,w*=v,p.x-=_*(x=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=w*x,f.x+=_*(x=1-x),f.y+=w*x);if((x=n*g)&&(_=u[0]/2,w=u[1]/2,s=-1,x))for(;++s<M;)(h=m[s]).x+=(_-h.x)*x,h.y+=(w-h.y)*x;if(d)for(!function t(e,r,n){var i=0,a=0;e.charge=0;if(!e.leaf)for(var o,s=e.nodes,l=s.length,u=-1;++u<l;)null!=(o=s[u])&&(t(o,r,n),e.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=r*n[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,a+=c*e.point.y}e.cx=i/e.charge;e.cy=a/e.charge}(r=e.geom.quadtree(m),n,o),s=-1;++s<M;)(h=m[s]).fixed||r.visit(b(h));for(s=-1;++s<M;)(h=m[s]).fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*c,h.y-=(h.py-(h.py=h.y))*c);l.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(v=t*t,s):Math.sqrt(v)},s.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:n=0})):e>0&&(l.start({type:"start",alpha:n=e}),t=Ae(s.tick)),s):n},s.start=function(){var t,e,r,n=m.length,l=y.length,c=u[0],p=u[1];for(t=0;t<n;++t)(r=m[t]).index=t,r.weight=0;for(t=0;t<l;++t)"number"==typeof(r=y[t]).source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<n;++t)r=m[t],isNaN(r.x)&&(r.x=g("x",c)),isNaN(r.y)&&(r.y=g("y",p)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof h)for(t=0;t<l;++t)i[t]=+h.call(this,y[t],t);else for(t=0;t<l;++t)i[t]=h;if(a=[],"function"==typeof f)for(t=0;t<l;++t)a[t]=+f.call(this,y[t],t);else for(t=0;t<l;++t)a[t]=f;if(o=[],"function"==typeof d)for(t=0;t<n;++t)o[t]=+d.call(this,m[t],t);else for(t=0;t<n;++t)o[t]=d;function g(r,i){if(!e){for(e=new Array(n),u=0;u<n;++u)e[u]=[];for(u=0;u<l;++u){var a=y[u];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var o,s=e[t],u=-1,c=s.length;++u<c;)if(!isNaN(o=s[u][r]))return o;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(r||(r=e.behavior.drag().origin(P).on("dragstart.force",va).on("drag.force",x).on("dragend.force",ma)),!arguments.length)return r;this.on("mouseover.force",ya).on("mouseout.force",ba).call(r)},e.rebind(s,l,"on")};var xa=20,_a=1,wa=1/0;function Ma(t,r){return e.rebind(t,r,"sort","children","value"),t.nodes=t,t.links=Ca,t}function Aa(t,e){for(var r=[t];null!=(t=r.pop());)if(e(t),(i=t.children)&&(n=i.length))for(var n,i;--n>=0;)r.push(i[n])}function Ta(t,e){for(var r=[t],n=[];null!=(t=r.pop());)if(n.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)r.push(a[o]);for(;null!=(t=n.pop());)e(t)}function ka(t){return t.children}function Ea(t){return t.value}function La(t,e){return e.value-t.value}function Ca(t){return e.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}e.layout.hierarchy=function(){var t=La,e=ka,r=Ea;function n(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(u=e.call(n,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=u}else r&&(a.value=+r.call(n,a,a.depth)||0),delete a.children;return Ta(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Aa(t,function(t){t.children&&(t.value=0)}),Ta(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},e.layout.partition=function(){var t=e.layout.hierarchy(),r=[1,1];function n(e,n){var i=t.call(this,e,n);return function t(e,r,n,i){var a=e.children;if(e.x=r,e.y=e.depth*i,e.dx=n,e.dy=i,a&&(o=a.length)){var o,s,l,u=-1;for(n=e.value?n/e.value:0;++u<o;)t(s=a[u],r,l=s.value*n,i),r+=l}}(i[0],0,r[0],r[1]/function t(e){var r=e.children,n=0;if(r&&(i=r.length))for(var i,a=-1;++a<i;)n=Math.max(n,t(r[a]));return 1+n}(i[0])),i}return n.size=function(t){return arguments.length?(r=t,n):r},Ma(n,t)},e.layout.pie=function(){var t=Number,r=Sa,n=0,i=kt,a=0;function o(s){var l,u=s.length,c=s.map(function(e,r){return+t.call(o,e,r)}),h=+("function"==typeof n?n.apply(this,arguments):n),f=("function"==typeof i?i.apply(this,arguments):i)-h,d=Math.min(Math.abs(f)/u,+("function"==typeof a?a.apply(this,arguments):a)),p=d*(f<0?-1:1),g=e.sum(c),v=g?(f-u*p)/g:0,m=e.range(u),y=[];return null!=r&&m.sort(r===Sa?function(t,e){return c[e]-c[t]}:function(t,e){return r(s[t],s[e])}),m.forEach(function(t){y[t]={data:s[t],value:l=c[t],startAngle:h,endAngle:h+=l*v+p,padAngle:d}}),y}return o.value=function(e){return arguments.length?(t=e,o):t},o.sort=function(t){return arguments.length?(r=t,o):r},o.startAngle=function(t){return arguments.length?(n=t,o):n},o.endAngle=function(t){return arguments.length?(i=t,o):i},o.padAngle=function(t){return arguments.length?(a=t,o):a},o};var Sa={};function Pa(t){return t.x}function Ra(t){return t.y}function Oa(t,e,r){t.y0=e,t.y=r}e.layout.stack=function(){var t=P,r=Da,n=za,i=Oa,a=Pa,o=Ra;function s(l,u){if(!(d=l.length))return l;var c=l.map(function(e,r){return t.call(s,e,r)}),h=c.map(function(t){return t.map(function(t,e){return[a.call(s,t,e),o.call(s,t,e)]})}),f=r.call(s,h,u);c=e.permute(c,f),h=e.permute(h,f);var d,p,g,v,m=n.call(s,h,u),y=c[0].length;for(g=0;g<y;++g)for(i.call(s,c[0][g],v=m[g],h[0][g][1]),p=1;p<d;++p)i.call(s,c[p][g],v+=h[p-1][g][1],h[p][g][1]);return l}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(r="function"==typeof t?t:Ia.get(t)||Da,s):r},s.offset=function(t){return arguments.length?(n="function"==typeof t?t:Na.get(t)||za,s):n},s.x=function(t){return arguments.length?(a=t,s):a},s.y=function(t){return arguments.length?(o=t,s):o},s.out=function(t){return arguments.length?(i=t,s):i},s};var Ia=e.map({"inside-out":function(t){var r,n,i=t.length,a=t.map(Fa),o=t.map(ja),s=e.range(i).sort(function(t,e){return a[t]-a[e]}),l=0,u=0,c=[],h=[];for(r=0;r<i;++r)n=s[r],l<u?(l+=o[n],c.push(n)):(u+=o[n],h.push(n));return h.reverse().concat(c)},reverse:function(t){return e.range(t.length).reverse()},default:Da}),Na=e.map({silhouette:function(t){var e,r,n,i=t.length,a=t[0].length,o=[],s=0,l=[];for(r=0;r<a;++r){for(e=0,n=0;e<i;e++)n+=t[e][r][1];n>s&&(s=n),o.push(n)}for(r=0;r<a;++r)l[r]=(s-o[r])/2;return l},wiggle:function(t){var e,r,n,i,a,o,s,l,u,c=t.length,h=t[0],f=h.length,d=[];for(d[0]=l=u=0,r=1;r<f;++r){for(e=0,i=0;e<c;++e)i+=t[e][r][1];for(e=0,a=0,s=h[r][0]-h[r-1][0];e<c;++e){for(n=0,o=(t[e][r][1]-t[e][r-1][1])/(2*s);n<e;++n)o+=(t[n][r][1]-t[n][r-1][1])/s;a+=o*t[e][r][1]}d[r]=l-=i?a/i*s:0,l<u&&(u=l)}for(r=0;r<f;++r)d[r]-=u;return d},expand:function(t){var e,r,n,i=t.length,a=t[0].length,o=1/i,s=[];for(r=0;r<a;++r){for(e=0,n=0;e<i;e++)n+=t[e][r][1];if(n)for(e=0;e<i;e++)t[e][r][1]/=n;else for(e=0;e<i;e++)t[e][r][1]=o}for(r=0;r<a;++r)s[r]=0;return s},zero:za});function Da(t){return e.range(t.length)}function za(t){for(var e=-1,r=t[0].length,n=[];++e<r;)n[e]=0;return n}function Fa(t){for(var e,r=1,n=0,i=t[0][1],a=t.length;r<a;++r)(e=t[r][1])>i&&(n=r,i=e);return n}function ja(t){return t.reduce(Ba,0)}function Ba(t,e){return t+e[1]}function Ua(t,e){return Va(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Va(t,e){for(var r=-1,n=+t[0],i=(t[1]-n)/e,a=[];++r<=e;)a[r]=i*r+n;return a}function Ha(t){return[e.min(t),e.max(t)]}function qa(t,e){return t.value-e.value}function Ga(t,e){var r=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=r,r._pack_prev=e}function Xa(t,e){t._pack_next=e,e._pack_prev=t}function Wa(t,e){var r=e.x-t.x,n=e.y-t.y,i=t.r+e.r;return.999*i*i>r*r+n*n}function Ya(t){if((e=t.children)&&(l=e.length)){var e,r,n,i,a,o,s,l,u=1/0,c=-1/0,h=1/0,f=-1/0;if(e.forEach(Za),(r=e[0]).x=-r.r,r.y=0,b(r),l>1&&((n=e[1]).x=n.r,n.y=0,b(n),l>2))for(Ka(r,n,i=e[2]),b(i),Ga(r,i),r._pack_prev=i,Ga(i,n),n=r._pack_next,a=3;a<l;a++){Ka(r,n,i=e[a]);var d=0,p=1,g=1;for(o=n._pack_next;o!==n;o=o._pack_next,p++)if(Wa(o,i)){d=1;break}if(1==d)for(s=r._pack_prev;s!==o._pack_prev&&!Wa(s,i);s=s._pack_prev,g++);d?(p<g||p==g&&n.r<r.r?Xa(r,n=o):Xa(r=s,n),a--):(Ga(r,i),n=i,b(i))}var v=(u+c)/2,m=(h+f)/2,y=0;for(a=0;a<l;a++)(i=e[a]).x-=v,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(Qa)}function b(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),h=Math.min(t.y-t.r,h),f=Math.max(t.y+t.r,f)}}function Za(t){t._pack_next=t._pack_prev=t}function Qa(t){delete t._pack_next,delete t._pack_prev}function Ka(t,e,r){var n=t.r+r.r,i=e.x-t.x,a=e.y-t.y;if(n&&(i||a)){var o=e.r+r.r,s=i*i+a*a,l=.5+((n*=n)-(o*=o))/(2*s),u=Math.sqrt(Math.max(0,2*o*(n+s)-(n-=s)*n-o*o))/(2*s);r.x=t.x+l*i+u*a,r.y=t.y+l*a-u*i}else r.x=t.x+n,r.y=t.y}function $a(t,e){return t.parent==e.parent?1:2}function Ja(t){var e=t.children;return e.length?e[0]:t.t}function to(t){var e,r=t.children;return(e=r.length)?r[e-1]:t.t}function eo(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function ro(t,e,r){return t.a.parent===e.parent?t.a:r}function no(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function io(t,e){var r=t.x+e[3],n=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(r+=i/2,i=0),a<0&&(n+=a/2,a=0),{x:r,y:n,dx:i,dy:a}}function ao(t){var e=t[0],r=t[t.length-1];return e<r?[e,r]:[r,e]}function oo(t){return t.rangeExtent?t.rangeExtent():ao(t.range())}function so(t,e,r,n){var i=r(t[0],t[1]),a=n(e[0],e[1]);return function(t){return a(i(t))}}function lo(t,e){var r,n=0,i=t.length-1,a=t[n],o=t[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),t[n]=e.floor(a),t[i]=e.ceil(o),t}function uo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:co}e.layout.histogram=function(){var t=!0,r=Number,n=Ha,i=Ua;function a(a,o){for(var s,l,u=[],c=a.map(r,this),h=n.call(this,c,o),f=i.call(this,h,c,o),d=(o=-1,c.length),p=f.length-1,g=t?1:1/d;++o<p;)(s=u[o]=[]).dx=f[o+1]-(s.x=f[o]),s.y=0;if(p>0)for(o=-1;++o<d;)(l=c[o])>=h[0]&&l<=h[1]&&((s=u[e.bisect(f,l,1,p)-1]).y+=g,s.push(a[o]));return u}return a.value=function(t){return arguments.length?(r=t,a):r},a.range=function(t){return arguments.length?(n=ve(t),a):n},a.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Va(e,t)}:ve(t),a):i},a.frequency=function(e){return arguments.length?(t=!!e,a):t},a},e.layout.pack=function(){var t,r=e.layout.hierarchy().sort(qa),n=0,i=[1,1];function a(e,a){var o=r.call(this,e,a),s=o[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,Ta(s,function(t){t.r=+c(t.value)}),Ta(s,Ya),n){var h=n*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;Ta(s,function(t){t.r+=h}),Ta(s,Ya),Ta(s,function(t){t.r-=h})}return function t(e,r,n,i){var a=e.children;e.x=r+=i*e.x;e.y=n+=i*e.y;e.r*=i;if(a)for(var o=-1,s=a.length;++o<s;)t(a[o],r,n,i)}(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),o}return a.size=function(t){return arguments.length?(i=t,a):i},a.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,a):t},a.padding=function(t){return arguments.length?(n=+t,a):n},Ma(a,r)},e.layout.tree=function(){var t=e.layout.hierarchy().sort(null).value(null),r=$a,n=[1,1],i=null;function a(e,a){var u=t.call(this,e,a),c=u[0],h=function(t){var e,r={A:null,children:[t]},n=[r];for(;null!=(e=n.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)n.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return r.children[0]}(c);if(Ta(h,o),h.parent.m=-h.z,Aa(h,s),i)Aa(c,l);else{var f=c,d=c,p=c;Aa(c,function(t){t.x<f.x&&(f=t),t.x>d.x&&(d=t),t.depth>p.depth&&(p=t)});var g=r(f,d)/2-f.x,v=n[0]/(d.x+r(d,f)/2+g),m=n[1]/(p.depth||1);Aa(c,function(t){t.x=(t.x+g)*v,t.y=t.depth*m})}return u}function o(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,r=0,n=0,i=t.children,a=i.length;for(;--a>=0;)(e=i[a]).z+=r,e.m+=r,r+=e.s+(n+=e.c)}(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+r(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+r(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,a=t,o=t,s=e,l=a.parent.children[0],u=a.m,c=o.m,h=s.m,f=l.m;s=to(s),a=Ja(a),s&&a;)l=Ja(l),(o=to(o)).a=t,(i=s.z+h-a.z-u+r(s._,a._))>0&&(eo(ro(s,t,n),t,i),u+=i,c+=i),h+=s.m,u+=a.m,f+=l.m,c+=o.m;s&&!to(o)&&(o.t=s,o.m+=h-c),a&&!Ja(l)&&(l.t=a,l.m+=u-f,n=t)}return n}(t,i,t.parent.A||n[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return a.separation=function(t){return arguments.length?(r=t,a):r},a.size=function(t){return arguments.length?(i=null==(n=t)?l:null,a):i?null:n},a.nodeSize=function(t){return arguments.length?(i=null==(n=t)?null:l,a):i?n:null},Ma(a,t)},e.layout.cluster=function(){var t=e.layout.hierarchy().sort(null).value(null),r=$a,n=[1,1],i=!1;function a(a,o){var s,l=t.call(this,a,o),u=l[0],c=0;Ta(u,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),t.y=function(t){return 1+e.max(t,function(t){return t.y})}(n)):(t.x=s?c+=r(t,s):0,t.y=0,s=t)});var h=function t(e){var r=e.children;return r&&r.length?t(r[0]):e}(u),f=function t(e){var r,n=e.children;return n&&(r=n.length)?t(n[r-1]):e}(u),d=h.x-r(h,f)/2,p=f.x+r(f,h)/2;return Ta(u,i?function(t){t.x=(t.x-u.x)*n[0],t.y=(u.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(p-d)*n[0],t.y=(1-(u.y?t.y/u.y:1))*n[1]}),l}return a.separation=function(t){return arguments.length?(r=t,a):r},a.size=function(t){return arguments.length?(i=null==(n=t),a):i?null:n},a.nodeSize=function(t){return arguments.length?(i=null!=(n=t),a):i?n:null},Ma(a,t)},e.layout.treemap=function(){var t,r=e.layout.hierarchy(),n=Math.round,i=[1,1],a=null,o=no,s=!1,l="squarify",u=.5*(1+Math.sqrt(5));function c(t,e){for(var r,n,i=-1,a=t.length;++i<a;)n=(r=t[i]).value*(e<0?0:e),r.area=isNaN(n)||n<=0?0:n}function h(t){var e=t.children;if(e&&e.length){var r,n,i,a=o(t),s=[],u=e.slice(),f=1/0,g="slice"===l?a.dx:"dice"===l?a.dy:"slice-dice"===l?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(c(u,a.dx*a.dy/t.value),s.area=0;(i=u.length)>0;)s.push(r=u[i-1]),s.area+=r.area,"squarify"!==l||(n=d(s,g))<=f?(u.pop(),f=n):(s.area-=s.pop().area,p(s,g,a,!1),g=Math.min(a.dx,a.dy),s.length=s.area=0,f=1/0);s.length&&(p(s,g,a,!0),s.length=s.area=0),e.forEach(h)}}function f(t){var e=t.children;if(e&&e.length){var r,n=o(t),i=e.slice(),a=[];for(c(i,n.dx*n.dy/t.value),a.area=0;r=i.pop();)a.push(r),a.area+=r.area,null!=r.z&&(p(a,r.z?n.dx:n.dy,n,!i.length),a.length=a.area=0);e.forEach(f)}}function d(t,e){for(var r,n=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(r=t[o].area)&&(r<a&&(a=r),r>i&&(i=r));return e*=e,(n*=n)?Math.max(e*i*u/n,n/(e*a*u)):1/0}function p(t,e,r,i){var a,o=-1,s=t.length,l=r.x,u=r.y,c=e?n(t.area/e):0;if(e==r.dx){for((i||c>r.dy)&&(c=r.dy);++o<s;)(a=t[o]).x=l,a.y=u,a.dy=c,l+=a.dx=Math.min(r.x+r.dx-l,c?n(a.area/c):0);a.z=!0,a.dx+=r.x+r.dx-l,r.y+=c,r.dy-=c}else{for((i||c>r.dx)&&(c=r.dx);++o<s;)(a=t[o]).x=l,a.y=u,a.dx=c,u+=a.dy=Math.min(r.y+r.dy-u,c?n(a.area/c):0);a.z=!1,a.dy+=r.y+r.dy-u,r.x+=c,r.dx-=c}}function g(e){var n=t||r(e),a=n[0];return a.x=a.y=0,a.value?(a.dx=i[0],a.dy=i[1]):a.dx=a.dy=0,t&&r.revalue(a),c([a],a.dx*a.dy/a.value),(t?f:h)(a),s&&(t=n),n}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return a;function e(e){return io(e,t)}var r;return o=null==(a=t)?no:"function"==(r=typeof t)?function(e){var r=t.call(g,e,e.depth);return null==r?no(e):io(e,"number"==typeof r?[r,r,r,r]:r)}:"number"===r?(t=[t,t,t,t],e):e,g},g.round=function(t){return arguments.length?(n=t?Math.round:Number,g):n!=Number},g.sticky=function(e){return arguments.length?(s=e,t=null,g):s},g.ratio=function(t){return arguments.length?(u=t,g):u},g.mode=function(t){return arguments.length?(l=t+"",g):l},Ma(g,r)},e.random={normal:function(t,e){var r=arguments.length;return r<2&&(e=1),r<1&&(t=0),function(){var r,n,i;do{i=(r=2*Math.random()-1)*r+(n=2*Math.random()-1)*n}while(!i||i>1);return t+e*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var r=e.random.irwinHall(t);return function(){return r()/t}},irwinHall:function(t){return function(){for(var e=0,r=0;r<t;r++)e+=Math.random();return e}}},e.scale={};var co={floor:P,ceil:P};function ho(t,r,n,i){var a=[],o=[],s=0,l=Math.min(t.length,r.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++s<=l;)a.push(n(t[s-1],t[s])),o.push(i(r[s-1],r[s]));return function(r){var n=e.bisect(t,r,1,l)-1;return o[n](a[n](r))}}function fo(t,r){return e.rebind(t,r,"range","rangeRound","interpolate","clamp")}function po(t,e){return lo(t,uo(go(t,e)[2])),lo(t,uo(go(t,e)[2])),t}function go(t,e){null==e&&(e=10);var r=ao(t),n=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),a=e/n*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function vo(t,r){return e.range.apply(e,go(t,r))}function mo(t,r,n){var i=go(t,r);if(n){var a=Se.exec(n);if(a.shift(),"s"===a[8]){var o=e.formatPrefix(Math.max(y(i[0]),y(i[1])));return a[7]||(a[7]="."+bo(o.scale(i[2]))),a[8]="f",n=e.format(a.join("")),function(t){return n(o.scale(t))+o.symbol}}a[7]||(a[7]="."+function(t,e){var r=bo(e[2]);return t in yo?Math.abs(r-bo(Math.max(y(e[0]),y(e[1]))))+ +("e"!==t):r-2*("%"===t)}(a[8],i)),n=a.join("")}else n=",."+bo(i[2])+"f";return e.format(n)}e.scale.linear=function(){return function t(e,r,n,i){var a,o;function s(){var t=Math.min(e.length,r.length)>2?ho:so,s=i?da:fa;return a=t(e,r,s,n),o=t(r,e,s,Gi),l}function l(t){return a(t)}l.invert=function(t){return o(t)};l.domain=function(t){return arguments.length?(e=t.map(Number),s()):e};l.range=function(t){return arguments.length?(r=t,s()):r};l.rangeRound=function(t){return l.range(t).interpolate(aa)};l.clamp=function(t){return arguments.length?(i=t,s()):i};l.interpolate=function(t){return arguments.length?(n=t,s()):n};l.ticks=function(t){return vo(e,t)};l.tickFormat=function(t,r){return mo(e,t,r)};l.nice=function(t){return po(e,t),s()};l.copy=function(){return t(e,r,n,i)};return s()}([0,1],[0,1],Gi,!1)};var yo={s:1,g:1,p:1,r:1,e:1};function bo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}e.scale.log=function(){return function t(r,n,i,a){function o(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function s(t){return i?Math.pow(n,t):-Math.pow(n,-t)}function l(t){return r(o(t))}l.invert=function(t){return s(r.invert(t))};l.domain=function(t){return arguments.length?(i=t[0]>=0,r.domain((a=t.map(Number)).map(o)),l):a};l.base=function(t){return arguments.length?(n=+t,r.domain(a.map(o)),l):n};l.nice=function(){var t=lo(a.map(o),i?Math:_o);return r.domain(t),a=t.map(s),l};l.ticks=function(){var t=ao(a),e=[],r=t[0],l=t[1],u=Math.floor(o(r)),c=Math.ceil(o(l)),h=n%1?2:n;if(isFinite(c-u)){if(i){for(;u<c;u++)for(var f=1;f<h;f++)e.push(s(u)*f);e.push(s(u))}else for(e.push(s(u));u++<c;)for(var f=h-1;f>0;f--)e.push(s(u)*f);for(u=0;e[u]<r;u++);for(c=e.length;e[c-1]>l;c--);e=e.slice(u,c)}return e};l.tickFormat=function(t,r){if(!arguments.length)return xo;arguments.length<2?r=xo:"function"!=typeof r&&(r=e.format(r));var i=Math.max(1,n*t/l.ticks().length);return function(t){var e=t/s(Math.round(o(t)));return e*n<n-.5&&(e*=n),e<=i?r(t):""}};l.copy=function(){return t(r.copy(),n,i,a)};return fo(l,r)}(e.scale.linear().domain([0,1]),10,!0,[1,10])};var xo=e.format(".0e"),_o={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function wo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}e.scale.pow=function(){return function t(e,r,n){var i=wo(r),a=wo(1/r);function o(t){return e(i(t))}o.invert=function(t){return a(e.invert(t))};o.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),o):n};o.ticks=function(t){return vo(n,t)};o.tickFormat=function(t,e){return mo(n,t,e)};o.nice=function(t){return o.domain(po(n,t))};o.exponent=function(t){return arguments.length?(i=wo(r=t),a=wo(1/r),e.domain(n.map(i)),o):r};o.copy=function(){return t(e.copy(),r,n)};return fo(o,e)}(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return function t(r,n){var i,a,o;function s(t){return a[((i.get(t)||("range"===n.t?i.set(t,r.push(t)):NaN))-1)%a.length]}function l(t,n){return e.range(r.length).map(function(e){return t+n*e})}s.domain=function(t){if(!arguments.length)return r;r=[],i=new x;for(var e,a=-1,o=t.length;++a<o;)i.has(e=t[a])||i.set(e,r.push(e));return s[n.t].apply(s,n.a)};s.range=function(t){return arguments.length?(a=t,o=0,n={t:"range",a:arguments},s):a};s.rangePoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],u=t[1],c=r.length<2?(i=(i+u)/2,0):(u-i)/(r.length-1+e);return a=l(i+c*e/2,c),o=0,n={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],u=t[1],c=r.length<2?(i=u=Math.round((i+u)/2),0):(u-i)/(r.length-1+e)|0;return a=l(i+Math.round(c*e/2+(u-i-(r.length-1+e)*c)/2),c),o=0,n={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var u=t[1]<t[0],c=t[u-0],h=t[1-u],f=(h-c)/(r.length-e+2*i);return a=l(c+f*i,f),u&&a.reverse(),o=f*(1-e),n={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var u=t[1]<t[0],c=t[u-0],h=t[1-u],f=Math.floor((h-c)/(r.length-e+2*i));return a=l(c+Math.round((h-c-(r.length-e)*f)/2),f),u&&a.reverse(),o=Math.round(f*(1-e)),n={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return o};s.rangeExtent=function(){return ao(n.a[0])};s.copy=function(){return t(r,n)};return s.domain(r)}([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(Mo)},e.scale.category20=function(){return e.scale.ordinal().range(Ao)},e.scale.category20b=function(){return e.scale.ordinal().range(To)},e.scale.category20c=function(){return e.scale.ordinal().range(ko)};var Mo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(se),Ao=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(se),To=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(se),ko=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(se);function Eo(){return 0}e.scale.quantile=function(){return function t(r,n){var i;function a(){var t=0,a=n.length;for(i=[];++t<a;)i[t-1]=e.quantile(r,t/a);return o}function o(t){if(!isNaN(t=+t))return n[e.bisect(i,t)]}o.domain=function(t){return arguments.length?(r=t.map(d).filter(p).sort(f),a()):r};o.range=function(t){return arguments.length?(n=t,a()):n};o.quantiles=function(){return i};o.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:r[0],t<i.length?i[t]:r[r.length-1]]};o.copy=function(){return t(r,n)};return a()}([],[])},e.scale.quantize=function(){return function t(e,r,n){var i,a;function o(t){return n[Math.max(0,Math.min(a,Math.floor(i*(t-e))))]}function s(){return i=n.length/(r-e),a=n.length-1,o}o.domain=function(t){return arguments.length?(e=+t[0],r=+t[t.length-1],s()):[e,r]};o.range=function(t){return arguments.length?(n=t,s()):n};o.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/i+e,t+1/i]};o.copy=function(){return t(e,r,n)};return s()}(0,1,[0,1])},e.scale.threshold=function(){return function t(r,n){function i(t){if(t<=t)return n[e.bisect(r,t)]}i.domain=function(t){return arguments.length?(r=t,i):r};i.range=function(t){return arguments.length?(n=t,i):n};i.invertExtent=function(t){return t=n.indexOf(t),[r[t-1],r[t]]};i.copy=function(){return t(r,n)};return i}([.5],[0,1])},e.scale.identity=function(){return function t(e){function r(t){return+t}r.invert=r;r.domain=r.range=function(t){return arguments.length?(e=t.map(r),r):e};r.ticks=function(t){return vo(e,t)};r.tickFormat=function(t,r){return mo(e,t,r)};r.copy=function(){return t(e)};return r}([0,1])},e.svg={},e.svg.arc=function(){var t=Co,e=So,r=Eo,n=Lo,i=Po,a=Ro,o=Oo;function s(){var s=Math.max(0,+t.apply(this,arguments)),u=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Lt,h=a.apply(this,arguments)-Lt,f=Math.abs(h-c),d=c>h?0:1;if(u<s&&(p=u,u=s,s=p),f>=Et)return l(u,d)+(s?l(s,1-d):"")+"Z";var p,g,v,m,y,b,x,_,w,M,A,T,k=0,E=0,L=[];if((m=(+o.apply(this,arguments)||0)/2)&&(v=n===Lo?Math.sqrt(s*s+u*u):+n.apply(this,arguments),d||(E*=-1),u&&(E=It(v/u*Math.sin(m))),s&&(k=It(v/s*Math.sin(m)))),u){y=u*Math.cos(c+E),b=u*Math.sin(c+E),x=u*Math.cos(h-E),_=u*Math.sin(h-E);var C=Math.abs(h-c-2*E)<=Tt?0:1;if(E&&Io(y,b,x,_)===d^C){var S=(c+h)/2;y=u*Math.cos(S),b=u*Math.sin(S),x=_=null}}else y=b=0;if(s){w=s*Math.cos(h-k),M=s*Math.sin(h-k),A=s*Math.cos(c+k),T=s*Math.sin(c+k);var P=Math.abs(c-h+2*k)<=Tt?0:1;if(k&&Io(w,M,A,T)===1-d^P){var R=(c+h)/2;w=s*Math.cos(R),M=s*Math.sin(R),A=T=null}}else w=M=0;if(f>Mt&&(p=Math.min(Math.abs(u-s)/2,+r.apply(this,arguments)))>.001){g=s<u^d?0:1;var O=p,I=p;if(f<Tt){var N=null==A?[w,M]:null==x?[y,b]:ai([y,b],[A,T],[x,_],[w,M]),D=y-N[0],z=b-N[1],F=x-N[0],j=_-N[1],B=1/Math.sin(Math.acos((D*F+z*j)/(Math.sqrt(D*D+z*z)*Math.sqrt(F*F+j*j)))/2),U=Math.sqrt(N[0]*N[0]+N[1]*N[1]);I=Math.min(p,(s-U)/(B-1)),O=Math.min(p,(u-U)/(B+1))}if(null!=x){var V=No(null==A?[w,M]:[A,T],[y,b],u,O,d),H=No([x,_],[w,M],u,O,d);p===O?L.push("M",V[0],"A",O,",",O," 0 0,",g," ",V[1],"A",u,",",u," 0 ",1-d^Io(V[1][0],V[1][1],H[1][0],H[1][1]),",",d," ",H[1],"A",O,",",O," 0 0,",g," ",H[0]):L.push("M",V[0],"A",O,",",O," 0 1,",g," ",H[0])}else L.push("M",y,",",b);if(null!=A){var q=No([y,b],[A,T],s,-I,d),G=No([w,M],null==x?[y,b]:[x,_],s,-I,d);p===I?L.push("L",G[0],"A",I,",",I," 0 0,",g," ",G[1],"A",s,",",s," 0 ",d^Io(G[1][0],G[1][1],q[1][0],q[1][1]),",",1-d," ",q[1],"A",I,",",I," 0 0,",g," ",q[0]):L.push("L",G[0],"A",I,",",I," 0 0,",g," ",q[0])}else L.push("L",w,",",M)}else L.push("M",y,",",b),null!=x&&L.push("A",u,",",u," 0 ",C,",",d," ",x,",",_),L.push("L",w,",",M),null!=A&&L.push("A",s,",",s," 0 ",P,",",1-d," ",A,",",T);return L.push("Z"),L.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=ve(e),s):t},s.outerRadius=function(t){return arguments.length?(e=ve(t),s):e},s.cornerRadius=function(t){return arguments.length?(r=ve(t),s):r},s.padRadius=function(t){return arguments.length?(n=t==Lo?Lo:ve(t),s):n},s.startAngle=function(t){return arguments.length?(i=ve(t),s):i},s.endAngle=function(t){return arguments.length?(a=ve(t),s):a},s.padAngle=function(t){return arguments.length?(o=ve(t),s):o},s.centroid=function(){var r=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Lt;return[Math.cos(n)*r,Math.sin(n)*r]},s};var Lo="auto";function Co(t){return t.innerRadius}function So(t){return t.outerRadius}function Po(t){return t.startAngle}function Ro(t){return t.endAngle}function Oo(t){return t&&t.padAngle}function Io(t,e,r,n){return(t-r)*e-(e-n)*t>0?0:1}function No(t,e,r,n,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?n:-n)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,c=t[0]+l,h=t[1]+u,f=e[0]+l,d=e[1]+u,p=(c+f)/2,g=(h+d)/2,v=f-c,m=d-h,y=v*v+m*m,b=r-n,x=c*d-f*h,_=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),w=(x*m-v*_)/y,M=(-x*v-m*_)/y,A=(x*m+v*_)/y,T=(-x*v+m*_)/y,k=w-p,E=M-g,L=A-p,C=T-g;return k*k+E*E>L*L+C*C&&(w=A,M=T),[[w-l,M-u],[w*r/b,M*r/b]]}function Do(t){var e=Jn,r=ti,n=Xr,i=Fo,a=i.key,o=.7;function s(a){var s,l=[],u=[],c=-1,h=a.length,f=ve(e),d=ve(r);function p(){l.push("M",i(t(u),o))}for(;++c<h;)n.call(this,s=a[c],c)?u.push([+f.call(this,s,c),+d.call(this,s,c)]):u.length&&(p(),u=[]);return u.length&&p(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(r=t,s):r},s.defined=function(t){return arguments.length?(n=t,s):n},s.interpolate=function(t){return arguments.length?(a="function"==typeof t?i=t:(i=zo.get(t)||Fo).key,s):a},s.tension=function(t){return arguments.length?(o=t,s):o},s}e.svg.line=function(){return Do(P)};var zo=e.map({linear:Fo,"linear-closed":jo,step:function(t){var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];for(;++e<r;)i.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);r>1&&i.push("H",n[0]);return i.join("")},"step-before":Bo,"step-after":Uo,basis:qo,"basis-open":function(t){if(t.length<4)return Fo(t);var e,r=[],n=-1,i=t.length,a=[0],o=[0];for(;++n<3;)e=t[n],a.push(e[0]),o.push(e[1]);r.push(Go(Yo,a)+","+Go(Yo,o)),--n;for(;++n<i;)e=t[n],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Zo(r,a,o);return r.join("")},"basis-closed":function(t){var e,r,n=-1,i=t.length,a=i+4,o=[],s=[];for(;++n<4;)r=t[n%i],o.push(r[0]),s.push(r[1]);e=[Go(Yo,o),",",Go(Yo,s)],--n;for(;++n<a;)r=t[n%i],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Zo(e,o,s);return e.join("")},bundle:function(t,e){var r=t.length-1;if(r)for(var n,i,a=t[0][0],o=t[0][1],s=t[r][0]-a,l=t[r][1]-o,u=-1;++u<=r;)n=t[u],i=u/r,n[0]=e*n[0]+(1-e)*(a+i*s),n[1]=e*n[1]+(1-e)*(o+i*l);return qo(t)},cardinal:function(t,e){return t.length<3?Fo(t):t[0]+Vo(t,Ho(t,e))},"cardinal-open":function(t,e){return t.length<4?Fo(t):t[1]+Vo(t.slice(1,-1),Ho(t,e))},"cardinal-closed":function(t,e){return t.length<3?jo(t):t[0]+Vo((t.push(t[0]),t),Ho([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Fo(t):t[0]+Vo(t,function(t){var e,r,n,i,a=[],o=function(t){var e=0,r=t.length-1,n=[],i=t[0],a=t[1],o=n[0]=Qo(i,a);for(;++e<r;)n[e]=(o+(o=Qo(i=a,a=t[e+1])))/2;return n[e]=o,n}(t),s=-1,l=t.length-1;for(;++s<l;)e=Qo(t[s],t[s+1]),y(e)<Mt?o[s]=o[s+1]=0:(r=o[s]/e,n=o[s+1]/e,(i=r*r+n*n)>9&&(i=3*e/Math.sqrt(i),o[s]=i*r,o[s+1]=i*n));s=-1;for(;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(t))}});function Fo(t){return t.length>1?t.join("L"):t+"Z"}function jo(t){return t.join("L")+"Z"}function Bo(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("V",(n=t[e])[1],"H",n[0]);return i.join("")}function Uo(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("H",(n=t[e])[0],"V",n[1]);return i.join("")}function Vo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Fo(t);var r=t.length!=e.length,n="",i=t[0],a=t[1],o=e[0],s=o,l=1;if(r&&(n+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],l=2),e.length>1){s=e[1],a=t[l],l++,n+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<e.length;u++,l++)a=t[l],s=e[u],n+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(r){var c=t[l];n+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return n}function Ho(t,e){for(var r,n=[],i=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)r=a,a=o,o=t[s],n.push([i*(o[0]-r[0]),i*(o[1]-r[1])]);return n}function qo(t){if(t.length<3)return Fo(t);var e=1,r=t.length,n=t[0],i=n[0],a=n[1],o=[i,i,i,(n=t[1])[0]],s=[a,a,a,n[1]],l=[i,",",a,"L",Go(Yo,o),",",Go(Yo,s)];for(t.push(t[r-1]);++e<=r;)n=t[e],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Zo(l,o,s);return t.pop(),l.push("L",n),l.join("")}function Go(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}zo.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Xo=[0,2/3,1/3,0],Wo=[0,1/3,2/3,0],Yo=[0,1/6,2/3,1/6];function Zo(t,e,r){t.push("C",Go(Xo,e),",",Go(Xo,r),",",Go(Wo,e),",",Go(Wo,r),",",Go(Yo,e),",",Go(Yo,r))}function Qo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ko(t){for(var e,r,n,i=-1,a=t.length;++i<a;)r=(e=t[i])[0],n=e[1]-Lt,e[0]=r*Math.cos(n),e[1]=r*Math.sin(n);return t}function $o(t){var e=Jn,r=Jn,n=0,i=ti,a=Xr,o=Fo,s=o.key,l=o,u="L",c=.7;function h(s){var h,f,d,p=[],g=[],v=[],m=-1,y=s.length,b=ve(e),x=ve(n),_=e===r?function(){return f}:ve(r),w=n===i?function(){return d}:ve(i);function M(){p.push("M",o(t(v),c),u,l(t(g.reverse()),c),"Z")}for(;++m<y;)a.call(this,h=s[m],m)?(g.push([f=+b.call(this,h,m),d=+x.call(this,h,m)]),v.push([+_.call(this,h,m),+w.call(this,h,m)])):g.length&&(M(),g=[],v=[]);return g.length&&M(),p.length?p.join(""):null}return h.x=function(t){return arguments.length?(e=r=t,h):r},h.x0=function(t){return arguments.length?(e=t,h):e},h.x1=function(t){return arguments.length?(r=t,h):r},h.y=function(t){return arguments.length?(n=i=t,h):i},h.y0=function(t){return arguments.length?(n=t,h):n},h.y1=function(t){return arguments.length?(i=t,h):i},h.defined=function(t){return arguments.length?(a=t,h):a},h.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=zo.get(t)||Fo).key,l=o.reverse||o,u=o.closed?"M":"L",h):s},h.tension=function(t){return arguments.length?(c=t,h):c},h}function Jo(t){return t.radius}function ts(t){return[t.x,t.y]}function es(){return 64}function rs(){return"circle"}function ns(t){var e=Math.sqrt(t/Tt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}e.svg.line.radial=function(){var t=Do(Ko);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Bo.reverse=Uo,Uo.reverse=Bo,e.svg.area=function(){return $o(P)},e.svg.area.radial=function(){var t=$o(Ko);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},e.svg.chord=function(){var t=jn,e=Bn,r=Jo,n=Po,i=Ro;function a(r,n){var i,a,u=o(this,t,r,n),c=o(this,e,r,n);return"M"+u.p0+s(u.r,u.p1,u.a1-u.a0)+(a=c,(i=u).a0==a.a0&&i.a1==a.a1?l(u.r,u.p1,u.r,u.p0):l(u.r,u.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+l(c.r,c.p1,u.r,u.p0))+"Z"}function o(t,e,a,o){var s=e.call(t,a,o),l=r.call(t,s,o),u=n.call(t,s,o)-Lt,c=i.call(t,s,o)-Lt;return{r:l,a0:u,a1:c,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function s(t,e,r){return"A"+t+","+t+" 0 "+ +(r>Tt)+",1 "+e}function l(t,e,r,n){return"Q 0,0 "+n}return a.radius=function(t){return arguments.length?(r=ve(t),a):r},a.source=function(e){return arguments.length?(t=ve(e),a):t},a.target=function(t){return arguments.length?(e=ve(t),a):e},a.startAngle=function(t){return arguments.length?(n=ve(t),a):n},a.endAngle=function(t){return arguments.length?(i=ve(t),a):i},a},e.svg.diagonal=function(){var t=jn,e=Bn,r=ts;function n(n,i){var a=t.call(this,n,i),o=e.call(this,n,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return n.source=function(e){return arguments.length?(t=ve(e),n):t},n.target=function(t){return arguments.length?(e=ve(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),r=ts,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),r=e[0],n=e[1]-Lt;return[r*Math.cos(n),r*Math.sin(n)]}}(r=t)):r},t},e.svg.symbol=function(){var t=rs,e=es;function r(r,n){return(is.get(t.call(this,r,n))||ns)(e.call(this,r,n))}return r.type=function(e){return arguments.length?(t=ve(e),r):t},r.size=function(t){return arguments.length?(e=ve(t),r):e},r};var is=e.map({circle:ns,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*os)),r=e*os;return"M0,"+-e+"L"+r+",0 0,"+e+" "+-r+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/as),r=e*as/2;return"M0,"+r+"L"+e+","+-r+" "+-e+","+-r+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/as),r=e*as/2;return"M0,"+-r+"L"+e+","+r+" "+-e+","+r+"Z"}});e.svg.symbolTypes=is.keys();var as=Math.sqrt(3),os=Math.tan(30*Ct);W.transition=function(t){for(var e,r,n=cs||++ds,i=vs(t),a=[],o=hs||{time:Date.now(),ease:ta,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(r=u[c])&&ms(r,c,i,n,o),e.push(r)}return us(a,i,n)},W.interrupt=function(t){return this.each(null==t?ss:ls(vs(t)))};var ss=ls(vs());function ls(t){return function(){var e,r,n;(e=this[t])&&(n=e[r=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[r]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function us(t,e,r){return V(t,fs),t.namespace=e,t.id=r,t}var cs,hs,fs=[],ds=0;function ps(t,e,r,n){var i=t.id,a=t.namespace;return ct(t,"function"==typeof r?function(t,o,s){t[a][i].tween.set(e,n(r.call(t,t.__data__,o,s)))}:(r=n(r),function(t){t[a][i].tween.set(e,r)}))}function gs(t){return null==t&&(t=""),function(){this.textContent=t}}function vs(t){return null==t?"__transition__":"__transition_"+t+"__"}function ms(t,e,r,n,i){var a,o,s,l,u,c=t[r]||(t[r]={active:0,count:0}),h=c[n];function f(r){var i=c.active,f=c[i];for(var p in f&&(f.timer.c=null,f.timer.t=NaN,--c.count,delete c[i],f.event&&f.event.interrupt.call(t,t.__data__,f.index)),c)if(+p<n){var g=c[p];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[p]}o.c=d,Ae(function(){return o.c&&d(r||1)&&(o.c=null,o.t=NaN),1},0,a),c.active=n,h.event&&h.event.start.call(t,t.__data__,e),u=[],h.tween.forEach(function(r,n){(n=n.call(t,t.__data__,e))&&u.push(n)}),l=h.ease,s=h.duration}function d(i){for(var a=i/s,o=l(a),f=u.length;f>0;)u[--f].call(t,o);if(a>=1)return h.event&&h.event.end.call(t,t.__data__,e),--c.count?delete c[n]:delete t[r],1}h||(a=i.time,o=Ae(function(t){var e=h.delay;if(o.t=e+a,e<=t)return f(t-e);o.c=f},0,a),h=c[n]={tween:new x,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}fs.call=W.call,fs.empty=W.empty,fs.node=W.node,fs.size=W.size,e.transition=function(t,r){return t&&t.transition?cs?t.transition(r):t:e.selection().transition(t)},e.transition.prototype=fs,fs.select=function(t){var e,r,n,i=this.id,a=this.namespace,o=[];t=Y(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,h=u.length;++c<h;)(n=u[c])&&(r=t.call(n,n.__data__,c,s))?("__data__"in n&&(r.__data__=n.__data__),ms(r,c,a,i,n[a][i]),e.push(r)):e.push(null)}return us(o,a,i)},fs.selectAll=function(t){var e,r,n,i,a,o=this.id,s=this.namespace,l=[];t=Z(t);for(var u=-1,c=this.length;++u<c;)for(var h=this[u],f=-1,d=h.length;++f<d;)if(n=h[f]){a=n[s][o],r=t.call(n,n.__data__,f,u),l.push(e=[]);for(var p=-1,g=r.length;++p<g;)(i=r[p])&&ms(i,p,s,o,a),e.push(i)}return us(l,s,o)},fs.filter=function(t){var e,r,n=[];"function"!=typeof t&&(t=ut(t));for(var i=0,a=this.length;i<a;i++){n.push(e=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(r=o[s])&&t.call(r,r.__data__,s,i)&&e.push(r)}return us(n,this.namespace,this.id)},fs.tween=function(t,e){var r=this.id,n=this.namespace;return arguments.length<2?this.node()[n][r].tween.get(t):ct(this,null==e?function(e){e[n][r].tween.remove(t)}:function(i){i[n][r].tween.set(t,e)})},fs.attr=function(t,r){if(arguments.length<2){for(r in t)this.attr(r,t[r]);return this}var n="transform"==t?ha:Gi,i=e.ns.qualify(t);function a(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}return ps(this,"attr."+t,r,i.local?function(t){return null==t?o:(t+="",function(){var e,r=this.getAttributeNS(i.space,i.local);return r!==t&&(e=n(r,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(t){return null==t?a:(t+="",function(){var e,r=this.getAttribute(i);return r!==t&&(e=n(r,t),function(t){this.setAttribute(i,e(t))})})})},fs.attrTween=function(t,r){var n=e.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,e){var i=r.call(this,t,e,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,e){var i=r.call(this,t,e,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},fs.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.style(r,t[r],e);return this}r=""}function i(){this.style.removeProperty(t)}return ps(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var n,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(n=Gi(i,e),function(e){this.style.setProperty(t,n(e),r)})})})},fs.styleTween=function(t,e,r){return arguments.length<3&&(r=""),this.tween("style."+t,function(n,i){var a=e.call(this,n,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}})},fs.text=function(t){return ps(this,"text",t,gs)},fs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},fs.ease=function(t){var r=this.id,n=this.namespace;return arguments.length<1?this.node()[n][r].ease:("function"!=typeof t&&(t=e.ease.apply(e,arguments)),ct(this,function(e){e[n][r].ease=t}))},fs.delay=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].delay:ct(this,"function"==typeof t?function(n,i,a){n[r][e].delay=+t.call(n,n.__data__,i,a)}:(t=+t,function(n){n[r][e].delay=t}))},fs.duration=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].duration:ct(this,"function"==typeof t?function(n,i,a){n[r][e].duration=Math.max(1,t.call(n,n.__data__,i,a))}:(t=Math.max(1,t),function(n){n[r][e].duration=t}))},fs.each=function(t,r){var n=this.id,i=this.namespace;if(arguments.length<2){var a=hs,o=cs;try{cs=n,ct(this,function(e,r,a){hs=e[i][n],t.call(e,e.__data__,r,a)})}finally{hs=a,cs=o}}else ct(this,function(a){var o=a[i][n];(o.event||(o.event=e.dispatch("start","end","interrupt"))).on(t,r)});return this},fs.transition=function(){for(var t,e,r,n=this.id,i=++ds,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(t=[]);for(var u,c=0,h=(u=this[s]).length;c<h;c++)(e=u[c])&&ms(e,c,a,i,{time:(r=e[a][n]).time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration}),t.push(e)}return us(o,a,i)},e.svg.axis=function(){var t,r=e.scale.linear(),i=ys,a=6,o=6,s=3,l=[10],u=null;function c(n){n.each(function(){var n,c=e.select(this),h=this.__chart__||r,f=this.__chart__=r.copy(),d=null==u?f.ticks?f.ticks.apply(f,l):f.domain():u,p=null==t?f.tickFormat?f.tickFormat.apply(f,l):P:t,g=c.selectAll(".tick").data(d,f),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Mt),m=e.transition(g.exit()).style("opacity",Mt).remove(),y=e.transition(g.order()).style("opacity",1),b=Math.max(a,0)+s,x=oo(f),_=c.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),e.transition(_));v.append("line"),v.append("text");var M,A,T,k,E=v.select("line"),L=y.select("line"),C=g.select("text").text(p),S=v.select("text"),R=y.select("text"),O="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(n=xs,M="x",T="y",A="x2",k="y2",C.attr("dy",O<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+O*o+"V0H"+x[1]+"V"+O*o)):(n=_s,M="y",T="x",A="y2",k="x2",C.attr("dy",".32em").style("text-anchor",O<0?"end":"start"),w.attr("d","M"+O*o+","+x[0]+"H0V"+x[1]+"H"+O*o)),E.attr(k,O*a),S.attr(T,O*b),L.attr(A,0).attr(k,O*a),R.attr(M,0).attr(T,O*b),f.rangeBand){var I=f,N=I.rangeBand()/2;h=f=function(t){return I(t)+N}}else h.rangeBand?h=f:m.call(n,f,h);v.call(n,h,f),y.call(n,f,f)})}return c.scale=function(t){return arguments.length?(r=t,c):r},c.orient=function(t){return arguments.length?(i=t in bs?t+"":ys,c):i},c.ticks=function(){return arguments.length?(l=n(arguments),c):l},c.tickValues=function(t){return arguments.length?(u=t,c):u},c.tickFormat=function(e){return arguments.length?(t=e,c):t},c.tickSize=function(t){var e=arguments.length;return e?(a=+t,o=+arguments[e-1],c):a},c.innerTickSize=function(t){return arguments.length?(a=+t,c):a},c.outerTickSize=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(s=+t,c):s},c.tickSubdivide=function(){return arguments.length&&c},c};var ys="bottom",bs={top:1,right:1,bottom:1,left:1};function xs(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"})}function _s(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"})}e.svg.brush=function(){var t,r,n=B(f,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],l=[0,0],u=!0,c=!0,h=Ms[0];function f(t){t.each(function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),r=t.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(h,P);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ws[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",f.empty()?"none":null);var o,s=e.transition(t),l=e.transition(r);i&&(o=oo(i),l.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),a&&(o=oo(a),l.attr("y",o[0]).attr("height",o[1]-o[0]),g(s)),d(s)})}function d(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+s[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function g(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function v(){var h,v,m=this,y=e.select(e.event.target),b=n.of(m,arguments),x=e.select(m),_=y.datum(),w=!/^(n|s)$/.test(_)&&i,M=!/^(e|w)$/.test(_)&&a,A=y.classed("extent"),T=bt(m),k=e.mouse(m),E=e.select(o(m)).on("keydown.brush",function(){32==e.event.keyCode&&(A||(h=null,k[0]-=s[1],k[1]-=l[1],A=2),F())}).on("keyup.brush",function(){32==e.event.keyCode&&2==A&&(k[0]+=s[1],k[1]+=l[1],A=0,F())});if(e.event.changedTouches?E.on("touchmove.brush",S).on("touchend.brush",R):E.on("mousemove.brush",S).on("mouseup.brush",R),x.interrupt().selectAll("*").interrupt(),A)k[0]=s[0]-k[0],k[1]=l[0]-k[1];else if(_){var L=+/w$/.test(_),C=+/^n/.test(_);v=[s[1-L]-k[0],l[1-C]-k[1]],k[0]=s[L],k[1]=l[C]}else e.event.altKey&&(h=k.slice());function S(){var t=e.mouse(m),r=!1;v&&(t[0]+=v[0],t[1]+=v[1]),A||(e.event.altKey?(h||(h=[(s[0]+s[1])/2,(l[0]+l[1])/2]),k[0]=s[+(t[0]<h[0])],k[1]=l[+(t[1]<h[1])]):h=null),w&&P(t,i,0)&&(p(x),r=!0),M&&P(t,a,1)&&(g(x),r=!0),r&&(d(x),b({type:"brush",mode:A?"move":"resize"}))}function P(e,n,i){var a,o,f=oo(n),d=f[0],p=f[1],g=k[i],v=i?l:s,m=v[1]-v[0];if(A&&(d-=g,p-=m+g),a=(i?c:u)?Math.max(d,Math.min(p,e[i])):e[i],A?o=(a+=g)+m:(h&&(g=Math.max(d,Math.min(p,2*h[i]-a))),g<a?(o=a,a=g):o=g),v[0]!=a||v[1]!=o)return i?r=null:t=null,v[0]=a,v[1]=o,!0}function R(){S(),x.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null),e.select("body").style("cursor",null),E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),S()}return f.event=function(i){i.each(function(){var i=n.of(this,arguments),a={x:s,y:l,i:t,j:r},o=this.__chart__||a;this.__chart__=a,cs?e.select(this).transition().each("start.brush",function(){t=o.i,r=o.j,s=o.x,l=o.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=Xi(s,a.x),n=Xi(l,a.y);return t=r=null,function(t){s=a.x=e(t),l=a.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=a.i,r=a.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},f.x=function(t){return arguments.length?(h=Ms[!(i=t)<<1|!a],f):i},f.y=function(t){return arguments.length?(h=Ms[!i<<1|!(a=t)],f):a},f.clamp=function(t){return arguments.length?(i&&a?(u=!!t[0],c=!!t[1]):i?u=!!t:a&&(c=!!t),f):i&&a?[u,c]:i?u:a?c:null},f.extent=function(e){var n,o,u,c,h;return arguments.length?(i&&(n=e[0],o=e[1],a&&(n=n[0],o=o[0]),t=[n,o],i.invert&&(n=i(n),o=i(o)),o<n&&(h=n,n=o,o=h),n==s[0]&&o==s[1]||(s=[n,o])),a&&(u=e[0],c=e[1],i&&(u=u[1],c=c[1]),r=[u,c],a.invert&&(u=a(u),c=a(c)),c<u&&(h=u,u=c,c=h),u==l[0]&&c==l[1]||(l=[u,c])),f):(i&&(t?(n=t[0],o=t[1]):(n=s[0],o=s[1],i.invert&&(n=i.invert(n),o=i.invert(o)),o<n&&(h=n,n=o,o=h))),a&&(r?(u=r[0],c=r[1]):(u=l[0],c=l[1],a.invert&&(u=a.invert(u),c=a.invert(c)),c<u&&(h=u,u=c,c=h))),i&&a?[[n,u],[o,c]]:i?[n,o]:a&&[u,c])},f.clear=function(){return f.empty()||(s=[0,0],l=[0,0],t=r=null),f},f.empty=function(){return!!i&&s[0]==s[1]||!!a&&l[0]==l[1]},e.rebind(f,n,"on")};var ws={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ms=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],As=Oe.format=sr.timeFormat,Ts=As.utc,ks=Ts("%Y-%m-%dT%H:%M:%S.%LZ");function Es(t){return t.toISOString()}function Ls(t,r,n){function i(e){return t(e)}function a(t,n){var i=(t[1]-t[0])/n,a=e.bisect(Ss,i);return a==Ss.length?[r.year,go(t.map(function(t){return t/31536e6}),n)[2]]:a?r[i/Ss[a-1]<Ss[a]/i?a-1:a]:[Os,go(t,n)[2]]}return i.invert=function(e){return Cs(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Cs)},i.nice=function(t,e){var r=i.domain(),n=ao(r),o=null==t?a(n,10):"number"==typeof t&&a(n,t);function s(r){return!isNaN(r)&&!t.range(r,Cs(+r+1),e).length}return o&&(t=o[0],e=o[1]),i.domain(lo(r,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Cs(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Cs(+e+1);return e}}:t))},i.ticks=function(t,e){var r=ao(i.domain()),n=null==t?a(r,10):"number"==typeof t?a(r,t):!t.range&&[{range:t},e];return n&&(t=n[0],e=n[1]),t.range(r[0],Cs(+r[1]+1),e<1?1:e)},i.tickFormat=function(){return n},i.copy=function(){return Ls(t.copy(),r,n)},fo(i,t)}function Cs(t){return new Date(t)}As.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Es:ks,Es.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Es.toString=ks.toString,Oe.second=ze(function(t){return new Ie(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Oe.seconds=Oe.second.range,Oe.seconds.utc=Oe.second.utc.range,Oe.minute=ze(function(t){return new Ie(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Oe.minutes=Oe.minute.range,Oe.minutes.utc=Oe.minute.utc.range,Oe.hour=ze(function(t){var e=t.getTimezoneOffset()/60;return new Ie(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Oe.hours=Oe.hour.range,Oe.hours.utc=Oe.hour.utc.range,Oe.month=ze(function(t){return(t=Oe.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Oe.months=Oe.month.range,Oe.months.utc=Oe.month.utc.range;var Ss=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ps=[[Oe.second,1],[Oe.second,5],[Oe.second,15],[Oe.second,30],[Oe.minute,1],[Oe.minute,5],[Oe.minute,15],[Oe.minute,30],[Oe.hour,1],[Oe.hour,3],[Oe.hour,6],[Oe.hour,12],[Oe.day,1],[Oe.day,2],[Oe.week,1],[Oe.month,1],[Oe.month,3],[Oe.year,1]],Rs=As.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Xr]]),Os={range:function(t,r,n){return e.range(Math.ceil(t/n)*n,+r,n).map(Cs)},floor:P,ceil:P};Ps.year=Oe.year,Oe.scale=function(){return Ls(e.scale.linear(),Ps,Rs)};var Is=Ps.map(function(t){return[t[0].utc,t[1]]}),Ns=Ts.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Xr]]);function Ds(t){return JSON.parse(t.responseText)}function zs(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}Is.year=Oe.year.utc,Oe.scale.utc=function(){return Ls(e.scale.linear(),Is,Ns)},e.text=me(function(t){return t.responseText}),e.json=function(t,e){return ye(t,"application/json",Ds,e)},e.html=function(t,e){return ye(t,"text/html",zs,e)},e.xml=me(function(t){return t.responseXML}),t.exports?t.exports=e:this.d3=e}(),t=t.exports;var e=function(t){var e=typeof t;if("string"===e){var r=t;if(0===(t=+t)&&function(t){for(var e,r=t.length,n=0;n<r;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}(r))return!1}else if("number"!==e)return!1;return t-t<1},r={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"\u2212"},n={},i=Math.PI;n.deg2rad=function(t){return t/180*i},n.rad2deg=function(t){return t/i*180},n.wrap360=function(t){var e=t%360;return e<0?e+360:e},n.wrap180=function(t){return Math.abs(t)>180&&(t-=360*Math.round(t/360)),t};var a=r.BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,s={exports:{}};!function(t){var e=/^\s+/,r=/\s+$/,n=0,i=t.round,a=t.min,o=t.max,l=t.random;function u(s,l){if(s=s||"",l=l||{},s instanceof u)return s;if(!(this instanceof u))return new u(s,l);var c=function(n){var i={r:0,g:0,b:0},s=1,l=null,u=null,c=null,h=!1,f=!1;"string"==typeof n&&(n=function(t){t=t.replace(e,"").replace(r,"").toLowerCase();var n,i=!1;if(E[t])t=E[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(n=B.rgb.exec(t))return{r:n[1],g:n[2],b:n[3]};if(n=B.rgba.exec(t))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=B.hsl.exec(t))return{h:n[1],s:n[2],l:n[3]};if(n=B.hsla.exec(t))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=B.hsv.exec(t))return{h:n[1],s:n[2],v:n[3]};if(n=B.hsva.exec(t))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=B.hex8.exec(t))return{r:R(n[1]),g:R(n[2]),b:R(n[3]),a:D(n[4]),format:i?"name":"hex8"};if(n=B.hex6.exec(t))return{r:R(n[1]),g:R(n[2]),b:R(n[3]),format:i?"name":"hex"};if(n=B.hex4.exec(t))return{r:R(n[1]+""+n[1]),g:R(n[2]+""+n[2]),b:R(n[3]+""+n[3]),a:D(n[4]+""+n[4]),format:i?"name":"hex8"};if(n=B.hex3.exec(t))return{r:R(n[1]+""+n[1]),g:R(n[2]+""+n[2]),b:R(n[3]+""+n[3]),format:i?"name":"hex"};return!1}(n));"object"==typeof n&&(U(n.r)&&U(n.g)&&U(n.b)?(d=n.r,p=n.g,g=n.b,i={r:255*S(d,255),g:255*S(p,255),b:255*S(g,255)},h=!0,f="%"===String(n.r).substr(-1)?"prgb":"rgb"):U(n.h)&&U(n.s)&&U(n.v)?(l=I(n.s),u=I(n.v),i=function(e,r,n){e=6*S(e,360),r=S(r,100),n=S(n,100);var i=t.floor(e),a=e-i,o=n*(1-r),s=n*(1-a*r),l=n*(1-(1-a)*r),u=i%6;return{r:255*[n,s,o,o,l,n][u],g:255*[l,n,n,s,o,o][u],b:255*[o,o,l,n,n,s][u]}}(n.h,l,u),h=!0,f="hsv"):U(n.h)&&U(n.s)&&U(n.l)&&(l=I(n.s),c=I(n.l),i=function(t,e,r){var n,i,a;function o(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=S(t,360),e=S(e,100),r=S(r,100),0===e)n=i=a=r;else{var s=r<.5?r*(1+e):r+e-r*e,l=2*r-s;n=o(l,s,t+1/3),i=o(l,s,t),a=o(l,s,t-1/3)}return{r:255*n,g:255*i,b:255*a}}(n.h,l,c),h=!0,f="hsl"),n.hasOwnProperty("a")&&(s=n.a));var d,p,g;return s=C(s),{ok:h,format:n.format||f,r:a(255,o(i.r,0)),g:a(255,o(i.g,0)),b:a(255,o(i.b,0)),a:s}}(s);this._originalInput=s,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=i(100*this._a)/100,this._format=l.format||c.format,this._gradientType=l.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=c.ok,this._tc_id=n++}function c(t,e,r){t=S(t,255),e=S(e,255),r=S(r,255);var n,i,s=o(t,e,r),l=a(t,e,r),u=(s+l)/2;if(s==l)n=i=0;else{var c=s-l;switch(i=u>.5?c/(2-s-l):c/(s+l),s){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:i,l:u}}function h(t,e,r){t=S(t,255),e=S(e,255),r=S(r,255);var n,i,s=o(t,e,r),l=a(t,e,r),u=s,c=s-l;if(i=0===s?0:c/s,s==l)n=0;else{switch(s){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:i,v:u}}function f(t,e,r,n){var a=[O(i(t).toString(16)),O(i(e).toString(16)),O(i(r).toString(16))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function d(t,e,r,n){return[O(N(n)),O(i(t).toString(16)),O(i(e).toString(16)),O(i(r).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var r=u(t).toHsl();return r.s-=e/100,r.s=P(r.s),u(r)}function g(t,e){e=0===e?0:e||10;var r=u(t).toHsl();return r.s+=e/100,r.s=P(r.s),u(r)}function v(t){return u(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var r=u(t).toHsl();return r.l+=e/100,r.l=P(r.l),u(r)}function y(t,e){e=0===e?0:e||10;var r=u(t).toRgb();return r.r=o(0,a(255,r.r-i(-e/100*255))),r.g=o(0,a(255,r.g-i(-e/100*255))),r.b=o(0,a(255,r.b-i(-e/100*255))),u(r)}function b(t,e){e=0===e?0:e||10;var r=u(t).toHsl();return r.l-=e/100,r.l=P(r.l),u(r)}function x(t,e){var r=u(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,u(r)}function _(t){var e=u(t).toHsl();return e.h=(e.h+180)%360,u(e)}function w(t){var e=u(t).toHsl(),r=e.h;return[u(t),u({h:(r+120)%360,s:e.s,l:e.l}),u({h:(r+240)%360,s:e.s,l:e.l})]}function M(t){var e=u(t).toHsl(),r=e.h;return[u(t),u({h:(r+90)%360,s:e.s,l:e.l}),u({h:(r+180)%360,s:e.s,l:e.l}),u({h:(r+270)%360,s:e.s,l:e.l})]}function A(t){var e=u(t).toHsl(),r=e.h;return[u(t),u({h:(r+72)%360,s:e.s,l:e.l}),u({h:(r+216)%360,s:e.s,l:e.l})]}function T(t,e,r){e=e||6,r=r||30;var n=u(t).toHsl(),i=360/r,a=[u(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(u(n));return a}function k(t,e){e=e||6;for(var r=u(t).toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/e;e--;)o.push(u({h:n,s:i,v:a})),a=(a+s)%1;return o}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,r,n,i=this.toRgb();return e=i.r/255,r=i.g/255,n=i.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=C(t),this._roundA=i(100*this._a)/100,this},toHsv:function(){var t=h(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=h(this._r,this._g,this._b),e=i(360*t.h),r=i(100*t.s),n=i(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=c(this._r,this._g,this._b),e=i(360*t.h),r=i(100*t.s),n=i(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return f(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,a){var o=[O(i(t).toString(16)),O(i(e).toString(16)),O(i(r).toString(16)),O(N(n))];if(a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(100*S(this._r,255))+"%",g:i(100*S(this._g,255))+"%",b:i(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+i(100*S(this._r,255))+"%, "+i(100*S(this._g,255))+"%, "+i(100*S(this._b,255))+"%)":"rgba("+i(100*S(this._r,255))+"%, "+i(100*S(this._g,255))+"%, "+i(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(L[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=u(t);r="#"+d(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},u.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:I(t[n]));t=r}return u(t,e)},u.equals=function(t,e){return!(!t||!e)&&u(t).toRgbString()==u(e).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})},u.mix=function(t,e,r){r=0===r?0:r||50;var n=u(t).toRgb(),i=u(e).toRgb(),a=r/100;return u({r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a})},u.readability=function(e,r){var n=u(e),i=u(r);return(t.max(n.getLuminance(),i.getLuminance())+.05)/(t.min(n.getLuminance(),i.getLuminance())+.05)},u.isReadable=function(t,e,r){var n,i,a=u.readability(t,e);switch(i=!1,(n=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},u.mostReadable=function(t,e,r){var n,i,a,o,s=null,l=0;i=(r=r||{}).includeFallbackColors,a=r.level,o=r.size;for(var c=0;c<e.length;c++)(n=u.readability(t,e[c]))>l&&(l=n,s=u(e[c]));return u.isReadable(t,s,{level:a,size:o})||!i?s:(r.includeFallbackColors=!1,u.mostReadable(t,["#fff","#000"],r))};var E=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=u.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(E);function C(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function S(e,r){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(e);return e=a(r,o(0,parseFloat(e))),n&&(e=parseInt(e*r,10)/100),t.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function P(t){return a(1,o(0,t))}function R(t){return parseInt(t,16)}function O(t){return 1==t.length?"0"+t:""+t}function I(t){return t<=1&&(t=100*t+"%"),t}function N(e){return t.round(255*parseFloat(e)).toString(16)}function D(t){return R(t)/255}var z,F,j,B=(F="[\\s|\\(]+("+(z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",j="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+F),rgba:new RegExp("rgba"+j),hsl:new RegExp("hsl"+F),hsla:new RegExp("hsla"+j),hsv:new RegExp("hsv"+F),hsva:new RegExp("hsva"+j),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function U(t){return!!B.CSS_UNIT.exec(t)}s.exports?s.exports=u:window.tinycolor=u}(Math),s=s.exports;var l={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},u=l.RdBu,c=function(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var r=0;r<t.length;r++){var n=t[r];if(2!==n.length||+n[0]<e||!s(n[1]).isValid())return!1;e=+n[0]}return!0},h=function(t,e){if(e||(e=u),!t)return e;function r(){try{t=l[t]||JSON.parse(t)}catch(r){t=e}}return"string"==typeof t&&(r(),"string"==typeof t&&r()),c(t)?t:e},f={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2},d={},p="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},g="undefined"==typeof DataView?function(){}:DataView;d.isTypedArray=function(t){return p.isView(t)&&!(t instanceof g)},d.isArrayOrTypedArray=function(t){return Array.isArray(t)||d.isTypedArray(t)};var v=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype},m={},y=Array.isArray;function b(t,e,r,n){var i,a,o,s,l,u,c=t[0],h=t.length;if(2===h&&y(c)&&y(t[1])&&0===c.length){if(function(t,e){var r,n;for(r=0;r<t.length;r++){if(null!==(n=t[r])&&"object"==typeof n)return!1;void 0!==n&&(e[r]=n)}return!0}(t[1],c))return c;c.splice(0,c.length)}for(var f=1;f<h;f++)for(a in i=t[f])o=c[a],s=i[a],n&&y(s)?c[a]=s:e&&s&&(v(s)||(l=y(s)))?(l?(l=!1,u=o&&y(o)?o:[]):u=o&&v(o)?o:{},c[a]=b([u,s],e,r,n)):(void 0!==s||r)&&(c[a]=s);return c}m.extendFlat=function(){return b(arguments,!1,!1,!1)},m.extendDeep=function(){return b(arguments,!0,!1,!1)},m.extendDeepAll=function(){return b(arguments,!0,!0,!1)},m.extendDeepNoArrays=function(){return b(arguments,!0,!1,!0)};var x={staticPlot:!1,editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}},_={},w=_={};function M(t,e){if(t.apply)t.apply(t,e);else for(var r=0;r<e.length;r++)t(e[r])}w.log=function(){if(x.logging>1){for(var t=["LOG:"],e=0;e<arguments.length;e++)t.push(arguments[e]);M(console.trace||console.log,t)}},w.warn=function(){if(x.logging>0){for(var t=["WARN:"],e=0;e<arguments.length;e++)t.push(arguments[e]);M(console.trace||console.log,t)}},w.error=function(){if(x.logging>0){for(var t=["ERROR:"],e=0;e<arguments.length;e++)t.push(arguments[e]);M(console.error,t)}};var A=function(){},T=function(t,e){if(e instanceof RegExp){var r,n=e.toString();for(r=0;r<t.length;r++)if(t[r]instanceof RegExp&&t[r].toString()===n)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t},k=function(t){var e=t.editType,r=t.colorEditType;void 0===r&&(r=e);var n={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:r},editType:e};return t.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0),n},E={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:k({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}},L={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",dflt:"",editType:"calc"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:E.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"}},C={defaults:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],defaultLine:"#444",lightLine:"#eee",background:"#fff",borderLine:"#BEC8D9",lightFraction:1e3/11},S=k({editType:"calc"});S.family.dflt='"Open Sans", verdana, arial, sans-serif',S.size.dflt=12,S.color.dflt=C.defaultLine;var P={font:S,title:{valType:"string",editType:"layoutstyle"},titlefont:k({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:C.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:C.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:C.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"}},R={},O=m.extendFlat,I=m.extendDeepAll;function N(t){var e=t.name,r=t.categories,n=t.meta;if(R.modules[e])_.log("Type "+e+" already registered");else{R.subplotsRegistry[t.basePlotModule.name]||function(t){var e=t.name;if(R.subplotsRegistry[e])return void _.log("Plot type "+e+" already registered.");for(var r in j(t),R.subplotsRegistry[e]=t,R.componentsRegistry)V(r,t.name)}(t.basePlotModule);for(var i={},a=0;a<r.length;a++)i[r[a]]=!0,R.allCategories[r[a]]=!0;for(var o in R.modules[e]={_module:t,categories:i},n&&Object.keys(n).length&&(R.modules[e].meta=n),R.allTypes.push(e),R.componentsRegistry)B(o,e);t.layoutAttributes&&O(R.traceLayoutAttributes,t.layoutAttributes)}}function D(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var e=t.name;for(var r in R.componentsRegistry[e]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&T(R.layoutArrayContainers,e),j(t)),R.modules)B(e,r);for(var n in R.subplotsRegistry)V(e,n);for(var i in R.transformsRegistry)U(e,i);t.schema&&t.schema.layout&&I(P,t.schema.layout)}function z(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var e="Transform module "+t.name,r="function"==typeof t.transform,n="function"==typeof t.calcTransform;if(!r&&!n)throw new Error(e+" is missing a *transform* or *calcTransform* method.");for(var i in r&&n&&_.log([e+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),v(t.attributes)||_.log(e+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&_.log(e+" registered without a *supplyDefaults* method."),R.transformsRegistry[t.name]=t,R.componentsRegistry)U(i,t.name)}function F(t){var e=t.name,r=e.split("-")[0],n=t.dictionary,i=t.format,a=n&&Object.keys(n).length,o=i&&Object.keys(i).length,s=R.localeRegistry,l=s[e];if(l||(s[e]=l={}),r!==e){var u=s[r];u||(s[r]=u={}),a&&u.dictionary===l.dictionary&&(u.dictionary=n),o&&u.format===l.format&&(u.format=i)}a&&(l.dictionary=n),o&&(l.format=i)}function j(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var r=0;r<e.length;r++)T(R.layoutArrayRegexes,e[r])}}function B(t,e){var r=R.componentsRegistry[t].schema;if(r&&r.traces){var n=r.traces[e];n&&I(R.modules[e]._module.attributes,n)}}function U(t,e){var r=R.componentsRegistry[t].schema;if(r&&r.transforms){var n=r.transforms[e];n&&I(R.transformsRegistry[e].attributes,n)}}function V(t,e){var r=R.componentsRegistry[t].schema;if(r&&r.subplots){var n=R.subplotsRegistry[e],i=n.layoutAttributes,a="subplot"===n.attr?n.name:n.attr;Array.isArray(a)&&(a=a[0]);var o=r.subplots[a];i&&o&&I(i,o)}}function H(t){return"object"==typeof t&&(t=t.type),t}R.modules={},R.allCategories={},R.allTypes=[],R.subplotsRegistry={},R.transformsRegistry={},R.componentsRegistry={},R.layoutArrayContainers=[],R.layoutArrayRegexes=[],R.traceLayoutAttributes={},R.localeRegistry={},R.apiMethodRegistry={},R.register=function(t){if(!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":N(r);break;case"transform":z(r);break;case"component":D(r);break;case"locale":F(r);break;case"apiMethod":var n=r.name;R.apiMethodRegistry[n]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},R.getModule=function(t){var e=R.modules[H(t)];return!!e&&e._module},R.traceIs=function(t,e){if("various"===(t=H(t)))return!1;var r=R.modules[t];return r||(t&&"area"!==t&&_.log("Unrecognized trace type "+t+"."),r=R.modules[L.type.dflt]),!!r.categories[e]},R.getTransformIndices=function(t,e){for(var r=[],n=t.transforms||[],i=0;i<n.length;i++)n[i].type===e&&r.push(i);return r},R.hasTransform=function(t,e){for(var r=t.transforms||[],n=0;n<r.length;n++)if(r[n].type===e)return!0;return!1},R.getComponentMethod=function(t,e){var r=R.componentsRegistry[t];return r&&r[e]||A},R.call=function(){var t=arguments[0],e=[].slice.call(arguments,1);return R.apiMethodRegistry[t].apply(null,e)};var q=function(t){for(var e,r,n=R.layoutArrayContainers,i=R.layoutArrayRegexes,a=t.split("[")[0],o=0;o<i.length;o++)if((r=t.match(i[o]))&&0===r.index){e=r[0];break}if(e||(e=n[n.indexOf(a)]),!e)return!1;var s=t.substr(e.length);return s?!!(r=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(r[1]),property:r[3]||""}:{array:e,index:"",property:""}},G=d.isArrayOrTypedArray,X=function(t,r){if(e(r))r=String(r);else if("string"!=typeof r||"[-1]"===r.substr(r.length-4))throw"bad property string";for(var n,i,a,o=0,s=r.split(".");o<s.length;){if(n=String(s[o]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])s[o]=n[1];else{if(0!==o)throw"bad property string";s.splice(0,1)}for(i=n[2].substr(1,n[2].length-2).split("]["),a=0;a<i.length;a++)o++,s.splice(o,0,Number(i[a]))}o++}return"object"!=typeof t?function(t,e,r){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:r,obj:t}}(t,r,s):{set:Q(t,s,r),get:function t(e,r){return function(){var n,i,a,o,s,l=e;for(o=0;o<r.length-1;o++){if(-1===(n=r[o])){for(i=!0,a=[],s=0;s<l.length;s++)a[s]=t(l[s],r.slice(o+1))(),a[s]!==a[0]&&(i=!1);return i?a[0]:a}if("number"==typeof n&&!G(l))return;if("object"!=typeof(l=l[n])||null===l)return}if("object"==typeof l&&null!==l&&null!==(a=l[r[o]]))return a}}(t,s),astr:r,parts:s,obj:t}};var W=/(^|\.)((domain|range)(\.[xy])?|args|parallels)$/,Y=/(^|\.)args\[/;function Z(t,e){if(void 0!==(r=t)&&null!==r&&("object"!=typeof r||(G(r)?r.length:Object.keys(r).length))||v(t)&&"]"===e.charAt(e.length-1)||e.match(Y)&&void 0!==t)return!1;var r;if(!G(t))return!0;if(e.match(W))return!0;var n=q(e);return n&&""===n.index}function Q(t,e,r){return function(n){var i,a,o=t,s="",l=[[t,s]],u=Z(n,r);for(a=0;a<e.length-1;a++){if("number"==typeof(i=e[a])&&!G(o))throw"array index but container is not an array";if(-1===i){if(u=!$(o,e.slice(a+1),n,r))break;return}if(!J(o,i,e[a+1],u))break;if("object"!=typeof(o=o[i])||null===o)throw"container is not an object";s=K(s,i),l.push([o,s])}u?(a===e.length-1&&delete o[e[a]],function(t){var e,r,n,i,a,o;for(e=t.length-1;e>=0;e--){if(n=t[e][0],i=t[e][1],o=!1,G(n))for(r=n.length-1;r>=0;r--)Z(n[r],K(i,r))?o?n[r]=void 0:n.pop():o=!0;else if("object"==typeof n&&null!==n)for(a=Object.keys(n),o=!1,r=a.length-1;r>=0;r--)Z(n[a[r]],K(i,a[r]))?delete n[a[r]]:o=!0;if(o)return}}(l)):o[e[a]]=n}}function K(t,r){var n=r;return e(r)?n="["+r+"]":t&&(n="."+r),t+n}function $(t,e,r,n){var i,a=G(r),o=!0,s=r,l=n.replace("-1",0),u=!a&&Z(r,l),c=e[0];for(i=0;i<t.length;i++)l=n.replace("-1",i),a&&(u=Z(s=r[i%r.length],l)),u&&(o=!1),J(t,i,c,u)&&Q(t[i],e,n.replace("-1",i))(s);return o}function J(t,e,r,n){if(void 0===t[e]){if(n)return!1;t[e]="number"==typeof r?[]:{}}return!0}var tt={counter:function(t,e,r){var n=(e||"")+(r?"":"$");return"xy"===t?new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp("^"+t+"([2-9]|[1-9][0-9]+)?"+n)}},et={},rt=(Object.keys(l),tt.counter),nt=f.DESELECTDIM,it=n.wrap180,at=d.isArrayOrTypedArray;et.valObjectMeta={data_array:{coerceFunction:function(t,e,r){at(t)?e.set(t):void 0!==r&&e.set(r)}},enumerated:{coerceFunction:function(t,e,r,n){n.coerceNumber&&(t=+t),-1===n.values.indexOf(t)?e.set(r):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var r=e.values,n=0;n<r.length;n++){var i=String(r[n]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(t))return!0}else if(t===r[n])return!0}return!1}},boolean:{coerceFunction:function(t,e,r){!0===t||!1===t?e.set(t):e.set(r)}},number:{coerceFunction:function(t,r,n,i){!e(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?r.set(n):r.set(+t)}},integer:{coerceFunction:function(t,r,n,i){t%1||!e(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?r.set(n):r.set(+t)}},string:{coerceFunction:function(t,e,r,n){if("string"!=typeof t){var i="number"==typeof t;!0!==n.strict&&i?e.set(String(t)):e.set(r)}else n.noBlank&&!t?e.set(r):e.set(t)}},color:{coerceFunction:function(t,e,r){s(t).isValid()?e.set(t):e.set(r)}},colorlist:{coerceFunction:function(t,e,r){Array.isArray(t)&&t.length&&t.every(function(t){return s(t).isValid()})?e.set(t):e.set(r)}},colorscale:{coerceFunction:function(t,e,r){e.set(h(t,r))}},angle:{coerceFunction:function(t,r,n){"auto"===t?r.set("auto"):e(t)?r.set(it(+t)):r.set(n)}},subplotid:{coerceFunction:function(t,e,r){"string"==typeof t&&rt(r).test(t)?e.set(t):e.set(r)},validateFunction:function(t,e){var r=e.dflt;return t===r||"string"==typeof t&&!!rt(r).test(t)}},flaglist:{coerceFunction:function(t,e,r,n){if("string"==typeof t)if(-1===(n.extras||[]).indexOf(t)){for(var i=t.split("+"),a=0;a<i.length;){var o=i[a];-1===n.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?e.set(i.join("+")):e.set(r)}else e.set(t);else e.set(r)}},any:{coerceFunction:function(t,e,r){void 0===t?e.set(r):e.set(t)}},info_array:{coerceFunction:function(t,e,r,n){function i(t,e,r){var n,i={set:function(t){n=t}};return void 0===r&&(r=e.dflt),et.valObjectMeta[e.valType].coerceFunction(t,i,r,e),n}var a=2===n.dimensions;if(Array.isArray(t)){var o,s,l,u,c=n.items,h=[],f=Array.isArray(c),d=f?c.length:t.length;if(r=Array.isArray(r)?r:[],a)for(o=0;o<d;o++){h[o]=[];var p=Array.isArray(t[o])?t[o]:[];for(l=f?c[o].length:p.length,s=0;s<l;s++)void 0!==(u=i(p[s],f?c[o][s]:c,(r[o]||[])[s]))&&(h[o][s]=u)}else for(o=0;o<d;o++)void 0!==(u=i(t[o],f?c[o]:c,r[o]))&&(h[o]=u);e.set(h)}else e.set(r)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var r=e.items,n=Array.isArray(r),i=2===e.dimensions;if(!e.freeLength&&t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(i){if(!Array.isArray(t[a])||!e.freeLength&&t[a].length!==r[a].length)return!1;for(var o=0;o<t[a].length;o++)if(!et.validate(t[a][o],n?r[a][o]:r))return!1}else if(!et.validate(t[a],n?r[a]:r))return!1;return!0}}},et.coerce=function(t,e,r,n,i){var a=X(r,n).get(),o=X(t,n),s=X(e,n),l=o.get();return void 0===i&&(i=a.dflt),a.arrayOk&&at(l)?(s.set(l),l):(et.valObjectMeta[a.valType].coerceFunction(l,s,i,a),s.get())},et.coerce2=function(t,e,r,n,i){var a=X(t,n),o=et.coerce(t,e,r,n,i),s=a.get();return void 0!==s&&null!==s&&o},et.coerceFont=function(t,e,r){var n={};return r=r||{},n.family=t(e+".family",r.family),n.size=t(e+".size",r.size),n.color=t(e+".color",r.color),n},et.coerceHoverinfo=function(t,e,r){var n,i=e._module.attributes,a=i.hoverinfo?{hoverinfo:i.hoverinfo}:L,o=a.hoverinfo;if(1===r._dataLength){var s="all"===o.dflt?o.flags.slice():o.dflt.split("+");s.splice(s.indexOf("name"),1),n=s.join("+")}return et.coerce(t,e,a,"hoverinfo",n)},et.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var r,n,i=t.marker.opacity;if(void 0!==i)at(i)||t.selected||t.unselected||(r=i,n=nt*i),e("selected.marker.opacity",r),e("unselected.marker.opacity",n)}},et.validate=function(t,e){var r=et.valObjectMeta[e.valType];if(e.arrayOk&&at(t))return!0;if(r.validateFunction)return r.validateFunction(t,e);var n={},i=n,a={set:function(t){i=t}};return r.coerceFunction(t,a,n,e),i!==n};var ot,st,lt=function(t,e){var r=t%e;return r<0?r+e:r},ut={},ct=r.BADNUM,ht=r.ONEDAY,ft=r.ONEHOUR,dt=r.ONEMIN,pt=r.ONESEC,gt=r.EPOCHJD,vt=t.time.format.utc,mt=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,yt=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,bt=(new Date).getFullYear()-70;function xt(t){return t&&R.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function _t(t,e){return String(t+Math.pow(10,e)).substr(1)}ut.dateTick0=function(t,e){return xt(t)?e?R.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:R.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"},ut.dfltRange=function(t){return xt(t)?R.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},ut.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},ut.dateTime2ms=function(t,e){if(ut.isJSDate(t))return(t=Number(t)-t.getTimezoneOffset()*dt)>=ot&&t<=st?t:ct;if("string"!=typeof t&&"number"!=typeof t)return ct;t=String(t);var r=xt(e),n=t.charAt(0);!r||"G"!==n&&"g"!==n||(t=t.substr(1),e="");var i=r&&"chinese"===e.substr(0,7),a=t.match(i?yt:mt);if(!a)return ct;var o=a[1],s=a[3]||"1",l=Number(a[5]||1),u=Number(a[7]||0),c=Number(a[9]||0),h=Number(a[11]||0);if(r){if(2===o.length)return ct;var f;o=Number(o);try{var d=R.getComponentMethod("calendars","getCal")(e);if(i){var p="i"===s.charAt(s.length-1);s=parseInt(s,10),f=d.newDate(o,d.toMonthIndex(o,s,p),l)}else f=d.newDate(o,Number(s),l)}catch(t){return ct}return f?(f.toJD()-gt)*ht+u*ft+c*dt+h*pt:ct}o=2===o.length?(Number(o)+2e3-bt)%100+bt:Number(o),s-=1;var g=new Date(Date.UTC(2e3,s,l,u,c));return g.setUTCFullYear(o),g.getUTCMonth()!==s?ct:g.getUTCDate()!==l?ct:g.getTime()+h*pt},ot=ut.MIN_MS=ut.dateTime2ms("-9999"),st=ut.MAX_MS=ut.dateTime2ms("9999-12-31 23:59:59.9999"),ut.isDateTime=function(t,e){return ut.dateTime2ms(t,e)!==ct};var wt=90*ht,Mt=3*ft,At=5*dt;function Tt(t,e,r,n,i){if((e||r||n||i)&&(t+=" "+_t(e,2)+":"+_t(r,2),(n||i)&&(t+=":"+_t(n,2),i))){for(var a=4;i%10==0;)a-=1,i/=10;t+="."+_t(i,a)}return t}ut.ms2DateTime=function(t,e,r){if("number"!=typeof t||!(t>=ot&&t<=st))return ct;e||(e=0);var n,i,a,o,s,l,u=Math.floor(10*lt(t+.05,1)),c=Math.round(t-u/10);if(xt(r)){var h=Math.floor(c/ht)+gt,f=Math.floor(lt(t,ht));try{n=R.getComponentMethod("calendars","getCal")(r).fromJD(h).formatDate("yyyy-mm-dd")}catch(t){n=vt("G%Y-%m-%d")(new Date(c))}if("-"===n.charAt(0))for(;n.length<11;)n="-0"+n.substr(1);else for(;n.length<10;)n="0"+n;i=e<wt?Math.floor(f/ft):0,a=e<wt?Math.floor(f%ft/dt):0,o=e<Mt?Math.floor(f%dt/pt):0,s=e<At?f%pt*10+u:0}else l=new Date(c),n=vt("%Y-%m-%d")(l),i=e<wt?l.getUTCHours():0,a=e<wt?l.getUTCMinutes():0,o=e<Mt?l.getUTCSeconds():0,s=e<At?10*l.getUTCMilliseconds()+u:0;return Tt(n,i,a,o,s)},ut.ms2DateTimeLocal=function(e){if(!(e>=ot+ht&&e<=st-ht))return ct;var r=Math.floor(10*lt(e+.05,1)),n=new Date(Math.round(e-r/10));return Tt(t.time.format("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+r)},ut.cleanDate=function(t,e,r){if(ut.isJSDate(t)||"number"==typeof t){if(xt(r))return _.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=ut.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!ut.isDateTime(t,r))return _.error("unrecognized date",t),e;return t};var kt=/%\d?f/g;function Et(t,e,r,n){t=t.replace(kt,function(t){var r=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(e+.05));if(xt(n))try{t=R.getComponentMethod("calendars","worldCalFmt")(t,e,n)}catch(t){return"Invalid"}return r(t)(i)}var Lt=[59,59.9,59.99,59.999,59.9999];ut.formatDate=function(t,r,n,i,a,o){if(a=xt(a)&&a,!r)if("y"===n)r=o.year;else if("m"===n)r=o.month;else{if("d"!==n)return function(t,r){var n=lt(t+.05,ht),i=_t(Math.floor(n/ft),2)+":"+_t(lt(Math.floor(n/dt),60),2);if("M"!==r){e(r)||(r=0);var a=(100+Math.min(lt(t/pt,60),Lt[r])).toFixed(r).substr(1);r>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+a}return i}(t,n)+"\n"+Et(o.dayMonthYear,t,i,a);r=o.dayMonth+"\n"+o.year}return Et(r,t,i,a)};var Ct=3*ht;ut.incrementMonth=function(t,e,r){r=xt(r)&&r;var n=lt(t,ht);if(t=Math.round(t-n),r)try{var i=Math.round(t/ht)+gt,a=R.getComponentMethod("calendars","getCal")(r),o=a.fromJD(i);return e%12?a.add(o,e,"m"):a.add(o,e/12,"y"),(o.toJD()-gt)*ht+n}catch(e){_.error("invalid ms "+t+" in calendar "+r)}var s=new Date(t+Ct);return s.setUTCMonth(s.getUTCMonth()+e)+n-Ct},ut.findExactDates=function(t,r){for(var n,i,a=0,o=0,s=0,l=0,u=xt(r)&&R.getComponentMethod("calendars","getCal")(r),c=0;c<t.length;c++)if(i=t[c],e(i)){if(!(i%ht))if(u)try{1===(n=u.fromJD(i/ht+gt)).day()?1===n.month()?a++:o++:s++}catch(t){}else 1===(n=new Date(i)).getUTCDate()?0===n.getUTCMonth()?a++:o++:s++}else l++;s+=o+=a;var h=t.length-l;return{exactYears:a/h,exactMonths:o/h,exactDays:s/h}};function St(t){return!0===t.visible}function Pt(t){return!0===t[0].trace.visible}var Rt,Ot,It,Nt={};function Dt(t,e,r,n,i,a,o,s){var l=r-t,u=i-t,c=o-i,h=n-e,f=a-e,d=s-a,p=l*d-c*h;if(0===p)return null;var g=(u*d-c*f)/p,v=(u*h-l*f)/p;return v<0||v>1||g<0||g>1?null:{x:t+l*g,y:e+h*g}}function zt(t,e,r,n,i){var a=n*t+i*e;if(a<0)return n*n+i*i;if(a>r){var o=n-t,s=i-e;return o*o+s*s}var l=n*e-i*t;return l*l/r}Nt.segmentsIntersect=Dt,Nt.segmentDistance=function(t,e,r,n,i,a,o,s){if(Dt(t,e,r,n,i,a,o,s))return 0;var l=r-t,u=n-e,c=o-i,h=s-a,f=l*l+u*u,d=c*c+h*h,p=Math.min(zt(l,u,f,i-t,a-e),zt(l,u,f,o-t,s-e),zt(c,h,d,t-i,e-a),zt(c,h,d,r-i,n-a));return Math.sqrt(p)},Nt.getTextLocation=function(t,e,r,n){if(t===Ot&&n===It||(Rt={},Ot=t,It=n),Rt[r])return Rt[r];var i=t.getPointAtLength(lt(r-n/2,e)),a=t.getPointAtLength(lt(r+n/2,e)),o=Math.atan((a.y-i.y)/(a.x-i.x)),s=t.getPointAtLength(lt(r,e)),l={x:(4*s.x+i.x+a.x)/6,y:(4*s.y+i.y+a.y)/6,theta:o};return Rt[r]=l,l},Nt.clearLocationCache=function(){Ot=null},Nt.getVisibleSegment=function(t,e,r){var n,i,a=e.left,o=e.right,s=e.top,l=e.bottom,u=0,c=t.getTotalLength(),h=c;function f(e){var r=t.getPointAtLength(e);0===e?n=r:e===c&&(i=r);var u=r.x<a?a-r.x:r.x>o?r.x-o:0,h=r.y<s?s-r.y:r.y>l?r.y-l:0;return Math.sqrt(u*u+h*h)}for(var d=f(u);d;){if((u+=d+r)>h)return;d=f(u)}for(d=f(h);d;){if(u>(h-=d+r))return;d=f(h)}return{min:u,max:h,len:h-u,total:c,isClosed:0===u&&h===c&&Math.abs(n.x-i.x)<.1&&Math.abs(n.y-i.y)<.1}},Nt.findPointOnPath=function(t,e,r,n){for(var i,a,o,s=(n=n||{}).pathLength||t.getTotalLength(),l=n.tolerance||.001,u=n.iterationLimit||30,c=t.getPointAtLength(0)[r]>t.getPointAtLength(s)[r]?-1:1,h=0,f=0,d=s;h<u;){if(i=(f+d)/2,o=(a=t.getPointAtLength(i))[r]-e,Math.abs(o)<l)return a;c*o>0?d=i:f=i,h++}return a};var Ft=function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null===t||void 0===t)throw new Error("DOM element provided is null or undefined");return t},jt=/^\w*$/,Bt={init2dArray:function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=new Array(e);return r},transposeRagged:function(t){var e,r,n=0,i=t.length;for(e=0;e<i;e++)n=Math.max(n,t[e].length);var a=new Array(n);for(e=0;e<n;e++)for(a[e]=new Array(i),r=0;r<i;r++)a[e][r]=t[r][e];return a},dot:function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var r,n,i=t.length;if(t[0].length)for(r=new Array(i),n=0;n<i;n++)r[n]=Bt.dot(t[n],e);else if(e[0].length){var a=Bt.transposeRagged(e);for(r=new Array(a.length),n=0;n<a.length;n++)r[n]=Bt.dot(t,a[n])}else for(r=0,n=0;n<i;n++)r+=t[n]*e[n];return r},translationMatrix:function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},rotationMatrix:function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},rotationXYMatrix:function(t,e,r){return Bt.dot(Bt.dot(Bt.translationMatrix(e,r),Bt.rotationMatrix(t)),Bt.translationMatrix(-e,-r))},apply2DTransform:function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);var r=1===arguments.length?e[0]:[e[0],e[1]];return Bt.dot(t,[r[0],r[1],1]).slice(0,2)}},apply2DTransform2:function(t){var e=Bt.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}}},Ut=[],Vt=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,Ht=/^[^\.\[\]]+$/,qt=d.isArrayOrTypedArray,Gt={};function Xt(t,e){return t<e}function Wt(t,e){return t<=e}function Yt(t,e){return t>e}function Zt(t,e){return t>=e}Gt.findBin=function(t,r,n){if(e(r.start))return n?Math.ceil((t-r.start)/r.size-1e-9)-1:Math.floor((t-r.start)/r.size+1e-9);var i,a,o=0,s=r.length,l=0,u=s>1?(r[s-1]-r[0])/(s-1):1;for(a=u>=0?n?Xt:Wt:n?Zt:Yt,t+=1e-9*u*(n?-1:1)*(u>=0?1:-1);o<s&&l++<100;)a(r[i=Math.floor((o+s)/2)],t)?o=i+1:s=i;return l>90&&_.log("Long binary search..."),o-1},Gt.sorterAsc=function(t,e){return t-e},Gt.sorterDes=function(t,e){return e-t},Gt.distinctVals=function(t){var e=t.slice();e.sort(Gt.sorterAsc);for(var r=e.length-1,n=e[r]-e[0]||1,i=n/(r||1)/1e4,a=[e[0]],o=0;o<r;o++)e[o+1]>e[o]+i&&(n=Math.min(n,e[o+1]-e[o]),a.push(e[o+1]));return{vals:a,minDiff:n}},Gt.roundUp=function(t,e,r){for(var n,i=0,a=e.length-1,o=0,s=r?0:1,l=r?1:0,u=r?Math.ceil:Math.floor;i<a&&o++<100;)e[n=u((i+a)/2)]<=t?i=n+s:a=n-l;return e[i]};var Qt={},Kt=d.isArrayOrTypedArray;Qt.aggNums=function(t,r,n,i){var a,o;if((!i||i>n.length)&&(i=n.length),e(r)||(r=!1),Kt(n[0])){for(o=new Array(i),a=0;a<i;a++)o[a]=Qt.aggNums(t,r,n[a]);n=o}for(a=0;a<i;a++)e(r)?e(n[a])&&(r=t(+r,+n[a])):r=n[a];return r},Qt.len=function(t){return Qt.aggNums(function(t){return t+1},0,t)},Qt.mean=function(t,e){return e||(e=Qt.len(t)),Qt.aggNums(function(t,e){return t+e},0,t)/e},Qt.variance=function(t,r,n){return r||(r=Qt.len(t)),e(n)||(n=Qt.mean(t,r)),Qt.aggNums(function(t,e){return t+Math.pow(e-n,2)},0,t)/r},Qt.stdev=function(t,e,r){return Math.sqrt(Qt.variance(t,e,r))},Qt.interp=function(t,r){if(!e(r))throw"n should be a finite number";if((r=r*t.length-.5)<0)return t[0];if(r>t.length-1)return t[t.length-1];var n=r%1;return n*t[Math.ceil(r)]+(1-n)*t[Math.floor(r)]};var $t={},Jt={};function te(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}$t.throttle=function(t,e,r){var n=Jt[t],i=Date.now();if(!n){for(var a in Jt)Jt[a].ts<i-6e4&&delete Jt[a];n=Jt[t]={ts:0,timer:null}}function o(){r(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}te(n),i>n.ts+e?o():n.timer=setTimeout(function(){o(),n.timer=null},e)},$t.done=function(t){var e=Jt[t];return e&&e.timer?new Promise(function(t){var r=e.onDone;e.onDone=function(){r&&r(),t(),e.onDone=null}}):Promise.resolve()},$t.clear=function(t){if(t)te(Jt[t]),delete Jt[t];else for(var e in Jt)$t.clear(e)};var ee=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(r[0],r[1]))/Math.LN10;return e(n)||(n=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),n},re={},ne=r.FP_SAFE,ie=r.BADNUM,ae=re={};ae.nestedProperty=X,ae.keyedContainer=function(t,e,r,n){var i,a;r=r||"name",n=n||"value";var o={};a=e&&e.length?X(t,e).get():t,e=e||"",a=a||[];var s={};for(i=0;i<a.length;i++)s[a[i][r]]=i;var l=jt.test(n),u={set:function(t,e){var i=null===e?4:0,c=s[t];void 0===c?(i|=3,c=a.length,s[t]=c):e!==(l?a[c][n]:X(a[c],n).get())&&(i|=2);var h=a[c]=a[c]||{};return h[r]=t,l?h[n]=e:X(h,n).set(e),null!==e&&(i&=-5),o[c]=o[c]|i,u},get:function(t){var e=s[t];return void 0===e?void 0:l?a[e][n]:X(a[e],n).get()},rename:function(t,e){var n=s[t];return void 0===n?u:(o[n]=1|o[n],s[e]=n,delete s[t],a[n][r]=e,u)},remove:function(t){var e=s[t];if(void 0===e)return u;var c=a[e];if(Object.keys(c).length>2)return o[e]=2|o[e],u.set(t,null);if(l){for(i=e;i<a.length;i++)o[i]=3|o[i];for(i=e;i<a.length;i++)s[a[i][r]]--;a.splice(e,1),delete s[t]}else X(c,n).set(null),o[e]=6|o[e];return u},constructUpdate:function(){for(var t,i,s={},u=Object.keys(o),c=0;c<u.length;c++)i=u[c],t=e+"["+i+"]",a[i]?(1&o[i]&&(s[t+"."+r]=a[i][r]),2&o[i]&&(s[t+"."+n]=l?4&o[i]?null:a[i][n]:4&o[i]?null:X(a[i],n).get())):s[t]=null;return s}};return u},ae.relativeAttr=function(t,e){for(;e;){var r=t.match(Vt);if(r)t=r[1];else{if(!t.match(Ht))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e},ae.isPlainObject=v,ae.mod=lt,ae.toLogRange=ee,ae.relinkPrivateKeys=function t(e,r){for(var n in r){var i=r[n],a=e[n];if(a!==i)if("_"===n.charAt(0)||"function"==typeof i){if(n in e)continue;e[n]=i}else if(qt(i)&&qt(a)&&v(i[0])){if("customdata"===n||"ids"===n)continue;for(var o=Math.min(i.length,a.length),s=0;s<o;s++)a[s]!==i[s]&&v(i[s])&&v(a[s])&&t(a[s],i[s])}else v(i)&&v(a)&&(t(a,i),Object.keys(a).length||delete e[n])}},ae.ensureArray=function(t,e){return Array.isArray(t)||(t=[]),t.length=e,t},ae.isTypedArray=d.isTypedArray,ae.isArrayOrTypedArray=d.isArrayOrTypedArray,ae.valObjectMeta=et.valObjectMeta,ae.coerce=et.coerce,ae.coerce2=et.coerce2,ae.coerceFont=et.coerceFont,ae.coerceHoverinfo=et.coerceHoverinfo,ae.coerceSelectionMarkerOpacity=et.coerceSelectionMarkerOpacity,ae.validate=et.validate,ae.dateTime2ms=ut.dateTime2ms,ae.isDateTime=ut.isDateTime,ae.ms2DateTime=ut.ms2DateTime,ae.ms2DateTimeLocal=ut.ms2DateTimeLocal,ae.cleanDate=ut.cleanDate,ae.isJSDate=ut.isJSDate,ae.formatDate=ut.formatDate,ae.incrementMonth=ut.incrementMonth,ae.dateTick0=ut.dateTick0,ae.dfltRange=ut.dfltRange,ae.findExactDates=ut.findExactDates,ae.MIN_MS=ut.MIN_MS,ae.MAX_MS=ut.MAX_MS,ae.findBin=Gt.findBin,ae.sorterAsc=Gt.sorterAsc,ae.sorterDes=Gt.sorterDes,ae.distinctVals=Gt.distinctVals,ae.roundUp=Gt.roundUp,ae.aggNums=Qt.aggNums,ae.len=Qt.len,ae.mean=Qt.mean,ae.variance=Qt.variance,ae.stdev=Qt.stdev,ae.interp=Qt.interp,ae.init2dArray=Bt.init2dArray,ae.transposeRagged=Bt.transposeRagged,ae.dot=Bt.dot,ae.translationMatrix=Bt.translationMatrix,ae.rotationMatrix=Bt.rotationMatrix,ae.rotationXYMatrix=Bt.rotationXYMatrix,ae.apply2DTransform=Bt.apply2DTransform,ae.apply2DTransform2=Bt.apply2DTransform2,ae.deg2rad=n.deg2rad,ae.rad2deg=n.rad2deg,ae.wrap360=n.wrap360,ae.wrap180=n.wrap180,ae.segmentsIntersect=Nt.segmentsIntersect,ae.segmentDistance=Nt.segmentDistance,ae.getTextLocation=Nt.getTextLocation,ae.clearLocationCache=Nt.clearLocationCache,ae.getVisibleSegment=Nt.getVisibleSegment,ae.findPointOnPath=Nt.findPointOnPath,ae.extendFlat=m.extendFlat,ae.extendDeep=m.extendDeep,ae.extendDeepAll=m.extendDeepAll,ae.extendDeepNoArrays=m.extendDeepNoArrays,ae.log=_.log,ae.warn=_.warn,ae.error=_.error,ae.counterRegex=tt.counter,ae.throttle=$t.throttle,ae.throttleDone=$t.done,ae.clearThrottle=$t.clear,ae.getGraphDiv=Ft,ae._=function(t,e){for(var r=t._context.locale,n=0;n<2;n++){for(var i=t._context.locales,a=0;a<2;a++){var o=(i[r]||{}).dictionary;if(o){var s=o[e];if(s)return s}i=R.localeRegistry}var l=r.split("-")[0];if(l===r)break;r=l}return e},ae.notifier=function(r,n){if(-1===Ut.indexOf(r)){Ut.push(r);var i=1e3;e(n)?i=n:"long"===n&&(i=3e3);var a=t.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(Ut).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var r=t.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(o)});for(var n=r.append("p"),a=e.split(/<br\s*\/?>/g),s=0;s<a.length;s++)s&&n.append("br"),n.append("span").text(a[s]);r.transition().duration(700).style("opacity",1).transition().delay(i).call(o)})}function o(e){e.duration(700).style("opacity",0).each("end",function(e){var r=Ut.indexOf(e);-1!==r&&Ut.splice(r,1),t.select(this).remove()})}},ae.filterUnique=function(t){for(var e={},r=[],n=0,i=0;i<t.length;i++){var a=t[i];1!==e[a]&&(e[a]=1,r[n++]=a)}return r},ae.filterVisible=function(t){for(var e,r=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?Pt:St),n=[],i=0;i<t.length;i++){var a=t[i];r(a)&&n.push(a)}return n},ae.pushUnique=T,ae.cleanNumber=function(t){return"string"==typeof t&&(t=t.replace(o,"")),e(t)?Number(t):a},ae.ensureNumber=function(t){return e(t)?(t=Number(t))<-ne||t>ne?ie:e(t)?Number(t):ie:ie},ae.noop=A,ae.identity=function(t){return t},ae.swapAttrs=function(t,e,r,n){r||(r="x"),n||(n="y");for(var i=0;i<e.length;i++){var a=e[i],o=ae.nestedProperty(t,a.replace("?",r)),s=ae.nestedProperty(t,a.replace("?",n)),l=o.get();o.set(s.get()),s.set(l)}},ae.raiseToTop=function(t){t.parentNode.appendChild(t)},ae.cancelTransition=function(t){return t.transition().duration(0)},ae.constrain=function(t,e,r){return e>r?Math.max(r,Math.min(e,t)):Math.max(e,Math.min(r,t))},ae.bBoxIntersect=function(t,e,r){return r=r||0,t.left<=e.right+r&&e.left<=t.right+r&&t.top<=e.bottom+r&&e.top<=t.bottom+r},ae.simpleMap=function(t,e,r,n){for(var i=t.length,a=new Array(i),o=0;o<i;o++)a[o]=e(t[o],r,n);return a},ae.randstr=function t(e,r,n){if(n||(n=16),void 0===r&&(r=24),r<=0)return"0";var i,a,o=Math.log(Math.pow(2,r))/Math.log(n),s="";for(i=2;o===1/0;i*=2)o=Math.log(Math.pow(2,r/i))/Math.log(n)*i;var l=o-Math.floor(o);for(i=0;i<Math.floor(o);i++)s=Math.floor(Math.random()*n).toString(n)+s;l&&(a=Math.pow(n,l),s=Math.floor(Math.random()*a).toString(n)+s);var u=parseInt(s,n);return e&&e.indexOf(s)>-1||u!==1/0&&u>=Math.pow(2,r)?t(e,r,n):s},ae.OptionControl=function(t,e){t||(t={}),e||(e="opt");var r={optionList:[],_newoption:function(n){n[e]=t,r[n.name]=n,r.optionList.push(n)}};return r["_"+e]=t,r},ae.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var r,n,i,a,o=t.length,s=2*o,l=2*e-1,u=new Array(l),c=new Array(o);for(r=0;r<l;r++)u[r]=(1-Math.cos(Math.PI*(r+1)/e))/(2*e);for(r=0;r<o;r++){for(a=0,n=0;n<l;n++)(i=r+n+1-e)<-o?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=o&&(i=s-1-i),a+=t[i]*u[n];c[r]=a}return c},ae.syncOrAsync=function(t,e,r){var n;function i(){return ae.syncOrAsync(t,e,r)}for(;t.length;)if((n=(0,t.splice(0,1)[0])(e))&&n.then)return n.then(i).then(void 0,ae.promiseError);return r&&r(e)},ae.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},ae.noneOrAll=function(t,e,r){if(t){var n,i,a=!1,o=!0;for(n=0;n<r.length;n++)void 0!==(i=t[r[n]])&&null!==i?a=!0:o=!1;if(a&&!o)for(n=0;n<r.length;n++)t[r[n]]=e[r[n]]}},ae.mergeArray=function(t,e,r){if(ae.isArrayOrTypedArray(t))for(var n=Math.min(t.length,e.length),i=0;i<n;i++)e[i][r]=t[i]},ae.fillArray=function(t,e,r,n){if(n=n||ae.identity,ae.isArrayOrTypedArray(t))for(var i=0;i<e.length;i++)e[i][r]=n(t[i])},ae.castOption=function(t,e,r,n){n=n||ae.identity;var i=ae.nestedProperty(t,r).get();return ae.isArrayOrTypedArray(i)?Array.isArray(e)&&ae.isArrayOrTypedArray(i[e[0]])?n(i[e[0]][e[1]]):n(i[e]):i},ae.extractOption=function(t,e,r,n){if(r in t)return t[r];var i=ae.nestedProperty(e,n).get();return Array.isArray(i)?void 0:i},ae.tagSelected=function(t,r,n){var i,a,o=r.selectedpoints,s=r._indexToPoints;if(s)for(var l in i={},s)for(var u=s[l],c=0;c<u.length;c++)i[u[c]]=l;function h(e){return void 0!==e&&e<t.length}for(var f=0;f<o.length;f++){var d=o[f];if(e(a=d)&&a>=0&&a%1==0){var p=i?i[d]:d,g=n?n[p]:p;h(g)&&(t[g].selected=1)}}},ae.getTargetArray=function(t,e){var r=e.target;if("string"==typeof r&&r){var n=ae.nestedProperty(t,r).get();return!!Array.isArray(n)&&n}return!!Array.isArray(r)&&r},ae.minExtend=function(t,e){var r={};"object"!=typeof e&&(e={});var n,i,a,o=Object.keys(t);for(n=0;n<o.length;n++)a=t[i=o[n]],"_"!==i.charAt(0)&&"function"!=typeof a&&("module"===i?r[i]=a:Array.isArray(a)?r[i]=a.slice(0,3):r[i]=a&&"object"==typeof a?ae.minExtend(t[i],e[i]):a);for(o=Object.keys(e),n=0;n<o.length;n++)"object"==typeof(a=e[i=o[n]])&&i in r&&"object"==typeof r[i]||(r[i]=a);return r},ae.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},ae.containsAny=function(t,e){for(var r=0;r<e.length;r++)if(-1!==t.indexOf(e[r]))return!0;return!1},ae.isPlotDiv=function(e){var r=t.select(e);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")},ae.removeElement=function(t){var e=t&&t.parentNode;e&&e.removeChild(t)},ae.addStyleRule=function(t,e){if(!ae.styleSheet){var r=document.createElement("style");r.appendChild(document.createTextNode("")),document.head.appendChild(r),ae.styleSheet=r.sheet}var n=ae.styleSheet;n.insertRule?n.insertRule(t+"{"+e+"}",0):n.addRule?n.addRule(t,e,0):ae.warn("addStyleRule failed")},ae.isIE=function(){return void 0!==window.navigator.msSaveBlob},ae.isD3Selection=function(t){return t&&"function"==typeof t.classed},ae.objectFromPath=function(t,e){for(var r,n=t.split("."),i=r={},a=0;a<n.length;a++){var o=n[a],s=null,l=n[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],r=r[o]=[],a===n.length-1?r[s]=e:r[s]={},r=r[s]):(a===n.length-1?r[o]=e:r[o]={},r=r[o])}return i};var oe=/^([^\[\.]+)\.(.+)?/,se=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;ae.expandObjectPaths=function(t){var e,r,n,i,a,o,s;if("object"==typeof t&&!Array.isArray(t))for(r in t)t.hasOwnProperty(r)&&((e=r.match(oe))?(i=t[r],n=e[1],delete t[r],t[n]=ae.extendDeepNoArrays(t[n]||{},ae.objectFromPath(r,ae.expandObjectPaths(i))[n])):(e=r.match(se))?(i=t[r],n=e[1],a=parseInt(e[2]),delete t[r],t[n]=t[n]||[],"."===e[3]?(s=e[4],o=t[n][a]=t[n][a]||{},ae.extendDeepNoArrays(o,ae.objectFromPath(s,ae.expandObjectPaths(i)))):t[n][a]=ae.expandObjectPaths(i)):t[r]=ae.expandObjectPaths(t[r]));return t},ae.numSeparate=function(t,e,r){if(r||(r=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var n=/(\d+)(\d{3})/,i=e.charAt(0),a=e.charAt(1),o=t.split("."),s=o[0],l=o.length>1?i+o[1]:"";if(a&&(o.length>1||s.length>4||r))for(;n.test(s);)s=s.replace(n,"$1"+a+"$2");return s+l};var le=/%{([^\s%{}]*)}/g,ue=/^\w*$/;ae.templateString=function(t,e){var r={};return t.replace(le,function(t,n){return ue.test(n)?e[n]||"":(r[n]=r[n]||ae.nestedProperty(e,n).get,r[n]()||"")})};ae.subplotSort=function(t,e){for(var r=Math.min(t.length,e.length)+1,n=0,i=0,a=0;a<r;a++){var o=t.charCodeAt(a)||0,s=e.charCodeAt(a)||0,l=o>=48&&o<=57,u=s>=48&&s<=57;if(l&&(n=10*n+o-48),u&&(i=10*i+s-48),!l||!u){if(n!==i)return n-i;if(o!==s)return o-s}}return i-n};var ce=2e9;ae.seedPseudoRandom=function(){ce=2e9},ae.pseudoRandom=function(){var t=ce;return ce=(69069*ce+1)%4294967296,Math.abs(ce-t)<429496729?ae.pseudoRandom():ce/4294967296};var he={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var fe in he){var de=fe.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");re.addStyleRule(de,he[fe])}var pe,ge,ve,me={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150},spikeline:{width:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",ascent:850,descent:-150}},ye=pe={};function be(){throw new Error("setTimeout has not been defined")}function xe(){throw new Error("clearTimeout has not been defined")}function _e(t){if(ge===setTimeout)return setTimeout(t,0);if((ge===be||!ge)&&setTimeout)return ge=setTimeout,setTimeout(t,0);try{return ge(t,0)}catch(e){try{return ge.call(null,t,0)}catch(e){return ge.call(this,t,0)}}}!function(){try{ge="function"==typeof setTimeout?setTimeout:be}catch(t){ge=be}try{ve="function"==typeof clearTimeout?clearTimeout:xe}catch(t){ve=xe}}();var we,Me=[],Ae=!1,Te=-1;function ke(){Ae&&we&&(Ae=!1,we.length?Me=we.concat(Me):Te=-1,Me.length&&Ee())}function Ee(){if(!Ae){var t=_e(ke);Ae=!0;for(var e=Me.length;e;){for(we=Me,Me=[];++Te<e;)we&&we[Te].run();Te=-1,e=Me.length}we=null,Ae=!1,function(t){if(ve===clearTimeout)return clearTimeout(t);if((ve===xe||!ve)&&clearTimeout)return ve=clearTimeout,clearTimeout(t);try{ve(t)}catch(e){try{return ve.call(null,t)}catch(e){return ve.call(this,t)}}}(t)}}function Le(t,e){this.fun=t,this.array=e}function Ce(){}ye.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Me.push(new Le(t,e)),1!==Me.length||Ae||_e(Ee)},Le.prototype.run=function(){this.fun.apply(null,this.array)},ye.title="browser",ye.browser=!0,ye.env={},ye.argv=[],ye.version="",ye.versions={},ye.on=Ce,ye.addListener=Ce,ye.once=Ce,ye.off=Ce,ye.removeListener=Ce,ye.removeAllListeners=Ce,ye.emit=Ce,ye.prependListener=Ce,ye.prependOnceListener=Ce,ye.listeners=function(t){return[]},ye.binding=function(t){throw new Error("process.binding is not supported")},ye.cwd=function(){return"/"},ye.chdir=function(t){throw new Error("process.chdir is not supported")},ye.umask=function(){return 0};var Se={exports:{}};(function(t,e){!function(t,e){"object"==typeof Se.exports?Se.exports=e():t.ES6Promise=e()}(this,function(){"use strict";function r(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,a=void 0,o=void 0,s=function(t,e){p[i]=t,p[i+1]=e,2===(i+=2)&&(o?o(g):x())};var l="undefined"!=typeof window?window:void 0,u=l||{},c=u.MutationObserver||u.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<i;t+=2){(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0}i=0}var v,m,y,b,x=void 0;function _(t,e){var r=arguments,n=this,i=new this.constructor(A);void 0===i[M]&&U(i);var a,o=n._state;return o?(a=r[o-1],s(function(){return j(o,i,a,n._result)})):N(n,i,t,e),i}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(A);return P(e,t),e}h?x=function(){return t.nextTick(g)}:c?(m=0,y=new c(g),b=document.createTextNode(""),y.observe(b,{characterData:!0}),x=function(){b.data=m=++m%2}):f?((v=new MessageChannel).port1.onmessage=g,x=function(){return v.port2.postMessage(0)}):x=void 0===l&&"function"==typeof require?function(){try{var t=require("vertx");return a=t.runOnLoop||t.runOnContext,function(){a(g)}}catch(t){return d()}}():d();var M=Math.random().toString(36).substring(16);function A(){}var T=void 0,k=1,E=2,L=new z;function C(t){try{return t.then}catch(t){return L.error=t,L}}function S(t,e,n){e.constructor===t.constructor&&n===_&&e.constructor.resolve===w?function(t,e){e._state===k?O(t,e._result):e._state===E?I(t,e._result):N(e,void 0,function(e){return P(t,e)},function(e){return I(t,e)})}(t,e):n===L?I(t,L.error):void 0===n?O(t,e):r(n)?function(t,e,r){s(function(t){var n=!1,i=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?P(t,r):O(t,r))},function(e){n||(n=!0,I(t,e))},t._label);!n&&i&&(n=!0,I(t,i))},t)}(t,e,n):O(t,e)}function P(t,e){var r;t===e?I(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=e)||"object"==typeof r&&null!==r?S(t,e,C(e)):O(t,e)}function R(t){t._onerror&&t._onerror(t._result),D(t)}function O(t,e){t._state===T&&(t._result=e,t._state=k,0!==t._subscribers.length&&s(D,t))}function I(t,e){t._state===T&&(t._state=E,t._result=e,s(R,t))}function N(t,e,r,n){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+k]=r,i[a+E]=n,0===a&&t._state&&s(D,t)}function D(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,a=t._result,o=0;o<e.length;o+=3)n=e[o],i=e[o+r],n?j(r,n,i,a):i(a);t._subscribers.length=0}}function z(){this.error=null}var F=new z;function j(t,e,n,i){var a=r(n),o=void 0,s=void 0,l=void 0,u=void 0;if(a){if((o=function(t,e){try{return t(e)}catch(t){return F.error=t,F}}(n,i))===F?(u=!0,s=o.error,o=null):l=!0,e===o)return void I(e,new TypeError("A promises callback cannot return that same promise."))}else o=i,l=!0;e._state!==T||(a&&l?P(e,o):u?I(e,s):t===k?O(e,o):t===E&&I(e,o))}var B=0;function U(t){t[M]=B++,t._state=void 0,t._result=void 0,t._subscribers=[]}function V(t,e){this._instanceConstructor=t,this.promise=new t(A),this.promise[M]||U(this.promise),n(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}function H(t){this[M]=B++,this._result=this._state=void 0,this._subscribers=[],A!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof H?function(t,e){try{e(function(e){P(t,e)},function(e){I(t,e)})}catch(e){I(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function q(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===n&&!r.cast)return}t.Promise=H}return V.prototype._enumerate=function(){for(var t=this.length,e=this._input,r=0;this._state===T&&r<t;r++)this._eachEntry(e[r],r)},V.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===w){var i=C(t);if(i===_&&t._state!==T)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===H){var a=new r(A);S(a,t,i),this._willSettleAt(a,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},V.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===T&&(this._remaining--,t===E?I(n,r):this._result[e]=r),0===this._remaining&&O(n,this._result)},V.prototype._willSettleAt=function(t,e){var r=this;N(t,void 0,function(t){return r._settledAt(k,e,t)},function(t){return r._settledAt(E,e,t)})},H.all=function(t){return new V(this,t).promise},H.race=function(t){var e=this;return n(t)?new e(function(r,n){for(var i=t.length,a=0;a<i;a++)e.resolve(t[a]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},H.resolve=w,H.reject=function(t){var e=new this(A);return I(e,t),e},H._setScheduler=function(t){o=t},H._setAsap=function(t){s=t},H._asap=s,H.prototype={constructor:H,then:_,catch:function(t){return this.then(null,t)}},q(),H.polyfill=q,H.Promise=H,H})}).call(this,pe,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),Se=Se.exports;var Pe=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],Re=tt.counter,Oe={idRegex:{x:Re("x"),y:Re("y")},attrRegex:Re("[xy]axis"),xAxisMatch:Re("xaxis"),yAxisMatch:Re("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","maplayer","barlayer","carpetlayer","violinlayer","boxlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}},Ie={_isLinkedToArray:"annotation",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},text:{valType:"string",editType:"calcIfAutorange+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange+arraydraw"},font:k({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:Pe.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:Pe.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},ax:{valType:"any",editType:"calcIfAutorange+arraydraw"},ay:{valType:"any",editType:"calcIfAutorange+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",Oe.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",Oe.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",Oe.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},yref:{valType:"enumerated",values:["paper",Oe.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}},Ne={},De=Ne={};De.defaults=C.defaults;var ze=De.defaultLine=C.defaultLine;De.lightLine=C.lightLine;var Fe=De.background=C.background;function je(t){if(e(t)||"string"!=typeof t)return t;var r=t.trim();if("rgb"!==r.substr(0,3))return t;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return t;var i=n[1].trim().split(/\s*[\s,]\s*/),a="a"===r.charAt(3)&&4===i.length;if(!a&&3!==i.length)return t;for(var o=0;o<i.length;o++){if(!i[o].length)return t;if(i[o]=Number(i[o]),!(i[o]>=0))return t;if(3===o)i[o]>1&&(i[o]=1);else if(i[o]>=1)return t}var s=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return a?"rgba("+s+", "+i[3]+")":"rgb("+s+")"}De.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},De.rgb=function(t){return De.tinyRGB(s(t))},De.opacity=function(t){return t?s(t).getAlpha():0},De.addOpacity=function(t,e){var r=s(t).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+e+")"},De.combine=function(t,e){var r=s(t).toRgb();if(1===r.a)return s(t).toRgbString();var n=s(e||Fe).toRgb(),i=1===n.a?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a},a={r:i.r*(1-r.a)+r.r*r.a,g:i.g*(1-r.a)+r.g*r.a,b:i.b*(1-r.a)+r.b*r.a};return s(a).toRgbString()},De.contrast=function(t,e,r){var n=s(t);return 1!==n.getAlpha()&&(n=s(De.combine(t,Fe))),(n.isDark()?e?n.lighten(e):Fe:r?n.darken(r):ze).toString()},De.stroke=function(t,e){var r=s(e);t.style({stroke:De.tinyRGB(r),"stroke-opacity":r.getAlpha()})},De.fill=function(t,e){var r=s(e);t.style({fill:De.tinyRGB(r),"fill-opacity":r.getAlpha()})},De.clean=function(t){if(t&&"object"==typeof t){var e,r,n,i,a=Object.keys(t);for(e=0;e<a.length;e++)if(i=t[n=a[e]],"color"===n.substr(n.length-5))if(Array.isArray(i))for(r=0;r<i.length;r++)i[r]=je(i[r]);else t[n]=je(i);else if("colorscale"===n.substr(n.length-10)&&Array.isArray(i))for(r=0;r<i.length;r++)Array.isArray(i[r])&&(i[r][1]=je(i[r][1]));else if(Array.isArray(i)){var o=i[0];if(!Array.isArray(o)&&o&&"object"==typeof o)for(r=0;r<i.length;r++)De.clean(i[r])}else i&&"object"==typeof i&&De.clean(i)}};var Be=function(e,r,n){var i,a,o,s,l=e.node(),u=Pe[n.arrowhead||0],c=Pe[n.startarrowhead||0],h=(n.arrowwidth||1)*(n.arrowsize||1),f=(n.arrowwidth||1)*(n.startarrowsize||1),d=r.indexOf("start")>=0,p=r.indexOf("end")>=0,g=u.backoff*h+n.standoff,v=c.backoff*f+n.startstandoff;if("line"===l.nodeName){i={x:+e.attr("x1"),y:+e.attr("y1")},a={x:+e.attr("x2"),y:+e.attr("y2")};var m=i.x-a.x,y=i.y-a.y;if(s=(o=Math.atan2(y,m))+Math.PI,g&&v&&g+v>Math.sqrt(m*m+y*y))return void C();if(g){if(g*g>m*m+y*y)return void C();var b=g*Math.cos(o),x=g*Math.sin(o);a.x+=b,a.y+=x,e.attr({x2:a.x,y2:a.y})}if(v){if(v*v>m*m+y*y)return void C();var _=v*Math.cos(o),w=v*Math.sin(o);i.x-=_,i.y-=w,e.attr({x1:i.x,y1:i.y})}}else if("path"===l.nodeName){var M=l.getTotalLength(),A="";if(M<g+v)return void C();var T=l.getPointAtLength(0),k=l.getPointAtLength(.1);o=Math.atan2(T.y-k.y,T.x-k.x),i=l.getPointAtLength(Math.min(v,M)),A="0px,"+v+"px,";var E=l.getPointAtLength(M),L=l.getPointAtLength(M-.1);s=Math.atan2(E.y-L.y,E.x-L.x),a=l.getPointAtLength(Math.max(0,M-g)),A+=M-(A?v+g:g)+"px,"+M+"px",e.style("stroke-dasharray",A)}function C(){e.style("stroke-dasharray","0px,100px")}function S(r,i,a,o){r.path&&(r.noRotate&&(a=0),t.select(l.parentNode).append("path").attr({class:e.attr("class"),d:r.path,transform:"translate("+i.x+","+i.y+")"+(a?"rotate("+180*a/Math.PI+")":"")+"scale("+o+")"}).style({fill:Ne.rgb(n.arrowcolor),"stroke-width":0}))}d&&S(c,i,o,f),p&&S(u,a,s,h)},Ue={};(function(t){"use strict";var e;e="function"!=typeof t.matchMedia||!t.matchMedia("(hover: none)").matches,Ue=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ve=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}(),He={left:0,top:0},qe=function(t,e,r){e=e||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n=t.clientX||0,i=t.clientY||0,a=(o=e,o===window||o===document||o===document.body?He:o.getBoundingClientRect());var o;return r[0]=n-a.left,r[1]=i-a.top,r};var Ge=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],Xe={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"};function We(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Ye=We;function Ze(t){return"function"==typeof t}function Qe(t){return"object"==typeof t&&null!==t}function Ke(t){return void 0===t}We.EventEmitter=We,We.prototype._events=void 0,We.prototype._maxListeners=void 0,We.defaultMaxListeners=10,We.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},We.prototype.emit=function(t){var e,r,n,i,a,o;if(this._events||(this._events={}),"error"===t&&(!this._events.error||Qe(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var s=new Error('Uncaught, unspecified "error" event. ('+e+")");throw s.context=e,s}if(Ke(r=this._events[t]))return!1;if(Ze(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(Qe(r))for(i=Array.prototype.slice.call(arguments,1),n=(o=r.slice()).length,a=0;a<n;a++)o[a].apply(this,i);return!0},We.prototype.addListener=function(t,e){var r;if(!Ze(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,Ze(e.listener)?e.listener:e),this._events[t]?Qe(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Qe(this._events[t])&&!this._events[t].warned&&(r=Ke(this._maxListeners)?We.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},We.prototype.on=We.prototype.addListener,We.prototype.once=function(t,e){if(!Ze(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},We.prototype.removeListener=function(t,e){var r,n,i,a;if(!Ze(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=(r=this._events[t]).length,n=-1,r===e||Ze(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Qe(r)){for(a=i;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},We.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(Ze(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},We.prototype.listeners=function(t){return this._events&&this._events[t]?Ze(this._events[t])?[this._events[t]]:this._events[t].slice():[]},We.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(Ze(e))return 1;if(e)return e.length}return 0},We.listenerCount=function(t,e){return t.listenerCount(e)};var $e,Je=Ye.EventEmitter,tr={init:function(t){if(t._ev instanceof Je)return t;var e=new Je,r=new Je;return t._ev=e,t._internalEv=r,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=r.on.bind(r),t._internalOnce=r.once.bind(r),t._removeInternalListener=r.removeListener.bind(r),t._removeAllInternalListeners=r.removeAllListeners.bind(r),t.emit=function(n,i){"undefined"!=typeof jQuery&&jQuery(t).trigger(n,i),e.emit(n,i),r.emit(n,i)},t},triggerHandler:function(t,e,r){var n,i;"undefined"!=typeof jQuery&&(n=jQuery(t).triggerHandler(e,r));var a=t._ev;if(!a)return n;var o=a._events[e];if(!o)return n;"function"==typeof o&&(o=[o]);for(var s=o.pop(),l=0;l<o.length;l++)o[l](r);return i=s(r),void 0!==n?n:i},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}},er=$e={};er.wrapped=function(t,e,r){(t=Ft(t))._fullLayout&&$t.clear(t._fullLayout._uid+Xe.HOVERID),er.raw(t,e,r)},er.raw=function(t,e){var r=t._fullLayout,n=t._hoverdata;e||(e={}),e.target&&!1===tr.triggerHandler(t,"plotly_beforehover",e)||(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&n&&t.emit("plotly_unhover",{event:e,points:n}))};var rr={},nr=rr={};function ir(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function ar(t){return qe(t.changedTouches?t.changedTouches[0]:t,document.body)}nr.align=function(t,e,r,n,i){var a=(t-r)/(n-r),o=a+e/(n-r),s=(a+o)/2;return"left"===i||"bottom"===i?a:"center"===i||"middle"===i?s:"right"===i||"top"===i?o:a<2/3-s?a:o>4/3-s?o:s},nr.getCursor=function(t,e,r,n){return t="left"===r?0:"center"===r?1:"right"===r?2:re.constrain(Math.floor(3*t),0,2),e="bottom"===n?0:"middle"===n?1:"top"===n?2:re.constrain(Math.floor(3*e),0,2),Ge[e][t]},nr.unhover=$e.wrapped,nr.unhoverRaw=$e.raw,nr.init=function(t){var e,r,n,i,a,o,s,l,u=t.gd,c=1,h=f.DBLCLICKDELAY,d=t.element;u._mouseDownTime||(u._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=g,Ve?(d._ontouchstart&&d.removeEventListener("touchstart",d._ontouchstart),d._ontouchstart=g,d.addEventListener("touchstart",g,{passive:!1})):d.ontouchstart=g;var p=t.clampFn||function(t,e,r){return Math.abs(t)<r&&(t=0),Math.abs(e)<r&&(e=0),[t,e]};function g(f){f.preventDefault(),u._dragged=!1,u._dragging=!0;var p=ar(f);e=p[0],r=p[1],s=f.target,o=f,l=2===f.buttons||f.ctrlKey,(n=(new Date).getTime())-u._mouseDownTime<h?c+=1:(c=1,u._mouseDownTime=n),t.prepFn&&t.prepFn(f,e,r),Ue&&!l?(a=ir()).style.cursor=window.getComputedStyle(d).cursor:Ue||(a=document,i=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mousemove",v),document.addEventListener("mouseup",m),document.addEventListener("touchmove",v),document.addEventListener("touchend",m)}function v(n){n.preventDefault();var i=ar(n),a=t.minDrag||Oe.MINDRAG,o=p(i[0]-e,i[1]-r,a),s=o[0],c=o[1];(s||c)&&(u._dragged=!0,nr.unhover(u)),u._dragged&&t.moveFn&&!l&&t.moveFn(s,c)}function m(e){if(document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",m),e.preventDefault(),Ue?re.removeElement(a):i&&(a.documentElement.style.cursor=i,i=null),u._dragging){if(u._dragging=!1,(new Date).getTime()-u._mouseDownTime>h&&(c=Math.max(c-1,1)),u._dragged)t.doneFn&&t.doneFn(e);else if(t.clickFn&&t.clickFn(c,o),!l){var r;try{r=new MouseEvent("click",e)}catch(t){var n=ar(e);(r=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,n[0],n[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}s.dispatchEvent(r)}!function(t){t._dragging=!1,t._replotPending&&R.call("plot",t)}(u),u._dragged=!1}else u._dragged=!1}},nr.coverSlip=ir;var or={zauto:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{zmin:void 0,zmax:void 0}},zmin:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},zmax:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},colorscale:{valType:"colorscale",editType:"calc",impliedEdits:{autocolorscale:!1}},autocolorscale:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{colorscale:void 0}},reversescale:{valType:"boolean",dflt:!1,editType:"calc"},showscale:{valType:"boolean",dflt:!0,editType:"calc"}},sr=function(t){for(var e,r=t.length,n=new Array(r),i=r-1,a=0;i>=0;i--,a++)e=t[i],n[a]=[1-e[0],e[1]];return n},lr=function(t,e,r,n){var i,a;r?(i=re.nestedProperty(t,r).get(),a=re.nestedProperty(t._input,r).get()):(i=t,a=t._input);var o=n+"auto",s=n+"min",u=n+"max",c=i[o],h=i[s],f=i[u],d=i.colorscale;!1===c&&void 0!==h||(h=re.aggNums(Math.min,null,e)),!1===c&&void 0!==f||(f=re.aggNums(Math.max,null,e)),h===f&&(h-=.5,f+=.5),i[s]=h,i[u]=f,a[s]=h,a[u]=f,a[o]=!1!==c||void 0===h&&void 0===f,i.autocolorscale&&(d=h*f<0?l.RdBu:h>=0?l.Reds:l.Blues,a.colorscale=d,i.reversescale&&(d=sr(d)),i.colorscale=d)},ur=re.extendFlat,cr=re.isPlainObject,hr={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]},fr={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","margins","layoutstyle","modebar","camera","arraydraw"]},dr=hr.flags.slice().concat(["clearCalc","fullReplot"]),pr=fr.flags.slice().concat("layoutReplot"),gr={traces:hr,layout:fr,traceFlags:function(){return vr(dr)},layoutFlags:function(){return vr(pr)},update:function(t,e){var r=e.editType;if(r&&"none"!==r)for(var n=r.split("+"),i=0;i<n.length;i++)t[n[i]]=!0},overrideAll:mr};function vr(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!1;return e}function mr(t,e,r){var n=ur({},t);for(var i in n){var a=n[i];cr(a)&&(n[i]=yr(a,e,r,i))}return"from-root"===r&&(n.editType=e),n}function yr(t,e,r,n){if(t.valType){var i=ur({},t);if(i.editType=e,Array.isArray(t.items)){i.items=new Array(t.items.length);for(var a=0;a<t.items.length;a++)i.items[a]=yr(t.items[a],e,"from-root")}return i}return mr(t,e,"_"===n.charAt(0)?"nested":"from-root")}var br={dash:{valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},xr=br.dash,_r=m.extendFlat,wr={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:C.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks+margins"},titlefont:k({editType:"ticks+margins"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"plot+margins",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot+margins",impliedEdits:{"^autorange":!1}}],editType:"plot+margins",impliedEdits:{autorange:!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[Oe.idRegex.x.toString(),Oe.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks+margins",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks+margins"},tick0:{valType:"any",editType:"ticks+margins",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks+margins",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks+margins"},ticktext:{valType:"data_array",editType:"ticks+margins"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks+margins"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:C.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks+margins"},automargin:{valType:"boolean",dflt:!1,editType:"ticks+margins"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:_r({},xr,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:k({editType:"ticks+margins"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks+margins"},tickprefix:{valType:"string",dflt:"",editType:"ticks+margins"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},ticksuffix:{valType:"string",dflt:"",editType:"ticks+margins"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks+margins"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks+margins"},tickformat:{valType:"string",dflt:"",editType:"ticks+margins"},tickformatstops:{_isLinkedToArray:"tickformatstop",dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks+margins"},{valType:"any",editType:"ticks+margins"}],editType:"ticks+margins"},value:{valType:"string",dflt:"",editType:"ticks+margins"},editType:"ticks+margins"},hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"layoutstyle"},linecolor:{valType:"color",dflt:C.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:C.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:C.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",Oe.idRegex.x.toString(),Oe.idRegex.y.toString()],editType:"plot+margins"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot+margins"},overlaying:{valType:"enumerated",values:["free",Oe.idRegex.x.toString(),Oe.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot+margins"},{valType:"number",min:0,max:1,editType:"plot+margins"}],dflt:[0,1],editType:"plot+margins"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot+margins"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks+margins"}}},Mr=m.extendFlat,Ar=(0,gr.overrideAll)({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:wr.linecolor,outlinewidth:wr.linewidth,bordercolor:wr.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:wr.tickmode,nticks:wr.nticks,tick0:wr.tick0,dtick:wr.dtick,tickvals:wr.tickvals,ticktext:wr.ticktext,ticks:Mr({},wr.ticks,{dflt:""}),ticklen:wr.ticklen,tickwidth:wr.tickwidth,tickcolor:wr.tickcolor,showticklabels:wr.showticklabels,tickfont:k({}),tickangle:wr.tickangle,tickformat:wr.tickformat,tickformatstops:wr.tickformatstops,tickprefix:wr.tickprefix,showtickprefix:wr.showtickprefix,ticksuffix:wr.ticksuffix,showticksuffix:wr.showticksuffix,separatethousands:wr.separatethousands,exponentformat:wr.exponentformat,showexponent:wr.showexponent,title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root"),Tr=function(t,e,r,n,i){var a=function(t){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(e.every(function(r){return t[r]===t[e[0]]})||1===e.length)return t[e[0]]}(t);if(r("tickprefix")&&r("showtickprefix",a),r("ticksuffix",i.tickSuffixDflt)&&r("showticksuffix",a),r("showticklabels")){var o=i.font||{},s=e.color===t.color?e.color:o.color;if(re.coerceFont(r,"tickfont",{family:o.family,size:o.size,color:s}),r("tickangle"),"category"!==n){var l=r("tickformat");!function(t,e){var r,n,i=t.tickformatstops,a=e.tickformatstops=[];if(!Array.isArray(i))return;function o(t,e){return re.coerce(r,n,wr.tickformatstops,t,e)}for(var s=0;s<i.length;s++)r=i[s],n={},o("dtickrange"),o("value"),a.push(n)}(t,e),l||"date"===n||(r("showexponent",a),r("exponentformat"),r("separatethousands"))}}};var kr=function(t,e,r,n){var i=re.coerce2(t,e,wr,"ticklen"),a=re.coerce2(t,e,wr,"tickwidth"),o=re.coerce2(t,e,wr,"tickcolor",e.color);r("ticks",n.outerTicks||i||a||o?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)},Er=r.ONEDAY,Lr=function(t,r,n,i){var a="auto";"array"!==t.tickmode||"log"!==i&&"date"!==i||(t.tickmode="auto"),Array.isArray(t.tickvals)?a="array":t.dtick&&(a="linear");var o=n("tickmode",a);if("auto"===o)n("nticks");else if("linear"===o){var s="date"===i?Er:1,l=n("dtick",s);if(e(l))r.dtick=l>0?Number(l):s;else if("string"!=typeof l)r.dtick=s;else{var u=l.charAt(0),c=l.substr(1);((c=e(c)?Number(c):0)<=0||!("date"===i&&"M"===u&&c===Math.round(c)||"log"===i&&"L"===u||"log"===i&&"D"===u&&(1===c||2===c)))&&(r.dtick=s)}var h="date"===i?re.dateTick0(r.calendar):0,f=n("tick0",h);"date"===i?r.tick0=re.cleanDate(f,h):e(f)&&"D1"!==l&&"D2"!==l?r.tick0=Number(f):r.tick0=h}else{void 0===n("tickvals")?r.tickmode="auto":n("ticktext")}},Cr=function(t){return void 0!==l[t]||c(t)},Sr=function(t,r,n,i,a){var o,s=a.prefix,l=a.cLetter,u=s.slice(0,s.length-1),c=s?re.nestedProperty(t,u).get()||{}:t,h=s?re.nestedProperty(r,u).get()||{}:r,f=c[l+"min"],d=c[l+"max"],p=c.colorscale;i(s+l+"auto",!(e(f)&&e(d)&&f<d)),i(s+l+"min"),i(s+l+"max"),void 0!==p&&(o=!Cr(p)),i(s+"autocolorscale",o);var g,v,m=i(s+"colorscale");(i(s+"reversescale")&&(h.colorscale=sr(m)),"marker.line."!==s)&&(s&&(v=c,g=re.isPlainObject(v.colorbar)),i(s+"showscale",g)&&function(t,e,r){var n=e.colorbar={},i=t.colorbar||{};function a(t,e){return re.coerce(i,n,Ar,t,e)}a("thickness","fraction"===a("thicknessmode")?30/(r.width-r.margin.l-r.margin.r):30),a("len","fraction"===a("lenmode")?1:r.height-r.margin.t-r.margin.b),a("x"),a("xanchor"),a("xpad"),a("y"),a("yanchor"),a("ypad"),re.noneOrAll(i,n,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor"),Lr(i,n,a,"linear");var o={outerTicks:!1,font:r.font};Tr(i,n,a,"linear",o),kr(i,n,a,"linear"),a("title",r._dfltTitle.colorbar),re.coerceFont(a,"titlefont",r.font),a("titleside")}(c,h,n))},Pr=function(t,r){var n=r?re.nestedProperty(t,r).get()||{}:t,i=n.color,a=!1;if(re.isArrayOrTypedArray(i))for(var o=0;o<i.length;o++)if(e(i[o])){a=!0;break}return re.isPlainObject(n)&&(a||!0===n.showscale||e(n.cmin)&&e(n.cmax)||Cr(n.colorscale)||re.isPlainObject(n.colorbar))};function Rr(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return s(e).toRgbString()}var Or={};Or.scales=l,Or.defaultScale=u,Or.attributes=or,Or.handleDefaults=Sr,Or.calc=lr,Or.hasColorscale=Pr,Or.isValidScale=Cr,Or.getScale=h,Or.flipScale=sr,Or.extractScale=function(t,e,r){for(var n=t.length,i=new Array(n),a=new Array(n),o=0;o<n;o++){var s=t[o];i[o]=e+s[0]*(r-e),a[o]=s[1]}return{domain:i,range:a}},Or.makeColorScaleFunc=function(r,n){n=n||{};for(var i=r.domain,a=r.range,o=a.length,l=new Array(o),u=0;u<o;u++){var c=s(a[u]).toRgb();l[u]=[c.r,c.g,c.b,c.a]}var h,f=t.scale.linear().domain(i).range(l).clamp(!0),d=n.noNumericCheck,p=n.returnArray;return(h=d&&p?f:d?function(t){return Rr(f(t))}:p?function(t){return e(t)?f(t):s(t).isValid()?t:Ne.defaultLine}:function(t){return e(t)?Rr(f(t)):s(t).isValid()?t:Ne.defaultLine}).domain=f.domain,h.range=function(){return a},h};var Ir={circle:{n:0,f:function(e){var r=t.round(e,2);return"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z"}},square:{n:1,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z"}},diamond:{n:2,f:function(e){var r=t.round(1.3*e,2);return"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"Z"}},cross:{n:3,f:function(e){var r=t.round(.4*e,2),n=t.round(1.2*e,2);return"M"+n+","+r+"H"+r+"V"+n+"H-"+r+"V"+r+"H-"+n+"V-"+r+"H-"+r+"V-"+n+"H"+r+"V-"+r+"H"+n+"Z"}},x:{n:4,f:function(e){var r=t.round(.8*e/Math.sqrt(2),2),n="l"+r+","+r,i="l"+r+",-"+r,a="l-"+r+",-"+r,o="l-"+r+","+r;return"M0,"+r+n+i+a+i+a+o+a+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(e){var r=t.round(2*e/Math.sqrt(3),2);return"M-"+r+","+t.round(e/2,2)+"H"+r+"L0,-"+t.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var r=t.round(2*e/Math.sqrt(3),2);return"M-"+r+",-"+t.round(e/2,2)+"H"+r+"L0,"+t.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var r=t.round(2*e/Math.sqrt(3),2);return"M"+t.round(e/2,2)+",-"+r+"V"+r+"L-"+t.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var r=t.round(2*e/Math.sqrt(3),2);return"M-"+t.round(e/2,2)+",-"+r+"V"+r+"L"+t.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var r=t.round(.6*e,2),n=t.round(1.2*e,2);return"M-"+n+",-"+r+"H"+r+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var r=t.round(.6*e,2),n=t.round(1.2*e,2);return"M"+r+",-"+n+"V"+r+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var r=t.round(.6*e,2),n=t.round(1.2*e,2);return"M"+n+","+r+"H-"+r+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var r=t.round(.6*e,2),n=t.round(1.2*e,2);return"M-"+r+","+n+"V-"+r+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var r=t.round(.951*e,2),n=t.round(.588*e,2),i=t.round(-e,2),a=t.round(-.309*e,2);return"M"+r+","+a+"L"+n+","+t.round(.809*e,2)+"H-"+n+"L-"+r+","+a+"L0,"+i+"Z"}},hexagon:{n:14,f:function(e){var r=t.round(e,2),n=t.round(e/2,2),i=t.round(e*Math.sqrt(3)/2,2);return"M"+i+",-"+n+"V"+n+"L0,"+r+"L-"+i+","+n+"V-"+n+"L0,-"+r+"Z"}},hexagon2:{n:15,f:function(e){var r=t.round(e,2),n=t.round(e/2,2),i=t.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+i+"H"+n+"L"+r+",0L"+n+",-"+i+"H-"+n+"L-"+r+",0Z"}},octagon:{n:16,f:function(e){var r=t.round(.924*e,2),n=t.round(.383*e,2);return"M-"+n+",-"+r+"H"+n+"L"+r+",-"+n+"V"+n+"L"+n+","+r+"H-"+n+"L-"+r+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var r=1.4*e,n=t.round(.225*r,2),i=t.round(.951*r,2),a=t.round(.363*r,2),o=t.round(.588*r,2),s=t.round(-r,2),l=t.round(-.309*r,2),u=t.round(.118*r,2),c=t.round(.809*r,2);return"M"+n+","+l+"H"+i+"L"+a+","+u+"L"+o+","+c+"L0,"+t.round(.382*r,2)+"L-"+o+","+c+"L-"+a+","+u+"L-"+i+","+l+"H-"+n+"L0,"+s+"Z"}},hexagram:{n:18,f:function(e){var r=t.round(.66*e,2),n=t.round(.38*e,2),i=t.round(.76*e,2);return"M-"+i+",0l-"+n+",-"+r+"h"+i+"l"+n+",-"+r+"l"+n+","+r+"h"+i+"l-"+n+","+r+"l"+n+","+r+"h-"+i+"l-"+n+","+r+"l-"+n+",-"+r+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(e){var r=t.round(e*Math.sqrt(3)*.8,2),n=t.round(.8*e,2),i=t.round(1.6*e,2),a=t.round(4*e,2),o="A "+a+","+a+" 0 0 1 ";return"M-"+r+","+n+o+r+","+n+o+"0,-"+i+o+"-"+r+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var r=t.round(e*Math.sqrt(3)*.8,2),n=t.round(.8*e,2),i=t.round(1.6*e,2),a=t.round(4*e,2),o="A "+a+","+a+" 0 0 1 ";return"M"+r+",-"+n+o+"-"+r+",-"+n+o+"0,"+i+o+r+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var r=t.round(1.1*e,2),n=t.round(2*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+r+",-"+r+i+"-"+r+","+r+i+r+","+r+i+r+",-"+r+i+"-"+r+",-"+r+"Z"}},"star-diamond":{n:22,f:function(e){var r=t.round(1.4*e,2),n=t.round(1.9*e,2),i="A "+n+","+n+" 0 0 1 ";return"M-"+r+",0"+i+"0,"+r+i+r+",0"+i+"0,-"+r+i+"-"+r+",0Z"}},"diamond-tall":{n:23,f:function(e){var r=t.round(.7*e,2),n=t.round(1.4*e,2);return"M0,"+n+"L"+r+",0L0,-"+n+"L-"+r+",0Z"}},"diamond-wide":{n:24,f:function(e){var r=t.round(1.4*e,2),n=t.round(.7*e,2);return"M0,"+n+"L"+r+",0L0,-"+n+"L-"+r+",0Z"}},hourglass:{n:25,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"H-"+r+"L"+r+",-"+r+"H-"+r+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"V-"+r+"L-"+r+","+r+"V-"+r+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var r=t.round(e,2);return"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var r=t.round(e,2),n=t.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var r=t.round(e,2);return"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var r=t.round(1.3*e,2);return"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM0,-"+r+"V"+r+"M-"+r+",0H"+r},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var r=t.round(1.3*e,2),n=t.round(.65*e,2);return"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var r=t.round(1.4*e,2);return"M0,"+r+"V-"+r+"M"+r+",0H-"+r},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var r=t.round(1.2*e,2),n=t.round(.85*e,2);return"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var r=t.round(e/2,2),n=t.round(e,2);return"M"+r+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+r+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var r=t.round(1.2*e,2),n=t.round(1.6*e,2),i=t.round(.8*e,2);return"M-"+r+","+i+"L0,0M"+r+","+i+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var r=t.round(1.2*e,2),n=t.round(1.6*e,2),i=t.round(.8*e,2);return"M-"+r+",-"+i+"L0,0M"+r+",-"+i+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var r=t.round(1.2*e,2),n=t.round(1.6*e,2),i=t.round(.8*e,2);return"M"+i+","+r+"L0,0M"+i+",-"+r+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var r=t.round(1.2*e,2),n=t.round(1.6*e,2),i=t.round(.8*e,2);return"M-"+i+","+r+"L0,0M-"+i+",-"+r+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){var r=t.round(1.4*e,2);return"M"+r+",0H-"+r},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){var r=t.round(1.4*e,2);return"M0,"+r+"V-"+r},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){var r=t.round(e,2);return"M"+r+",-"+r+"L-"+r+","+r},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"L-"+r+",-"+r},needLine:!0,noDot:!0,noFill:!0}},Nr={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}},Dr={xmlns:"http://www.w3.org/2000/xmlns/",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};Dr.svgAttrs={xmlns:Dr.svg,"xmlns:xlink":Dr.xlink};var zr={entityToUnicode:{mu:"\u03bc","#956":"\u03bc",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:"\xa0","#160":"\xa0",times:"\xd7","#215":"\xd7",plusmn:"\xb1","#177":"\xb1",deg:"\xb0","#176":"\xb0"}},Fr={},jr=Nr.LINE_SPACING;function Br(t,e){return t.node().getBoundingClientRect()[e]}var Ur=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;Fr.convertToTspans=function(e,r,n){var i=e.text(),a=!e.attr("data-notex")&&"undefined"!=typeof MathJax&&i.match(Ur),o=t.select(e.node().parentNode);if(!o.empty()){var s=e.attr("class")?e.attr("class").split(" ")[0]:"text";return s+="-math",o.selectAll("svg."+s).remove(),o.selectAll("g."+s+"-group").remove(),e.style("display",null).attr({"data-unformatted":i,"data-math":"N"}),a?(r&&r._promises||[]).push(new Promise(function(r){e.style("display","none");var u=parseInt(e.node().style.fontSize,10),c={fontSize:u};!function(e,r,n){var i="math-output-"+re.randstr([],64),a=t.select("body").append("div").attr({id:i}).style({visibility:"hidden",position:"absolute"}).style({"font-size":r.fontSize+"px"}).text((o=e,o.replace(Vr,"\\lt ").replace(Hr,"\\gt ")));var o;MathJax.Hub.Queue(["Typeset",MathJax.Hub,a.node()],function(){var r=t.select("body").select("#MathJax_SVG_glyphs");if(a.select(".MathJax_SVG").empty()||!a.select("svg").node())re.log("There was an error in the tex syntax.",e),n();else{var i=a.select("svg").node().getBoundingClientRect();n(a.select(".MathJax_SVG"),r,i)}a.remove()})}(a[2],c,function(t,a,c){o.selectAll("svg."+s).remove(),o.selectAll("g."+s+"-group").remove();var h=t&&t.select("svg");if(!h||!h.node())return l(),void r();var f=o.append("g").classed(s+"-group",!0).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});f.node().appendChild(h.node()),a&&a.node()&&h.node().insertBefore(a.node().cloneNode(!0),h.node().firstChild),h.attr({class:s,height:c.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var d=e.node().style.fill||"black";h.select("g").attr({fill:d,stroke:d});var p=Br(h,"width"),g=Br(h,"height"),v=+e.attr("x")-p*{start:0,middle:.5,end:1}[e.attr("text-anchor")||"start"],m=-(u||Br(e,"height"))/4;"y"===s[0]?(f.attr({transform:"rotate("+[-90,+e.attr("x"),+e.attr("y")]+") translate("+[-p/2,m-g/2]+")"}),h.attr({x:+e.attr("x"),y:+e.attr("y")})):"l"===s[0]?h.attr({x:e.attr("x"),y:m-g/2}):"a"===s[0]?h.attr({x:0,y:m}):h.attr({x:v,y:+e.attr("y")+m-g/2}),n&&n.call(e,f),r(f)})})):l(),e}function l(){o.empty()||(s=e.attr("class")+"-math",o.select("svg."+s).remove()),e.text("").style("white-space","pre"),function(e,r){r=(n=r,function(t,e){if(!t)return"";for(var r=0;r<e.length;r++){var n=e[r];t=t.replace(n.regExp,n.sub)}return t}(n,Qr)).replace(Kr," ");var n;var i,a=!1,o=[],s=-1;function l(){s++;var r=document.createElementNS(Dr.svg,"tspan");t.select(r).attr({class:"line",dy:s*jr+"em"}),e.appendChild(r),i=r;var n=o;if(o=[{node:r}],n.length>1)for(var a=1;a<n.length;a++)u(n[a])}function u(e){var r,n=e.type,a={};if("a"===n){r="a";var s=e.target,l=e.href,u=e.popup;l&&(a={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":l},u&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else r="tspan";e.style&&(a.style=e.style);var h=document.createElementNS(Dr.svg,r);if("sup"===n||"sub"===n){c(i,Wr),i.appendChild(h);var f=document.createElementNS(Dr.svg,"tspan");c(f,Wr),t.select(f).attr("dy",Xr[n]),a.dy=Gr[n],i.appendChild(h),i.appendChild(f)}else i.appendChild(h);t.select(h).attr(a),i=e.node=h,o.push(e)}function c(t,e){t.appendChild(document.createTextNode(e))}function h(t){if(1!==o.length){var e=o.pop();t!==e.type&&re.log("Start tag <"+e.type+"> doesnt match end tag <"+t+">. Pretending it did match.",r),i=o[o.length-1].node}else re.log("Ignoring unexpected end tag </"+t+">.",r)}tn.test(r)?l():(i=e,o=[{node:e}]);for(var f=r.split($r),d=0;d<f.length;d++){var p=f[d],g=p.match(Jr),v=g&&g[2].toLowerCase(),m=qr[v];if("br"===v)l();else if(void 0===m)c(i,p);else if(g[1])h(v);else{var y=g[4],b={type:v},x=on(y,en);if(x?(x=x.replace(sn,"$1 fill:"),m&&(x+=";"+m)):m&&(x=m),x&&(b.style=x),"a"===v){a=!0;var _=on(y,rn);if(_){var w=document.createElement("a");w.href=_,-1!==Yr.indexOf(w.protocol)&&(b.href=encodeURI(_),b.target=on(y,nn)||"_blank",b.popup=on(y,an))}}u(b)}}return a}(e.node(),i)&&e.style("pointer-events","all"),Fr.positionText(e),n&&n.call(e)}};var Vr=/(<|&lt;|&#60;)/g,Hr=/(>|&gt;|&#62;)/g;var qr={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},Gr={sub:"0.3em",sup:"-0.6em"},Xr={sub:"-0.21em",sup:"0.42em"},Wr="\u200b",Yr=["http:","https:","mailto:","",void 0,":"],Zr=new RegExp("</?("+Object.keys(qr).join("|")+")( [^>]*)?/?>","g"),Qr=Object.keys(zr.entityToUnicode).map(function(t){return{regExp:new RegExp("&"+t+";","g"),sub:zr.entityToUnicode[t]}}),Kr=/(\r\n?|\n)/g,$r=/(<[^<>]*>)/,Jr=/<(\/?)([^ >]*)(\s+(.*))?>/i,tn=/<br(\s+.*)?>/i,en=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,rn=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,nn=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,an=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function on(t,e){if(!t)return null;var r=t.match(e);return r&&(r[3]||r[4])}var sn=/(^|;)\s*color:/;function ln(t,e,r){var n,i,a,o=r.horizontalAlign,s=r.verticalAlign||"top",l=t.node().getBoundingClientRect(),u=e.node().getBoundingClientRect();return i="bottom"===s?function(){return l.bottom-n.height}:"middle"===s?function(){return l.top+(l.height-n.height)/2}:function(){return l.top},a="right"===o?function(){return l.right-n.width}:"center"===o?function(){return l.left+(l.width-n.width)/2}:function(){return l.left},function(){return n=this.node().getBoundingClientRect(),this.style({top:i()-u.top+"px",left:a()-u.left+"px","z-index":1e3}),this}}Fr.plainText=function(t){return(t||"").replace(Zr," ")},Fr.lineCount=function(t){return t.selectAll("tspan.line").size()||1},Fr.positionText=function(e,r,n){return e.each(function(){var e=t.select(this);function i(t,r){return void 0===r?null===(r=e.attr(t))&&(e.attr(t,0),r=0):e.attr(t,r),r}var a=i("x",r),o=i("y",n);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:a,y:o})})},Fr.makeEditable=function(e,r){var n=r.gd,i=r.delegate,a=t.dispatch("edit","input","cancel"),o=i||e;if(e.style({"pointer-events":i?"none":"all"}),1!==e.size())throw new Error("boo");function s(){var i,s,u,c;i=t.select(n).select(".svg-container"),s=i.append("div"),u=e.node().style,c=parseFloat(u.fontSize||12),s.classed("plugin-editable editable",!0).style({position:"absolute","font-family":u.fontFamily||"Arial","font-size":c,color:r.fill||u.fill||"black",opacity:1,"background-color":r.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(r.text||e.attr("data-unformatted")).call(ln(e,i,r)).on("blur",function(){n._editing=!1,e.text(this.textContent).style({opacity:1});var r,i=t.select(this).attr("class");(r=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&t.select(e.node().parentNode).select(r).style({opacity:0});var o=this.textContent;t.select(this).transition().duration(0).remove(),t.select(document).on("mouseup",null),a.edit.call(e,o)}).on("focus",function(){var e=this;n._editing=!0,t.select(document).on("mouseup",function(){if(t.event.target===e)return!1;document.activeElement===s.node()&&s.node().blur()})}).on("keyup",function(){27===t.event.which?(n._editing=!1,e.style({opacity:1}),t.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),a.cancel.call(e,this.textContent)):(a.input.call(e,this.textContent),t.select(this).call(ln(e,i,r)))}).on("keydown",function(){13===t.event.which&&this.blur()}).call(l),e.style({opacity:0});var h,f=o.attr("class");(h=f?"."+f.split(" ")[0]+"-math-group":"[class*=-math-group]")&&t.select(e.node().parentNode).select(h).style({opacity:0})}function l(t){var e=t.node(),r=document.createRange();r.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(r),e.focus()}return r.immediate?s():o.on("click",s),t.rebind(e,a,"on")};var un=function(t){var r=t.marker,n=r.sizeref||1,i=r.sizemin||0,a="area"===r.sizemode?function(t){return Math.sqrt(t/n)}:function(t){return t/n};return function(t){var r=a(t/2);return e(r)&&r>0?Math.max(r,i):0}},cn={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("markers")},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return re.isPlainObject(t.marker)&&re.isArrayOrTypedArray(t.marker.size)}},hn={},fn=Nr.LINE_SPACING,dn=f.DESELECTDIM,pn=hn={};pn.font=function(t,e,r,n){re.isPlainObject(e)&&(n=e.color,r=e.size,e=e.family),e&&t.style("font-family",e),r+1&&t.style("font-size",r+"px"),n&&t.call(Ne.fill,n)},pn.setPosition=function(t,e,r){t.attr("x",e).attr("y",r)},pn.setSize=function(t,e,r){t.attr("width",e).attr("height",r)},pn.setRect=function(t,e,r,n,i){t.call(pn.setPosition,e,r).call(pn.setSize,n,i)},pn.translatePoint=function(t,r,n,i){var a=n.c2p(t.x),o=i.c2p(t.y);return!!(e(a)&&e(o)&&r.node())&&("text"===r.node().nodeName?r.attr("x",a).attr("y",o):r.attr("transform","translate("+a+","+o+")"),!0)},pn.translatePoints=function(e,r,n){e.each(function(e){var i=t.select(this);pn.translatePoint(e,i,r,n)})},pn.hideOutsideRangePoint=function(t,e,r,n,i,a){e.attr("display",r.isPtWithinRange(t,i)&&n.isPtWithinRange(t,a)?null:"none")},pn.hideOutsideRangePoints=function(e,r,n){if(r._hasClipOnAxisFalse){n=n||".point,.textpoint";var i=r.xaxis,a=r.yaxis;e.each(function(r){var o=r[0].trace,s=o.xcalendar,l=o.ycalendar;e.selectAll(n).each(function(e){pn.hideOutsideRangePoint(e,t.select(this),i,a,s,l)})})}},pn.crispRound=function(t,r,n){return r&&e(r)?t._context.staticPlot?r:r<1?1:Math.round(r):n||0},pn.singleLineStyle=function(t,e,r,n,i){e.style("fill","none");var a=(((t||[])[0]||{}).trace||{}).line||{},o=r||a.width||0,s=i||a.dash||"";Ne.stroke(e,n||a.color),pn.dashLine(e,s,o)},pn.lineGroupStyle=function(e,r,n,i){e.style("fill","none").each(function(e){var a=(((e||[])[0]||{}).trace||{}).line||{},o=r||a.width||0,s=i||a.dash||"";t.select(this).call(Ne.stroke,n||a.color).call(pn.dashLine,s,o)})},pn.dashLine=function(t,e,r){r=+r||0,e=pn.dashStyle(e,r),t.style({"stroke-dasharray":e,"stroke-width":r+"px"})},pn.dashStyle=function(t,e){e=+e||1;var r=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=r+"px,"+r+"px":"dash"===t?t=3*r+"px,"+3*r+"px":"longdash"===t?t=5*r+"px,"+5*r+"px":"dashdot"===t?t=3*r+"px,"+r+"px,"+r+"px,"+r+"px":"longdashdot"===t&&(t=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),t},pn.singleFillStyle=function(e){var r=(((t.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;r&&e.call(Ne.fill,r)},pn.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(r){var n=t.select(this);try{n.call(Ne.fill,r[0].trace.fillcolor)}catch(t){re.error(t,e),n.remove()}})},pn.symbolNames=[],pn.symbolFuncs=[],pn.symbolNeedLines={},pn.symbolNoDot={},pn.symbolNoFill={},pn.symbolList=[],Object.keys(Ir).forEach(function(t){var e=Ir[t];pn.symbolList=pn.symbolList.concat([e.n,t,e.n+100,t+"-open"]),pn.symbolNames[e.n]=t,pn.symbolFuncs[e.n]=e.f,e.needLine&&(pn.symbolNeedLines[e.n]=!0),e.noDot?pn.symbolNoDot[e.n]=!0:pn.symbolList=pn.symbolList.concat([e.n+200,t+"-dot",e.n+300,t+"-open-dot"]),e.noFill&&(pn.symbolNoFill[e.n]=!0)});var gn=pn.symbolNames.length,vn="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function mn(t,e){var r=t%100;return pn.symbolFuncs[r](e)+(t>=200?vn:"")}pn.symbolNumber=function(t){if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=pn.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=gn||t>=400?0:Math.floor(Math.max(t,0))};var yn={x1:1,x2:0,y1:0,y2:0},bn={x1:0,x2:0,y1:1,y2:0};pn.gradient=function(e,r,n,i,a,o){var l=r._fullLayout._defs.select(".gradients").selectAll("#"+n).data([i+a+o],re.identity);l.exit().remove(),l.enter().append("radial"===i?"radialGradient":"linearGradient").each(function(){var e=t.select(this);"horizontal"===i?e.attr(yn):"vertical"===i&&e.attr(bn),e.attr("id",n);var r=s(a),l=s(o);e.append("stop").attr({offset:"0%","stop-color":Ne.tinyRGB(l),"stop-opacity":l.getAlpha()}),e.append("stop").attr({offset:"100%","stop-color":Ne.tinyRGB(r),"stop-opacity":r.getAlpha()})}),e.style({fill:"url(#"+n+")","fill-opacity":null})},pn.initGradients=function(t){var e=t._fullLayout._defs.selectAll(".gradients").data([0]);e.enter().append("g").classed("gradients",!0),e.selectAll("linearGradient,radialGradient").remove()},pn.singlePointStyle=function(t,e,r,n,i,a){var o=r.marker;!function(t,e,r,n,i,a,o,s){if(R.traceIs(r,"symbols")){var l=un(r);e.attr("d",function(t){var e;e="various"===t.ms||"various"===a.size?3:cn.isBubble(r)?l(t.ms):(a.size||6)/2,t.mrc=e;var n=pn.symbolNumber(t.mx||a.symbol)||0;return t.om=n%200>=100,mn(n,e)})}e.style("opacity",function(t){return(t.mo+1||a.opacity+1)-1});var u,c,h,f=!1;if(t.so?(h=o.outlierwidth,c=o.outliercolor,u=a.outliercolor):(h=(t.mlw+1||o.width+1||(t.trace?t.trace.marker.line.width:0)+1)-1,c="mlc"in t?t.mlcc=i(t.mlc):re.isArrayOrTypedArray(o.color)?Ne.defaultLine:o.color,re.isArrayOrTypedArray(a.color)&&(u=Ne.defaultLine,f=!0),u="mc"in t?t.mcc=n(t.mc):a.color||"rgba(0,0,0,0)"),t.om)e.call(Ne.stroke,u).style({"stroke-width":(h||1)+"px",fill:"none"});else{e.style("stroke-width",h+"px");var d=a.gradient,p=t.mgt;if(p?f=!0:p=d&&d.type,p&&"none"!==p){var g=t.mgc;g?f=!0:g=d.color;var v="g"+s._fullLayout._uid+"-"+r.uid;f&&(v+="-"+t.i),e.call(pn.gradient,s,v,p,u,g)}else e.call(Ne.fill,u);h&&e.call(Ne.stroke,c)}}(t,e,r,n,i,o,o.line,a)},pn.pointStyle=function(e,r,n){if(e.size()){var i=r.marker,a=pn.tryColorscale(i,""),o=pn.tryColorscale(i,"line");e.each(function(e){pn.singlePointStyle(e,t.select(this),r,a,o,n)})}},pn.makeSelectedPointStyleFns=function(t){var e={},r=t.selected||{},n=t.unselected||{},i=t.marker||{},a=r.marker||{},o=n.marker||{},s=i.opacity,l=a.opacity,u=o.opacity,c=void 0!==l,h=void 0!==u;e.opacityFn=function(t){var e=t.mo,r=void 0!==e;if(r||c||h){if(!t.selected)return h?u:dn*(r?e:s);if(c)return l}};var f=a.color,d=o.color;(f||d)&&(e.colorFn=function(t){if(t.selected){if(f)return f}else if(d)return d});var p=a.size,g=o.size,v=void 0!==p,m=void 0!==g;return(v||m)&&(e.sizeFn=function(t){var e=t.mrc;return t.selected?v?p/2:e:m?g/2:e}),e},pn.selectedPointStyle=function(e,r){if(e.size()&&r.selectedpoints){var n=pn.makeSelectedPointStyleFns(r),i=r.marker||{};e.each(function(e){var r=t.select(this),i=n.opacityFn(e);void 0!==i&&r.style("opacity",i)}),n.colorFn&&e.each(function(e){var r=t.select(this),i=n.colorFn(e);i&&Ne.fill(r,i)}),R.traceIs(r,"symbols")&&n.sizeFn&&e.each(function(e){var r=t.select(this),a=e.mx||i.symbol||0,o=n.sizeFn(e);r.attr("d",mn(pn.symbolNumber(a),o)),e.mrc2=o})}},pn.tryColorscale=function(t,e){var r=e?re.nestedProperty(t,e).get():t,n=r.colorscale,i=r.color;return n&&re.isArrayOrTypedArray(i)?Or.makeColorScaleFunc(Or.extractScale(n,r.cmin,r.cmax)):re.identity};var xn={start:1,end:-1,middle:0,bottom:1,top:-1};function _n(e,r,n,i){var a=t.select(e.node().parentNode),o=-1!==r.indexOf("top")?"top":-1!==r.indexOf("bottom")?"bottom":"middle",s=-1!==r.indexOf("left")?"end":-1!==r.indexOf("right")?"start":"middle",l=i?i/.8+1:0,u=(Fr.lineCount(e)-1)*fn+1,c=xn[s]*l,h=.75*n+xn[o]*l+(xn[o]-1)*u*n/2;e.attr("text-anchor",s),a.attr("transform","translate("+c+","+h+")")}function wn(t,r){var n=t.ts||r.textfont.size;return e(n)&&n>0?n:0}pn.textPointStyle=function(e,r,n){e.each(function(e){var i=t.select(this),a=re.extractOption(e,r,"tx","text");if(a){var o=e.tp||r.textposition,s=wn(e,r);i.call(pn.font,e.tf||r.textfont.family,s,e.tc||r.textfont.color).text(a).call(Fr.convertToTspans,n).call(_n,o,s,e.mrc)}else i.remove()})},pn.selectedTextStyle=function(e,r){if(e.size()&&r.selectedpoints){var n=r.selected||{},i=r.unselected||{};e.each(function(e){var a,o=t.select(this),s=e.tc||r.textfont.color,l=e.tp||r.textposition,u=wn(e,r),c=(n.textfont||{}).color,h=(i.textfont||{}).color;e.selected?c&&(a=c):h?a=h:c||(a=Ne.addOpacity(s,dn)),a&&Ne.fill(o,a),_n(o,l,u,e.mrc2||e.mrc)})}};var Mn=.5;function An(e,r,n,i){var a=e[0]-r[0],o=e[1]-r[1],s=n[0]-r[0],l=n[1]-r[1],u=Math.pow(a*a+o*o,Mn/2),c=Math.pow(s*s+l*l,Mn/2),h=(c*c*a-u*u*s)*i,f=(c*c*o-u*u*l)*i,d=3*c*(u+c),p=3*u*(u+c);return[[t.round(r[0]+(d&&h/d),2),t.round(r[1]+(d&&f/d),2)],[t.round(r[0]-(p&&h/p),2),t.round(r[1]-(p&&f/p),2)]]}pn.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var r,n="M"+t[0],i=[];for(r=1;r<t.length-1;r++)i.push(An(t[r-1],t[r],t[r+1],e));for(n+="Q"+i[0][0]+" "+t[1],r=2;r<t.length-1;r++)n+="C"+i[r-2][1]+" "+i[r-1][0]+" "+t[r];return n+="Q"+i[t.length-3][1]+" "+t[t.length-1]},pn.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var r,n="M"+t[0],i=t.length-1,a=[An(t[i],t[0],t[1],e)];for(r=1;r<i;r++)a.push(An(t[r-1],t[r],t[r+1],e));for(a.push(An(t[i-1],t[i],t[0],e)),r=1;r<=i;r++)n+="C"+a[r-1][1]+" "+a[r][0]+" "+t[r];return n+="C"+a[i][1]+" "+a[0][0]+" "+t[0]+"Z"};var Tn={hv:function(e,r){return"H"+t.round(r[0],2)+"V"+t.round(r[1],2)},vh:function(e,r){return"V"+t.round(r[1],2)+"H"+t.round(r[0],2)},hvh:function(e,r){return"H"+t.round((e[0]+r[0])/2,2)+"V"+t.round(r[1],2)+"H"+t.round(r[0],2)},vhv:function(e,r){return"V"+t.round((e[1]+r[1])/2,2)+"H"+t.round(r[0],2)+"V"+t.round(r[1],2)}},kn=function(e,r){return"L"+t.round(r[0],2)+","+t.round(r[1],2)};pn.steps=function(e){var r=Tn[e]||kn;return function(e){for(var n="M"+t.round(e[0][0],2)+","+t.round(e[0][1],2),i=1;i<e.length;i++)n+=r(e[i-1],e[i]);return n}},pn.makeTester=function(){var e=t.select("body").selectAll("#js-plotly-tester").data([0]);e.enter().append("svg").attr("id","js-plotly-tester").attr(Dr.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var r=e.selectAll(".js-reference-point").data([0]);r.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),pn.tester=e,pn.testref=r},pn.savedBBoxes={};var En=0;function Ln(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}pn.bBox=function(e,r,n){var i,a,o;if(n||(n=Ln(e)),n){if(i=pn.savedBBoxes[n])return re.extendFlat({},i)}else if(1===e.childNodes.length){var s=e.childNodes[0];if(n=Ln(s)){var l=+s.getAttribute("x")||0,u=+s.getAttribute("y")||0,c=s.getAttribute("transform");if(!c){var h=pn.bBox(s,!1,n);return l&&(h.left+=l,h.right+=l),u&&(h.top+=u,h.bottom+=u),h}if(n+="~"+l+"~"+u+"~"+c,i=pn.savedBBoxes[n])return re.extendFlat({},i)}}r?a=e:(o=pn.tester.node(),a=e.cloneNode(!0),o.appendChild(a)),t.select(a).attr("transform",null).call(Fr.positionText,0,0);var f=a.getBoundingClientRect(),d=pn.testref.node().getBoundingClientRect();r||o.removeChild(a);var p={height:f.height,width:f.width,left:f.left-d.left,top:f.top-d.top,right:f.right-d.left,bottom:f.bottom-d.top};return En>=1e4&&(pn.savedBBoxes={},En=0),n&&(pn.savedBBoxes[n]=p),En++,re.extendFlat({},p)},pn.setClipUrl=function(e,r){if(r){var n="#"+r,i=t.select("base");i.size()&&i.attr("href")&&(n=window.location.href.split("#")[0]+n),e.attr("clip-path","url("+n+")")}else e.attr("clip-path",null)},pn.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,r){return[e,r].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},pn.setTranslate=function(t,e,r){var n=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",a=t[n]("transform")||"";return e=e||0,r=r||0,a=a.replace(/(\btranslate\(.*?\);?)/,"").trim(),a=(a+=" translate("+e+", "+r+")").trim(),t[i]("transform",a),a},pn.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,r){return[e,r].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},pn.setScale=function(t,e,r){var n=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",a=t[n]("transform")||"";return e=e||1,r=r||1,a=a.replace(/(\bscale\(.*?\);?)/,"").trim(),a=(a+=" scale("+e+", "+r+")").trim(),t[i]("transform",a),a},pn.setPointGroupScale=function(t,e,r){var n,i,a;return e=e||1,r=r||1,i=1===e&&1===r?"":" scale("+e+","+r+")",a=/\s*sc.*/,t.each(function(){n=(this.getAttribute("transform")||"").replace(a,""),n=(n+=i).trim(),this.setAttribute("transform",n)}),i};var Cn=/translate\([^)]*\)\s*$/;pn.setTextPointsScale=function(e,r,n){e.each(function(){var e,i=t.select(this),a=i.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),l=(i.attr("transform")||"").match(Cn);e=1===r&&1===n?[]:["translate("+o+","+s+")","scale("+r+","+n+")","translate("+-o+","+-s+")"],l&&e.push(l),i.attr("transform",e.join(" "))}})};function Sn(t,e,r,n){n=n||re.identity,Array.isArray(t)&&(e[0][r]=n(t))}var Pn={getSubplot:function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},flat:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=e;return r},p2c:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n].p2c(e);return r},getDistanceFunction:function(t,e,r,n){return"closest"===t?n||Pn.quadrature(e,r):"x"===t?e:r},getClosest:function(t,e,r){if(!1!==r.index)r.index>=0&&r.index<t.length?r.distance=0:r.index=!1;else for(var n=0;n<t.length;n++){var i=e(t[n]);i<=r.distance&&(r.index=n,r.distance=i)}return r},inbox:function(t,e,r){return t*e<0||0===t?r:1/0},quadrature:function(t,e){return function(r){var n=t(r),i=e(r);return Math.sqrt(n*n+i*i)}},makeEventData:function(t,e,r){var n="index"in t?t.index:t.pointNumber,i={data:e._input,fullData:e,curveNumber:e.index,pointNumber:n};if(e._indexToPoints){var a=e._indexToPoints[n];1===a.length?i.pointIndex=a[0]:i.pointIndices=a}else i.pointIndex=n;return e._module.eventData?i=e._module.eventData(i,t,e,r,n):("xVal"in t?i.x=t.xVal:"x"in t&&(i.x=t.x),"yVal"in t?i.y=t.yVal:"y"in t&&(i.y=t.y),t.xa&&(i.xaxis=t.xa),t.ya&&(i.yaxis=t.ya),void 0!==t.zLabelVal&&(i.z=t.zLabelVal)),Pn.appendArrayPointValue(i,e,n),i},appendArrayPointValue:function(t,e,r){var n=e._arrayAttrs;if(n)for(var i=0;i<n.length;i++){var a=n[i],o=On(a);if(void 0===t[o]){var s=In(re.nestedProperty(e,a).get(),r);void 0!==s&&(t[o]=s)}}},appendArrayMultiPointValues:function(t,e,r){var n=e._arrayAttrs;if(n)for(var i=0;i<n.length;i++){var a=n[i],o=On(a);if(void 0===t[o]){for(var s=re.nestedProperty(e,a).get(),l=new Array(r.length),u=0;u<r.length;u++)l[u]=In(s,r[u]);t[o]=l}}}},Rn={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function On(t){return Rn[t]||t}function In(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var Nn=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)},Dn="data-savedcursor",zn=function(t,e){var r=t.attr(Dn);if(e){if(!r){for(var n=(t.attr("class")||"").split(" "),i=0;i<n.length;i++){var a=n[i];0===a.indexOf("cursor-")&&t.attr(Dn,a.substr(7)).classed(a,!1)}t.attr(Dn)||t.attr(Dn,"!!")}Nn(t,e)}else r&&(t.attr(Dn,null),"!!"===r?Nn(t):Nn(t,r))},Fn={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}},jn={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}},Bn=m.extendFlat,Un=function(t,e,r){return{color:{valType:"color",arrayOk:!0,editType:e||"style"},colorscale:Bn({},or.colorscale,{}),cauto:Bn({},or.zauto,{impliedEdits:{cmin:void 0,cmax:void 0}}),cmax:Bn({},or.zmax,{editType:e||or.zmax.editType,impliedEdits:{cauto:!1}}),cmin:Bn({},or.zmin,{editType:e||or.zmin.editType,impliedEdits:{cauto:!1}}),autocolorscale:Bn({},or.autocolorscale,{dflt:!1===r?r:or.autocolorscale.dflt}),reversescale:Bn({},or.reversescale,{})}},Vn={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20},Hn=br.dash,qn=m.extendFlat,Gn={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:qn({},Hn,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:qn({symbol:{valType:"enumerated",values:hn.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:Ar,line:qn({width:{valType:"number",min:0,arrayOk:!0,editType:"style"},editType:"calc"},Un()),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},Un()),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:k({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}},Xn=Gn.marker,Wn={r:Gn.r,t:Gn.t,marker:{color:Xn.color,size:Xn.size,symbol:Xn.symbol,opacity:Xn.opacity,editType:"calc"}},Yn=m.extendFlat,Zn=gr.overrideAll,Qn=Yn({},wr.domain,{});function Kn(t,e){return Yn({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}})}var $n=Zn({radialaxis:Kn(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:Qn,orientation:{valType:"number"}}),angularaxis:Kn(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:Qn}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested"),Jn={},ti=re.extendFlat,ei=re.extendDeepAll,ri="_isSubplotObj",ni="_isLinkedToArray",ii=[ri,ni,"_arrayAttrRegexps","_deprecated"];function ai(t,e,r){if(!t)return!1;if(t._isLinkedToArray)if(oi(e[r]))r++;else if(r<e.length)return!1;for(;r<e.length;r++){var n=t[e[r]];if(!re.isPlainObject(n))break;if(t=n,r===e.length-1)break;if(t._isLinkedToArray){if(!oi(e[++r]))return!1}else if("info_array"===t.valType){var i=e[++r];if(!oi(i))return!1;var a=t.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===t.dimensions){if(r++,e.length===r)return t;var o=e[r];if(!oi(o))return!1;t=a[i][o]}else t=a[i]}else t=a}}return t}function oi(t){return t===Math.round(t)&&t>=0}function si(t){return function(t){Jn.crawl(t,function(t,e,r){Jn.isValObject(t)?"data_array"===t.valType?(t.role="data",r[e+"src"]={valType:"string",editType:"none"}):!0===t.arrayOk&&(r[e+"src"]={valType:"string",editType:"none"}):re.isPlainObject(t)&&(t.role="object")})}(t),function(t){Jn.crawl(t,function(t,e,r){if(!t)return;var n=t[ni];if(!n)return;delete t[ni],r[e]={items:{}},r[e].items[n]=t,r[e].role="object"})}(t),t}function li(t,e,r){var n=re.nestedProperty(t,r),i=ei({},e.layoutAttributes);i[ri]=!0,n.set(i)}function ui(t,e,r){var n=re.nestedProperty(t,r);n.set(ei(n.get()||{},e))}Jn.IS_SUBPLOT_OBJ=ri,Jn.IS_LINKED_TO_ARRAY=ni,Jn.DEPRECATED="_deprecated",Jn.UNDERSCORE_ATTRS=ii,Jn.get=function(){var t={};R.allTypes.concat("area").forEach(function(e){t[e]=function(t){var e,r;"area"===t?(e={attributes:Wn},r={}):(e=R.modules[t]._module,r=e.basePlotModule);var n={type:null};ei(n,L),ei(n,e.attributes),r.attributes&&ei(n,r.attributes);n.type=t;var i={meta:e.meta||{},attributes:si(n)};if(e.layoutAttributes){var a={};ei(a,e.layoutAttributes),i.layoutAttributes=si(a)}return i}(e)});var e,r={};return Object.keys(R.transformsRegistry).forEach(function(t){r[t]=function(t){var e=R.transformsRegistry[t],r=ei({},e.attributes);return Object.keys(R.componentsRegistry).forEach(function(e){var n=R.componentsRegistry[e];n.schema&&n.schema.transforms&&n.schema.transforms[t]&&Object.keys(n.schema.transforms[t]).forEach(function(e){ui(r,n.schema.transforms[t][e],e)})}),{attributes:si(r)}}(t)}),{defs:{valObjects:re.valObjectMeta,metaKeys:ii.concat(["description","role","editType","impliedEdits"]),editType:{traces:gr.traces,layout:gr.layout},impliedEdits:{}},traces:t,layout:function(){var t,e,r={};for(t in ei(r,P),R.subplotsRegistry)if((e=R.subplotsRegistry[t]).layoutAttributes)if("cartesian"===e.name)li(r,e,"xaxis"),li(r,e,"yaxis");else{var n="subplot"===e.attr?e.name:e.attr;li(r,e,n)}for(t in r=function(t){return ti(t,{radialaxis:$n.radialaxis,angularaxis:$n.angularaxis}),ti(t,$n.layout),t}(r),R.componentsRegistry){var i=(e=R.componentsRegistry[t]).schema;if(i&&(i.subplots||i.layout)){var a=i.subplots;if(a&&a.xaxis&&!a.yaxis)for(var o in a.xaxis)delete r.yaxis[o]}else e.layoutAttributes&&ui(r,e.layoutAttributes,e.name)}return{layoutAttributes:si(r)}}(),transforms:r,frames:(e={frames:re.extendDeepAll({},jn)},si(e),e.frames),animation:si(Fn)}},Jn.crawl=function(t,e,r,n){var i=r||0;n=n||"",Object.keys(t).forEach(function(r){var a=t[r];if(-1===ii.indexOf(r)){var o=(n?n+".":"")+r;e(a,r,t,i,o),Jn.isValObject(a)||re.isPlainObject(a)&&"impliedEdits"!==r&&Jn.crawl(a,e,i+1,o)}})},Jn.isValObject=function(t){return t&&void 0!==t.valType},Jn.findArrayAttributes=function(t){var e=[],r=[];function n(n,i,a,o){if(r=r.slice(0,o).concat([i]),n&&("data_array"===n.valType||!0===n.arrayOk)&&!("colorbar"===r[o-1]&&("ticktext"===i||"tickvals"===i))){var s=function(t){return t.join(".")}(r),l=re.nestedProperty(t,s).get();re.isArrayOrTypedArray(l)&&e.push(s)}}if(Jn.crawl(L,n),t._module&&t._module.attributes&&Jn.crawl(t._module.attributes,n),t.transforms)for(var i=t.transforms,a=0;a<i.length;a++){var o=i[a]._module;o&&(r=["transforms["+a+"]"],Jn.crawl(o.attributes,n,1))}return t._fullInput&&t._fullInput._module&&t._fullInput._module.attributes&&(Jn.crawl(t._fullInput._module.attributes,n),e=re.filterUnique(e)),e},Jn.getTraceValObject=function(t,e){var r,n,i=e[0],a=1;if("transforms"===i){if(!Array.isArray(t.transforms))return!1;var o=e[1];if(!oi(o)||o>=t.transforms.length)return!1;n=(r=(R.transformsRegistry[t.transforms[o].type]||{}).attributes)&&r[e[2]],a=3}else if("area"===t.type)n=Wn[i];else{var s=t._module;if(s||(s=(R.modules[t.type||L.type.dflt]||{})._module),!s)return!1;if(!(n=(r=s.attributes)&&r[i])){var l=s.basePlotModule;l&&l.attributes&&(n=l.attributes[i])}n||(n=L[i])}return ai(n,e,a)},Jn.getLayoutValObject=function(t,e){return ai(function(t,e){var r,n,i,a,o=t._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){if((i=o[r]).attrRegex&&i.attrRegex.test(e)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;!s&&i.layoutAttributes&&(s=i.layoutAttributes)}var l=i.baseLayoutAttrOverrides;if(l&&e in l)return l[e]}if(s)return s}var u=t._modules;if(u)for(r=0;r<u.length;r++)if((a=u[r].layoutAttributes)&&e in a)return a[e];for(n in R.componentsRegistry)if(!(i=R.componentsRegistry[n]).schema&&e===i.name)return i.layoutAttributes;if(e in P)return P[e];if("radialaxis"===e||"angularaxis"===e)return $n[e];return $n.layout[e]||!1}(t,e[0]),e,1)};var ci={id2name:function(t){if("string"==typeof t&&t.match(Oe.AX_ID_PATTERN)){var e=t.substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},name2id:function(t){if(t.match(Oe.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},cleanId:function(t,e){if(t.match(Oe.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)){var r=t.substr(1).replace(/^0+/,"");return"1"===r&&(r=""),t.charAt(0)+r}},list:function(t,e,r){var n=t._fullLayout;if(!n)return[];var i,a=ci.listIds(t,e),o=new Array(a.length);for(i=0;i<a.length;i++){var s=a[i];o[i]=n[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var l=n._subplots.gl3d||[];for(i=0;i<l.length;i++){var u=n[l[i]];e?o.push(u[e+"axis"]):o.push(u.xaxis,u.yaxis,u.zaxis)}}return o},listIds:function(t,e){var r=t._fullLayout;if(!r)return[];var n=r._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},getFromId:function(t,e,r){var n=t._fullLayout;return"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),n[ci.id2name(e)]},getFromTrace:function(t,e,r){var n=t._fullLayout,i=null;if(R.traceIs(e,"gl3d")){var a=e.scene;"scene"===a.substr(0,5)&&(i=n[a][r+"axis"])}else i=ci.getFromId(t,e[r+"axis"]||r);return i},idSort:function(t,e){var r=t.charAt(0),n=e.charAt(0);return r!==n?r>n?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)}},hi={};function fi(t,e,r){var n,i,a,o=!1;if("data"===e.type)n=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;n=t._fullLayout}return i=re.nestedProperty(n,e.prop).get(),(a=r[e.type]=r[e.type]||{}).hasOwnProperty(e.prop)&&a[e.prop]!==i&&(o=!0),a[e.prop]=i,{changed:o,value:i}}function di(t,e){var r=[],n=e[0],i={};if("string"==typeof n)i[n]=e[1];else{if(!re.isPlainObject(n))return r;i=n}return gi(i,function(t,e,n){r.push({type:"layout",prop:t,value:n})},"",0),r}function pi(t,e){var r,n,i,a,o=[];if(n=e[0],i=e[1],r=e[2],a={},"string"==typeof n)a[n]=i;else{if(!re.isPlainObject(n))return o;a=n,void 0===r&&(r=i)}return void 0===r&&(r=null),gi(a,function(e,n,i){var a;if(Array.isArray(i)){var s=Math.min(i.length,t.data.length);r&&(s=Math.min(s,r.length)),a=[];for(var l=0;l<s;l++)a[l]=r?r[l]:l}else a=r?r.slice(0):null;if(null===a)Array.isArray(i)&&(i=i[0]);else if(Array.isArray(a)){if(!Array.isArray(i)){var u=i;i=[];for(var c=0;c<a.length;c++)i[c]=u}i.length=Math.min(a.length,i.length)}o.push({type:"data",prop:e,traces:a,value:i})},"",0),o}function gi(t,e,r,n){Object.keys(t).forEach(function(i){var a=t[i];if("_"!==i[0]){var o=r+(n>0?".":"")+i;re.isPlainObject(a)?gi(a,e,o,n+1):e(o,i,a)}})}hi.manageCommandObserver=function(t,e,r,n){var i={},a=!0;e&&e._commandObserver&&(i=e._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var o=hi.hasSimpleAPICommandBindings(t,r,i.lookupTable);if(e&&e._commandObserver){if(o)return i;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,i}if(o){fi(t,o,i.cache),i.check=function(){if(a){var e=fi(t,o,i.cache);return e.changed&&n&&void 0!==i.lookupTable[e.value]&&(i.disable(),Promise.resolve(n({value:e.value,type:o.type,prop:o.prop,traces:o.traces,index:i.lookupTable[e.value]})).then(i.enable,i.enable)),e.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)t._internalOn(s[l],i.check);i.remove=function(){for(var e=0;e<s.length;e++)t._removeInternalListener(s[e],i.check)}}else re.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){a=!1},i.enable=function(){a=!0},e&&(e._commandObserver=i),i},hi.hasSimpleAPICommandBindings=function(t,e,r){var n,i,a=e.length;for(n=0;n<a;n++){var o,s=e[n],l=s.method,u=s.args;if(Array.isArray(u)||(u=[]),!l)return!1;var c=hi.computeAPICommandBindings(t,l,u);if(1!==c.length)return!1;if(i){if((o=c[0]).type!==i.type)return!1;if(o.prop!==i.prop)return!1;if(Array.isArray(i.traces)){if(!Array.isArray(o.traces))return!1;o.traces.sort();for(var h=0;h<i.traces.length;h++)if(i.traces[h]!==o.traces[h])return!1}else if(o.prop!==i.prop)return!1}else i=c[0],Array.isArray(i.traces)&&i.traces.sort();var f=(o=c[0]).value;if(Array.isArray(f)){if(1!==f.length)return!1;f=f[0]}r&&(r[f]=n)}return i},hi.executeAPICommand=function(t,e,r){if("skip"===e)return Promise.resolve();var n=R.apiMethodRegistry[e],i=[t];Array.isArray(r)||(r=[]);for(var a=0;a<r.length;a++)i.push(r[a]);return n.apply(null,i).catch(function(t){return re.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},hi.computeAPICommandBindings=function(t,e,r){var n;switch(Array.isArray(r)||(r=[]),e){case"restyle":n=pi(t,r);break;case"relayout":n=di(t,r);break;case"update":n=pi(t,[r[0],r[2]]).concat(di(t,[r[1]]));break;case"animate":n=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,r);break;default:n=[]}return n};var vi={},mi=re._,yi=r.BADNUM,bi=vi={},xi=re.relinkPrivateKeys;re.extendFlat(bi,R),bi.attributes=L,bi.attributes.type.values=bi.allTypes,bi.fontAttrs=k,bi.layoutAttributes=P,bi.fontWeight="normal";var _i=bi.transformsRegistry;bi.executeAPICommand=hi.executeAPICommand,bi.computeAPICommandBindings=hi.computeAPICommandBindings,bi.manageCommandObserver=hi.manageCommandObserver,bi.hasSimpleAPICommandBindings=hi.hasSimpleAPICommandBindings,bi.redrawText=function(t){if(!((t=re.getGraphDiv(t)).data&&t.data[0]&&t.data[0].r))return new Promise(function(e){setTimeout(function(){R.getComponentMethod("annotations","draw")(t),R.getComponentMethod("legend","draw")(t),(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()}),e(bi.previousPromises(t))},300)})},bi.resize=function(t){return t=re.getGraphDiv(t),new Promise(function(e,r){t&&!function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e}(t)||r(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._redrawTimer=setTimeout(function(){if(t.layout.width&&t.layout.height)e(t);else{delete t.layout.width,delete t.layout.height;var r=t.changed;t.autoplay=!0,R.call("relayout",t,{autosize:!0}).then(function(){t.changed=r,e(t)})}},100)})},bi.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},bi.addLinks=function(e){if(e._context.showLink||e._context.showSources){var r=e._fullLayout,n=r._paper.selectAll("text.js-plot-link-container").data([0]);n.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:Ne.defaultLine,"pointer-events":"all"}).each(function(){var e=t.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)});var i=n.node(),a={y:r._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=r.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=r._paper.attr("width")-7),n.attr(a);var o=n.select(".js-link-to-tool"),s=n.select(".js-link-spacer"),l=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(t,e){e.text("");var r=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)r.on("click",function(){bi.sendDataToCloud(t)});else{var n=window.location.pathname.split("/"),i=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+i})}}(e,o),s.text(o.text()&&l.text()?" - ":"")}},bi.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var r=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",n=t.select(e).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:r+"/external",method:"post",target:"_blank"});return i.append("input").attr({type:"text",name:"data"}).node().value=bi.graphJson(e,!1,"keepdata"),i.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1};var wi,Mi=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],Ai=["year","month","dayMonth","dayMonthYear"];function Ti(t,e){var r,n,i=t.trace,a=i._arrayAttrs,o={};for(r=0;r<a.length;r++)o[n=a[r]]=re.nestedProperty(i,n).get().slice();for(t.trace=e,r=0;r<a.length;r++)n=a[r],re.nestedProperty(t.trace,n).set(o[n])}function ki(t,e){var r=t._context.locale,n=!1,i={};function a(t){for(var r=!0,a=0;a<e.length;a++){var o=e[a];i[o]||(t[o]?i[o]=t[o]:r=!1)}r&&(n=!0)}for(var o=0;o<2;o++){for(var s=t._context.locales,l=0;l<2;l++){var u=(s[r]||{}).format;if(u&&(a(u),n))break;s=R.localeRegistry}var c=r.split("-")[0];if(n||c===r)break;r=c}return n||a(R.localeRegistry.en.format),i}function Ei(t,e,r,n){for(var i=t.transforms,a=[t],o=0;o<i.length;o++){var s=i[o],l=_i[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:t,fullData:e,layout:r,fullLayout:n,transformIndex:o}))}return a}function Li(t){for(var e=0;e<t.length;e++)t[e].clearCalc()}bi.supplyDefaults=function(e){var r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var n,i=e._fullLayout={},a=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],u=e._context||{};e._transitionData||bi.createTransitionData(e),i._dfltTitle={plot:mi(e,"Click to enter Plot title"),x:mi(e,"Click to enter X axis title"),y:mi(e,"Click to enter Y axis title"),colorbar:mi(e,"Click to enter Colorscale title"),annotation:mi(e,"new text")},i._traceWord=mi(e,"trace");var c=ki(e,Mi);if(i._mapboxAccessToken=u.mapboxAccessToken,r._initialAutoSizeIsDone){var h=r.width,f=r.height;bi.supplyLayoutGlobalDefaults(a,i,c),a.width||(i.width=h),a.height||(i.height=f)}else{bi.supplyLayoutGlobalDefaults(a,i,c);var d=!a.width||!a.height,p=i.autosize,g=u.autosizable;d&&(p||g)?bi.plotAutoSize(e,a,i):d&&bi.sanitizeMargins(e),!p&&d&&(a.width=i.width,a.height=i.height)}i._d3locale=function(e,r){return e.decimal=r.charAt(0),e.thousands=r.charAt(1),t.locale(e)}(c,i.separators),i._extraFormat=ki(e,Ai),i._initialAutoSizeIsDone=!0,i._dataLength=l.length,i._modules=[],i._basePlotModules=[],i._subplots=function(){var t,e,r={};if(!wi){wi=[];var n=R.subplotsRegistry;for(var i in n){var a=n[i],o=a.attr;if(o&&(wi.push(i),Array.isArray(o)))for(e=0;e<o.length;e++)re.pushUnique(wi,o[e])}}for(t=0;t<wi.length;t++)r[wi[t]]=[];return r}(),i._globalTransforms=(e._context||{}).globalTransforms,bi.supplyDataDefaults(l,s,a,i),i._has=bi._hasPlotType.bind(i);var v=i._modules;for(n=0;n<v.length;n++){var m=v[n];m.cleanData&&m.cleanData(s)}if(o.length===l.length)for(n=0;n<s.length;n++)xi(s[n],o[n]);bi.supplyLayoutModuleDefaults(a,i,s,e._transitionData),i._hasCartesian=i._has("cartesian"),i._hasGeo=i._has("geo"),i._hasGL3D=i._has("gl3d"),i._hasGL2D=i._has("gl2d"),i._hasTernary=i._has("ternary"),i._hasPie=i._has("pie"),bi.cleanPlot(s,i,o,r),bi.linkSubplots(s,i,o,r),xi(i,r),bi.doAutoMargin(e);var y=ci.list(e);for(n=0;n<y.length;n++){y[n].setScale()}if((e.calcdata||[]).length===s.length)for(n=0;n<s.length;n++){var b=s[n],x=e.calcdata[n][0];x&&x.trace&&(x.trace._hasCalcTransform?Ti(x,b):x.trace=b)}}},bi.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},bi._hasPlotType=function(t){var e,r=this._basePlotModules||[];for(e=0;e<r.length;e++){if(r[e].name===t)return!0}var n=this._modules||[];for(e=0;e<n.length;e++){var i=n[e];if(i.categories&&i.categories.indexOf(t)>=0)return!0}return!1},bi.cleanPlot=function(t,e,r,n){var i,a,o=n._basePlotModules||[];for(i=0;i<o.length;i++){var s=o[i];s.clean&&s.clean(t,e,r,n)}var l=!!n._paper,u=!!n._infolayer,c=n._has&&n._has("gl"),h=e._has&&e._has("gl");c&&!h&&void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcanvas=null);t:for(i=0;i<r.length;i++){var f=r[i].uid;for(a=0;a<t.length;a++){if(f===t[a].uid)continue t}var d=".hm"+f+",.contour"+f+",.carpet"+f+",#clip"+f+",.trace"+f;l&&n._paper.selectAll(d).remove(),u&&(n._infolayer.selectAll(".cb"+f).remove(),n._infolayer.selectAll("g.rangeslider-container").selectAll(d).remove())}n._zoomlayer&&n._zoomlayer.selectAll(".select-outline").remove()},bi.linkSubplots=function(t,e,r,n){var i,a,o,s,l=n._plots||{},u=e._plots={},c=e._subplots,h={_fullData:t,_fullLayout:e},f=c.cartesian.concat(c.gl2d||[]);for(i=0;i<f.length;i++){var d,p=l[o=f[i]],g=ci.getFromId(h,o,"x"),v=ci.getFromId(h,o,"y");for(p?((d=u[o]=p).xaxis.layer!==g.layer&&(d.xlines.attr("d",null),d.xaxislayer.selectAll("*").remove()),d.yaxis.layer!==v.layer&&(d.ylines.attr("d",null),d.yaxislayer.selectAll("*").remove())):(d=u[o]={}).id=o,d.xaxis=g,d.yaxis=v,d._hasClipOnAxisFalse=!1,a=0;a<t.length;a++){var m=t[a];if(m.xaxis===d.xaxis._id&&m.yaxis===d.yaxis._id&&!1===m.cliponaxis){d._hasClipOnAxisFalse=!0;break}}}var y=ci.list(h,null,!0);for(i=0;i<y.length;i++){var b=null;(s=y[i]).overlaying&&(b=ci.getFromId(h,s.overlaying))&&b.overlaying&&(s.overlaying=!1,b=null),s._mainAxis=b||s,b&&(s.domain=b.domain.slice()),s._anchorAxis="free"===s.anchor?null:ci.getFromId(h,s.anchor)}for(i=0;i<y.length;i++){var x="x"===(s=y[i])._id.charAt(0),_=s._mainAxis._anchorAxis,w="",M="",A="";if(_&&(A=_._mainAxis._id,w=x?s._id+A:A+s._id),!w||-1===f.indexOf(w))for(w="",a=0;a<f.length;a++){var T=(o=f[a]).indexOf("y"),k=x?o.substr(0,T):o.substr(T),E=x?o.substr(T):o.substr(0,T);if(k===s._id){M||(M=o);var L=ci.getFromId(h,E);if(A&&L.overlaying===A){w=o;break}}}s._mainSubplot=w||M}},bi.clearExpandedTraceDefaultColors=function(t){var e,r,n;for(r=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],Jn.crawl(t._module.attributes,function(t,n,i,a){r[a]=n,r.length=a+1,"color"===t.valType&&void 0===t.dflt&&e.push(r.join("."))})),n=0;n<e.length;n++){re.nestedProperty(t,"_input."+e[n]).get()||re.nestedProperty(t,e[n]).set(null)}},bi.supplyDataDefaults=function(t,e,r,n){var i,a,o,s=n._modules,l=n._basePlotModules,u=0,c=0;function h(t){e.push(t);var r=t._module;r&&(!0===t.visible&&re.pushUnique(s,r),re.pushUnique(l,t._module.basePlotModule),u++,!1!==t._input.visible&&c++)}n._transformModules=[];var f={},d=[];for(i=0;i<t.length;i++){if(o=t[i],(a=bi.supplyTraceDefaults(o,c,n,i)).index=i,a._input=o,a._expandedIndex=u,a.transforms&&a.transforms.length)for(var p=Ei(a,e,r,n),g=0;g<p.length;g++){var v=p[g],m=bi.supplyTraceDefaults(v,u,n,i);xi(m,v),v.uid=m.uid=a.uid+g,m.index=i,m._input=o,m._fullInput=a,m._expandedIndex=u,m._expandedInput=v,h(m)}else a._fullInput=a,a._expandedInput=a,h(a);R.traceIs(a,"carpetAxis")&&(f[a.carpet]=a),R.traceIs(a,"carpetDependent")&&d.push(i)}for(i=0;i<d.length;i++)if((a=e[d[i]]).visible){var y=f[a.carpet];a._carpet=y,y&&y.visible?(a.xaxis=y.xaxis,a.yaxis=y.yaxis):a.visible=!1}},bi.supplyAnimationDefaults=function(t){var e;t=t||{};var r={};function n(e,n){return re.coerce(t||{},r,Fn,e,n)}if(n("mode"),n("direction"),n("fromcurrent"),Array.isArray(t.frame))for(r.frame=[],e=0;e<t.frame.length;e++)r.frame[e]=bi.supplyAnimationFrameDefaults(t.frame[e]||{});else r.frame=bi.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(r.transition=[],e=0;e<t.transition.length;e++)r.transition[e]=bi.supplyAnimationTransitionDefaults(t.transition[e]||{});else r.transition=bi.supplyAnimationTransitionDefaults(t.transition||{});return r},bi.supplyAnimationFrameDefaults=function(t){var e={};function r(r,n){return re.coerce(t||{},e,Fn.frame,r,n)}return r("duration"),r("redraw"),e},bi.supplyAnimationTransitionDefaults=function(t){var e={};function r(r,n){return re.coerce(t||{},e,Fn.transition,r,n)}return r("duration"),r("easing"),e},bi.supplyFrameDefaults=function(t){var e={};function r(r,n){return re.coerce(t,e,jn,r,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),e},bi.supplyTraceDefaults=function(t,e,r,n){var i,a=r.colorway||Ne.defaults,o={},s=a[e%a.length];function l(e,r){return re.coerce(t,o,bi.attributes,e,r)}var u=l("visible");l("type"),l("uid"),l("name",r._traceWord+" "+n);var c=bi.getModule(o);if(o._module=c,c){var h=c.basePlotModule,f=h.attr;if(f){var d=r._subplots,p=h.attributes,g="";if("gl2d"!==h.name||u){if(Array.isArray(f))for(i=0;i<f.length;i++){var v=f[i],m=re.coerce(t,o,p,v);d[v]&&re.pushUnique(d[v],m),g+=m}else g=re.coerce(t,o,p,f);d[h.name]&&re.pushUnique(d[h.name],g)}}}return u&&(l("customdata"),l("ids"),R.traceIs(o,"showLegend")&&(l("showlegend"),l("legendgroup")),R.getComponentMethod("fx","supplyDefaults")(t,o,s,r),c&&(c.supplyDefaults(t,o,s,r),re.coerceHoverinfo(t,o,r)),R.traceIs(o,"noOpacity")||l("opacity"),R.traceIs(o,"notLegendIsolatable")&&(o.visible=!!o.visible),c&&c.selectPoints&&l("selectedpoints"),bi.supplyTransformDefaults(t,o,r)),o},bi.supplyTransformDefaults=function(t,e,r){var n=r._globalTransforms||[],i=r._transformModules||[];if(Array.isArray(t.transforms)||0!==n.length)for(var a=t.transforms||[],o=n.concat(a),s=e.transforms=[],l=0;l<o.length;l++){var u,c=o[l],h=c.type,f=_i[h],d=!(c._module&&c._module===f),p=f&&"function"==typeof f.transform;f||re.warn("Unrecognized transform type "+h+"."),f&&f.supplyDefaults&&(d||p)?((u=f.supplyDefaults(c,e,r,t)).type=h,u._module=f,re.pushUnique(i,f)):u=re.extendFlat({},c),s.push(u)}},bi.supplyLayoutGlobalDefaults=function(t,e,r){function n(r,n){return re.coerce(t,e,bi.layoutAttributes,r,n)}var i=re.coerceFont(n,"font");n("title",e._dfltTitle.plot),re.coerceFont(n,"titlefont",{family:i.family,size:Math.round(1.4*i.size),color:i.color}),n("autosize",!(t.width&&t.height)),n("width"),n("height"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),t.width&&t.height&&bi.sanitizeMargins(e),R.getComponentMethod("grid","sizeDefaults")(t,e),n("paper_bgcolor"),n("separators",r.decimal+r.thousands),n("hidesources"),n("colorway"),n("datarevision"),R.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),R.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,n)},bi.plotAutoSize=function(t,r,n){var i,a,o=t._context||{},s=o.frameMargins,l=re.isPlotDiv(t);if(l&&t.emit("plotly_autosize"),o.fillFrame)i=window.innerWidth,a=window.innerHeight,document.body.style.overflow="hidden";else if(e(s)&&s>0){var u=function(t){var e,r={left:0,right:0,bottom:0,top:0};if(t)for(e in t)t.hasOwnProperty(e)&&(r.left+=t[e].left||0,r.right+=t[e].right||0,r.bottom+=t[e].bottom||0,r.top+=t[e].top||0);return r}(t._boundingBoxMargins),c=u.left+u.right,h=u.bottom+u.top,f=1-2*s,d=n._container&&n._container.node?n._container.node().getBoundingClientRect():{width:n.width,height:n.height};i=Math.round(f*(d.width-c)),a=Math.round(f*(d.height-h))}else{var p=l?window.getComputedStyle(t):{};i=parseFloat(p.width)||n.width,a=parseFloat(p.height)||n.height}var g=bi.layoutAttributes.width.min,v=bi.layoutAttributes.height.min;i<g&&(i=g),a<v&&(a=v);var m=!r.width&&Math.abs(n.width-i)>1,y=!r.height&&Math.abs(n.height-a)>1;(y||m)&&(m&&(n.width=i),y&&(n.height=a)),t._initialAutoSize||(t._initialAutoSize={width:i,height:a}),bi.sanitizeMargins(n)},bi.supplyLayoutModuleDefaults=function(t,e,r,n){var i,a,o,s=R.componentsRegistry,l=e._basePlotModules,u=R.subplotsRegistry.cartesian;for(i in s)(o=s[i]).includeBasePlot&&o.includeBasePlot(t,e);for(var c in l.length||l.push(u),e._has("cartesian")&&(R.getComponentMethod("grid","contentDefaults")(t,e),u.finalizeSubplots(t,e)),e._subplots)e._subplots[c].sort(re.subplotSort);for(a=0;a<l.length;a++)(o=l[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r);var h=e._modules;for(a=0;a<h.length;a++)(o=h[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r);var f=e._transformModules;for(a=0;a<f.length;a++)(o=f[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r,n);for(i in s)(o=s[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r)},bi.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),void 0!==e._geocontainer&&e._geocontainer.remove(),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),re.clearThrottle(),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t.firstscatter,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._replotPending,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},bi.style=function(t){var e,r=t._fullLayout._modules,n=[];for(e=0;e<r.length;e++){var i=r[e];i.style&&re.pushUnique(n,i.style)}for(e=0;e<n.length;e++)n[e](t)},bi.sanitizeMargins=function(t){if(t&&t.margin){var e,r=t.width,n=t.height,i=t.margin,a=r-(i.l+i.r),o=n-(i.t+i.b);a<0&&(e=(r-1)/(i.l+i.r),i.l=Math.floor(e*i.l),i.r=Math.floor(e*i.r)),o<0&&(e=(n-1)/(i.t+i.b),i.t=Math.floor(e*i.t),i.b=Math.floor(e*i.b))}},bi.autoMargin=function(t,e,r){var n=t._fullLayout;if(n._pushmargin||(n._pushmargin={}),!1!==n.margin.autoexpand){if(r){var i=void 0===r.pad?12:r.pad;r.l+r.r>.5*n.width&&(r.l=r.r=0),r.b+r.t>.5*n.height&&(r.b=r.t=0),n._pushmargin[e]={l:{val:r.x,size:r.l+i},r:{val:r.x,size:r.r+i},b:{val:r.y,size:r.b+i},t:{val:r.y,size:r.t+i}}}else delete n._pushmargin[e];n._replotting||bi.doAutoMargin(t)}},bi.doAutoMargin=function(t){var r=t._fullLayout;r._size||(r._size={}),r._pushmargin||(r._pushmargin={});var n=r._size,i=JSON.stringify(n),a=Math.max(r.margin.l||0,0),o=Math.max(r.margin.r||0,0),s=Math.max(r.margin.t||0,0),l=Math.max(r.margin.b||0,0),u=r._pushmargin;if(!1!==r.margin.autoexpand)for(var c in u.base={l:{val:0,size:a},r:{val:1,size:o},t:{val:1,size:s},b:{val:0,size:l}},u){var h=u[c].l||{},f=u[c].b||{},d=h.val,p=h.size,g=f.val,v=f.size;for(var m in u){if(e(p)&&u[m].r){var y=u[m].r.val,b=u[m].r.size;if(y>d){var x=(p*y+(b-r.width)*d)/(y-d),_=(b*(1-d)+(p-r.width)*(1-y))/(y-d);x>=0&&_>=0&&x+_>a+o&&(a=x,o=_)}}if(e(v)&&u[m].t){var w=u[m].t.val,M=u[m].t.size;if(w>g){var A=(v*w+(M-r.height)*g)/(w-g),T=(M*(1-g)+(v-r.height)*(1-w))/(w-g);A>=0&&T>=0&&A+T>l+s&&(l=A,s=T)}}}}if(n.l=Math.round(a),n.r=Math.round(o),n.t=Math.round(s),n.b=Math.round(l),n.p=Math.round(r.margin.pad),n.w=Math.round(r.width)-n.l-n.r,n.h=Math.round(r.height)-n.t-n.b,!r._replotting&&"{}"!==i&&i!==JSON.stringify(r._size))return R.call("plot",t)},bi.graphJson=function(t,e,r,n,i){(i&&e&&!t._fullData||i&&!e&&!t._fullLayout)&&bi.supplyDefaults(t);var a=i?t._fullData:t.data,o=i?t._fullLayout:t.layout,s=(t._transitionData||{})._frames;function l(t){if("function"==typeof t)return null;if(re.isPlainObject(t)){var e,n,i={};for(e in t)if("function"!=typeof t[e]&&-1===["_","["].indexOf(e.charAt(0))){if("keepdata"===r){if("src"===e.substr(e.length-3))continue}else if("keepstream"===r){if("string"==typeof(n=t[e+"src"])&&n.indexOf(":")>0&&!re.isPlainObject(t.stream))continue}else if("keepall"!==r&&"string"==typeof(n=t[e+"src"])&&n.indexOf(":")>0)continue;i[e]=l(t[e])}return i}return Array.isArray(t)?t.map(l):re.isJSDate(t)?re.ms2DateTimeLocal(+t):t}var u={data:(a||[]).map(function(t){var r=l(t);return e&&delete r.fit,r})};return e||(u.layout=l(o)),t.framework&&t.framework.isPolar&&(u=t.framework.getConfig()),s&&(u.frames=l(s)),"object"===n?u:JSON.stringify(u)},bi.modifyFrames=function(t,e){var r,n,i,a=t._transitionData._frames,o=t._transitionData._frameHash;for(r=0;r<e.length;r++)switch((n=e[r]).type){case"replace":i=n.value;var s=(a[n.index]||{}).name,l=i.name;a[n.index]=o[l]=i,l!==s&&(delete o[s],o[l]=i);break;case"insert":o[(i=n.value).name]=i,a.splice(n.index,0,i);break;case"delete":delete o[(i=a[n.index]).name],a.splice(n.index,1)}return Promise.resolve()},bi.computeFrame=function(t,e){var r,n,i,a,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=o[e.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===u.indexOf(s.name);)l.push(s),u.push(s.name);for(var c={};s=l.pop();)if(s.layout&&(c.layout=bi.extendLayout(c.layout,s.layout)),s.data){if(c.data||(c.data=[]),!(n=s.traces))for(n=[],r=0;r<s.data.length;r++)n[r]=r;for(c.traces||(c.traces=[]),r=0;r<s.data.length;r++)void 0!==(i=n[r])&&null!==i&&(-1===(a=c.traces.indexOf(i))&&(a=c.data.length,c.traces[a]=i),c.data[a]=bi.extendTrace(c.data[a],s.data[r]))}return c},bi.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},r=t._transitionData._frames,n=0;n<r.length;n++){var i=r[n];i&&i.name&&(e[i.name]=i)}},bi.extendObjectWithContainers=function(t,e,r){var n,i,a,o,s,l,u,c=re.extendDeepNoArrays({},e||{}),h=re.expandObjectPaths(c),f={};if(r&&r.length)for(a=0;a<r.length;a++)void 0===(i=(n=re.nestedProperty(h,r[a])).get())?re.nestedProperty(f,r[a]).set(null):(n.set(null),re.nestedProperty(f,r[a]).set(i));if(t=re.extendDeepNoArrays(t||{},h),r&&r.length)for(a=0;a<r.length;a++)if(l=re.nestedProperty(f,r[a]).get()){for(u=(s=re.nestedProperty(t,r[a])).get(),Array.isArray(u)||(u=[],s.set(u)),o=0;o<l.length;o++){var d=l[o];u[o]=null===d?null:bi.extendObjectWithContainers(u[o],d)}s.set(u)}return t},bi.dataArrayContainers=["transforms","dimensions"],bi.layoutArrayContainers=R.layoutArrayContainers,bi.extendTrace=function(t,e){return bi.extendObjectWithContainers(t,e,bi.dataArrayContainers)},bi.extendLayout=function(t,e){return bi.extendObjectWithContainers(t,e,bi.layoutArrayContainers)},bi.transition=function(t,e,r,n,i,a){var o,s,l=Array.isArray(e)?e.length:0,u=n.slice(0,l),c=[];var h=!1;for(o=0;o<u.length;o++){s=u[o];t._fullData[s]._module}var f=[bi.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},function(){var n;for(n=0;n<u.length;n++){var i=u[n],a=t._fullData[i]._module;a&&(a.animatable&&c.push(i),t.data[u[n]]=bi.extendTrace(t.data[u[n]],e[n]))}var o=re.expandObjectPaths(re.extendDeepNoArrays({},r)),s=/^[xy]axis[0-9]*$/;for(var l in o)s.test(l)&&delete o[l].range;return bi.extendLayout(t.layout,o),delete t.calcdata,bi.supplyDefaults(t),bi.doCalcdata(t),R.getComponentMethod("errorbars","calc")(t),Promise.resolve()},bi.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise(function(e){t._transitioning=!0,a.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push(function(){h=!0}),i.redraw&&t._transitionData._interruptCallbacks.push(function(){return R.call("redraw",t)}),t._transitionData._interruptCallbacks.push(function(){t.emit("plotly_transitioninterrupted",[])});var n,o,s=0,l=0;function u(){return s++,function(){var r;h||++l!==s||(r=e,t._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(t._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(i.redraw)return R.call("redraw",t)}).then(function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])}).then(r)))}}var f=t._fullLayout._basePlotModules,d=!1;if(r)for(o=0;o<f.length;o++)if(f[o].transitionAxes){var p=re.expandObjectPaths(r);d=f[o].transitionAxes(t,p,a,u)||d}for(d?(n=re.extendFlat({},a)).duration=0:n=a,o=0;o<f.length;o++)f[o].plot(t,c,n,u);setTimeout(u())})}],d=re.syncOrAsync(f,t);return d&&d.then||(d=Promise.resolve()),d.then(function(){return t})},bi.doCalcdata=function(t,e){var r,n,i,a,o=ci.list(t),s=t._fullData,l=t._fullLayout,u=new Array(s.length),c=(t.calcdata||[]).slice(0);for(t.calcdata=u,t.firstscatter=!0,l._numBoxes=0,l._numViolins=0,l._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,l._piecolormap={},l._piecolorway=null,l._piedefaultcolorcount=0,i=0;i<s.length;i++)Array.isArray(e)&&-1===e.indexOf(i)&&(u[i]=c[i]);for(i=0;i<s.length;i++)(r=s[i])._arrayAttrs=Jn.findArrayAttributes(r);var h=l._subplots.polar||[];for(i=0;i<h.length;i++)o.push(l[h[i]].radialaxis,l[h[i]].angularaxis);Li(o);var f=!1;for(i=0;i<s.length;i++)if(!0===(r=s[i]).visible&&r.transforms)for((n=r._module)&&n.calc&&n.calc(t,r),a=0;a<r.transforms.length;a++){var d=r.transforms[a];(n=_i[d.type])&&n.calcTransform&&(r._hasCalcTransform=!0,f=!0,n.calcTransform(t,r,d))}for(f&&Li(o),i=0;i<s.length;i++){var p=[];if(!0===(r=s[i]).visible){n=r._module;var g=r.transforms||[];for(a=g.length-1;a>=0;a--)if(g[a].enabled){r._indexToPoints=g[a]._indexToPoints;break}n&&n.calc&&(p=n.calc(t,r))}Array.isArray(p)&&p[0]||(p=[{x:yi,y:yi}]),p[0].t||(p[0].t={}),p[0].trace=r,u[i]=p}R.getComponentMethod("fx","calc")(t)},bi.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},bi.generalUpdatePerTraceModule=function(t,e,r,n){var i,a=e.traceHash,o={};for(i=0;i<r.length;i++){var s=r[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var u in a)if(!o[u]){var c=a[u][0];c[0].trace.visible=!1,o[u]=[c]}for(var h in o){var f=o[h];f[0][0].trace._module.plot(t,e,re.filterVisible(f),n)}e.traceHash=o};var Ci={draw:function(r,n,i){var a,o=i.propContainer,s=i.propName,l=i.placeholder,u=i.traceIndex,c=i.avoid||{},h=i.attributes,d=i.transform,p=i.containerGroup,g=r._fullLayout,v=o.titlefont||{},m=v.family,y=v.size,b=v.color,x=1,_=!1,w=(o.title||"").trim();"title"===s?a="titleText":-1!==s.indexOf("axis")?a="axisTitleText":s.indexOf(!0)&&(a="colorbarTitleText");var M=r._context.edits[a];""===w?x=0:w.replace(Si," % ")===l.replace(Si," % ")&&(x=.2,_=!0,M||(w=""));var A=w||M;p||(p=g._infolayer.selectAll(".g-"+n).data([0])).enter().append("g").classed("g-"+n,!0);var T=p.selectAll("text").data(A?[0]:[]);if(T.enter().append("text"),T.text(w).attr("class",n),T.exit().remove(),!A)return p;function k(t){re.syncOrAsync([E,L],t)}function E(e){var n;return d?(n="",d.rotate&&(n+="rotate("+[d.rotate,h.x,h.y]+")"),d.offset&&(n+="translate(0, "+d.offset+")")):n=null,e.attr("transform",n),e.style({"font-family":m,"font-size":t.round(y,2)+"px",fill:Ne.rgb(b),opacity:x*Ne.opacity(b),"font-weight":vi.fontWeight}).attr(h).call(Fr.convertToTspans,r),vi.previousPromises(r)}function L(r){var n=t.select(r.node().parentNode);if(c&&c.selection&&c.side&&w){n.attr("transform",null);var i=0,a={left:"right",right:"left",top:"bottom",bottom:"top"}[c.side],o=-1!==["left","top"].indexOf(c.side)?-1:1,s=e(c.pad)?c.pad:2,l=hn.bBox(n.node()),u={left:0,top:0,right:g.width,bottom:g.height},h=c.maxShift||(u[c.side]-l[c.side])*("left"===c.side||"top"===c.side?-1:1);if(h<0)i=h;else{var f=c.offsetLeft||0,d=c.offsetTop||0;l.left-=f,l.right-=f,l.top-=d,l.bottom-=d,c.selection.each(function(){var t=hn.bBox(this);re.bBoxIntersect(l,t,s)&&(i=Math.max(i,o*(t[c.side]-l[a])+s))}),i=Math.min(h,i)}if(i>0||h<0){var p={left:[-i,0],right:[i,0],top:[0,-i],bottom:[0,i]}[c.side];n.attr("transform","translate("+p+")")}}}T.call(k),M&&(w?T.on(".opacity",null):(x=0,_=!0,T.text(l).on("mouseover.opacity",function(){t.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){t.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})),T.call(Fr.makeEditable,{gd:r}).on("edit",function(t){void 0!==u?R.call("restyle",r,s,t,u):R.call("relayout",r,s,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(k)}).on("input",function(t){this.text(t||" ").call(Fr.positionText,h.x,h.y)}));return T.classed("js-placeholder",_),p}},Si=/ [XY][0-9]* /;var Pi=r.FP_SAFE,Ri=Di,Oi=zi,Ii=function(t){t._length||t.setScale();var e,r=t._min&&t._max&&t._min.length&&t._max.length;t.autorange&&r&&(t.range=Di(t),t._r=t.range.slice(),t._rl=re.simpleMap(t._r,t.r2l),(e=t._input).range=t.range.slice(),e.autorange=t.autorange);if(t._anchorAxis&&t._anchorAxis.rangeslider){var n=t._anchorAxis.rangeslider[t._name];n&&"auto"===n.rangemode&&(n.range=r?Di(t):t._rangeInitial?t._rangeInitial.slice():t.range.slice()),(e=t._anchorAxis._input).rangeslider[t._name]=re.extendFlat({},n)}},Ni=function(t,r,n){if(!function(t){return t.autorange||t._rangesliderAutorange}(t)||!r)return;t._min||(t._min=[]);t._max||(t._max=[]);n||(n={});t._m||t.setScale();var i,a,o,s,l,u,c,h,f,d,p,g,v=r.length,m=n.padded||!1,y=n.tozero&&("linear"===t.type||"-"===t.type),b="log"===t.type,x=!1;function _(t){if(Array.isArray(t))return x=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var w=_((t._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),M=_((t._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),A=_(n.vpadplus||n.vpad),T=_(n.vpadminus||n.vpad);if(!x){if(p=1/0,g=-1/0,b)for(i=0;i<v;i++)(s=r[i])<p&&s>0&&(p=s),s>g&&s<Pi&&(g=s);else for(i=0;i<v;i++)(s=r[i])<p&&s>-Pi&&(p=s),s>g&&s<Pi&&(g=s);r=[p,g],v=2}function k(n){if(l=r[n],e(l))for(h=w(n),f=M(n),p=l-T(n),g=l+A(n),b&&p<g/10&&(p=g/10),u=t.c2l(p),c=t.c2l(g),y&&(u=Math.min(0,u),c=Math.max(0,c)),o=0;o<2;o++){var i=o?c:u;if(Fi(i)){var v=o?t._max:t._min,x=o?h:f,_=o?Bi:ji;for(d=!0,a=0;a<v.length&&d;a++){if(s=v[a],_(s.val,i)&&s.pad>=x&&(s.extrapad||!m)){d=!1;break}_(i,s.val)&&s.pad<=x&&(m||!s.extrapad)&&(v.splice(a,1),a--)}if(d){var k=y&&0===i;v.push({val:i,pad:k?0:x,extrapad:!k&&m})}}}}var E=Math.min(6,v);for(i=0;i<E;i++)k(i);for(i=v-1;i>=E;i--)k(i)};function Di(t){var e,r,n,i,a,o,s,l,u=[],c=t._min[0].val,h=t._max[0].val,f=0,d=!1,p=zi(t);for(e=1;e<t._min.length&&c===h;e++)c=Math.min(c,t._min[e].val);for(e=1;e<t._max.length&&c===h;e++)h=Math.max(h,t._max[e].val);if(t.range){var g=re.simpleMap(t.range,t.r2l);d=g[1]<g[0]}for("reversed"===t.autorange&&(d=!0,t.autorange=!0),e=0;e<t._min.length;e++)for(n=t._min[e],r=0;r<t._max.length;r++)l=(i=t._max[r]).val-n.val,s=t._length-p(n)-p(i),l>0&&s>0&&l/s>f&&(a=n,o=i,f=l/s);if(c===h){var v=c-1,m=c+1;u="tozero"===t.rangemode?c<0?[v,0]:[0,m]:"nonnegative"===t.rangemode?[Math.max(0,v),Math.max(0,m)]:[v,m]}else f&&("linear"!==t.type&&"-"!==t.type||("tozero"===t.rangemode?(a.val>=0&&(a={val:0,pad:0}),o.val<=0&&(o={val:0,pad:0})):"nonnegative"===t.rangemode&&(a.val-f*p(a)<0&&(a={val:0,pad:0}),o.val<0&&(o={val:1,pad:0})),f=(o.val-a.val)/(t._length-p(a)-p(o))),u=[a.val-f*p(a),o.val+f*p(o)]);return u[0]===u[1]&&("tozero"===t.rangemode?u=u[0]<0?[u[0],0]:u[0]>0?[0,u[0]]:[0,1]:(u=[u[0]-1,u[0]+1],"nonnegative"===t.rangemode&&(u[0]=Math.max(0,u[0])))),d&&u.reverse(),re.simpleMap(u,t.l2r||Number)}function zi(t){var e=t._length/20;return"domain"===t.constrain&&t._inputDomain&&(e*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(t){return t.pad+(t.extrapad?e:0)}}function Fi(t){return e(t)&&Math.abs(t)<Pi}function ji(t,e){return t<=e}function Bi(t,e){return t>=e}var Ui=r.BADNUM,Vi=function(t,r){return function(t,r){for(var n,i=0,a=0,o=Math.max(1,(t.length-1)/1e3),s=0;s<t.length;s+=o)n=t[Math.round(s)],re.isDateTime(n,r)&&(i+=1),e(n)&&(a+=1);return i>2*a}(t,r)?"date":function(t){for(var e,r=Math.max(1,(t.length-1)/1e3),n=0,i=0,a=0;a<t.length;a+=r)e=t[Math.round(a)],re.cleanNumber(e)!==Ui?n++:"string"==typeof e&&""!==e&&"None"!==e&&i++;return i>2*n}(t)?"category":function(t){if(!t)return!1;for(var r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}(t)?"linear":"-"};var Hi=re.cleanNumber,qi=re.ms2DateTime,Gi=re.dateTime2ms,Xi=re.ensureNumber,Wi=r.FP_SAFE,Yi=r.BADNUM;function Zi(t){return Math.pow(10,t)}var Qi=function(r,n){n=n||{};var i=(r._id||"x").charAt(0),a=10;function o(t,e){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&e&&r.range&&2===r.range.length){var n=r.range[0],i=r.range[1];return.5*(n+i-3*a*Math.abs(n-i))}return Yi}function s(t,n,i){var a=Gi(t,i||r.calendar);if(a===Yi){if(!e(t))return Yi;a=Gi(new Date(+t))}return a}function l(t,e,n){return qi(t,e,n||r.calendar)}function u(t){return r._categories[Math.round(t)]}function c(t){if(r._categoriesMap){var n=r._categoriesMap[t];if(void 0!==n)return n}if(e(t))return+t}function h(n){return e(n)?t.round(r._b+r._m*n,2):Yi}function f(t){return(t-r._b)/r._m}r.c2l="log"===r.type?o:Xi,r.l2c="log"===r.type?Zi:Xi,r.l2p=h,r.p2l=f,r.c2p="log"===r.type?function(t,e){return h(o(t,e))}:h,r.p2c="log"===r.type?function(t){return Zi(f(t))}:f,-1!==["linear","-"].indexOf(r.type)?(r.d2r=r.r2d=r.d2c=r.r2c=r.d2l=r.r2l=Hi,r.c2d=r.c2r=r.l2d=r.l2r=Xi,r.d2p=r.r2p=function(t){return r.l2p(Hi(t))},r.p2d=r.p2r=f,r.cleanPos=Xi):"log"===r.type?(r.d2r=r.d2l=function(t,e){return o(Hi(t),e)},r.r2d=r.r2c=function(t){return Zi(Hi(t))},r.d2c=r.r2l=Hi,r.c2d=r.l2r=Xi,r.c2r=o,r.l2d=Zi,r.d2p=function(t,e){return r.l2p(r.d2r(t,e))},r.p2d=function(t){return Zi(f(t))},r.r2p=function(t){return r.l2p(Hi(t))},r.p2r=f,r.cleanPos=Xi):"date"===r.type?(r.d2r=r.r2d=re.identity,r.d2c=r.r2c=r.d2l=r.r2l=s,r.c2d=r.c2r=r.l2d=r.l2r=l,r.d2p=r.r2p=function(t,e,n){return r.l2p(s(t,0,n))},r.p2d=r.p2r=function(t,e,r){return l(f(t),e,r)},r.cleanPos=function(t){return re.cleanDate(t,Yi,r.calendar)}):"category"===r.type&&(r.d2c=r.d2l=function(t){if(null!==t&&void 0!==t){if(void 0===r._categoriesMap&&(r._categoriesMap={}),void 0!==r._categoriesMap[t])return r._categoriesMap[t];r._categories.push(t);var e=r._categories.length-1;return r._categoriesMap[t]=e,e}return Yi},r.r2d=r.c2d=r.l2d=u,r.d2r=r.d2l_noadd=c,r.r2c=function(t){var e=c(t);return void 0!==e?e:r.fraction2r(.5)},r.l2r=r.c2r=Xi,r.r2l=c,r.d2p=function(t){return r.l2p(r.r2c(t))},r.p2d=function(t){return u(f(t))},r.r2p=r.d2p,r.p2r=f,r.cleanPos=function(t){return"string"==typeof t&&""!==t?t:Xi(t)}),r.fraction2r=function(t){var e=r.r2l(r.range[0]),n=r.r2l(r.range[1]);return r.l2r(e+t*(n-e))},r.r2fraction=function(t){var e=r.r2l(r.range[0]),n=r.r2l(r.range[1]);return(r.r2l(t)-e)/(n-e)},r.cleanRange=function(t,n){n||(n={}),t||(t="range");var a,o,s=re.nestedProperty(r,t).get();if(o=(o="date"===r.type?re.dfltRange(r.calendar):"y"===i?Oe.DFLTRANGEY:n.dfltRange||Oe.DFLTRANGEX).slice(),s&&2===s.length)for("date"===r.type&&(s[0]=re.cleanDate(s[0],Yi,r.calendar),s[1]=re.cleanDate(s[1],Yi,r.calendar)),a=0;a<2;a++)if("date"===r.type){if(!re.isDateTime(s[a],r.calendar)){r[t]=o;break}if(r.r2l(s[0])===r.r2l(s[1])){var l=re.constrain(r.r2l(s[0]),re.MIN_MS+1e3,re.MAX_MS-1e3);s[0]=r.l2r(l-1e3),s[1]=r.l2r(l+1e3);break}}else{if(!e(s[a])){if(!e(s[1-a])){r[t]=o;break}s[a]=s[1-a]*(a?10:.1)}if(s[a]<-Wi?s[a]=-Wi:s[a]>Wi&&(s[a]=Wi),s[0]===s[1]){var u=Math.max(1,Math.abs(1e-6*s[0]));s[0]-=u,s[1]+=u}}else re.nestedProperty(r,t).set(o)},r.setScale=function(t){var e=n._size;if(r._categories||(r._categories=[]),r._categoriesMap||(r._categoriesMap={}),r.overlaying){var a=ci.getFromId({_fullLayout:n},r.overlaying);r.domain=a.domain}var o=t&&r._r?"_r":"range",s=r.calendar;r.cleanRange(o);var l=r.r2l(r[o][0],s),u=r.r2l(r[o][1],s);if("y"===i?(r._offset=e.t+(1-r.domain[1])*e.h,r._length=e.h*(r.domain[1]-r.domain[0]),r._m=r._length/(l-u),r._b=-r._m*u):(r._offset=e.l+r.domain[0]*e.w,r._length=e.w*(r.domain[1]-r.domain[0]),r._m=r._length/(u-l),r._b=-r._m*l),!isFinite(r._m)||!isFinite(r._b))throw n._replotting=!1,new Error("Something went wrong with axis scaling")},r.makeCalcdata=function(t,e){var n,i,a,o,s=r.type,l="date"===s&&t[e+"calendar"];if(e in t){if(n=t[e],o=t._length||n.length,re.isTypedArray(n)&&("linear"===s||"log"===s)){if(o===n.length)return n;if(n.subarray)return n.subarray(0,o)}for(i=new Array(o),a=0;a<o;a++)i[a]=r.d2c(n[a],0,l)}else{var u=e+"0"in t?r.d2c(t[e+"0"],0,l):0,c=t["d"+e]?Number(t["d"+e]):1;for(n=t[{x:"y",y:"x"}[e]],o=t._length||n.length,i=new Array(o),a=0;a<o;a++)i[a]=u+a*c}return i},r.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&e(r.r2l(t[0]))&&e(r.r2l(t[1]))},r.isPtWithinRange=function(t,e){var n=r.c2l(t[i],null,e);return n>=r.r2l(r.range[0])&&n<=r.r2l(r.range[1])},r.clearCalc=function(){r._min=[],r._max=[],r._categories=(r._initialCategories||[]).slice(),r._categoriesMap={};for(var t=0;t<r._categories.length;t++)r._categoriesMap[r._categories[t]]=t};var d=n._d3locale;"date"===r.type&&(r._dateFormat=d?d.timeFormat.utc:t.time.format.utc,r._extraFormat=n._extraFormat),r._separators=n.separators,r._numFormat=d?d.numberFormat:t.format,delete r._minDtick,delete r._forceTick0},Ki={},$i=r.ONEAVGYEAR,Ji=r.ONEAVGMONTH,ta=r.ONEDAY,ea=r.ONEHOUR,ra=r.ONEMIN,na=r.ONESEC,ia=r.MINUS_SIGN,aa=r.BADNUM,oa=Nr.MID_SHIFT,sa=Nr.LINE_SPACING,la=Ki={};la.setConvert=Qi,la.id2name=ci.id2name,la.name2id=ci.name2id,la.cleanId=ci.cleanId,la.list=ci.list,la.listIds=ci.listIds,la.getFromId=ci.getFromId,la.getFromTrace=ci.getFromTrace,la.expand=Ni,la.getAutoRange=Ri,la.coerceRef=function(t,e,r,n,i,a){var o=n.charAt(n.length-1),s=r._fullLayout._subplots[o+"axis"],l=n+"ref",u={};return i||(i=s[0]||a),a||(a=i),u[l]={valType:"enumerated",values:s.concat(a?[a]:[]),dflt:i},re.coerce(t,e,u,l)},la.coercePosition=function(t,e,r,n,i,a){var o,s;if("paper"===n||"pixel"===n)o=re.ensureNumber,s=r(i,a);else{var l=la.getFromId(e,n);s=r(i,a=l.fraction2r(a)),o=l.cleanPos}t[i]=o(s)},la.cleanPosition=function(t,e,r){return("paper"===r||"pixel"===r?re.ensureNumber:la.getFromId(e,r).cleanPos)(t)};var ua=la.getDataConversions=function(t,e,r,n){var i,a="x"===r||"y"===r||"z"===r?r:n;if(Array.isArray(a)){if(i={type:Vi(n),_categories:[]},la.setConvert(i),"category"===i.type)for(var o=0;o<n.length;o++)i.d2c(n[o])}else i=la.getFromTrace(t,e,a);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===a?{d2c:ha,c2d:ha}:{d2c:ca,c2d:ca}};function ca(t){return+t}function ha(t){return String(t)}la.getDataToCoordFunc=function(t,e,r,n){return ua(t,e,r,n).d2c},la.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},la.minDtick=function(t,e,r,n){-1===["log","category"].indexOf(t.type)&&n?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=r):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((r-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=r):((e/t._minDtick+1e-6)%1>2e-6||((r-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},la.saveRangeInitial=function(t,e){for(var r=la.list(t,"",!0),n=!1,i=0;i<r.length;i++){var a=r[i],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||e&&s)&&(a._rangeInitial=a.range.slice(),n=!0)}return n},la.saveShowSpikeInitial=function(t,e){for(var r=la.list(t,"",!0),n=!1,i="on",a=0;a<r.length;a++){var o=r[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||e&&l)&&(o._showSpikeInitial=o.showspikes,n=!0),"on"!==i||o.showspikes||(i="off")}return t._fullLayout._cartesianSpikesEnabled=i,n},la.autoBin=function(t,r,n,i,a){var o,s,l=re.aggNums(Math.min,null,t),u=re.aggNums(Math.max,null,t);if(a||(a=r.calendar),"category"===r.type)return{start:l-.5,end:u+.5,size:1,_dataSpan:u-l};if(n)o=(u-l)/n;else{var c=re.distinctVals(t),h=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),f=h*re.roundUp(c.minDiff/h,[.9,1.9,4.9,9.9],!0);o=Math.max(f,2*re.stdev(t)/Math.pow(t.length,i?.25:.4)),e(o)||(o=1)}s="log"===r.type?{type:"linear",range:[l,u]}:{type:r.type,range:re.simpleMap([l,u],r.c2r,0,a),calendar:a},la.setConvert(s),la.autoTicks(s,o);var d,p=la.tickIncrement(la.tickFirst(s),s.dtick,"reverse",a);if("number"==typeof s.dtick)d=(p=function(t,r,n,i,a){var o=0,s=0,l=0,u=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var h=0;h<r.length;h++)r[h]%1==0?l++:e(r[h])||u++,c(r[h])&&o++,c(r[h]+n.dtick/2)&&s++;var f=r.length-u;if(l===f&&"date"!==n.type)n.dtick<1?t=i-.5*n.dtick:(t-=.5)+n.dtick<i&&(t+=n.dtick);else if(s<.1*f&&(o>.3*f||c(i)||c(a))){var d=n.dtick/2;t+=t+d<i?d:-d}return t}(p,t,s,l,u))+(1+Math.floor((u-p)/s.dtick))*s.dtick;else for("M"===s.dtick.charAt(0)&&(p=function(t,e,r,n,i){var a=re.findExactDates(e,i);if(a.exactDays>.8){var o=Number(r.substr(1));a.exactYears>.8&&o%12==0?t=la.tickIncrement(t,"M6","reverse")+1.5*ta:a.exactMonths>.8?t=la.tickIncrement(t,"M1","reverse")+15.5*ta:t-=ta/2;var s=la.tickIncrement(t,r);if(s<=n)return s}return t}(p,t,s.dtick,l,a)),d=p,0;d<=u;)d=la.tickIncrement(d,s.dtick,!1,a),0;return{start:r.c2r(p,0,a),end:r.c2r(d,0,a),size:s.dtick,_dataSpan:u-l}},la.prepTicks=function(t){var e=re.simpleMap(t.range,t.r2l);if("auto"===t.tickmode||!t.dtick){var r,n=t.nticks;n||("category"===t.type?(r=t.tickfont?1.2*(t.tickfont.size||12):15,n=t._length/r):(r="y"===t._id.charAt(0)?40:80,n=re.constrain(t._length/r,4,9)+1),"radialaxis"===t._name&&(n*=2)),"array"===t.tickmode&&(n*=100),la.autoTicks(t,Math.abs(e[1]-e[0])/n),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),xa(t)},la.calcTicks=function(t){la.prepTicks(t);var e=re.simpleMap(t.range,t.r2l);if("array"===t.tickmode)return function(t){var e,r,n=t.tickvals,i=t.ticktext,a=new Array(n.length),o=re.simpleMap(t.range,t.r2l),s=1.0001*o[0]-1e-4*o[1],l=1.0001*o[1]-1e-4*o[0],u=Math.min(s,l),c=Math.max(s,l),h=0;Array.isArray(i)||(i=[]);var f="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(r=0;r<n.length;r++)(e=f(n[r]))>u&&e<c&&(void 0===i[r]?a[h]=la.tickText(t,e):a[h]=_a(t,e,String(i[r])),h++);h<n.length&&a.splice(h,n.length-h);return a}(t);t._tmin=la.tickFirst(t);var r=1.0001*e[0]-1e-4*e[1],n=1.0001*e[1]-1e-4*e[0],i=e[1]<e[0];if(t._tmin<r!==i)return[];var a=[];"category"===t.type&&(n=i?Math.max(-.5,n):Math.min(t._categories.length-.5,n));for(var o=null,s=Math.max(1e3,t._length||0),l=t._tmin;(i?l>=n:l<=n)&&!(a.length>s||l===o);l=la.tickIncrement(l,t.dtick,i,t.calendar))o=l,a.push(l);"angular"===t._id&&360===Math.abs(e[1]-e[0])&&a.pop(),t._tmax=a[a.length-1],t._prevDateHead="",t._inCalcTicks=!0;for(var u=new Array(a.length),c=0;c<a.length;c++)u[c]=la.tickText(t,a[c]);return t._inCalcTicks=!1,u};var fa=[2,5,10],da=[1,2,3,6,12],pa=[1,2,5,10,15,30],ga=[1,2,3,7,14],va=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ma=[-.301,0,.301,.699,1],ya=[15,30,45,90,180];function ba(t,e,r){return e*re.roundUp(t/e,r)}function xa(t){var r=t.dtick;if(t._tickexponent=0,e(r)||"string"==typeof r||(r=1),"category"===t.type&&(t._tickround=null),"date"===t.type){var n=t.r2l(t.tick0),i=t.l2r(n).replace(/(^-|i)/g,""),a=i.length;if("M"===String(r).charAt(0))a>10||"01-01"!==i.substr(5)?t._tickround="d":t._tickround=+r.substr(1)%12==0?"y":"m";else if(r>=ta&&a<=10||r>=15*ta)t._tickround="d";else if(r>=ra&&a<=16||r>=ea)t._tickround="M";else if(r>=na&&a<=19||r>=ra)t._tickround="S";else{var o=t.l2r(n+r).replace(/^-/,"").length;t._tickround=Math.max(a,o)-20}}else if(e(r)||"L"===r.charAt(0)){var s=t.range.map(t.r2d||Number);e(r)||(r=Number(r.substr(1))),t._tickround=2-Math.floor(Math.log(r)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),u=Math.floor(Math.log(l)/Math.LN10+.01);Math.abs(u)>3&&(Ma(t.exponentformat)&&!Aa(u)?t._tickexponent=3*Math.round((u-1)/3):t._tickexponent=u)}else t._tickround=null}function _a(t,e,r){var n=t.tickfont||{};return{x:e,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}la.autoTicks=function(t,r){var n;function i(t){return Math.pow(t,Math.floor(Math.log(r)/Math.LN10))}if("date"===t.type){t.tick0=re.dateTick0(t.calendar);var a=2*r;a>$i?(r/=$i,n=i(10),t.dtick="M"+12*ba(r,n,fa)):a>Ji?(r/=Ji,t.dtick="M"+ba(r,1,da)):a>ta?(t.dtick=ba(r,ta,ga),t.tick0=re.dateTick0(t.calendar,!0)):a>ea?t.dtick=ba(r,ea,da):a>ra?t.dtick=ba(r,ra,pa):a>na?t.dtick=ba(r,na,pa):(n=i(10),t.dtick=ba(r,n,fa))}else if("log"===t.type){t.tick0=0;var o=re.simpleMap(t.range,t.r2l);if(r>.7)t.dtick=Math.ceil(r);else if(Math.abs(o[1]-o[0])<1){var s=1.5*Math.abs((o[1]-o[0])/r);r=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/s,n=i(10),t.dtick="L"+ba(r,n,fa)}else t.dtick=r>.3?"D2":"D1"}else"category"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(r,1))):"angular"===t._id?(t.tick0=0,n=1,t.dtick=ba(r,n,ya)):(t.tick0=0,n=i(10),t.dtick=ba(r,n,fa));if(0===t.dtick&&(t.dtick=1),!e(t.dtick)&&"string"!=typeof t.dtick){var l=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(l)}},la.tickIncrement=function(r,n,i,a){var o=i?-1:1;if(e(n))return r+o*n;var s=n.charAt(0),l=o*Number(n.substr(1));if("M"===s)return re.incrementMonth(r,l,a);if("L"===s)return Math.log(Math.pow(10,r)+l)/Math.LN10;if("D"===s){var u="D2"===n?ma:va,c=r+.01*o,h=re.roundUp(re.mod(c,1),u,i);return Math.floor(c)+Math.log(t.round(Math.pow(10,h),1))/Math.LN10}throw"unrecognized dtick "+String(n)},la.tickFirst=function(r){var n=r.r2l||Number,i=re.simpleMap(r.range,n),a=i[1]<i[0],o=a?Math.floor:Math.ceil,s=1.0001*i[0]-1e-4*i[1],l=r.dtick,u=n(r.tick0);if(e(l)){var c=o((s-u)/l)*l+u;return"category"===r.type&&(c=re.constrain(c,0,r._categories.length-1)),c}var h=l.charAt(0),f=Number(l.substr(1));if("M"===h){for(var d,p,g,v=0,m=u;v<10;){if(((d=la.tickIncrement(m,l,a,r.calendar))-s)*(m-s)<=0)return a?Math.min(m,d):Math.max(m,d);p=(s-(m+d)/2)/(d-m),g=h+(Math.abs(Math.round(p))||1)*f,m=la.tickIncrement(m,g,p<0?!a:a,r.calendar),v++}return re.error("tickFirst did not converge",r),m}if("L"===h)return Math.log(o((Math.pow(10,s)-u)/f)*f+u)/Math.LN10;if("D"===h){var y="D2"===l?ma:va,b=re.roundUp(re.mod(s,1),y,a);return Math.floor(s)+Math.log(t.round(Math.pow(10,b),1))/Math.LN10}throw"unrecognized dtick "+String(l)},la.tickText=function(t,r,n){var i,a,o=_a(t,r),s="array"===t.tickmode,l=n||s,u="category"===t.type?t.d2l_noadd:t.d2l;if(s&&Array.isArray(t.ticktext)){var c=re.simpleMap(t.range,t.r2l),h=Math.abs(c[1]-c[0])/1e4;for(a=0;a<t.ticktext.length&&!(Math.abs(r-u(t.tickvals[a]))<h);a++);if(a<t.ticktext.length)return o.text=String(t.ticktext[a]),o}function f(e){var i;return void 0===e||(n?"none"===e:(i={first:t._tmin,last:t._tmax}[e],"all"!==e&&r!==i))}return i=n?"never":"none"!==t.exponentformat&&f(t.showexponent)?"hide":"","date"===t.type?function(t,r,n,i){var a=t._tickround,o=n&&t.hoverformat||la.getTickFormat(t);i&&(a=e(a)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[a]);var s,l=re.formatDate(r.x,o,a,t._dateFormat,t.calendar,t._extraFormat),u=l.indexOf("\n");-1!==u&&(s=l.substr(u+1),l=l.substr(0,u));i&&("00:00:00"===l||"00:00"===l?(l=s,s=""):8===l.length&&(l=l.replace(/:00$/,"")));s&&(n?"d"===a?l+=", "+s:l=s+(l?", "+l:""):t._inCalcTicks&&s===t._prevDateHead||(l+="<br>"+s,t._prevDateHead=s));r.text=l}(t,o,n,l):"log"===t.type?function(t,r,n,i,a){var o=t.dtick,s=r.x,l=t.tickformat;"never"===a&&(a="");!i||"string"==typeof o&&"L"===o.charAt(0)||(o="L3");if(l||"string"==typeof o&&"L"===o.charAt(0))r.text=Ta(Math.pow(10,s),t,a,i);else if(e(o)||"D"===o.charAt(0)&&re.mod(s+.01,1)<.1){var u=Math.round(s);-1!==["e","E","power"].indexOf(t.exponentformat)||Ma(t.exponentformat)&&Aa(u)?(r.text=0===u?1:1===u?"10":u>1?"10<sup>"+u+"</sup>":"10<sup>"+ia+-u+"</sup>",r.fontSize*=1.25):(r.text=Ta(Math.pow(10,s),t,"","fakehover"),"D1"===o&&"y"===t._id.charAt(0)&&(r.dy-=r.fontSize/6))}else{if("D"!==o.charAt(0))throw"unrecognized dtick "+String(o);r.text=String(Math.round(Math.pow(10,re.mod(s,1)))),r.fontSize*=.75}if("D1"===t.dtick){var c=String(r.text).charAt(0);"0"!==c&&"1"!==c||("y"===t._id.charAt(0)?r.dx-=r.fontSize/4:(r.dy+=r.fontSize/2,r.dx+=(t.range[1]>t.range[0]?1:-1)*r.fontSize*(s<0?.5:.25)))}}(t,o,0,l,i):"category"===t.type?function(t,e){var r=t._categories[Math.round(e.x)];void 0===r&&(r="");e.text=String(r)}(t,o):"angular"===t._id?function(t,e,r,n,i){if("radians"!==t.thetaunit||r)e.text=Ta(e.x,t,i,n);else{var a=e.x/180;if(0===a)e.text="0";else{var o=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}var r=function(t){var r=1;for(;!e(Math.round(t*r)/r,t);)r*=10;return r}(t),n=t*r,i=Math.abs(function t(r,n){return e(n,0)?r:t(n,r%n)}(n,r));return[Math.round(n/i),Math.round(r/i)]}(a);if(o[1]>=100)e.text=Ta(re.deg2rad(e.x),t,i,n);else{var s=e.x<0;1===o[1]?1===o[0]?e.text="\u03c0":e.text=o[0]+"\u03c0":e.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join(""),s&&(e.text=ia+e.text)}}}}(t,o,n,l,i):function(t,e,r,n,i){"never"===i?i="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(i="hide");e.text=Ta(e.x,t,i,n)}(t,o,0,l,i),t.tickprefix&&!f(t.showtickprefix)&&(o.text=t.tickprefix+o.text),t.ticksuffix&&!f(t.showticksuffix)&&(o.text+=t.ticksuffix),o},la.hoverLabelText=function(t,e,r){if(r!==aa&&r!==e)return la.hoverLabelText(t,e)+" - "+la.hoverLabelText(t,r);var n="log"===t.type&&e<=0,i=la.tickText(t,t.c2l(n?-e:e),"hover").text;return n?0===e?"0":ia+i:i};var wa=["f","p","n","\u03bc","m","","k","M","G","T"];function Ma(t){return"SI"===t||"B"===t}function Aa(t){return t>14||t<-15}function Ta(t,r,n,i){var a=t<0,o=r._tickround,s=n||r.exponentformat||"B",l=r._tickexponent,u=la.getTickFormat(r),c=r.separatethousands;if(i){var h={exponentformat:s,dtick:"none"===r.showexponent?r.dtick:e(t)&&Math.abs(t)||1,range:"none"===r.showexponent?r.range.map(r.r2d):[0,t||1]};xa(h),o=(Number(h._tickround)||0)+4,l=h._tickexponent,r.hoverformat&&(u=r.hoverformat)}if(u)return r._numFormat(u)(t).replace(/-/g,ia);var f,d=Math.pow(10,-o)/2;if("none"===s&&(l=0),(t=Math.abs(t))<d)t="0",a=!1;else{if(t+=d,l&&(t*=Math.pow(10,-l),o+=l),0===o)t=String(Math.floor(t));else if(o<0){t=(t=String(Math.round(t))).substr(0,t.length+o);for(var p=o;p<0;p++)t+="0"}else{var g=(t=String(t)).indexOf(".")+1;g&&(t=t.substr(0,g+o).replace(/\.?0+$/,""))}t=re.numSeparate(t,r._separators,c)}l&&"hide"!==s&&(Ma(s)&&Aa(l)&&(s="power"),f=l<0?ia+-l:"power"!==s?"+"+l:String(l),"e"===s?t+="e"+f:"E"===s?t+="E"+f:"power"===s?t+="\xd710<sup>"+f+"</sup>":"B"===s&&9===l?t+="B":Ma(s)&&(t+=wa[l/3+5]));return a?ia+t:t}function ka(t,e){for(var r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r])}function Ea(t,e,r){var n,i,a=[],o=[],s=t.layout;for(n=0;n<e.length;n++)a.push(la.getFromId(t,e[n]));for(n=0;n<r.length;n++)o.push(la.getFromId(t,r[n]));var l=Object.keys(a[0]),u=["anchor","domain","overlaying","position","side","tickangle"],c=["linear","log"];for(n=0;n<l.length;n++){var h=l[n],f=a[0][h],d=o[0][h],p=!0,g=!1,v=!1;if("_"!==h.charAt(0)&&"function"!=typeof f&&-1===u.indexOf(h)){for(i=1;i<a.length&&p;i++){var m=a[i][h];"type"===h&&-1!==c.indexOf(f)&&-1!==c.indexOf(m)&&f!==m?g=!0:m!==f&&(p=!1)}for(i=1;i<o.length&&p;i++){var y=o[i][h];"type"===h&&-1!==c.indexOf(d)&&-1!==c.indexOf(y)&&d!==y?v=!0:o[i][h]!==d&&(p=!1)}p&&(g&&(s[a[0]._name].type="linear"),v&&(s[o[0]._name].type="linear"),La(s,h,a,o,t._fullLayout._dfltTitle))}}for(n=0;n<t._fullLayout.annotations.length;n++){var b=t._fullLayout.annotations[n];-1!==e.indexOf(b.xref)&&-1!==r.indexOf(b.yref)&&re.swapAttrs(s.annotations[n],["?"])}}function La(t,e,r,n,i){var a,o=re.nestedProperty,s=o(t[r[0]._name],e).get(),l=o(t[n[0]._name],e).get();for("title"===e&&(s===i.x&&(s=i.y),l===i.y&&(l=i.x)),a=0;a<r.length;a++)o(t,r[a]._name+"."+e).set(l);for(a=0;a<n.length;a++)o(t,n[a]._name+"."+e).set(s)}la.getTickFormat=function(t){var e,r,n,i,a,o,s;function l(t){return"string"!=typeof t?t:Number(t.replace("M",""))*Ji}function u(t,e){var r=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var n=r.indexOf(t.charAt(0)),i=r.indexOf(e.charAt(0));return n===i?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):n-i}return"number"==typeof t?1:-1}function c(t,e){var r=null===e[0],n=null===e[1],i=u(t,e[0])>=0,a=u(t,e[1])<=0;return(r||i)&&(n||a)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if(n=t.dtick,i=t.tickformatstops[e].dtickrange,a=void 0,void 0,void 0,a=l||function(t){return t},o=i[0],s=i[1],(!o&&"number"!=typeof o||a(o)<=a(n))&&(!s&&"number"!=typeof s||a(s)>=a(n))){r=t.tickformatstops[e];break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if(c(t.dtick,t.tickformatstops[e].dtickrange)){r=t.tickformatstops[e];break}}return r?r.value:t.tickformat},la.getSubplots=function(t,e){var r=t._fullLayout._subplots,n=r.cartesian.concat(r.gl2d||[]),i=e?la.findSubplotsWithAxis(n,e):n;return i.sort(function(t,e){var r=t.substr(1).split("y"),n=e.substr(1).split("y");return r[0]===n[0]?+r[1]-+n[1]:+r[0]-+n[0]}),i},la.findSubplotsWithAxis=function(t,e){for(var r=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),n=[],i=0;i<t.length;i++){var a=t[i];r.test(a)&&n.push(a)}return n},la.makeClipPaths=function(e){var r,n,i=e._fullLayout,a={_offset:0,_length:i.width,_id:""},o={_offset:0,_length:i.height,_id:""},s=la.list(e,"x",!0),l=la.list(e,"y",!0),u=[];for(r=0;r<s.length;r++)for(u.push({x:s[r],y:o}),n=0;n<l.length;n++)0===r&&u.push({x:a,y:l[n]}),u.push({x:s[r],y:l[n]});var c=i._clips.selectAll(".axesclip").data(u,function(t){return t.x._id+t.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+i._uid+t.x._id+t.y._id}).append("rect"),c.exit().remove(),c.each(function(e){t.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})},la.doTicks=function(r,n,i){var a,o=r._fullLayout,s=!1;if("object"==typeof n)n=(a=n)._id,s=!0;else if(a=la.getFromId(r,n),"redraw"===n&&o._paper.selectAll("g.subplot").each(function(t){var e=o._plots[t],r=e.xaxis,n=e.yaxis;e.xaxislayer.selectAll("."+r._id+"tick").remove(),e.yaxislayer.selectAll("."+n._id+"tick").remove(),e.gridlayer.selectAll("path").remove(),e.zerolinelayer.selectAll("path").remove(),o._infolayer.select(".g-"+r._id+"title").remove(),o._infolayer.select(".g-"+n._id+"title").remove()}),!n||"redraw"===n)return re.syncOrAsync(la.list(r,"",!0).map(function(t){return function(){if(t._id){var e=la.doTicks(r,t._id);return"redraw"===n&&(t._r=t.range.slice(),t._rl=re.simpleMap(t._r,t.r2l)),e}}}));a.setScale();var l,u,c,h,f,d=n.charAt(0),p=la.counterLetter(n),g=la.calcTicks(a),v=function(t){return[t.text,t.x,a.mirror,t.font,t.fontSize,t.fontColor].join("_")},m=n+"tick",y=n+"grid",b=n+"zl",x=(a.linewidth||1)/2,_="outside"===a.ticks?a.ticklen:0,w=0,M=hn.crispRound(r,a.gridwidth,1),A=hn.crispRound(r,a.zerolinewidth,M),T=hn.crispRound(r,a.tickwidth,1);if(a._counterangle&&"outside"===a.ticks){var k=a._counterangle*Math.PI/180;_=a.ticklen*Math.cos(k)+1,w=a.ticklen*Math.sin(k)}if(a.showticklabels&&("outside"===a.ticks||a.showline)&&(_+=.2*a.tickfont.size),"x"===d)l=["bottom","top"],u=a._transfn||function(t){return"translate("+(a._offset+a.l2p(t.x))+",0)"},c=function(t,e){if(a._counterangle){var r=a._counterangle*Math.PI/180;return"M0,"+t+"l"+Math.sin(r)*e+","+Math.cos(r)*e}return"M0,"+t+"v"+e};else if("y"===d)l=["left","right"],u=a._transfn||function(t){return"translate(0,"+(a._offset+a.l2p(t.x))+")"},c=function(t,e){if(a._counterangle){var r=a._counterangle*Math.PI/180;return"M"+t+",0l"+Math.cos(r)*e+","+-Math.sin(r)*e}return"M"+t+",0h"+e};else{if("angular"!==n)return void re.warn("Unrecognized doTicks axis:",n);l=["left","right"],u=a._transfn,c=function(t,e){return"M"+t+",0h"+e}}var E=a.side||l[0],L=[-1,1,E===l[1]?1:-1];if("inside"!==a.ticks==("x"===d)&&(L=L.map(function(t){return-t})),a.visible){a._tickFilter&&(g=g.filter(a._tickFilter));var C=g.filter(z);if("angular"===a._id&&(C=g),s){if(F(a._axislayer,c(a._pos+x*L[2],L[2]*a.ticklen)),a._counteraxis)V({gridlayer:a._gridlayer,zerolinelayer:a._zerolinelayer},a._counteraxis);return j(a._axislayer,a._pos)}if(o._has("cartesian")){var S={};(h=la.getSubplots(r,a)).map(function(t){var e=o._plots[t],r=e[p+"axis"],n=r._mainAxis._id;S[n]||(S[n]=1,V(e,r,t))});var P=a._mainSubplot,O=o._plots[P],I=[];if(a.ticks){var N=L[2],D=c(a._mainLinePosition+x*N,N*a.ticklen);a._anchorAxis&&a.mirror&&!0!==a.mirror&&(D+=c(a._mainMirrorPosition-x*N,-N*a.ticklen)),F(O[d+"axislayer"],D),I=Object.keys(a._linepositions)}return I.map(function(t){var e=o._plots[t][d+"axislayer"],r=a._linepositions[t]||[];function n(t){var e=L[t];return c(r[t]+x*e,e*a.ticklen)}F(e,n(0)+n(1))}),j(O[d+"axislayer"],a._mainLinePosition)}}function z(t){var e=a.l2p(t.x);return e>1&&e<a._length-1}function F(t,e){var r=t.selectAll("path."+m).data("inside"===a.ticks?C:g,v);e&&a.ticks?(r.enter().append("path").classed(m,1).classed("ticks",1).classed("crisp",1).call(Ne.stroke,a.tickcolor).style("stroke-width",T+"px").attr("d",e),r.attr("transform",u),r.exit().remove()):r.remove()}function j(i,s){var l,c,p,y,b,M=i.selectAll("g."+m).data(g,v);if(!e(s))return M.remove(),void B();if(!a.showticklabels)return M.remove(),B(),void C();"x"===d?(l=function(t){return t.dx+w*b},y=s+(_+x)*(b="bottom"===E?1:-1),c=function(t){return t.dy+y+t.fontSize*("bottom"===E?1:-.2)},p=function(t){return e(t)&&0!==t&&180!==t?t*b<0?"end":"start":"middle"}):"y"===d?(b="right"===E?1:-1,c=function(t){return t.dy+t.fontSize*oa-w*b},l=function(t){return t.dx+s+(_+x+(90===Math.abs(a.tickangle)?t.fontSize/2:0))*b},p=function(t){return e(t)&&90===Math.abs(t)?"middle":"right"===E?"start":"end"}):"angular"===n&&(a._labelShift=w,a._labelStandoff=_,a._pad=x,l=a._labelx,c=a._labely,p=a._labelanchor);var A=0,T=0,k=[];function L(r,n){r.each(function(r){var i=p(n,r),a=t.select(this),o=a.select(".text-math-group"),s=u.call(a.node(),r)+(e(n)&&0!=+n?" rotate("+n+","+l(r)+","+(c(r)-r.fontSize/2)+")":""),h=function(t,e,r){var n=(t-1)*e;if("x"===d){if(r<-60||60<r)return-.5*n;if("top"===E)return-n}else{if((r*="left"===E?1:-1)<-30)return-n;if(r<30)return-.5*n}return 0}(Fr.lineCount(a),sa*r.fontSize,e(n)?+n:0);if(h&&(s+=" translate(0, "+h+")"),o.empty())a.select("text").attr({transform:s,"text-anchor":i});else{var f=hn.bBox(o.node()).width*{end:-.5,start:.5}[i];o.attr("transform",s+(f?"translate("+f+",0)":""))}})}function C(){if(a.showticklabels){var t=r.getBoundingClientRect(),e=i.node().getBoundingClientRect();a._boundingBox={width:e.width,height:e.height,left:e.left-t.left,right:e.right-t.left,top:e.top-t.top,bottom:e.bottom-t.top}}else{var n,s=o._size;"x"===d?(n="free"===a.anchor?s.t+s.h*(1-a.position):s.t+s.h*(1-a._anchorAxis.domain[{bottom:0,top:1}[a.side]]),a._boundingBox={top:n,bottom:n,left:a._offset,right:a._offset+a._length,width:a._length,height:0}):(n="free"===a.anchor?s.l+s.w*a.position:s.l+s.w*a._anchorAxis.domain[{left:0,right:1}[a.side]],a._boundingBox={left:n,right:n,bottom:a._offset+a._length,top:a._offset,height:a._length,width:0})}if(h){var l=a._counterSpan=[1/0,-1/0];for(f=0;f<h.length;f++){var u=o._plots[h[f]]["x"===d?"yaxis":"xaxis"];c(l,[u._offset,u._offset+u._length])}"free"===a.anchor&&c(l,"x"===d?[a._boundingBox.bottom,a._boundingBox.top]:[a._boundingBox.right,a._boundingBox.left])}function c(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.max(t[1],e[1])}}M.enter().append("g").classed(m,1).append("text").attr("text-anchor","middle").each(function(e){var n=t.select(this),i=r._promises.length;n.call(Fr.positionText,l(e),c(e)).call(hn.font,e.font,e.fontSize,e.fontColor).text(e.text).call(Fr.convertToTspans,r),(i=r._promises[i])?k.push(r._promises.pop().then(function(){L(n,a.tickangle)})):L(n,a.tickangle)}),M.exit().remove(),M.each(function(t){A=Math.max(A,t.fontSize)}),"angular"===n&&M.each(function(e){t.select(this).select("text").call(Fr.positionText,l(e),c(e))}),L(M,a._lastangle||a.tickangle);var S=re.syncOrAsync([function(){return k.length&&Promise.all(k)},function(){if(L(M,a.tickangle),"x"===d&&!e(a.tickangle)&&("log"!==a.type||"D"!==String(a.dtick).charAt(0))){var r=[];for(M.each(function(e){var n=t.select(this),i=n.select(".text-math-group"),o=a.l2p(e.x);i.empty()&&(i=n.select("text"));var s=hn.bBox(i.node());r.push({top:0,bottom:10,height:10,left:o-s.width/2,right:o+s.width/2+2,width:s.width+2})}),f=0;f<r.length-1;f++)if(re.bBoxIntersect(r[f],r[f+1])){T=30;break}T&&(Math.abs((g[g.length-1].x-g[0].x)*a._m)/(g.length-1)<2.5*A&&(T=90),L(M,T)),a._lastangle=T}return B(),n+" done"},C,function(){if(a.automargin&&("x"===d||"y"===d)){var t=a.side[0],e={x:0,y:0,r:0,l:0,t:0,b:0};"x"===d?(e.y="free"===a.anchor?a.position:a._anchorAxis.domain["t"===t?1:0],e[t]+=a._boundingBox.height):(e.x="free"===a.anchor?a.position:a._anchorAxis.domain["r"===t?1:0],e[t]+=a._boundingBox.width),a.title!==o._dfltTitle[d]&&(e[t]+=a.titlefont.size);var n=a._name+".automargin",i=o._pushmargin[n];(!i||i[t].size<e[t])&&vi.autoMargin(r,n,e)}}]);return S&&S.then&&r._promises.push(S),S}function B(){if(!i){var e=ci.getFromId(r,n);if(!(e.rangeslider&&e.rangeslider.visible&&e._boundingBox&&"bottom"===e.side)){var a,s,l,u,c=t.select(r).selectAll("g."+n+"tick"),h={selection:c,side:e.side},f=n.charAt(0),d=r._fullLayout._size,p=e.titlefont.size;if(c.size()){var g=hn.getTranslate(c.node().parentNode);h.offsetLeft=g.x,h.offsetTop=g.y}var v=10+1.5*p+(e.linewidth?e.linewidth-1:0);"x"===f?(s="free"===e.anchor?{_offset:d.t+(1-(e.position||0))*d.h,_length:0}:ci.getFromId(r,e.anchor),l=e._offset+e._length/2,u="top"===e.side?-v-p*(e.showticklabels?1:0):s._length+v+p*(e.showticklabels?1.5:.5),u+=s._offset,h.side||(h.side="bottom")):(s="free"===e.anchor?{_offset:d.l+(e.position||0)*d.w,_length:0}:ci.getFromId(r,e.anchor),u=e._offset+e._length/2,l="right"===e.side?s._length+v+p*(e.showticklabels?1:.5):-v-p*(e.showticklabels?.5:0),l+=s._offset,a={rotate:"-90",offset:0},h.side||(h.side="left")),Ci.draw(r,n+"title",{propContainer:e,propName:e._name+".title",placeholder:o._dfltTitle[f],avoid:h,transform:a,attributes:{x:l,y:u,"text-anchor":"middle"}})}}}function U(t,e){return!0===t.visible&&t.xaxis+t.yaxis===e&&(!(!R.traceIs(t,"bar")||t.orientation!=={x:"h",y:"v"}[d])||t.fill&&t.fill.charAt(t.fill.length-1)===d)}function V(e,i,o){var s=e.gridlayer.selectAll("."+n),l=e.zerolinelayer,c=e["hidegrid"+d]?[]:C,h=a._gridpath||("x"===d?"M0,"+i._offset+"v":"M"+i._offset+",0h")+i._length,f=s.selectAll("path."+y).data(!1===a.showgrid?[]:c,v);if(f.enter().append("path").classed(y,1).classed("crisp",1).attr("d",h).each(function(e){a.zeroline&&("linear"===a.type||"-"===a.type)&&Math.abs(e.x)<a.dtick/100&&t.select(this).remove()}),f.attr("transform",u).call(Ne.stroke,a.gridcolor||"#ddd").style("stroke-width",M+"px"),"function"==typeof h&&f.attr("d",h),f.exit().remove(),l){for(var p=!1,g=0;g<r._fullData.length;g++)if(U(r._fullData[g],o)){p=!0;break}var m=re.simpleMap(a.range,a.r2l),x=m[0]*m[1]<=0&&a.zeroline&&("linear"===a.type||"-"===a.type)&&c.length&&(p||z({x:0})||!a.showline),_=l.selectAll("path."+b).data(x?[{x:0,id:n}]:[]);_.enter().append("path").classed(b,1).classed("zl",1).classed("crisp",1).attr("d",h).each(function(){l.selectAll("path").sort(function(t,e){return ci.idSort(t.id,e.id)})}),_.attr("transform",u).call(Ne.stroke,a.zerolinecolor||Ne.defaultLine).style("stroke-width",A+"px"),_.exit().remove()}}},la.swap=function(t,e){for(var r=function(t,e){var r,n,i=[];for(r=0;r<e.length;r++){var a=[],o=t._fullData[e[r]].xaxis,s=t._fullData[e[r]].yaxis;if(o&&s){for(n=0;n<i.length;n++)-1===i[n].x.indexOf(o)&&-1===i[n].y.indexOf(s)||a.push(n);if(a.length){var l,u=i[a[0]];if(a.length>1)for(n=1;n<a.length;n++)l=i[a[n]],ka(u.x,l.x),ka(u.y,l.y);ka(u.x,[o]),ka(u.y,[s])}else i.push({x:[o],y:[s]})}}return i}(t,e),n=0;n<r.length;n++)Ea(t,r[n].x,r[n].y)};var Ca={},Sa=Xe.YANGLE,Pa=Math.PI*Sa/180,Ra=1/Math.sin(Pa),Oa=Math.cos(Pa),Ia=Math.sin(Pa),Na=Xe.HOVERARROWSIZE,Da=Xe.HOVERTEXTPAD;function za(e,r,n){var i=r.hovermode,a=r.rotateLabels,o=r.bgColor,s=r.container,l=r.outerContainer,u=r.commonLabelOpts||{},c=r.fontFamily||Xe.HOVERFONT,h=r.fontSize||Xe.HOVERFONTSIZE,f=e[0],d=f.xa,p=f.ya,g="y"===i?"yLabel":"xLabel",v=f[g],m=(String(v)||"").split(" ")[0],y=l.node().getBoundingClientRect(),b=y.top,x=y.width,_=y.height,w=void 0!==v&&f.distance<=r.hoverdistance&&("x"===i||"y"===i);if(w){var M,A,T=!0;for(M=0;M<e.length;M++){T&&void 0===e[M].zLabel&&(T=!1),A=e[M].hoverinfo||e[M].trace.hoverinfo;var k=Array.isArray(A)?A:A.split("+");if(-1===k.indexOf("all")&&-1===k.indexOf(i)){w=!1;break}}T&&(w=!1)}var E=s.selectAll("g.axistext").data(w?[0]:[]);E.enter().append("g").classed("axistext",!0),E.exit().remove(),E.each(function(){var r=t.select(this),a=r.selectAll("path").data([0]),o=r.selectAll("text").data([0]);a.enter().append("path").style({"stroke-width":"1px"}),a.style({fill:u.bgcolor||Ne.defaultLine,stroke:u.bordercolor||Ne.background}),o.enter().append("text").attr("data-notex",1),o.text(v).call(hn.font,u.font.family||c,u.font.size||h,u.font.color||Ne.background).call(Fr.positionText,0,0).call(Fr.convertToTspans,n),r.attr("transform","");var s=o.node().getBoundingClientRect();if("x"===i){o.attr("text-anchor","middle").call(Fr.positionText,0,"top"===d.side?b-s.bottom-Na-Da:b-s.top+Na+Da);var l="top"===d.side?"-":"";a.attr("d","M0,0L"+Na+","+l+Na+"H"+(Da+s.width/2)+"v"+l+(2*Da+s.height)+"H-"+(Da+s.width/2)+"V"+l+Na+"H-"+Na+"Z"),r.attr("transform","translate("+(d._offset+(f.x0+f.x1)/2)+","+(p._offset+("top"===d.side?0:p._length))+")")}else{o.attr("text-anchor","right"===p.side?"start":"end").call(Fr.positionText,("right"===p.side?1:-1)*(Da+Na),b-s.top-s.height/2);var y="right"===p.side?"":"-";a.attr("d","M0,0L"+y+Na+","+Na+"V"+(Da+s.height/2)+"h"+y+(2*Da+s.width)+"V-"+(Da+s.height/2)+"H"+y+Na+"V-"+Na+"Z"),r.attr("transform","translate("+(d._offset+("right"===p.side?d._length:0))+","+(p._offset+(f.y0+f.y1)/2)+")")}e=e.filter(function(t){return void 0!==t.zLabelVal||(t[g]||"").split(" ")[0]===m})});var L=s.selectAll("g.hovertext").data(e,function(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")});return L.enter().append("g").classed("hovertext",!0).each(function(){var e=t.select(this);e.append("rect").call(Ne.fill,Ne.addOpacity(o,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(hn.font,c,h)}),L.exit().remove(),L.each(function(e){var r=t.select(this).attr("transform",""),s="",l="",u=Ne.opacity(e.color)?e.color:Ne.defaultLine,f=Ne.combine(u,o),d=e.borderColor||Ne.contrast(f);if(void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name){s=Fr.plainText(e.name||"");var p=Math.round(e.nameLength);p>-1&&s.length>p&&(s=p>3?s.substr(0,p-3)+"...":s.substr(0,p))}void 0!==e.extraText&&(l+=e.extraText),void 0!==e.zLabel?(void 0!==e.xLabel&&(l+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(l+="y: "+e.yLabel+"<br>"),l+=(l?"z: ":"")+e.zLabel):w&&e[i+"Label"]===v?l=e[("x"===i?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&(l=e.yLabel):l=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",e.text&&!Array.isArray(e.text)&&(l+=(l?"<br>":"")+e.text),""===l&&(""===s&&r.remove(),l=s);var g=r.select("text.nums").call(hn.font,e.fontFamily||c,e.fontSize||h,e.fontColor||d).text(l).attr("data-notex",1).call(Fr.positionText,0,0).call(Fr.convertToTspans,n),m=r.select("text.name"),y=0;s&&s!==l?(m.call(hn.font,e.fontFamily||c,e.fontSize||h,f).text(s).attr("data-notex",1).call(Fr.positionText,0,0).call(Fr.convertToTspans,n),y=m.node().getBoundingClientRect().width+2*Da):(m.remove(),r.select("rect").remove()),r.select("path").style({fill:f,stroke:d});var M,A,T=g.node().getBoundingClientRect(),k=e.xa._offset+(e.x0+e.x1)/2,E=e.ya._offset+(e.y0+e.y1)/2,L=Math.abs(e.x1-e.x0),C=Math.abs(e.y1-e.y0),S=T.width+Na+Da+y;e.ty0=b-T.top,e.bx=T.width+2*Da,e.by=T.height+2*Da,e.anchor="start",e.txwidth=T.width,e.tx2width=y,e.offset=0,a?(e.pos=k,M=E+C/2+S<=_,A=E-C/2-S>=0,"top"!==e.idealAlign&&M||!A?M?(E+=C/2,e.anchor="start"):e.anchor="middle":(E-=C/2,e.anchor="end")):(e.pos=E,M=k+L/2+S<=x,A=k-L/2-S>=0,"left"!==e.idealAlign&&M||!A?M?(k+=L/2,e.anchor="start"):e.anchor="middle":(k-=L/2,e.anchor="end")),g.attr("text-anchor",e.anchor),y&&m.attr("text-anchor",e.anchor),r.attr("transform","translate("+k+","+E+")"+(a?"rotate("+Sa+")":""))}),L}function Fa(e,r){e.each(function(e){var n=t.select(this);if(e.del)n.remove();else{var i="end"===e.anchor?-1:1,a=n.select("text.nums"),o={start:1,end:-1,middle:0}[e.anchor],s=o*(Na+Da),l=s+o*(e.txwidth+Da),u=0,c=e.offset;"middle"===e.anchor&&(s-=e.tx2width/2,l+=e.txwidth/2+Da),r&&(c*=-Ia,u=e.offset*Oa),n.select("path").attr("d","middle"===e.anchor?"M-"+(e.bx/2+e.tx2width/2)+","+(c-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(i*Na+u)+","+(Na+c)+"v"+(e.by/2-Na)+"h"+i*e.bx+"v-"+e.by+"H"+(i*Na+u)+"V"+(c-Na)+"Z"),a.call(Fr.positionText,s+u,c+e.ty0-e.by/2+Da),e.tx2width&&(n.select("text.name").call(Fr.positionText,l+o*Da+u,c+e.ty0-e.by/2+Da),n.select("rect").call(hn.setRect,l+(o-1)*e.tx2width/2+u,c-e.by/2-1,e.tx2width,e.by+2))}})}function ja(t,e){var r=t.index,n=t.trace||{},i=t.cd[0],a=t.cd[r]||{},o=Array.isArray(r)?function(t,e){return re.castOption(i,r,t)||re.extractOption({},n,"",e)}:function(t,e){return re.extractOption(a,n,t,e)};function s(e,r,n){var i=o(r,n);i&&(t[e]=i)}if(s("hoverinfo","hi","hoverinfo"),s("color","hbg","hoverlabel.bgcolor"),s("borderColor","hbc","hoverlabel.bordercolor"),s("fontFamily","htf","hoverlabel.font.family"),s("fontSize","hts","hoverlabel.font.size"),s("fontColor","htc","hoverlabel.font.color"),s("nameLength","hnl","hoverlabel.namelength"),t.posref="y"===e?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=re.constrain(t.x0,0,t.xa._length),t.x1=re.constrain(t.x1,0,t.xa._length),t.y0=re.constrain(t.y0,0,t.ya._length),t.y1=re.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:Ki.hoverLabelText(t.xa,t.xLabelVal),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:Ki.hoverLabelText(t.ya,t.yLabelVal),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var l=Ki.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+l+" / -"+Ki.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" \xb1 "+l,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var u=Ki.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+u+" / -"+Ki.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" \xb1 "+u,"y"===e&&(t.distance+=1)}var c=t.hoverinfo||t.trace.hoverinfo;return"all"!==c&&(-1===(c=Array.isArray(c)?c:c.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===c.indexOf("y")&&(t.yLabel=void 0),-1===c.indexOf("z")&&(t.zLabel=void 0),-1===c.indexOf("text")&&(t.text=void 0),-1===c.indexOf("name")&&(t.name=void 0)),t}function Ba(t,e){var r,n,i=e.container,a=e.fullLayout,o=e.event,l=!!t.hLinePoint,u=!!t.vLinePoint;if(i.selectAll(".spikeline").remove(),u||l){var c=Ne.combine(a.plot_bgcolor,a.paper_bgcolor);if(l){var h,f,d=t.hLinePoint;r=d&&d.xa,"cursor"===(n=d&&d.ya).spikesnap?(h=o.pointerX,f=o.pointerY):(h=r._offset+d.x,f=n._offset+d.y);var p,g,v=s.readability(d.color,c)<1.5?Ne.contrast(c):d.color,m=n.spikemode,y=n.spikethickness,b=n.spikecolor||v,x=n._boundingBox,_=(x.left+x.right)/2<h?x.right:x.left;-1===m.indexOf("toaxis")&&-1===m.indexOf("across")||(-1!==m.indexOf("toaxis")&&(p=_,g=h),-1!==m.indexOf("across")&&(p=n._counterSpan[0],g=n._counterSpan[1]),i.insert("line",":first-child").attr({x1:p,x2:g,y1:f,y2:f,"stroke-width":y,stroke:b,"stroke-dasharray":hn.dashStyle(n.spikedash,y)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:p,x2:g,y1:f,y2:f,"stroke-width":y+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)),-1!==m.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:_+("right"!==n.side?y:-y),cy:f,r:y,fill:b}).classed("spikeline",!0)}if(u){var w,M,A=t.vLinePoint;r=A&&A.xa,n=A&&A.ya,"cursor"===r.spikesnap?(w=o.pointerX,M=o.pointerY):(w=r._offset+A.x,M=n._offset+A.y);var T,k,E=s.readability(A.color,c)<1.5?Ne.contrast(c):A.color,L=r.spikemode,C=r.spikethickness,S=r.spikecolor||E,P=r._boundingBox,R=(P.top+P.bottom)/2<M?P.bottom:P.top;-1===L.indexOf("toaxis")&&-1===L.indexOf("across")||(-1!==L.indexOf("toaxis")&&(T=R,k=M),-1!==L.indexOf("across")&&(T=r._counterSpan[0],k=r._counterSpan[1]),i.insert("line",":first-child").attr({x1:w,x2:w,y1:T,y2:k,"stroke-width":C,stroke:S,"stroke-dasharray":hn.dashStyle(r.spikedash,C)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:w,x2:w,y1:T,y2:k,"stroke-width":C+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)),-1!==L.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:w,cy:R-("top"!==r.side?C:-C),r:C,fill:S}).classed("spikeline",!0)}}}function Ua(t,e){return!e||(e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint)}Ca.hover=function(r,n,i,a){r=re.getGraphDiv(r),re.throttle(r._fullLayout._uid+Xe.HOVERID,Xe.HOVERMINTIME,function(){!function(r,n,i,a){i||(i="xy");var o=Array.isArray(i)?i:[i],s=r._fullLayout,l=s._plots||[],u=l[i],c=s._has("cartesian");if(u){var h=u.overlays.map(function(t){return t.id});o=o.concat(h)}for(var f=o.length,d=new Array(f),p=new Array(f),g=!1,v=0;v<f;v++){var m=o[v],y=l[m];if(y)g=!0,d[v]=Ki.getFromId(r,y.xaxis._id),p[v]=Ki.getFromId(r,y.yaxis._id);else{var b=s[m]._subplot;d[v]=b.xaxis,p[v]=b.yaxis}}var x=n.hovermode||s.hovermode;x&&!g&&(x="closest");if(-1===["x","y","closest"].indexOf(x)||!r.calcdata||r.querySelector(".zoombox")||r._dragging)return rr.unhoverRaw(r,n);var _,w,M,A,T,k,E,L,C,S,P,O,I,N=-1===s.hoverdistance?1/0:s.hoverdistance,D=-1===s.spikedistance?1/0:s.spikedistance,z=[],F=[],j={hLinePoint:null,vLinePoint:null};if(Array.isArray(n))for(x="array",M=0;M<n.length;M++)"skip"!==(T=r.calcdata[n[M].curveNumber||0])[0].trace.hoverinfo&&F.push(T);else{for(A=0;A<r.calcdata.length;A++)T=r.calcdata[A],"skip"!==(k=T[0].trace).hoverinfo&&-1!==o.indexOf(Pn.getSubplot(k))&&F.push(T);var B,U,V=!n.target;if(V)B="xpx"in n?n.xpx:d[0]._length/2,n.pointerX=B+d[0]._offset,U="ypx"in n?n.ypx:p[0]._length/2,n.pointerY=U+p[0]._offset;else{if(!1===tr.triggerHandler(r,"plotly_beforehover",n))return;var H=n.target.getBoundingClientRect();if(B=n.clientX-H.left,U=n.clientY-H.top,B<0||B>H.width||U<0||U>H.height)return rr.unhoverRaw(r,n);n.pointerX=n.offsetX,n.pointerY=n.offsetY}if(_="xval"in n?Pn.flat(o,n.xval):Pn.p2c(d,B),w="yval"in n?Pn.flat(o,n.yval):Pn.p2c(p,U),!e(_[0])||!e(w[0]))return re.warn("Fx.hover failed",n,r),rr.unhoverRaw(r,n)}var q=1/0;for(A=0;A<F.length;A++)if((T=F[A])&&T[0]&&T[0].trace&&!0===T[0].trace.visible&&(k=T[0].trace,-1===["carpet","contourcarpet"].indexOf(k._module.name))){if(E=Pn.getSubplot(k),L=o.indexOf(E),C=x,O={cd:T,trace:k,xa:d[L],ya:p[L],maxHoverDistance:N,maxSpikeDistance:D,index:!1,distance:Math.min(q,N),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:Ne.defaultLine,name:k.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},s[E]&&(O.subplot=s[E]._subplot),I=z.length,"array"===C){var G=n[A];"pointNumber"in G?(O.index=G.pointNumber,C="closest"):(C="","xval"in G&&(S=G.xval,C="x"),"yval"in G&&(P=G.yval,C=C?"closest":"y"))}else S=_[L],P=w[L];if(0!==N)if(k._module&&k._module.hoverPoints){var X=k._module.hoverPoints(O,S,P,C,s._hoverlayer);if(X)for(var W,Y=0;Y<X.length;Y++)W=X[Y],e(W.x0)&&e(W.y0)&&z.push(ja(W,x))}else re.log("Unrecognized trace type in hover:",k);if("closest"===x&&z.length>I&&(z.splice(0,I),q=z[0].distance),c&&0!==D&&0===z.length){O.distance=D,O.index=!1;var Z=k._module.hoverPoints(O,S,P,"closest",s._hoverlayer);if(Z&&(Z=Z.filter(function(t){return t.spikeDistance<=D})),Z&&Z.length){var Q,K=Z.filter(function(t){return t.xa.showspikes});if(K.length){var $=K[0];e($.x0)&&e($.y0)&&(Q=rt($),(!j.vLinePoint||j.vLinePoint.spikeDistance>Q.spikeDistance)&&(j.vLinePoint=Q))}var J=Z.filter(function(t){return t.ya.showspikes});if(J.length){var tt=J[0];e(tt.x0)&&e(tt.y0)&&(Q=rt(tt),(!j.hLinePoint||j.hLinePoint.spikeDistance>Q.spikeDistance)&&(j.hLinePoint=Q))}}}}function et(t,e){for(var r,n=null,i=1/0,a=0;a<t.length;a++)(r=t[a].spikeDistance)<i&&r<=e&&(n=t[a],i=r);return n}function rt(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}var nt={fullLayout:s,container:s._hoverlayer,outerContainer:s._paperdiv,event:n},it=r._spikepoints,at={vLinePoint:j.vLinePoint,hLinePoint:j.hLinePoint};if(r._spikepoints=at,c&&0!==D&&0!==z.length){var ot=z.filter(function(t){return t.ya.showspikes}),st=et(ot,D);j.hLinePoint=rt(st);var lt=z.filter(function(t){return t.xa.showspikes}),ut=et(lt,D);j.vLinePoint=rt(ut)}if(0===z.length){var ct=rr.unhoverRaw(r,n);return!c||null===j.hLinePoint&&null===j.vLinePoint||Ua(it)&&Ba(j,nt),ct}c&&Ua(it)&&Ba(j,nt);z.sort(function(t,e){return t.distance-e.distance});var ht=r._hoverdata,ft=[];for(M=0;M<z.length;M++){var dt=z[M];ft.push(Pn.makeEventData(dt,dt.trace,dt.cd))}r._hoverdata=ft;var pt="y"===x&&F.length>1,gt=Ne.combine(s.plot_bgcolor||Ne.background,s.paper_bgcolor),vt={hovermode:x,rotateLabels:pt,bgColor:gt,container:s._hoverlayer,outerContainer:s._paperdiv,commonLabelOpts:s.hoverlabel,hoverdistance:s.hoverdistance},mt=za(z,vt,r);if(function(t,e,r){var n,i,a,o,s,l,u,c=0,h=t.map(function(t,n){var i=t[e];return[{i:n,dp:0,pos:t.pos,posref:t.posref,size:t.by*("x"===i._id.charAt(0)?Ra:1)/2,pmin:0,pmax:"x"===i._id.charAt(0)?r.width:r.height}]}).sort(function(t,e){return t[0].posref-e[0].posref});function f(t){var e=t[0],r=t[t.length-1];if(i=e.pmin-e.pos-e.dp+e.size,a=r.pos+r.dp+r.size-e.pmax,i>.01){for(s=t.length-1;s>=0;s--)t[s].dp+=i;n=!1}if(!(a<.01)){if(i<-.01){for(s=t.length-1;s>=0;s--)t[s].dp-=a;n=!1}if(n){var u=0;for(o=0;o<t.length;o++)(l=t[o]).pos+l.dp+l.size>e.pmax&&u++;for(o=t.length-1;o>=0&&!(u<=0);o--)(l=t[o]).pos>e.pmax-1&&(l.del=!0,u--);for(o=0;o<t.length&&!(u<=0);o++)if((l=t[o]).pos<e.pmin+1)for(l.del=!0,u--,a=2*l.size,s=t.length-1;s>=0;s--)t[s].dp-=a;for(o=t.length-1;o>=0&&!(u<=0);o--)(l=t[o]).pos+l.dp+l.size>e.pmax&&(l.del=!0,u--)}}}for(;!n&&c<=t.length;){for(c++,n=!0,o=0;o<h.length-1;){var d=h[o],p=h[o+1],g=d[d.length-1],v=p[0];if((i=g.pos+g.dp+g.size-v.pos-v.dp+v.size)>.01&&g.pmin===v.pmin&&g.pmax===v.pmax){for(s=p.length-1;s>=0;s--)p[s].dp+=i;for(d.push.apply(d,p),h.splice(o+1,1),u=0,s=d.length-1;s>=0;s--)u+=d[s].dp;for(a=u/d.length,s=d.length-1;s>=0;s--)d[s].dp-=a;n=!1}else o++}h.forEach(f)}for(o=h.length-1;o>=0;o--){var m=h[o];for(s=m.length-1;s>=0;s--){var y=m[s],b=t[y.i];b.offset=y.dp,b.del=y.del}}}(z,pt?"xa":"ya",s),Fa(mt,pt),n.target&&n.target.tagName){var yt=R.getComponentMethod("annotations","hasClickToShow")(r,ft);zn(t.select(n.target),yt?"pointer":"")}if(!n.target||a||!function(t,e,r){if(!r||r.length!==t._hoverdata.length)return!0;for(var n=r.length-1;n>=0;n--){var i=r[n],a=t._hoverdata[n];if(i.curveNumber!==a.curveNumber||String(i.pointNumber)!==String(a.pointNumber))return!0}return!1}(r,0,ht))return;ht&&r.emit("plotly_unhover",{event:n,points:ht});r.emit("plotly_hover",{event:n,points:r._hoverdata,xaxes:d,yaxes:p,xvals:_,yvals:w})}(r,n,i,a)})},Ca.loneHover=function(e,r){var n={color:e.color||Ne.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},i=t.select(r.container),a=r.outerContainer?t.select(r.outerContainer):i,o={hovermode:"closest",rotateLabels:!1,bgColor:r.bgColor||Ne.background,container:i,outerContainer:a},s=za([n],o,r.gd);return Fa(s,o.rotateLabels),s.node()};var Va=Ca.hover,Ha=function(t,e,r,n){r("hoverlabel.bgcolor",(n=n||{}).bgcolor),r("hoverlabel.bordercolor",n.bordercolor),r("hoverlabel.namelength",n.namelength),re.coerceFont(r,"hoverlabel.font",n.font)},qa=k({editType:"none"});qa.family.dflt=Xe.HOVERFONT,qa.size.dflt=Xe.HOVERFONTSIZE;var Ga={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:qa,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"}};var Xa={moduleType:"component",name:"fx",constants:Xe,schema:{layout:Ga},attributes:E,layoutAttributes:Ga,supplyLayoutGlobalDefaults:function(t,e){Ha(0,0,function(r,n){return re.coerce(t,e,Ga,r,n)})},supplyDefaults:function(t,e,r,n){Ha(0,0,function(r,n){return re.coerce(t,e,E,r,n)},n.hoverlabel)},supplyLayoutDefaults:function(t,e,r){function n(r,n){return re.coerce(t,e,Ga,r,n)}var i;n("dragmode"),e._has("cartesian")?(e._isHoriz=function(t){for(var e=!0,r=0;r<t.length;r++){var n=t[r];if("h"!==n.orientation){e=!1;break}}return e}(r),i=e._isHoriz?"y":"x"):i="closest",n("hovermode",i)&&(n("hoverdistance"),n("spikedistance"));var a=e._has("mapbox"),o=e._has("geo"),s=e._basePlotModules.length;"zoom"===e.dragmode&&((a||o)&&1===s||a&&o&&2===s)&&(e.dragmode="pan")},calc:function(t){var e=t.calcdata,r=t._fullLayout;function n(t){return function(e){return re.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}}for(var i=0;i<e.length;i++){var a=e[i],o=a[0].trace;if(!R.traceIs(o,"pie")){var s=R.traceIs(o,"2dMap")?Sn:re.fillArray;s(o.hoverinfo,a,"hi",n(o)),o.hoverlabel&&(s(o.hoverlabel.bgcolor,a,"hbg"),s(o.hoverlabel.bordercolor,a,"hbc"),s(o.hoverlabel.font.size,a,"hts"),s(o.hoverlabel.font.color,a,"htc"),s(o.hoverlabel.font.family,a,"htf"),s(o.hoverlabel.namelength,a,"hnl"))}}},getDistanceFunction:Pn.getDistanceFunction,getClosest:Pn.getClosest,inbox:Pn.inbox,quadrature:Pn.quadrature,appendArrayPointValue:Pn.appendArrayPointValue,castHoverOption:function(t,e,r){return re.castOption(t,e,"hoverlabel."+r)},castHoverinfo:function(t,e,r){return re.castOption(t,r,"hoverinfo",function(r){return re.coerceHoverinfo({hoverinfo:r},{_module:t._module},e)})},hover:Ca.hover,unhover:rr.unhover,loneHover:Ca.loneHover,loneUnhover:function(e){var r=re.isD3Selection(e)?e:t.select(e);r.selectAll("g.hovertext").remove(),r.selectAll(".spikeline").remove()},click:function(t,e,r){var n=R.getComponentMethod("annotations","onClick")(t,t._hoverdata);function i(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==r&&Va(t,e,r,!0),t._hoverdata&&e&&e.target&&(n&&n.then?n.then(i):i(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}};var Wa={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var r=0;r<e.annotations.length;r++)e.annotations[r].visible&&Ya(t,r);return vi.previousPromises(t)},drawOne:Ya,drawRaw:Za};function Ya(t,e){var r=t._fullLayout.annotations[e]||{};Za(t,r,e,!1,Ki.getFromId(t,r.xref),Ki.getFromId(t,r.yref))}function Za(e,r,n,i,a,o){var s,l,u=e._fullLayout,c=e._fullLayout._size,h=e._context.edits;i?(s="annotation-"+i,l=i+".annotations["+n+"]"):(s="annotation",l="annotations["+n+"]"),u._infolayer.selectAll("."+s+'[data-index="'+n+'"]').remove();var f="clip"+u._uid+"_ann"+n;if(r._input&&!1!==r.visible){var d={x:{},y:{}},p=+r.textangle||0,g=u._infolayer.append("g").classed(s,!0).attr("data-index",String(n)).style("opacity",r.opacity),v=g.append("g").classed("annotation-text-g",!0),m=h[r.showarrow?"annotationTail":"annotationPosition"],y=r.captureevents||h.annotationText||m,b=v.append("g").style("pointer-events",y?"all":null).call(Nn,"default").on("click",function(){e._dragging=!1;var a={index:n,annotation:r._input,fullAnnotation:r,event:t.event};i&&(a.subplotId=i),e.emit("plotly_clickannotation",a)});r.hovertext&&b.on("mouseover",function(){var t=r.hoverlabel,n=t.font,i=this.getBoundingClientRect(),a=e.getBoundingClientRect();Xa.loneHover({x0:i.left-a.left,x1:i.right-a.left,y:(i.top+i.bottom)/2-a.top,text:r.hovertext,color:t.bgcolor,borderColor:t.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:e})}).on("mouseout",function(){Xa.loneUnhover(u._hoverlayer.node())});var x=r.borderwidth,_=r.borderpad,w=x+_,M=b.append("rect").attr("class","bg").style("stroke-width",x+"px").call(Ne.stroke,r.bordercolor).call(Ne.fill,r.bgcolor),A=r.width||r.height,T=u._topclips.selectAll("#"+f).data(A?[0]:[]);T.enter().append("clipPath").classed("annclip",!0).attr("id",f).append("rect"),T.exit().remove();var k=r.font,E=b.append("text").classed("annotation-text",!0).text(r.text);h.annotationText?E.call(Fr.makeEditable,{delegate:b,gd:e}).call(L).on("edit",function(t){r.text=t,this.call(L);var n={};n[l+".text"]=r.text,a&&a.autorange&&(n[a._name+".autorange"]=!0),o&&o.autorange&&(n[o._name+".autorange"]=!0),R.call("relayout",e,n)}):E.call(L)}else t.selectAll("#"+f).remove();function L(t){return t.call(hn.font,k).attr({"text-anchor":{left:"start",right:"end"}[r.align]||"middle"}),Fr.convertToTspans(t,e,C),t}function C(){var t=E.selectAll("a");1===t.size()&&t.text()===E.text()&&b.insert("a",":first-child").attr({"xlink:xlink:href":t.attr("xlink:href"),"xlink:xlink:show":t.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(M.node());var n=b.select(".annotation-text-math-group"),s=!n.empty(),y=hn.bBox((s?n:E).node()),_=y.width,k=y.height,L=r.width||_,C=r.height||k,S=Math.round(L+2*w),P=Math.round(C+2*w);function O(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}r._w=L,r._h=C;for(var I=!1,N=["x","y"],D=0;D<N.length;D++){var z,F,j,B,U,V=N[D],H=r[V+"ref"]||V,q=r["a"+V+"ref"],G={x:a,y:o}[V],X=(p+("x"===V?0:-90))*Math.PI/180,W=S*Math.cos(X),Y=P*Math.sin(X),Z=Math.abs(W)+Math.abs(Y),Q=r[V+"anchor"],K=r[V+"shift"]*("x"===V?1:-1),$=d[V];if(G){var J=G.r2fraction(r[V]);if((e._dragging||!G.autorange)&&(J<0||J>1)&&(q===H?((J=G.r2fraction(r["a"+V]))<0||J>1)&&(I=!0):I=!0,I))continue;z=G._offset+G.r2p(r[V]),B=.5}else"x"===V?(j=r[V],z=c.l+c.w*j):(j=1-r[V],z=c.t+c.h*j),B=r.showarrow?.5:j;if(r.showarrow){$.head=z;var tt=r["a"+V];U=W*O(.5,r.xanchor)-Y*O(.5,r.yanchor),q===H?($.tail=G._offset+G.r2p(tt),F=U):($.tail=z+tt,F=U+tt),$.text=$.tail+U;var et=u["x"===V?"width":"height"];if("paper"===H&&($.head=re.constrain($.head,1,et-1)),"pixel"===q){var rt=-Math.max($.tail-3,$.text),nt=Math.min($.tail+3,$.text)-et;rt>0?($.tail+=rt,$.text+=rt):nt>0&&($.tail-=nt,$.text-=nt)}$.tail+=K,$.head+=K}else F=U=Z*O(B,Q),$.text=z+U;$.text+=K,U+=K,F+=K,r["_"+V+"padplus"]=Z/2+F,r["_"+V+"padminus"]=Z/2-F,r["_"+V+"size"]=Z,r["_"+V+"shift"]=U}if(I)b.remove();else{var it=0,at=0;if("left"!==r.align&&(it=(L-_)*("center"===r.align?.5:1)),"top"!==r.valign&&(at=(C-k)*("middle"===r.valign?.5:1)),s)n.select("svg").attr({x:w+it-1,y:w+at}).call(hn.setClipUrl,A?f:null);else{var ot=w+at-y.top,st=w+it-y.left;E.call(Fr.positionText,st,ot).call(hn.setClipUrl,A?f:null)}T.select("rect").call(hn.setRect,w,w,L,C),M.call(hn.setRect,x/2,x/2,S-x,P-x),b.call(hn.setTranslate,Math.round(d.x.text-S/2),Math.round(d.y.text-P/2)),v.attr({transform:"rotate("+p+","+d.x.text+","+d.y.text+")"});var lt,ut,ct=function(t,n){g.selectAll(".annotation-arrow-g").remove();var s=d.x.head,u=d.y.head,f=d.x.tail+t,m=d.y.tail+n,y=d.x.text+t,x=d.y.text+n,_=re.rotationXYMatrix(p,y,x),w=re.apply2DTransform(_),A=re.apply2DTransform2(_),T=+M.attr("width"),k=+M.attr("height"),E=y-.5*T,L=E+T,C=x-.5*k,S=C+k,P=[[E,C,E,S],[E,S,L,S],[L,S,L,C],[L,C,E,C]].map(A);if(!P.reduce(function(t,e){return t^!!re.segmentsIntersect(s,u,s+1e6,u+1e6,e[0],e[1],e[2],e[3])},!1)){P.forEach(function(t){var e=re.segmentsIntersect(f,m,s,u,t[0],t[1],t[2],t[3]);e&&(f=e.x,m=e.y)});var O=r.arrowwidth,I=r.arrowcolor,N=r.arrowside,D=g.append("g").style({opacity:Ne.opacity(I)}).classed("annotation-arrow-g",!0),z=D.append("path").attr("d","M"+f+","+m+"L"+s+","+u).style("stroke-width",O+"px").call(Ne.stroke,Ne.rgb(I));if(Be(z,N,r),h.annotationPosition&&z.node().parentNode&&!i){var F=s,j=u;if(r.standoff){var B=Math.sqrt(Math.pow(s-f,2)+Math.pow(u-m,2));F+=r.standoff*(f-s)/B,j+=r.standoff*(m-u)/B}var U,V,H,q=D.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(f-F)+","+(m-j),transform:"translate("+F+","+j+")"}).style("stroke-width",O+6+"px").call(Ne.stroke,"rgba(0,0,0,0)").call(Ne.fill,"rgba(0,0,0,0)");rr.init({element:q.node(),gd:e,prepFn:function(){var t=hn.getTranslate(b);V=t.x,H=t.y,U={},a&&a.autorange&&(U[a._name+".autorange"]=!0),o&&o.autorange&&(U[o._name+".autorange"]=!0)},moveFn:function(t,e){var n=w(V,H),i=n[0]+t,s=n[1]+e;b.call(hn.setTranslate,i,s),U[l+".x"]=a?a.p2r(a.r2p(r.x)+t):r.x+t/c.w,U[l+".y"]=o?o.p2r(o.r2p(r.y)+e):r.y-e/c.h,r.axref===r.xref&&(U[l+".ax"]=a.p2r(a.r2p(r.ax)+t)),r.ayref===r.yref&&(U[l+".ay"]=o.p2r(o.r2p(r.ay)+e)),D.attr("transform","translate("+t+","+e+")"),v.attr({transform:"rotate("+p+","+i+","+s+")"})},doneFn:function(){R.call("relayout",e,U);var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};if(r.showarrow&&ct(0,0),m)rr.init({element:b.node(),gd:e,prepFn:function(){ut=v.attr("transform"),lt={}},moveFn:function(t,e){var n="pointer";if(r.showarrow)r.axref===r.xref?lt[l+".ax"]=a.p2r(a.r2p(r.ax)+t):lt[l+".ax"]=r.ax+t,r.ayref===r.yref?lt[l+".ay"]=o.p2r(o.r2p(r.ay)+e):lt[l+".ay"]=r.ay+e,ct(t,e);else{if(i)return;if(a)lt[l+".x"]=a.p2r(a.r2p(r.x)+t);else{var s=r._xsize/c.w,u=r.x+(r._xshift-r.xshift)/c.w-s/2;lt[l+".x"]=rr.align(u+t/c.w,s,0,1,r.xanchor)}if(o)lt[l+".y"]=o.p2r(o.r2p(r.y)+e);else{var h=r._ysize/c.h,f=r.y-(r._yshift+r.yshift)/c.h-h/2;lt[l+".y"]=rr.align(f-e/c.h,h,0,1,r.yanchor)}a&&o||(n=rr.getCursor(a?.5:lt[l+".x"],o?.5:lt[l+".y"],r.xanchor,r.yanchor))}v.attr({transform:"translate("+t+","+e+")"+ut}),Nn(b,n)},doneFn:function(){Nn(b),R.call("relayout",e,lt);var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}}var Qa=Wa.draw;function Ka(t){var e=t._fullLayout;re.filterVisible(e.annotations).forEach(function(e){var r,n,i,a,o=Ki.getFromId(t,e.xref),s=Ki.getFromId(t,e.yref),l=3*e.arrowsize*e.arrowwidth||0,u=3*e.startarrowsize*e.arrowwidth||0;o&&o.autorange&&(r=l+e.xshift,n=l-e.xshift,i=u+e.xshift,a=u-e.xshift,e.axref===e.xref?(Ki.expand(o,[o.r2c(e.x)],{ppadplus:r,ppadminus:n}),Ki.expand(o,[o.r2c(e.ax)],{ppadplus:Math.max(e._xpadplus,i),ppadminus:Math.max(e._xpadminus,a)})):(i=e.ax?i+e.ax:i,a=e.ax?a-e.ax:a,Ki.expand(o,[o.r2c(e.x)],{ppadplus:Math.max(e._xpadplus,r,i),ppadminus:Math.max(e._xpadminus,n,a)}))),s&&s.autorange&&(r=l-e.yshift,n=l+e.yshift,i=u-e.yshift,a=u+e.yshift,e.ayref===e.yref?(Ki.expand(s,[s.r2c(e.y)],{ppadplus:r,ppadminus:n}),Ki.expand(s,[s.r2c(e.ay)],{ppadplus:Math.max(e._ypadplus,i),ppadminus:Math.max(e._ypadminus,a)})):(i=e.ay?i+e.ay:i,a=e.ay?a-e.ay:a,Ki.expand(s,[s.r2c(e.y)],{ppadplus:Math.max(e._ypadplus,r,i),ppadminus:Math.max(e._ypadminus,n,a)})))})}var $a={hasClickToShow:function(t,e){var r=Ja(t,e);return r.on.length>0||r.explicitOff.length>0},onClick:function(t,e){var r,n=Ja(t,e),i=n.on,a=n.off.concat(n.explicitOff),o={};if(!i.length&&!a.length)return;for(r=0;r<i.length;r++)o["annotations["+i[r]+"].visible"]=!0;for(r=0;r<a.length;r++)o["annotations["+a[r]+"].visible"]=!1;return R.call("update",t,{},o)}};function Ja(t,e){var r,n,i,a,o,s,l,u=t._fullLayout.annotations,c=[],h=[],f=[],d=(e||[]).length;for(r=0;r<u.length;r++)if(a=(i=u[r]).clicktoshow){for(n=0;n<d;n++)if(s=(o=e[n]).xaxis,l=o.yaxis,s._id===i.xref&&l._id===i.yref&&s.d2r(o.x)===to(i._xclick,s)&&l.d2r(o.y)===to(i._yclick,l)){(i.visible?"onout"===a?h:f:c).push(r);break}n===d&&i.visible&&"onout"===a&&h.push(r)}return{on:c,off:h,explicitOff:f}}function to(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}var eo=function(t,e,r,n){n("opacity");var i=n("bgcolor"),a=n("bordercolor"),o=Ne.opacity(a);n("borderpad");var s=n("borderwidth"),l=n("showarrow");if(n("text",l?" ":r._dfltTitle.annotation),n("textangle"),re.coerceFont(n,"font",r.font),n("width"),n("align"),n("height")&&n("valign"),l){var u,c,h=n("arrowside");-1!==h.indexOf("end")&&(u=n("arrowhead"),c=n("arrowsize")),-1!==h.indexOf("start")&&(n("startarrowhead",u),n("startarrowsize",c)),n("arrowcolor",o?e.bordercolor:Ne.defaultLine),n("arrowwidth",2*(o&&s||1)),n("standoff"),n("startstandoff")}var f=n("hovertext"),d=r.hoverlabel||{};if(f){var p=n("hoverlabel.bgcolor",d.bgcolor||(Ne.opacity(i)?Ne.rgb(i):Ne.defaultLine)),g=n("hoverlabel.bordercolor",d.bordercolor||Ne.contrast(p));re.coerceFont(n,"hoverlabel.font",{family:d.font.family,size:d.font.size,color:d.font.color||g})}n("captureevents",!!f)},ro=function(t,e,r,n,i){function a(r,n){return re.coerce(t,e,Ie,r,n)}n=n||{};var o=a("visible",!(i=i||{}).itemIsNotPlainObject),s=a("clicktoshow");if(!o&&!s)return e;eo(t,e,r,a);for(var l=e.showarrow,u=["x","y"],c=[-10,-30],h={_fullLayout:r},f=0;f<2;f++){var d=u[f],p=Ki.coerceRef(t,e,h,d,"","paper");if(Ki.coercePosition(e,h,a,p,d,.5),l){var g="a"+d,v=Ki.coerceRef(t,e,h,g,"pixel");"pixel"!==v&&v!==p&&(v=e[g]="pixel");var m="pixel"===v?c[f]:.4;Ki.coercePosition(e,h,a,v,g,m)}a(d+"anchor"),a(d+"shift")}if(re.noneOrAll(t,e,["x","y"]),l&&re.noneOrAll(t,e,["ax","ay"]),s){var y=a("xclick"),b=a("yclick");e._xclick=void 0===y?e.x:Ki.cleanPosition(y,h,e.xref),e._yclick=void 0===b?e.y:Ki.cleanPosition(b,h,e.yref)}return e},no=function(t,e,r){var n,i=r.name,a=e[i],o=re.isArrayOrTypedArray(t[i])?t[i]:[],s=e[i]=[];for(n=0;n<o.length;n++){var l=o[n],u={},c={};re.isPlainObject(l)||(c.itemIsNotPlainObject=!0,l={}),r.handleItemDefaults(l,u,e,r,c),u._input=l,u._index=n,s.push(u)}if(re.isArrayOrTypedArray(a)){var h=Math.min(a.length,s.length);for(n=0;n<h;n++)re.relinkPrivateKeys(s[n],a[n])}},io=function(t){return function(e,r){var n=e[t];if(Array.isArray(n))for(var i=R.subplotsRegistry.cartesian,a=i.idRegex,o=r._subplots,s=o.xaxis,l=o.yaxis,u=o.cartesian,c=r._has("cartesian")||r._has("gl2d"),h=0;h<n.length;h++){var f=n[h];if(re.isPlainObject(f)){var d=f.xref,p=f.yref,g=a.x.test(d),v=a.y.test(p);if(g||v){c||re.pushUnique(r._basePlotModules,i);var m=!1;g&&-1===s.indexOf(d)&&(s.push(d),m=!0),v&&-1===l.indexOf(p)&&(l.push(p),m=!0),m&&g&&v&&u.push(d+p)}}}}},ao={moduleType:"component",name:"annotations",layoutAttributes:Ie,supplyLayoutDefaults:function(t,e){no(t,e,{name:"annotations",handleItemDefaults:ro})},includeBasePlot:io("annotations"),calcAutorange:function(t){var e=t._fullLayout,r=re.filterVisible(e.annotations);if(r.length&&t._fullData.length){var n={};for(var i in r.forEach(function(t){n[t.xref]=1,n[t.yref]=1}),n){var a=Ki.getFromId(t,i);if(a&&a.autorange)return re.syncOrAsync([Qa,Ka],t)}}},draw:Wa.draw,drawOne:Wa.drawOne,drawRaw:Wa.drawRaw,hasClickToShow:$a.hasClickToShow,onClick:$a.onClick,convertCoords:function(t,r,n,i){r=r||{};var a="log"===n&&"linear"===r.type,o="linear"===n&&"log"===r.type;if(a||o)for(var s,l,u=t._fullLayout.annotations,c=r._id.charAt(0),h=0;h<u.length;h++)s=u[h],l="annotations["+h+"].",s[c+"ref"]===r._id&&f(c),s["a"+c+"ref"]===r._id&&f("a"+c);function f(t){var n=s[t],o=null;o=a?ee(n,r.range):Math.pow(10,n),e(o)||(o=null),i(l+t,o)}}},oo=(0,gr.overrideAll)({_isLinkedToArray:"annotation",visible:Ie.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:Ie.xanchor,xshift:Ie.xshift,yanchor:Ie.yanchor,yshift:Ie.yshift,text:Ie.text,textangle:Ie.textangle,font:Ie.font,width:Ie.width,height:Ie.height,opacity:Ie.opacity,align:Ie.align,valign:Ie.valign,bgcolor:Ie.bgcolor,bordercolor:Ie.bordercolor,borderpad:Ie.borderpad,borderwidth:Ie.borderwidth,showarrow:Ie.showarrow,arrowcolor:Ie.arrowcolor,arrowhead:Ie.arrowhead,startarrowhead:Ie.startarrowhead,arrowside:Ie.arrowside,arrowsize:Ie.arrowsize,startarrowsize:Ie.startarrowsize,arrowwidth:Ie.arrowwidth,standoff:Ie.standoff,startstandoff:Ie.startstandoff,hovertext:Ie.hovertext,hoverlabel:Ie.hoverlabel,captureevents:Ie.captureevents},"calc","from-root");function so(t,e){var r=e.fullSceneLayout.domain,n=e.fullLayout._size,i={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},re.extendFlat(t._xa,i),Ki.setConvert(t._xa),t._xa._offset=n.l+r.x[0]*n.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*n.w*(r.x[1]-r.x[0])},t._ya={},re.extendFlat(t._ya,i),Ki.setConvert(t._ya),t._ya._offset=n.t+(1-r.y[1])*n.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*n.h*(r.y[1]-r.y[0])}}function lo(t,e,r,n,i){function a(r,n){return re.coerce(t,e,oo,r,n)}function o(t){var n=t+"axis",i={_fullLayout:{}};return i._fullLayout[n]=r[n],Ki.coercePosition(e,i,a,t,t,.5)}return a("visible",!i.itemIsNotPlainObject)?(eo(t,e,n.fullLayout,a),o("x"),o("y"),o("z"),re.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",a("ax",-10),a("ay",-30),re.noneOrAll(t,e,["ax","ay"])),e):e}function uo(t,e){var r,n,i=[0,0,0,0];for(r=0;r<4;++r)for(n=0;n<4;++n)i[n]+=t[4*r+n]*e[r];return i}var co=function(t,e){return uo(t.projection,uo(t.view,uo(t.model,[e[0],e[1],e[2],1])))},ho=Wa.drawRaw,fo=["x","y","z"],po={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:oo}}},layoutAttributes:oo,handleDefaults:function(t,e,r){no(t,e,{name:"annotations",handleItemDefaults:lo,fullLayout:r.fullLayout})},includeBasePlot:function(t,e){var r=R.subplotsRegistry.gl3d;if(!r)return;for(var n=r.attrRegex,i=Object.keys(t),a=0;a<i.length;a++){var o=i[a];n.test(o)&&(t[o].annotations||[]).length&&(re.pushUnique(e._basePlotModules,r),re.pushUnique(e._subplots.gl3d,o))}},convert:function(t){for(var e=t.fullSceneLayout.annotations,r=0;r<e.length;r++)so(e[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()},draw:function(t){for(var e=t.fullSceneLayout,r=t.dataScale,n=e.annotations,i=0;i<n.length;i++){for(var a=n[i],o=!1,s=0;s<3;s++){var l=fo[s],u=a[l],c=e[l+"axis"].r2fraction(u);if(c<0||c>1){o=!0;break}}o?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+i+'"]').remove():(a._pdata=co(t.glplot.cameraParams,[e.xaxis.r2l(a.x)*r[0],e.yaxis.r2l(a.y)*r[1],e.zaxis.r2l(a.z)*r[2]]),ho(t.graphDiv,a,i,t.id,a._xa,a._ya))}}};var go={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}},vo=function(t){var e=t.type,r=t.symmetric;if("data"===e){var n=t.array||[];if(r)return function(t,e){var r=+n[e];return[r,r]};var i=t.arrayminus||[];return function(t,e){var r=+n[e],a=+i[e];return isNaN(r)&&isNaN(a)?[NaN,NaN]:[a||0,r||0]}}var a=mo(e,t.value),o=mo(e,t.valueminus);return r||void 0===t.valueminus?function(t){var e=a(t);return[e,e]}:function(t){return[o(t),a(t)]}};function mo(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}var yo=function(t){for(var e=t.calcdata,r=0;r<e.length;r++){var n=e[r],i=n[0].trace;if(R.traceIs(i,"errorBarsOK")){var a=Ki.getFromId(t,i.xaxis),o=Ki.getFromId(t,i.yaxis);bo(n,i,a,"x"),bo(n,i,o,"y")}}};function bo(t,r,n,i){var a=r["error_"+i]||{},o=[];if(a.visible&&-1!==["linear","log"].indexOf(n.type)){for(var s=vo(a),l=0;l<t.length;l++){var u=t[l],c=u[i];if(e(n.c2l(c))){var h=s(c,l);if(e(h[0])&&e(h[1])){var f=u[i+"s"]=c-h[0],d=u[i+"h"]=c+h[1];o.push(f,d)}}}Ki.expand(n,o,{padded:!0})}}var xo=gr.overrideAll,_o={error_x:re.extendFlat({},go),error_y:re.extendFlat({},go)};delete _o.error_x.copy_zstyle,delete _o.error_y.copy_zstyle,delete _o.error_y.copy_ystyle;var wo={error_x:re.extendFlat({},go),error_y:re.extendFlat({},go),error_z:re.extendFlat({},go)};delete wo.error_x.copy_ystyle,delete wo.error_y.copy_ystyle,delete wo.error_z.copy_ystyle,delete wo.error_z.copy_zstyle;var Mo={moduleType:"component",name:"errorbars",schema:{traces:{scatter:_o,bar:_o,histogram:_o,scatter3d:xo(wo,"calc","nested"),scattergl:xo(_o,"calc","nested")}},supplyDefaults:function(t,r,n,i){var a="error_"+i.axis,o=r[a]={},s=t[a]||{};function l(t,e){return re.coerce(s,o,go,t,e)}if(!1!==l("visible",void 0!==s.array||void 0!==s.value||"sqrt"===s.type)){var u=l("type","array"in s?"data":"percent"),c=!0;"sqrt"!==u&&(c=l("symmetric",!(("data"===u?"arrayminus":"valueminus")in s))),"data"===u?(l("array"),l("traceref"),c||(l("arrayminus"),l("tracerefminus"))):"percent"!==u&&"constant"!==u||(l("value"),c||l("valueminus"));var h="copy_"+i.inherit+"style";i.inherit&&(r["error_"+i.inherit]||{}).visible&&l(h,!(s.color||e(s.thickness)||e(s.width))),i.inherit&&o[h]||(l("color",n),l("thickness"),l("width",R.traceIs(r,"gl3d")?0:4))}},calc:yo,calcFromTrace:function(t,e){for(var r=t.x||[],n=t.y||[],i=r.length||n.length,a=new Array(i),o=0;o<i;o++)a[o]={x:r[o],y:n[o]};return a[0].trace=t,yo({calcdata:[a],_fullLayout:e}),a},plot:function(r,n,i){var a=n.xaxis,o=n.yaxis,s=i&&i.duration>0;r.each(function(r){var l,u=r[0].trace,c=u.error_x||{},h=u.error_y||{};u.ids&&(l=function(t){return t.id});var f=cn.hasMarkers(u)&&u.marker.maxdisplayed>0;h.visible||c.visible||(r=[]);var d=t.select(this).selectAll("g.errorbar").data(r,l);if(d.exit().remove(),r.length){c.visible||d.selectAll("path.xerror").remove(),h.visible||d.selectAll("path.yerror").remove(),d.style("opacity",1);var p=d.enter().append("g").classed("errorbar",!0);s&&p.style("opacity",0).transition().duration(i.duration).style("opacity",1),hn.setClipUrl(d,n.layerClipId),d.each(function(r){var n=t.select(this),l=function(t,r,n){var i={x:r.c2p(t.x),y:n.c2p(t.y)};return void 0!==t.yh&&(i.yh=n.c2p(t.yh),i.ys=n.c2p(t.ys),e(i.ys)||(i.noYS=!0,i.ys=n.c2p(t.ys,!0))),void 0!==t.xh&&(i.xh=r.c2p(t.xh),i.xs=r.c2p(t.xs),e(i.xs)||(i.noXS=!0,i.xs=r.c2p(t.xs,!0))),i}(r,a,o);if(!f||r.vis){var u,d=n.select("path.yerror");if(h.visible&&e(l.x)&&e(l.yh)&&e(l.ys)){var p=h.width;u="M"+(l.x-p)+","+l.yh+"h"+2*p+"m-"+p+",0V"+l.ys,l.noYS||(u+="m-"+p+",0h"+2*p),d.size()?s&&(d=d.transition().duration(i.duration).ease(i.easing)):d=n.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),d.attr("d",u)}else d.remove();var g=n.select("path.xerror");if(c.visible&&e(l.y)&&e(l.xh)&&e(l.xs)){var v=(c.copy_ystyle?h:c).width;u="M"+l.xh+","+(l.y-v)+"v"+2*v+"m0,-"+v+"H"+l.xs,l.noXS||(u+="m0,-"+v+"v"+2*v),g.size()?s&&(g=g.transition().duration(i.duration).ease(i.easing)):g=n.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),g.attr("d",u)}else g.remove()}})}})},style:function(e){e.each(function(e){var r=e[0].trace,n=r.error_y||{},i=r.error_x||{},a=t.select(this);a.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(Ne.stroke,n.color),i.copy_ystyle&&(i=n),a.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(Ne.stroke,i.color)})},hoverInfo:function(t,e,r){(e.error_y||{}).visible&&(r.yerr=t.yh-t.y,e.error_y.symmetric||(r.yerrneg=t.y-t.ys));(e.error_x||{}).visible&&(r.xerr=t.xh-t.x,e.error_x.symmetric||(r.xerrneg=t.x-t.xs))}};var Ao={},To=m.extendFlat;Ao.attributes=function(t,e){t=t||{},e=e||{};var r={valType:"info_array",editType:t.editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},n=(t.name&&t.name,t.trace,e.description&&e.description,{x:To({},r,{}),y:To({},r,{}),editType:t.editType});return t.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:t.editType},n.column={valType:"integer",min:0,dflt:0,editType:t.editType}),n},Ao.defaults=function(t,e,r,n){var i=n&&n.x||[0,1],a=n&&n.y||[0,1],o=e.grid;if(o){var s=r("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete t.domain.column);var l=r("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete t.domain.row)}r("domain.x",i),r("domain.y",a)};var ko=tt.counter,Eo=Ao.attributes,Lo=Oe.idRegex,Co={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[ko("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Lo.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Lo.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:Eo({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"ticks"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"ticks"},editType:"plot"};function So(t,e,r,n,i){var a=e(t+"gap",r),o=e("domain."+t);e(t+"side");for(var s=new Array(n),l=o[0],u=(o[1]-l)/(n-a),c=u*(1-a),h=0;h<n;h++){var f=l+u*h;s[i?n-1-h:h]=[f,f+c]}return s}function Po(t,e,r,n,i){var a,o=new Array(r);function s(t,r){-1!==e.indexOf(r)&&void 0===n[r]?(o[t]=r,n[r]=t):o[t]=""}if(Array.isArray(t))for(a=0;a<r;a++)s(a,t[a]);else for(s(0,i),a=1;a<r;a++)s(a,i+(a+1));return o}var Ro={moduleType:"component",name:"grid",schema:{layout:{grid:Co}},layoutAttributes:Co,sizeDefaults:function(t,e){var r=t.grid;if(r){var n,i,a=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),o=Array.isArray(r.xaxes),s=Array.isArray(r.yaxes);a?(n=r.subplots.length,i=r.subplots[0].length):(s&&(n=r.yaxes.length),o&&(i=r.xaxes.length));var l=e.grid={},u=f("rows",n),c=f("columns",i);if(u*c>1){a||o||s||"independent"===f("pattern")&&(a=!0),l._hasSubplotGrid=a;var h="top to bottom"===f("roworder");l._domains={x:So("x",f,a?.2:.1,c),y:So("y",f,a?.3:.1,u,h)}}}function f(t,e){return re.coerce(r,l,Co,t,e)}},contentDefaults:function(t,e){var r=e.grid;if(r&&r._domains){var n,i,a,o,s,l,u,c=t.grid,h=e._subplots,f=r._hasSubplotGrid,d=r.rows,p=r.columns,g="independent"===r.pattern,v=r._axisMap={};if(f){var m=c.subplots||[];l=r.subplots=new Array(d);var y=1;for(n=0;n<d;n++){var b=l[n]=new Array(p),x=m[n]||[];for(i=0;i<p;i++)if(g?(s=1===y?"xy":"x"+y+"y"+y,y++):s=x[i],b[i]="",-1!==h.cartesian.indexOf(s)){if(u=s.indexOf("y"),a=s.slice(0,u),o=s.slice(u),void 0!==v[a]&&v[a]!==i||void 0!==v[o]&&v[o]!==n)continue;b[i]=s,v[a]=i,v[o]=n}}}else r.xaxes=Po(c.xaxes,h.xaxis,p,v,"x"),r.yaxes=Po(c.yaxes,h.yaxis,d,v,"y");var _=r._anchors={},w="top to bottom"===r.roworder;for(var M in v){var A,T,k,E=M.charAt(0),L=r[E+"side"];if(L.length<8)_[M]="free";else if("x"===E){if("t"===L.charAt(0)===w?(A=0,T=1,k=d):(A=d-1,T=-1,k=-1),f){var C=v[M];for(n=A;n!==k;n+=T)if((s=l[n][C])&&(u=s.indexOf("y"),s.slice(0,u)===M)){_[M]=s.slice(u);break}}else for(n=A;n!==k;n+=T)if(o=r.yaxes[n],-1!==h.cartesian.indexOf(M+o)){_[M]=o;break}}else if("l"===L.charAt(0)?(A=0,T=1,k=p):(A=p-1,T=-1,k=-1),f){var S=v[M];for(n=A;n!==k;n+=T)if((s=l[S][n])&&(u=s.indexOf("y"),s.slice(u)===M)){_[M]=s.slice(0,u);break}}else for(n=A;n!==k;n+=T)if(a=r.xaxes[n],-1!==h.cartesian.indexOf(a+M)){_[M]=a;break}}}}},Oo={_isLinkedToArray:"image",visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",Oe.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",Oe.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"},Io="images";function No(t,e,r){function n(r,n){return re.coerce(t,e,Oo,r,n)}if(!n("visible",!!n("source")))return e;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var i={_fullLayout:r},a=["x","y"],o=0;o<2;o++){var s=a[o],l=Ki.coerceRef(t,e,i,s,"paper");Ki.coercePosition(e,i,n,l,s,0)}return e}var Do={moduleType:"component",name:"images",layoutAttributes:Oo,supplyLayoutDefaults:function(t,e){no(t,e,{name:Io,handleItemDefaults:No})},includeBasePlot:io("images"),draw:function(e){var r,n,i=e._fullLayout,a=[],o={},s=[];for(n=0;n<i.images.length;n++){var l=i.images[n];if(l.visible)if("below"===l.layer&&"paper"!==l.xref&&"paper"!==l.yref){r=l.xref+l.yref;var u=i._plots[r];if(!u){s.push(l);continue}u.mainplot&&(r=u.mainplot.id),o[r]||(o[r]=[]),o[r].push(l)}else"above"===l.layer?a.push(l):s.push(l)}var c={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function h(r){var n=t.select(this);if(!this.img||this.img.src!==r.source){n.attr("xmlns",Dr.svg);var i=new Promise(function(t){var e=new Image;function i(){n.remove(),t()}this.img=e,e.setAttribute("crossOrigin","anonymous"),e.onerror=i,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r),t()},n.on("error",i),e.src=r.source}.bind(this));e._promises.push(i)}}function f(r){var n=t.select(this),a=Ki.getFromId(e,r.xref),o=Ki.getFromId(e,r.yref),s=i._size,l=a?Math.abs(a.l2p(r.sizex)-a.l2p(0)):r.sizex*s.w,u=o?Math.abs(o.l2p(r.sizey)-o.l2p(0)):r.sizey*s.h,h=l*c.x[r.xanchor].offset,f=u*c.y[r.yanchor].offset,d=c.x[r.xanchor].sizing+c.y[r.yanchor].sizing,p=(a?a.r2p(r.x)+a._offset:r.x*s.w+s.l)+h,g=(o?o.r2p(r.y)+o._offset:s.h-r.y*s.h+s.t)+f;switch(r.sizing){case"fill":d+=" slice";break;case"stretch":d="none"}n.attr({x:p,y:g,width:l,height:u,preserveAspectRatio:d,opacity:r.opacity});var v=(a?a._id:"")+(o?o._id:"");n.call(hn.setClipUrl,v?"clip"+i._uid+v:null)}var d=i._imageLowerLayer.selectAll("image").data(s),p=i._imageUpperLayer.selectAll("image").data(a);d.enter().append("image"),p.enter().append("image"),d.exit().remove(),p.exit().remove(),d.each(function(t){h.bind(this)(t),f.bind(this)(t)}),p.each(function(t){h.bind(this)(t),f.bind(this)(t)});var g=Object.keys(i._plots);for(n=0;n<g.length;n++){r=g[n];var v=i._plots[r];if(v.imagelayer){var m=v.imagelayer.selectAll("image").data(o[r]||[]);m.enter().append("image"),m.exit().remove(),m.each(function(t){h.bind(this)(t),f.bind(this)(t)})}}},convertCoords:function(t,r,n,i){r=r||{};var a="log"===n&&"linear"===r.type,o="linear"===n&&"log"===r.type;if(a||o)for(var s,l,u=t._fullLayout.images,c=r._id.charAt(0),h=0;h<u.length;h++)if(l="images["+h+"].",(s=u[h])[c+"ref"]===r._id){var f=s[c],d=s["size"+c],p=null,g=null;if(a){p=ee(f,r.range);var v=d/Math.pow(10,p)/2;g=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else g=(p=Math.pow(10,f))*(Math.pow(10,d/2)-Math.pow(10,-d/2));e(p)?e(g)||(g=null):(p=null,g=null),i(l+c,p),i(l+"size"+c,g)}}},zo={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:C.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:k({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"},Fo={legendGetsTrace:function(t){return t.visible&&void 0!==t.showlegend},isGrouped:function(t){return-1!==(t.traceorder||"").indexOf("grouped")},isVertical:function(t){return"h"!==t.orientation},isReversed:function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},jo={isRightAnchor:function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},isCenterAnchor:function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},isBottomAnchor:function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3},isMiddleAnchor:function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3}},Bo={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4},Uo=!0,Vo=function(t,e,r){if(!e._dragged&&!e._editing){var n,i,a,o,s,l=e._fullLayout.hiddenlabels?e._fullLayout.hiddenlabels.slice():[],u=t.data()[0][0],c=e._fullData,h=u.trace,f=h.legendgroup,d={},p=[],g=[],v=[];if(1===r&&Uo&&e.data&&e._context.showTips?(re.notifier(re._(e,"Double-click on legend to isolate one trace"),"long"),Uo=!1):Uo=!1,R.traceIs(h,"pie")){var m=u.label,y=l.indexOf(m);1===r?-1===y?l.push(m):l.splice(y,1):2===r&&(l=[],e.calcdata[0].forEach(function(t){m!==t.label&&l.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===l.length&&-1===y&&(l=[])),R.call("relayout",e,"hiddenlabels",l)}else{var b,x=f&&f.length,_=[];if(x)for(n=0;n<c.length;n++)(b=c[n]).visible&&b.legendgroup===f&&_.push(n);if(1===r){var w;switch(h.visible){case!0:w="legendonly";break;case!1:w=!1;break;case"legendonly":w=!0}if(x)for(n=0;n<c.length;n++)!1!==c[n].visible&&c[n].legendgroup===f&&C(c[n],w);else C(h,w)}else if(2===r){var M,A,T=!0;for(n=0;n<c.length;n++)if(!(c[n]===h)&&!(M=x&&c[n].legendgroup===f)&&!0===c[n].visible&&!R.traceIs(c[n],"notLegendIsolatable")){T=!1;break}for(n=0;n<c.length;n++)if(!1!==c[n].visible&&!R.traceIs(c[n],"notLegendIsolatable"))switch(h.visible){case"legendonly":C(c[n],!0);break;case!0:A=!!T||"legendonly",M=c[n]===h||x&&c[n].legendgroup===f,C(c[n],!!M||A)}}for(n=0;n<g.length;n++)if(a=g[n]){var k=a.constructUpdate(),E=Object.keys(k);for(i=0;i<E.length;i++)o=E[i],(d[o]=d[o]||[])[v[n]]=k[o]}for(s=Object.keys(d),n=0;n<s.length;n++)for(o=s[n],i=0;i<p.length;i++)d[o].hasOwnProperty(i)||(d[o][i]=void 0);R.call("restyle",e,d,p)}}function L(t,e,r){var n=p.indexOf(t),i=d[e];return i||(i=d[e]=[]),-1===p.indexOf(t)&&(p.push(t),n=p.length-1),i[n]=r,n}function C(t,e){var r=t._fullInput;if(R.hasTransform(r,"groupby")){var n=g[r.index];if(!n){var i=R.getTransformIndices(r,"groupby"),a=i[i.length-1];n=re.keyedContainer(r,"transforms["+a+"].styles","target","value.visible"),g[r.index]=n}var o=n.get(t._group);void 0===o&&(o=!0),!1!==o&&n.set(t._group,e),v[r.index]=L(r.index,"visible",!1!==r.visible)}else{var s=!1!==r.visible&&e;L(r.index,"visible",s)}}},Ho={formatPiePercent:function(t,e){var r=(100*t).toPrecision(3);return-1!==r.lastIndexOf(".")&&(r=r.replace(/[.]?0+$/,"")),re.numSeparate(r,e)+"%"},formatPieValue:function(t,e){var r=t.toPrecision(10);return-1!==r.lastIndexOf(".")&&(r=r.replace(/[.]?0+$/,"")),re.numSeparate(r,e)},getFirstFilled:function(t,e){if(Array.isArray(t))for(var r=0;r<e.length;r++){var n=t[e[r]];if(n||0===n)return n}},castOption:function(t,e){return Array.isArray(t)?Ho.getFirstFilled(t,e):t||void 0}},qo=Ho.castOption,Go=function(t,e,r){var n=r.marker.line,i=qo(n.color,e.pts)||Ne.defaultLine,a=qo(n.width,e.pts)||0;t.style({"stroke-width":a}).call(Ne.fill,e.color).call(Ne.stroke,i)},Xo=function(e,r){e.each(function(e){var r=t.select(this).selectAll("g.layers").data([0]);r.enter().append("g").classed("layers",!0),r.style("opacity",e[0].trace.opacity),r.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),r.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var n=r.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var r=e[0].trace,n=r.marker||{},i=n.line||{},a=t.select(this).select("g.legendpoints").selectAll("path.legendbar").data(R.traceIs(r,"bar")?[e]:[]);a.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),a.exit().remove(),a.each(function(e){var r=t.select(this),a=e[0],o=(a.mlw+1||i.width+1)-1;r.style("stroke-width",o+"px").call(Ne.fill,a.mc||n.color),o&&r.call(Ne.stroke,a.mlc||i.color)})}).each(function(e){var r=e[0].trace,n=t.select(this).select("g.legendpoints").selectAll("path.legendbox").data(R.traceIs(r,"box-violin")&&r.visible?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(){var e=r.line.width,n=t.select(this);n.style("stroke-width",e+"px").call(Ne.fill,r.fillcolor),e&&n.call(Ne.stroke,r.line.color)})}).each(function(e){var r=e[0].trace,n=t.select(this).select("g.legendpoints").selectAll("path.legendpie").data(R.traceIs(r,"pie")&&r.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(Go,e[0],r)}).each(function(e){var r=e[0].trace,n=r.visible&&r.fill&&"none"!==r.fill,i=cn.hasLines(r),a=r.contours;a&&"constraint"===a.type&&(i=a.showlines,n="="!==a._operation);var o=t.select(this).select(".legendfill").selectAll("path").data(n?[e]:[]);o.enter().append("path").classed("js-fill",!0),o.exit().remove(),o.attr("d","M5,0h30v6h-30z").call(hn.fillGroupStyle);var s=t.select(this).select(".legendlines").selectAll("path").data(i?[e]:[]);s.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),s.exit().remove(),s.call(hn.lineGroupStyle)}).each(function(e){var n,i,a=e[0],o=a.trace,s=cn.hasMarkers(o),l=cn.hasText(o),u=cn.hasLines(o);function c(t,e,r){var n=re.nestedProperty(o,t).get(),i=Array.isArray(n)&&e?e(n):n;if(r){if(i<r[0])return r[0];if(i>r[1])return r[1]}return i}function h(t){return t[0]}if(s||l||u){var f={},d={};s&&(f.mc=c("marker.color",h),f.mo=c("marker.opacity",re.mean,[.2,1]),f.ms=c("marker.size",re.mean,[2,16]),f.mlc=c("marker.line.color",h),f.mlw=c("marker.line.width",re.mean,[0,5]),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),u&&(d.line={width:c("line.width",h,[0,10])}),l&&(f.tx="Aa",f.tp=c("textposition",h),f.ts=10,f.tc=c("textfont.color",h),f.tf=c("textfont.family",h)),n=[re.minExtend(a,f)],i=re.minExtend(o,d)}var p=t.select(this).select("g.legendpoints"),g=p.selectAll("path.scatterpts").data(s?n:[]);g.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),g.exit().remove(),g.call(hn.pointStyle,i,r),s&&(n[0].mrc=3);var v=p.selectAll("g.pointtext").data(l?n:[]);v.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),v.exit().remove(),v.selectAll("text").call(hn.textPointStyle,i,r)})},Wo=Nr.LINE_SPACING,Yo=Nr.FROM_TL,Zo=Nr.FROM_BR,Qo=f.DBLCLICKDELAY;function Ko(t,e){var r=t.data()[0][0],n=e._fullLayout,i=r.trace,a=R.traceIs(i,"pie"),o=i.index,s=a?r.label:i.name,l=t.selectAll("text.legendtext").data([0]);function u(r){Fr.convertToTspans(r,e,function(){!function(t,e){var r=t.data()[0][0];if(!r.trace.showlegend)return void t.remove();var n,i,a=t.select("g[class*=math-group]"),o=a.node(),s=e._fullLayout.legend.font.size*Wo;if(o){var l=hn.bBox(o);n=l.height,i=l.width,hn.setTranslate(a,0,n/4)}else{var u=t.select(".legendtext"),c=Fr.lineCount(u),h=u.node();n=s*c,i=h?hn.bBox(h).width:0;var f=s*(.3+(1-c)/2);Fr.positionText(u,40,f)}n=Math.max(n,16)+3,r.height=n,r.width=i}(t,e)})}l.enter().append("text").classed("legendtext",!0),l.attr("text-anchor","start").classed("user-select-none",!0).call(hn.font,n.legend.font).text(s),e._context.edits.legendText&&!a?l.call(Fr.makeEditable,{gd:e}).call(u).on("edit",function(t){this.text(t).call(u);var n,i=t;this.text()||(t="    ");var a=r.trace._fullInput||{},s={};if(-1!==["ohlc","candlestick"].indexOf(a.type))s[(n=r.trace.transforms)[n.length-1].direction+".name"]=t;else if(R.hasTransform(a,"groupby")){var l=R.getTransformIndices(a,"groupby"),c=l[l.length-1],h=re.keyedContainer(a,"transforms["+c+"].styles","target","value.name");""===i?h.remove(r.trace._group):h.set(r.trace._group,t),s=h.constructUpdate()}else s.name=t;return R.call("restyle",e,s,o)}):u(l)}function $o(t,e){var r,n=1,i=t.selectAll("rect").data([0]);i.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(Ne.fill,"rgba(0,0,0,0)"),i.on("mousedown",function(){(r=(new Date).getTime())-e._legendMouseDownTime<Qo?n+=1:(n=1,e._legendMouseDownTime=r)}),i.on("mouseup",function(){if(!e._dragged&&!e._editing){var r=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>Qo&&(n=Math.max(n-1,1)),1===n?r._clickTimeout=setTimeout(function(){Vo(t,e,n)},Qo):2===n&&(r._clickTimeout&&clearTimeout(r._clickTimeout),e._legendMouseDownTime=0,Vo(t,e,n))}})}function Jo(e,r,n){var i=e._fullLayout,a=i.legend,o=a.borderwidth,s=Fo.isGrouped(a),l=0;if(a._width=0,a._height=0,Fo.isVertical(a))s&&r.each(function(t,e){hn.setTranslate(this,0,e*a.tracegroupgap)}),n.each(function(t){var e=t[0],r=e.height,n=e.width;hn.setTranslate(this,o,5+o+a._height+r/2),a._height+=r,a._width=Math.max(a._width,n)}),a._width+=45+2*o,a._height+=10+2*o,s&&(a._height+=(a._lgroupsLength-1)*a.tracegroupgap),l=40;else if(s){for(var u=[a._width],c=r.data(),h=0,f=c.length;h<f;h++){var d=c[h].map(function(t){return t[0].width}),p=40+Math.max.apply(null,d);a._width+=a.tracegroupgap+p,u.push(a._width)}r.each(function(t,e){hn.setTranslate(this,u[e],0)}),r.each(function(){var e=0;t.select(this).selectAll("g.traces").each(function(t){var r=t[0].height;hn.setTranslate(this,0,5+o+e+r/2),e+=r}),a._height=Math.max(a._height,e)}),a._height+=10+2*o,a._width+=2*o}else{var g,v=0,m=0,y=0,b=0,x=0,_=a.tracegroupgap||5;n.each(function(t){y=Math.max(40+t[0].width,y),x+=40+t[0].width+_}),g=i.width-(i.margin.r+i.margin.l)>o+x-_,n.each(function(t){var e=t[0],r=g?40+t[0].width:y;o+b+_+r>i.width-(i.margin.r+i.margin.l)&&(b=0,v+=m,a._height=a._height+m,m=0),hn.setTranslate(this,o+b,5+o+e.height/2+v),a._width+=_+r,a._height=Math.max(a._height,e.height),b+=_+r,m=Math.max(e.height,m)}),a._width+=2*o,a._height+=10+2*o}a._width=Math.ceil(a._width),a._height=Math.ceil(a._height),n.each(function(r){var n=r[0],i=t.select(this).select(".legendtoggle");hn.setRect(i,0,-n.height/2,(e._context.edits.legendText?0:a._width)+l,n.height)})}function ts(t){var e=t._fullLayout.legend,r="left";jo.isRightAnchor(e)?r="right":jo.isCenterAnchor(e)&&(r="center");var n="top";jo.isBottomAnchor(e)?n="bottom":jo.isMiddleAnchor(e)&&(n="middle"),vi.autoMargin(t,"legend",{x:e.x,y:e.y,l:e._width*Yo[r],r:e._width*Zo[r],b:e._height*Zo[n],t:e._height*Yo[n]})}var es={moduleType:"component",name:"legend",layoutAttributes:zo,supplyLayoutDefaults:function(t,e,r){for(var n,i,a,o,s=t.legend||{},l={},u=0,c="normal",h=0;h<r.length;h++){var f=r[h];Fo.legendGetsTrace(f)&&(u++,R.traceIs(f,"pie")&&u++),(R.traceIs(f,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(f.fill))&&(c=Fo.isGrouped({traceorder:c})?"grouped+reversed":"reversed"),void 0!==f.legendgroup&&""!==f.legendgroup&&(c=Fo.isReversed({traceorder:c})?"reversed+grouped":"grouped")}function d(t,e){return re.coerce(s,l,zo,t,e)}if(!1!==re.coerce(t,e,P,"showlegend",u>1)){if(e.legend=l,d("bgcolor",e.paper_bgcolor),d("bordercolor"),d("borderwidth"),re.coerceFont(d,"font",e.font),d("orientation"),"h"===l.orientation){var p=t.xaxis;p&&p.rangeslider&&p.rangeslider.visible?(n=0,a="left",i=1.1,o="bottom"):(n=0,a="left",i=-.1,o="top")}d("traceorder",c),Fo.isGrouped(e.legend)&&d("tracegroupgap"),d("x",n),d("xanchor",a),d("y",i),d("yanchor",o),re.noneOrAll(s,l,["x","y"])}},draw:function(e){var r=e._fullLayout,n="legend"+r._uid;if(r._infolayer&&e.calcdata){e._legendMouseDownTime||(e._legendMouseDownTime=0);var i=r.legend,a=r.showlegend&&function(t,e){var r,n,i={},a=[],o=!1,s={},l=0;function u(t,r){if(""!==t&&Fo.isGrouped(e))-1===a.indexOf(t)?(a.push(t),o=!0,i[t]=[[r]]):i[t].push([r]);else{var n="~~i"+l;a.push(n),i[n]=[[r]],l++}}for(r=0;r<t.length;r++){var c=t[r],h=c[0],f=h.trace,d=f.legendgroup;if(Fo.legendGetsTrace(f)&&f.showlegend)if(R.traceIs(f,"pie"))for(s[d]||(s[d]={}),n=0;n<c.length;n++){var p=c[n].label;s[d][p]||(u(d,{label:p,color:c[n].color,i:c[n].i,trace:f}),s[d][p]=!0)}else u(d,h)}if(!a.length)return[];var g,v,m=a.length;if(o&&Fo.isGrouped(e))for(v=new Array(m),r=0;r<m;r++)g=i[a[r]],v[r]=Fo.isReversed(e)?g.reverse():g;else{for(v=[new Array(m)],r=0;r<m;r++)g=i[a[r]][0],v[0][Fo.isReversed(e)?m-r-1:r]=g;m=1}return e._lgroupsLength=m,v}(e.calcdata,i),o=r.hiddenlabels||[];if(!r.showlegend||!a.length)return r._infolayer.selectAll(".legend").remove(),r._topdefs.select("#"+n).remove(),void vi.autoMargin(e,"legend");var s=r._infolayer.selectAll("g.legend").data([0]);s.enter().append("g").attr({class:"legend","pointer-events":"all"});var l=r._topdefs.selectAll("#"+n).data([0]);l.enter().append("clipPath").attr("id",n).append("rect");var u=s.selectAll("rect.bg").data([0]);u.enter().append("rect").attr({class:"bg","shape-rendering":"crispEdges"}),u.call(Ne.stroke,i.bordercolor).call(Ne.fill,i.bgcolor).style("stroke-width",i.borderwidth+"px");var c=s.selectAll("g.scrollbox").data([0]);c.enter().append("g").attr("class","scrollbox");var h=s.selectAll("rect.scrollbar").data([0]);h.enter().append("rect").attr({class:"scrollbar",rx:20,ry:3,width:0,height:0}).call(Ne.fill,"#808BA4");var f=c.selectAll("g.groups").data(a);f.enter().append("g").attr("class","groups"),f.exit().remove();var d=f.selectAll("g.traces").data(re.identity);d.enter().append("g").attr("class","traces"),d.exit().remove(),d.call(Xo,e).style("opacity",function(t){var e=t[0].trace;return R.traceIs(e,"pie")?-1!==o.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){t.select(this).call(Ko,e).call($o,e)}),0!==s.enter().size()&&(Jo(e,f,d),ts(e));var p=r.width,g=r.height;Jo(e,f,d),i._height>g?function(t){var e=t._fullLayout.legend,r="left";jo.isRightAnchor(e)?r="right":jo.isCenterAnchor(e)&&(r="center"),vi.autoMargin(t,"legend",{x:e.x,y:.5,l:e._width*Yo[r],r:e._width*Zo[r],b:0,t:0})}(e):ts(e);var v=r._size,m=v.l+v.w*i.x,y=v.t+v.h*(1-i.y);jo.isRightAnchor(i)?m-=i._width:jo.isCenterAnchor(i)&&(m-=i._width/2),jo.isBottomAnchor(i)?y-=i._height:jo.isMiddleAnchor(i)&&(y-=i._height/2);var b=i._width,x=v.w;b>x?(m=v.l,b=x):(m+b>p&&(m=p-b),m<0&&(m=0),b=Math.min(p-m,i._width));var _,w,M,A,T=i._height,k=v.h;if(T>k?(y=v.t,T=k):(y+T>g&&(y=g-T),y<0&&(y=0),T=Math.min(g-y,i._height)),hn.setTranslate(s,m,y),h.on(".drag",null),s.on("wheel",null),i._height<=T||e._context.staticPlot)u.attr({width:b-i.borderwidth,height:T-i.borderwidth,x:i.borderwidth/2,y:i.borderwidth/2}),hn.setTranslate(c,0,0),l.select("rect").attr({width:b-2*i.borderwidth,height:T-2*i.borderwidth,x:i.borderwidth,y:i.borderwidth}),hn.setClipUrl(c,n),hn.setRect(h,0,0,0,0),delete i._scrollY;else{var E,L,C=Math.max(Bo.scrollBarMinHeight,T*T/i._height),S=T-C-2*Bo.scrollBarMargin,P=i._height-T,O=S/P,I=Math.min(i._scrollY||0,P);u.attr({width:b-2*i.borderwidth+Bo.scrollBarWidth+Bo.scrollBarMargin,height:T-i.borderwidth,x:i.borderwidth/2,y:i.borderwidth/2}),l.select("rect").attr({width:b-2*i.borderwidth+Bo.scrollBarWidth+Bo.scrollBarMargin,height:T-2*i.borderwidth,x:i.borderwidth,y:i.borderwidth+I}),hn.setClipUrl(c,n),D(I,C,O),s.on("wheel",function(){D(I=re.constrain(i._scrollY+t.event.deltaY/S*P,0,P),C,O),0!==I&&I!==P&&t.event.preventDefault()});var N=t.behavior.drag().on("dragstart",function(){E=t.event.sourceEvent.clientY,L=I}).on("drag",function(){var e=t.event.sourceEvent;2===e.buttons||e.ctrlKey||D(I=re.constrain((e.clientY-E)/O+L,0,P),C,O)});h.call(N)}e._context.edits.legendPosition&&(s.classed("cursor-move",!0),rr.init({element:s.node(),gd:e,prepFn:function(){var t=hn.getTranslate(s);M=t.x,A=t.y},moveFn:function(t,e){var r=M+t,n=A+e;hn.setTranslate(s,r,n),_=rr.align(r,0,v.l,v.l+v.w,i.xanchor),w=rr.align(n,0,v.t+v.h,v.t,i.yanchor)},doneFn:function(){void 0!==_&&void 0!==w&&R.call("relayout",e,{"legend.x":_,"legend.y":w})},clickFn:function(t,n){var i=r._infolayer.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom});i.size()>0&&(1===t?s._clickTimeout=setTimeout(function(){Vo(i,e,t)},Qo):2===t&&(s._clickTimeout&&clearTimeout(s._clickTimeout),Vo(i,e,t)))}}))}function D(t,r,n){i._scrollY=e._fullLayout.legend._scrollY=t,hn.setTranslate(c,0,-t),hn.setRect(h,b,Bo.scrollBarMargin+t*n,Bo.scrollBarWidth,r),l.select("rect").attr({y:i.borderwidth+t})}},style:Xo},rs={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"},ns=m.extendFlat,is={visible:{valType:"boolean",editType:"plot"},buttons:rs=ns(rs,{_isLinkedToArray:"button"}),x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:k({editType:"plot"}),bgcolor:{valType:"color",dflt:C.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:C.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},as={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10};var os=function(e,r){var n=e._name,i={};if("all"===r.step)i[n+".autorange"]=!0;else{var a=function(e,r){var n,i=e.range,a=new Date(e.r2l(i[1])),o=r.step,s=r.count;switch(r.stepmode){case"backward":n=e.l2r(+t.time[o].utc.offset(a,-s));break;case"todate":var l=t.time[o].utc.offset(a,-s);n=e.l2r(+t.time[o].utc.ceil(l))}var u=i[1];return[n,u]}(e,r);i[n+".range[0]"]=a[0],i[n+".range[1]"]=a[1]}return i};var ss=Nr.LINE_SPACING,ls=Nr.FROM_TL,us=Nr.FROM_BR;function cs(t){return t._id}function hs(t,e,r){var n=t.selectAll("rect").data([0]);n.enter().append("rect").classed("selector-rect",!0),n.attr("shape-rendering","crispEdges"),n.attr({rx:as.rx,ry:as.ry}),n.call(Ne.stroke,e.bordercolor).call(Ne.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,r)).style("stroke-width",e.borderwidth+"px")}function fs(t,e,r,n){var i,a=t.selectAll("text").data([0]);a.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),a.attr("text-anchor","middle"),a.call(hn.font,e.font).text((i=r,i.label?i.label:"all"===i.step?"all":i.count+i.step.charAt(0))).call(function(t){Fr.convertToTspans(t,n)})}var ds={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:is}}},layoutAttributes:is,handleDefaults:function(t,e,r,n,i){var a=t.rangeselector||{},o=e.rangeselector={};function s(t,e){return re.coerce(a,o,is,t,e)}if(s("visible",function(t,e,r){var n,i,a=t.buttons||[],o=e.buttons=[];function s(t,e){return re.coerce(n,i,rs,t,e)}for(var l=0;l<a.length;l++)if(n=a[l],i={},re.isPlainObject(n)){var u=s("step");"all"!==u&&(!r||"gregorian"===r||"month"!==u&&"year"!==u?s("stepmode"):i.stepmode="backward",s("count")),s("label"),i._index=l,o.push(i)}return o}(a,o,i).length>0)){var l=function(t,e,r){for(var n=r.filter(function(r){return e[r].anchor===t._id}),i=0,a=0;a<n.length;a++){var o=e[n[a]].domain;o&&(i=Math.max(o[1],i))}return[t.domain[0],i+as.yPad]}(e,r,n);s("x",l[0]),s("y",l[1]),re.noneOrAll(t,e,["x","y"]),s("xanchor"),s("yanchor"),re.coerceFont(s,"font",r.font);var u=s("bgcolor");s("activecolor",Ne.contrast(u,as.lightAmount,as.darkAmount)),s("bordercolor"),s("borderwidth")}},draw:function(e){var r=e._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=ci.list(t,"x",!0),r=[],n=0;n<e.length;n++){var i=e[n];i.rangeselector&&i.rangeselector.visible&&r.push(i)}return r}(e),cs);r.enter().append("g").classed("rangeselector",!0),r.exit().remove(),r.style({cursor:"pointer","pointer-events":"all"}),r.each(function(r){var n=t.select(this),i=r,a=i.rangeselector,o=n.selectAll("g.button").data(a.buttons);o.enter().append("g").classed("button",!0),o.exit().remove(),o.each(function(r){var n=t.select(this),o=os(i,r);r._isActive=function(t,e,r){if("all"===e.step)return!0===t.autorange;var n=Object.keys(r);return t.range[0]===r[n[0]]&&t.range[1]===r[n[1]]}(i,r,o),n.call(hs,a,r),n.call(fs,a,r,e),n.on("click",function(){e._dragged||R.call("relayout",e,o)}),n.on("mouseover",function(){r._isHovered=!0,n.call(hs,a,r)}),n.on("mouseout",function(){r._isHovered=!1,n.call(hs,a,r)})}),function(e,r,n,i,a){var o=0,s=0,l=n.borderwidth;r.each(function(){var e=t.select(this),r=e.select(".selector-text"),i=n.font.size*ss,a=Math.max(i*Fr.lineCount(r),16)+3;s=Math.max(s,a)}),r.each(function(){var e=t.select(this),r=e.select(".selector-rect"),i=e.select(".selector-text"),a=i.node()&&hn.bBox(i.node()).width,u=n.font.size*ss,c=Fr.lineCount(i),h=Math.max(a+10,as.minButtonWidth);e.attr("transform","translate("+(l+o)+","+l+")"),r.attr({x:0,y:0,width:h,height:s}),Fr.positionText(i,h/2,s/2-(c-1)*u/2+3),o+=h+5});var u=e._fullLayout._size,c=u.l+u.w*n.x,h=u.t+u.h*(1-n.y),f="left";jo.isRightAnchor(n)&&(c-=o,f="right"),jo.isCenterAnchor(n)&&(c-=o/2,f="center");var d="top";jo.isBottomAnchor(n)&&(h-=s,d="bottom"),jo.isMiddleAnchor(n)&&(h-=s/2,d="middle"),o=Math.ceil(o),s=Math.ceil(s),c=Math.round(c),h=Math.round(h),vi.autoMargin(e,i+"-range-selector",{x:n.x,y:n.y,l:o*ls[f],r:o*us[f],b:s*us[d],t:s*ls[d]}),a.attr("transform","translate("+c+","+h+")")}(e,o,a,i._name,n)})}},ps={bgcolor:{valType:"color",dflt:C.background,editType:"plot"},bordercolor:{valType:"color",dflt:C.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},gs={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},vs=ci.list,ms=Ri,ys={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"},bs=s.mix,xs=C.lightFraction;function _s(e,r,n){var i,a,o,s,l,u=[],c=n.map(function(t){return t[e]}),h=t.bisector(r).left;for(i=0;i<c.length;i++)for(o=c[i],a=0;a<o.length;a++)null!==(s=o[a])&&void 0!==s&&((l=h(u,s))<u.length&&u[l]===s||u.splice(l,0,s));return u}var ws=function(e,r,n,i,a){var o=i.letter,s=i.font||{},l=n("visible",!i.cheateronly),u=r.type;"date"===u&&R.getComponentMethod("calendars","handleDefaults")(e,r,"calendar",i.calendar);Qi(r,a);var c=n("autorange",!r.isValidRange(e.range));if(r._rangesliderAutorange=!1,c&&n("rangemode"),n("range"),r.cleanRange(),function(t,e,r){if("category"===e.type){var n,i=t.categoryarray,a=Array.isArray(i)&&i.length>0;a&&(n="array");var o=r("categoryorder",n);"array"===o&&r("categoryarray"),a||"array"!==o||(e.categoryorder="trace")}}(e,r,n),r._initialCategories="category"===u?function(e,r,n,i){switch(r){case"array":return Array.isArray(n)?n.slice():[];case"category ascending":return _s(e,t.ascending,i);case"category descending":return _s(e,t.descending,i);case"trace":default:return[]}}(o,r.categoryorder,r.categoryarray,i.data):[],"category"===u||i.noHover||n("hoverformat"),!l)return r;var h=n("color"),f=h===e.color?h:s.color;return n("title",a._dfltTitle[o]),re.coerceFont(n,"titlefont",{family:s.family,size:Math.round(1.2*s.size),color:f}),Lr(e,r,n,u),Tr(e,r,n,u,i),kr(e,r,n,i),function(t,e,r,n){var i=(n=n||{}).dfltColor;function a(r,i){return re.coerce2(t,e,n.attributes,r,i)}var o=a("linecolor",i),s=a("linewidth");r("showline",n.showLine||!!o||!!s)||(delete e.linecolor,delete e.linewidth);var l=a("gridcolor",bs(i,n.bgColor,n.blend||xs).toRgbString()),u=a("gridwidth");if(r("showgrid",n.showGrid||!!l||!!u)||(delete e.gridcolor,delete e.gridwidth),!n.noZeroLine){var c=a("zerolinecolor",i),h=a("zerolinewidth");r("zeroline",n.showGrid||!!c||!!h)||(delete e.zerolinecolor,delete e.zerolinewidth)}}(e,r,n,{dfltColor:h,bgColor:i.bgColor,showGrid:i.showGrid,attributes:wr}),(r.showline||r.ticks)&&n("mirror"),i.automargin&&n("automargin"),r},Ms=ci.id2name,As=function(t,e,r,n,i){var a=i._axisConstraintGroups,o=e._id,s=o.charAt(0);if(!e.fixedrange&&(r("constrain"),re.coerce(t,e,{constraintoward:{valType:"enumerated",values:"x"===s?["left","center","right"]:["bottom","middle","top"],dflt:"x"===s?"center":"middle"}},"constraintoward"),t.scaleanchor)){var l=function(t,e,r,n){var i,a,o,s,l=n[Ms(e)].type,u=[];for(a=0;a<r.length;a++)(o=r[a])!==e&&((s=n[Ms(o)]).type!==l||s.fixedrange||u.push(o));for(i=0;i<t.length;i++)if(t[i][e]){var c=t[i],h=[];for(a=0;a<u.length;a++)o=u[a],c[o]||h.push(o);return{linkableAxes:h,thisGroup:c}}return{linkableAxes:u,thisGroup:null}}(a,o,n,i),u=re.coerce(t,e,{scaleanchor:{valType:"enumerated",values:l.linkableAxes}},"scaleanchor");if(u){var c=r("scaleratio");c||(c=e.scaleratio=1),function(t,e,r,n,i){var a,o,s,l,u;null===e?((e={})[r]=1,u=t.length,t.push(e)):u=t.indexOf(e);var c=Object.keys(e);for(a=0;a<t.length;a++)if(s=t[a],a!==u&&s[n]){var h=s[n];for(o=0;o<c.length;o++)l=c[o],s[l]=h*i*e[l];return void t.splice(u,1)}if(1!==i)for(o=0;o<c.length;o++)e[c[o]]*=i;e[n]=1}(a,l.thisGroup,o,u,c)}else-1!==n.indexOf(t.scaleanchor)&&re.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}};var Ts=function(t,r,n,i){var a,o,s,l,u=i.counterAxes||[],c=i.overlayableAxes||[],h=i.letter,f=i.grid;f&&(o=f._domains[h][f._axisMap[r._id]],a=f._anchors[r._id],o&&(s=f[h+"side"].split(" ")[0],l=f.domain[h]["right"===s||"top"===s?1:0])),o=o||[0,1],a=a||(e(t.position)?"free":u[0]||"free"),s=s||("x"===h?"bottom":"left"),l=l||0,"free"===re.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:a}},"anchor")&&n("position",l),re.coerce(t,r,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:s}},"side");var d=!1;if(c.length&&(d=re.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!d){var p=n("domain",o);p[0]>p[1]-.01&&(r.domain=o),re.noneOrAll(t.domain,r.domain,o)}return n("layer"),r},ks=ci.name2id,Es=function(t,e,r,n,i){i&&(e._name=i,e._id=ks(i)),"-"===r("type")&&(!function(t,e){if("-"!==t.type)return;var r=t._id,n=r.charAt(0);-1!==r.indexOf("scene")&&(r=n);var i=function(t,e,r){for(var n=0;n<t.length;n++){var i=t[n];if((i[r+"axis"]||r)===e){if(Cs(i,r))return i;if((i[r]||[]).length||i[r+"0"])return i}}}(e,r,n);if(!i)return;if("histogram"===i.type&&n==={v:"y",h:"x"}[i.orientation||"v"])return void(t.type="linear");var a=n+"calendar",o=i[a];if(Cs(i,n)){for(var s,l=Ls(i),u=[],c=0;c<e.length;c++)s=e[c],R.traceIs(s,"box-violin")&&(s[n+"axis"]||n)===r&&(void 0!==s[l]?u.push(s[l][0]):void 0!==s.name?u.push(s.name):u.push("text"),s[a]!==o&&(o=void 0));t.type=Vi(u,o)}else t.type=Vi(i[n]||[i[n+"0"]],o)}(e,n),"-"===e.type?e.type="linear":t.type=e.type)};function Ls(t){return{v:"x",h:"y"}[t.orientation||"v"]}function Cs(t,e){var r=Ls(t),n=R.traceIs(t,"box-violin"),i=R.traceIs(t._fullInput||{},"candlestick");return n&&!i&&e===r&&void 0===t[r]&&void 0===t[r+"0"]}var Ss=Oe.attrRegex,Ps={},Rs=Oe.SUBPLOT_PATTERN;Ps.getSubplotCalcData=function(t,e,r){var n=R.subplotsRegistry[e];if(!n)return[];for(var i=n.attr,a=[],o=0;o<t.length;o++){var s=t[o];s[0].trace[i]===r&&a.push(s)}return a},Ps.getModuleCalcData=function(t,e){var r=[],n="string"==typeof e?R.getModule(e):e;if(!n)return r;for(var i=0;i<t.length;i++){var a=t[i],o=a[0].trace;o._module===n&&!0===o.visible&&r.push(a)}return r},Ps.getSubplotData=function(t,e,r){if(!R.subplotsRegistry[e])return[];var n,i,a,o=R.subplotsRegistry[e].attr,s=[];if("gl2d"===e){var l=r.match(Rs);i="x"+l[1],a="y"+l[2]}for(var u=0;u<t.length;u++)n=t[u],"gl2d"===e&&R.traceIs(n,"gl2d")?n[o[0]]===i&&n[o[1]]===a&&s.push(n):n[o]===r&&s.push(n);return s};var Os={},Is=Ps.getModuleCalcData;function Ns(t,e,r,n,i){var a=t._fullLayout._modules;e.plot&&e.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var o=0;o<a.length;o++){var s=a[o];if("cartesian"===s.basePlotModule.name){var l=Is(r,s);s.plot&&s.plot(t,e,l,n,i)}}}function Ds(t){var e=t.plotgroup,r=t.id,n=Oe.layerValue2layerClass[t.xaxis.layer],i=Oe.layerValue2layerClass[t.yaxis.layer];if(t.mainplot){var a=t.mainplotinfo,o=a.plotgroup,s=r+"-x",l=r+"-y";t.gridlayer=a.gridlayer,t.zerolinelayer=a.zerolinelayer,js(a.overlinesBelow,"path",s),js(a.overlinesBelow,"path",l),js(a.overaxesBelow,"g",s),js(a.overaxesBelow,"g",l),t.plot=js(a.overplot,"g",r),js(a.overlinesAbove,"path",s),js(a.overlinesAbove,"path",l),js(a.overaxesAbove,"g",s),js(a.overaxesAbove,"g",l),t.xlines=o.select(".overlines-"+n).select("."+s),t.ylines=o.select(".overlines-"+i).select("."+l),t.xaxislayer=o.select(".overaxes-"+n).select("."+s),t.yaxislayer=o.select(".overaxes-"+i).select("."+l)}else{var u=js(e,"g","layer-subplot");t.shapelayer=js(u,"g","shapelayer"),t.imagelayer=js(u,"g","imagelayer"),t.gridlayer=js(e,"g","gridlayer"),t.zerolinelayer=js(e,"g","zerolinelayer"),js(e,"path","xlines-below"),js(e,"path","ylines-below"),t.overlinesBelow=js(e,"g","overlines-below"),js(e,"g","xaxislayer-below"),js(e,"g","yaxislayer-below"),t.overaxesBelow=js(e,"g","overaxes-below"),t.plot=js(e,"g","plot"),t.overplot=js(e,"g","overplot"),js(e,"path","xlines-above"),js(e,"path","ylines-above"),t.overlinesAbove=js(e,"g","overlines-above"),js(e,"g","xaxislayer-above"),js(e,"g","yaxislayer-above"),t.overaxesAbove=js(e,"g","overaxes-above"),t.xlines=e.select(".xlines-"+n),t.ylines=e.select(".ylines-"+i),t.xaxislayer=e.select(".xaxislayer-"+n),t.yaxislayer=e.select(".yaxislayer-"+i)}js(t.gridlayer,"g",t.xaxis._id,t.xaxis._id),js(t.gridlayer,"g",t.yaxis._id,t.yaxis._id),t.gridlayer.selectAll("g").sort(ci.idSort);for(var c=0;c<Oe.traceLayerClasses.length;c++)js(t.plot,"g",Oe.traceLayerClasses[c]);t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function zs(e,r){if(e){var n={};e.each(function(e){t.select(this).remove(),Fs(e,r),n[e]=!0});for(var i=r._plots,a=Object.keys(i),o=0;o<a.length;o++)for(var s=i[a[o]].overlays||[],l=0;l<s.length;l++){var u=s[l];n[u.id]&&u.plot.selectAll(".trace").remove()}}}function Fs(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}function js(t,e,r,n){var i=t.selectAll("."+r).data([n||0]);return i.enter().append(e).classed(r,!0),i}Os.name="cartesian",Os.attr=["xaxis","yaxis"],Os.idRoot=["x","y"],Os.idRegex=Oe.idRegex,Os.attrRegex=Oe.attrRegex,Os.attributes={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}},Os.layoutAttributes=wr,Os.supplyLayoutDefaults=function(t,e,r){var n,i={},a={},o={},s={};for(n=0;n<r.length;n++){var l=r[n];if(R.traceIs(l,"cartesian")||R.traceIs(l,"gl2d")){var u=ci.id2name(l.xaxis),c=ci.id2name(l.yaxis);R.traceIs(l,"carpet")&&("carpet"!==l.type||l._cheater)||u&&(a[u]=1),"carpet"===l.type&&l._cheater&&u&&(i[u]=1),R.traceIs(l,"2dMap")&&(o[u]=!0,o[c]=!0),R.traceIs(l,"oriented")&&(s["h"===l.orientation?c:u]=!0)}}var h=e._subplots,f=h.xaxis,d=h.yaxis,p=re.simpleMap(f,ci.id2name),g=re.simpleMap(d,ci.id2name),v=p.concat(g),m=Ne.background;f.length&&d.length&&(m=re.coerce(t,e,P,"plot_bgcolor"));var y,b,x,_,w=Ne.combine(m,e.paper_bgcolor);function M(t,e){return re.coerce(x,_,wr,t,e)}function A(t,e){return re.coerce2(x,_,wr,t,e)}function T(t){return"x"===t?d:f}var k={x:T("x"),y:T("y")};function E(e,r){for(var n="x"===e?p:g,i=[],a=0;a<n.length;a++){var o=n[a];o===r||(t[o]||{}).overlaying||i.push(ci.name2id(o))}return i}for(n=0;n<v.length;n++){y=v[n],re.isPlainObject(t[y])||(t[y]={}),x=t[y],_=e[y]={},Es(x,_,M,r,y);var L=E(b=y.charAt(0),y),C={letter:b,font:e.font,outerTicks:o[y],showGrid:!s[y],data:r,bgColor:w,calendar:e.calendar,automargin:!0,cheateronly:"x"===b&&i[y]&&!a[y]};ws(x,_,M,C,e);var S=A("spikecolor"),O=A("spikethickness"),I=A("spikedash"),N=A("spikemode"),D=A("spikesnap");M("showspikes",!!(S||O||I||N||D))||(delete _.spikecolor,delete _.spikethickness,delete _.spikedash,delete _.spikemode,delete _.spikesnap);var z={letter:b,counterAxes:k[b],overlayableAxes:L,grid:e.grid};Ts(x,_,M,z),_._input=x}var F=R.getComponentMethod("rangeslider","handleDefaults"),j=R.getComponentMethod("rangeselector","handleDefaults");for(n=0;n<p.length;n++)y=p[n],x=t[y],_=e[y],F(t,e,y),"date"===_.type&&j(x,_,e,g,_.calendar),M("fixedrange");for(n=0;n<g.length;n++){y=g[n],x=t[y],_=e[y];var B=e[ci.id2name(_.anchor)];M("fixedrange",B&&B.rangeslider&&B.rangeslider.visible)}e._axisConstraintGroups=[];var U=k.x.concat(k.y);for(n=0;n<v.length;n++)b=(y=v[n]).charAt(0),x=t[y],_=e[y],As(x,_,M,U,e)},Os.transitionAxes=function(e,r,n,i){var a=e._fullLayout,o=[];var s,l,u,c,h=function(t){var e,r,n,i,s={};for(e in t)if((r=e.split("."))[0].match(Ss)){var l=e.charAt(0),u=r[0];if(n=a[u],i={},Array.isArray(t[e])?i.to=t[e].slice(0):Array.isArray(t[e].range)&&(i.to=t[e].range.slice(0)),!i.to)continue;i.axisName=u,i.length=n._length,o.push(l),s[l]=i}return s}(r),f=Object.keys(h),d=function(t,e,r){var n,i,a,o=t._plots,s=[];for(n in o){var l=o[n];if(-1===s.indexOf(l)){var u=l.xaxis._id,c=l.yaxis._id,h=l.xaxis.range,f=l.yaxis.range;l.xaxis._r=l.xaxis.range.slice(),l.yaxis._r=l.yaxis.range.slice(),i=r[u]?r[u].to:h,a=r[c]?r[c].to:f,h[0]===i[0]&&h[1]===i[1]&&f[0]===a[0]&&f[1]===a[1]||-1===e.indexOf(u)&&-1===e.indexOf(c)||s.push(l)}}return s}(a,f,h);if(!d.length)return function(){function t(t,r,n){for(var i=0;i<t.length;i++)if(r(e,i),n)return}t(a.annotations||[],R.getComponentMethod("annotations","drawOne")),t(a.shapes||[],R.getComponentMethod("shapes","drawOne")),t(a.images||[],R.getComponentMethod("images","draw"),!0)}(),!1;function p(t){var e=t.xaxis,r=t.yaxis;a._defs.select("#"+t.clipId+"> rect").call(hn.setTranslate,0,0).call(hn.setScale,1,1),t.plot.call(hn.setTranslate,e._offset,r._offset).call(hn.setScale,1,1);var n=t.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(hn.setPointGroupScale,1,1),n.selectAll(".textpoint").call(hn.setTextPointsScale,1,1),n.call(hn.hideOutsideRangePoints,t)}function g(t,r){var n,i,o,s=h[t.xaxis._id],l=h[t.yaxis._id],u=[];if(s){i=(n=e._fullLayout[s.axisName])._r,o=s.to,u[0]=(i[0]*(1-r)+r*o[0]-i[0])/(i[1]-i[0])*t.xaxis._length;var c=i[1]-i[0],f=o[1]-o[0];n.range[0]=i[0]*(1-r)+r*o[0],n.range[1]=i[1]*(1-r)+r*o[1],u[2]=t.xaxis._length*(1-r+r*f/c)}else u[0]=0,u[2]=t.xaxis._length;if(l){i=(n=e._fullLayout[l.axisName])._r,o=l.to,u[1]=(i[1]*(1-r)+r*o[1]-i[1])/(i[0]-i[1])*t.yaxis._length;var d=i[1]-i[0],p=o[1]-o[0];n.range[0]=i[0]*(1-r)+r*o[0],n.range[1]=i[1]*(1-r)+r*o[1],u[3]=t.yaxis._length*(1-r+r*p/d)}else u[1]=0,u[3]=t.yaxis._length;!function(t,r){var n,i=[];for(i=[t._id,r._id],n=0;n<i.length;n++)Ki.doTicks(e,i[n],!0);function o(t,r,a){for(n=0;n<t.length;n++){var o=t[n];if(-1===i.indexOf(o.xref)&&-1===i.indexOf(o.yref)||r(e,n),a)return}}o(a.annotations||[],R.getComponentMethod("annotations","drawOne")),o(a.shapes||[],R.getComponentMethod("shapes","drawOne")),o(a.images||[],R.getComponentMethod("images","draw"),!0)}(t.xaxis,t.yaxis);var g=t.xaxis,v=t.yaxis,m=!!s,y=!!l,b=m?g._length/u[2]:1,x=y?v._length/u[3]:1,_=m?u[0]:0,w=y?u[1]:0,M=m?u[0]/u[2]*g._length:0,A=y?u[1]/u[3]*v._length:0,T=g._offset-M,k=v._offset-A;a._defs.select("#"+t.clipId+"> rect").call(hn.setTranslate,_,w).call(hn.setScale,1/b,1/x),t.plot.call(hn.setTranslate,T,k).call(hn.setScale,b,x).selectAll(".points").selectAll(".point").call(hn.setPointGroupScale,1/b,1/x),t.plot.selectAll(".points").selectAll(".textpoint").call(hn.setTextPointsScale,1/b,1/x)}i&&(s=i());var v=t.ease(n.easing);return e._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var t={},r=0;r<f.length;r++){var n=e._fullLayout[f[r]+"axis"];t[n._name+".range[0]"]=n.range[0],t[n._name+".range[1]"]=n.range[1],n.range=n._r.slice()}return R.call("relayout",e,t).then(function(){for(var t=0;t<d.length;t++)p(d[t])})}()}),l=Date.now(),c=window.requestAnimationFrame(function t(){u=Date.now();for(var r=Math.min(1,(u-l)/n.duration),i=v(r),a=0;a<d.length;a++)g(d[a],i);u-l>n.duration?(function(){for(var t={},r=0;r<f.length;r++){var n=e._fullLayout[h[f[r]].axisName],i=h[f[r]].to;t[n._name+".range[0]"]=i[0],t[n._name+".range[1]"]=i[1],n.range=i.slice()}s&&s(),R.call("relayout",e,t).then(function(){for(var t=0;t<d.length;t++)p(d[t])})}(),c=window.cancelAnimationFrame(t)):c=window.requestAnimationFrame(t)}),Promise.resolve()},Os.finalizeSubplots=function(t,e){var r,n,i,a=e._subplots,o=a.xaxis,s=a.yaxis,l=a.cartesian,u=l.concat(a.gl2d||[]),c={},h={};for(r=0;r<u.length;r++){var f=u[r].split("y");c[f[0]]=1,h["y"+f[1]]=1}for(r=0;r<o.length;r++)c[n=o[r]]||(i=(t[ci.id2name(n)]||{}).anchor,Oe.idRegex.y.test(i)||(i="y"),l.push(n+i),u.push(n+i),h[i]||(h[i]=1,re.pushUnique(s,i)));for(r=0;r<s.length;r++)h[i=s[r]]||(n=(t[ci.id2name(i)]||{}).anchor,Oe.idRegex.x.test(n)||(n="x"),l.push(n+i),u.push(n+i),c[n]||(c[n]=1,re.pushUnique(o,n)));if(!u.length){for(var d in n="",i="",t){if(Oe.attrRegex.test(d))"x"===d.charAt(0)?(!n||+d.substr(5)<+n.substr(5))&&(n=d):(!i||+d.substr(5)<+i.substr(5))&&(i=d)}n=n?ci.name2id(n):"x",i=i?ci.name2id(i):"y",o.push(n),s.push(i),l.push(n+i)}},Os.plot=function(t,e,r,n){var i,a=t._fullLayout,o=a._subplots.cartesian,s=t.calcdata;if(!Array.isArray(e))for(e=[],i=0;i<s.length;i++)e.push(i);for(a._glcanvas&&a._glcanvas.size()&&a._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0})}),i=0;i<o.length;i++){for(var l,u=o[i],c=a._plots[u],h=[],f=0;f<s.length;f++){var d=s[f],p=d[0].trace;p.xaxis+p.yaxis===u&&((-1!==e.indexOf(p.index)||p.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===u&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===h.indexOf(l)&&h.push(l),h.push(d)),l=d)}Ns(t,c,h,r,n)}},Os.clean=function(t,e,r,n){var i,a,o,s,l,u,c,h,f,d=n._modules||[],p=e._modules||[];for(l=0;l<d.length;l++)"scatter"===(f=d[l].name)?i=!0:"scattergl"===f&&(o=!0);for(l=0;l<p.length;l++)"scatter"===(f=p[l].name)?a=!0:"scattergl"===f&&(s=!0);if(i&&!a){for(u=n._plots,c=Object.keys(u||{}),l=0;l<c.length;l++)(h=u[c[l]]).plot&&h.plot.select("g.scatterlayer").selectAll("g.trace").remove();n._infolayer.selectAll("g.rangeslider-container").select("g.scatterlayer").selectAll("g.trace").remove()}if(o&&!s)for(u=n._plots,c=Object.keys(u||{}),l=0;l<c.length;l++)(h=u[c[l]])._scene&&h._scene.destroy();var g=n._subplots||{},v=e._subplots||{xaxis:[],yaxis:[]};if(g.xaxis&&g.yaxis){var m=g.xaxis.concat(g.yaxis),y=v.xaxis.concat(v.yaxis);for(l=0;l<m.length;l++)-1===y.indexOf(m[l])&&n._infolayer.selectAll(".g-"+m[l]+"title").remove()}var b=n._has&&n._has("cartesian"),x=e._has&&e._has("cartesian");if(b&&!x)zs(n._cartesianlayer.selectAll(".subplot"),n),n._defs.selectAll(".axesclip").remove(),delete n._axisConstraintGroups;else if(g.cartesian)for(l=0;l<g.cartesian.length;l++){var _=g.cartesian[l];if(-1===v.cartesian.indexOf(_)){var w="."+_+",."+_+"-x,."+_+"-y";n._cartesianlayer.selectAll(w).remove(),Fs(_,n)}}},Os.drawFramework=function(e){var r=e._fullLayout,n=function(t){for(var e=t._fullLayout,r=Object.keys(e._plots),n=[],i=[],a=0;a<r.length;a++){var o=r[a],s=e._plots[o],l=s.xaxis,u=s.yaxis,c=l._mainAxis,h=u._mainAxis,f=c._id+h._id;f!==o&&-1!==r.indexOf(f)?(s.mainplot=f,s.mainplotinfo=e._plots[f],i.push(o)):n.push(o)}return n=n.concat(i)}(e),i=r._cartesianlayer.selectAll(".subplot").data(n,re.identity);i.enter().append("g").attr("class",function(t){return"subplot "+t}),i.order(),i.exit().call(zs,r),i.each(function(e){var n=r._plots[e];(n.plotgroup=t.select(this),n.overlays=[],Ds(n),n.mainplot)&&r._plots[n.mainplot].overlays.push(n);n.draglayer=js(r._draggers,"g",e)})},Os.rangePlot=function(t,e,r){Ds(e),Ns(t,e,r),vi.style(t)},Os.toSVG=function(e){var r=e._fullLayout._glimages,n=t.select(e).selectAll(".svg-container");n.filter(function(t,e){return e===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");r.append("svg:image").attr({xmlns:Dr.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};function Bs(t,e,r,n){var i=t.selectAll("rect."+gs.bgClassName).data([0]);i.enter().append("rect").classed(gs.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var a=n.borderwidth%2==0?n.borderwidth:n.borderwidth-1,o=-n._offsetShift,s=hn.crispRound(e,n.borderwidth);i.attr({width:n._width+a,height:n._height+a,transform:"translate("+o+","+o+")",fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":s})}function Us(t,e,r,n){var i=e._fullLayout._topdefs.selectAll("#"+n._clipId).data([0]);i.enter().append("clipPath").attr("id",n._clipId).append("rect").attr({x:0,y:0}),i.select("rect").attr({width:n._width,height:n._height})}function Vs(e,r,n,i){var a,o=Ki.getSubplots(r,n),s=r.calcdata,l=e.selectAll("g."+gs.rangePlotClassName).data(o,re.identity);l.enter().append("g").attr("class",function(t){return gs.rangePlotClassName+" "+t}).call(hn.setClipUrl,i._clipId),l.order(),l.exit().remove(),l.each(function(e,o){var l=t.select(this),u=0===o,c=Ki.getFromId(r,e,"y"),h=c._name,f=i[h],d={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:i.range.slice(),calendar:n.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:r._context};d.layout[h]={type:c.type,domain:[0,1],range:"match"!==f.rangemode?f.range.slice():c.range.slice(),calendar:c.calendar},vi.supplyDefaults(d);var p={id:e,plotgroup:l,xaxis:d._fullLayout.xaxis,yaxis:d._fullLayout[h]};u?a=p:(p.mainplot="xy",p.mainplotinfo=a),Os.rangePlot(r,p,function(t,e){for(var r=[],n=0;n<t.length;n++){var i=t[n],a=i[0].trace;a.xaxis+a.yaxis===e&&r.push(i)}return r}(s,e))})}function Hs(t,e,r,n,i){var a=t.selectAll("rect."+gs.maskMinClassName).data([0]);a.enter().append("rect").classed(gs.maskMinClassName,!0).attr({x:0,y:0}).attr("shape-rendering","crispEdges"),a.attr("height",n._height).call(Ne.fill,gs.maskColor);var o=t.selectAll("rect."+gs.maskMaxClassName).data([0]);if(o.enter().append("rect").classed(gs.maskMaxClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),o.attr("height",n._height).call(Ne.fill,gs.maskColor),"match"!==i.rangemode){var s=t.selectAll("rect."+gs.maskMinOppAxisClassName).data([0]);s.enter().append("rect").classed(gs.maskMinOppAxisClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),s.attr("width",n._width).call(Ne.fill,gs.maskOppAxisColor);var l=t.selectAll("rect."+gs.maskMaxOppAxisClassName).data([0]);l.enter().append("rect").classed(gs.maskMaxOppAxisClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),l.attr("width",n._width).style("border-top",gs.maskOppBorder).call(Ne.fill,gs.maskOppAxisColor)}}function qs(t,e,r,n){if(!e._context.staticPlot){var i=t.selectAll("rect."+gs.slideBoxClassName).data([0]);i.enter().append("rect").classed(gs.slideBoxClassName,!0).attr("y",0).attr("cursor",gs.slideBoxCursor).attr("shape-rendering","crispEdges"),i.attr({height:n._height,fill:gs.slideBoxFill})}}function Gs(t,e,r,n){var i=t.selectAll("g."+gs.grabberMinClassName).data([0]);i.enter().append("g").classed(gs.grabberMinClassName,!0);var a=t.selectAll("g."+gs.grabberMaxClassName).data([0]);a.enter().append("g").classed(gs.grabberMaxClassName,!0);var o={x:0,width:gs.handleWidth,rx:gs.handleRadius,fill:Ne.background,stroke:Ne.defaultLine,"stroke-width":gs.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(n._height/4),height:Math.round(n._height/2)},l=i.selectAll("rect."+gs.handleMinClassName).data([0]);l.enter().append("rect").classed(gs.handleMinClassName,!0).attr(o),l.attr(s);var u=a.selectAll("rect."+gs.handleMaxClassName).data([0]);if(u.enter().append("rect").classed(gs.handleMaxClassName,!0).attr(o),u.attr(s),!e._context.staticPlot){var c={width:gs.grabAreaWidth,x:0,y:0,fill:gs.grabAreaFill,cursor:gs.grabAreaCursor},h=i.selectAll("rect."+gs.grabAreaMinClassName).data([0]);h.enter().append("rect").classed(gs.grabAreaMinClassName,!0).attr(c),h.attr("height",n._height);var f=a.selectAll("rect."+gs.grabAreaMaxClassName).data([0]);f.enter().append("rect").classed(gs.grabAreaMaxClassName,!0).attr(c),f.attr("height",n._height)}}var Xs={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:re.extendFlat({},ps,{yaxis:ys})}}},layoutAttributes:ps,handleDefaults:function(t,e,r){if(t[r].rangeslider){re.isPlainObject(t[r].rangeslider)||(t[r].rangeslider={});var n=t[r].rangeslider,i=e[r],a=i.rangeslider={};if(v("visible")){v("bgcolor",e.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),i._rangesliderAutorange=v("autorange",!i.isValidRange(n.range)),v("range");var o=e._subplots;if(o)for(var s=o.cartesian.filter(function(t){return t.substr(0,t.indexOf("y"))===ci.name2id(r)}).map(function(t){return t.substr(t.indexOf("y"),t.length)}),l=re.simpleMap(s,ci.id2name),u=0;u<l.length;u++){var c,h=l[u],f=n[h]||{},d=a[h]={},p=e[h];f.range&&p.isValidRange(f.range)&&(c="fixed");var g=m(f,d,"rangemode",c);"match"!==g&&m(f,d,"range",p.range.slice()),p._rangesliderAutorange="auto"===g}a._input=n}}function v(t,e){return re.coerce(n,a,ps,t,e)}function m(t,e,r,n){return re.coerce(t,e,ys,r,n)}},calcAutorange:function(t){for(var e=vs(t,"x",!0),r=0;r<e.length;r++){var n=e[r],i=n[gs.name];i&&i.visible&&i.autorange&&n._min.length&&n._max.length&&(i._input.autorange=!0,i._input.range=i.range=ms(n))}},draw:function(e){var r=e._fullLayout,n=function(t){var e=Ki.list({_fullLayout:t},"x",!0),r=gs.name,n=[];if(t._has("gl2d"))return n;for(var i=0;i<e.length;i++){var a=e[i];a[r]&&a[r].visible&&n.push(a)}return n}(r);var i=r._infolayer.selectAll("g."+gs.containerClassName).data(n,function(t){return t._name});i.enter().append("g").classed(gs.containerClassName,!0).attr("pointer-events","all"),i.exit().each(function(e){var n=t.select(this),i=e[gs.name];n.remove(),r._topdefs.select("#"+i._clipId).remove()}),i.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];-1!==i.indexOf(gs.name)&&vi.autoMargin(t,i)}}(e),0!==n.length&&i.each(function(n){var i=t.select(this),a=n[gs.name],o=r[Ki.id2name(n.anchor)],s=a[Ki.id2name(n.anchor)];if(a.range){var l=a.range,u=n.range;l[0]=n.l2r(Math.min(n.r2l(l[0]),n.r2l(u[0]))),l[1]=n.l2r(Math.max(n.r2l(l[1]),n.r2l(u[1]))),a._input.range=l.slice()}n.cleanRange("rangeslider.range");for(var c=r.margin,h=r._size,f=n.domain,d=(n._boundingBox||{}).height||0,p=1/0,g=Ki.getSubplots(e,n),v=0;v<g.length;v++){var m=Ki.getFromId(e,g[v].substr(g[v].indexOf("y")));p=Math.min(p,m.domain[0])}a._id=gs.name+n._id,a._clipId=a._id+"-"+r._uid,a._width=h.w*(f[1]-f[0]),a._height=(r.height-c.b-c.t)*a.thickness,a._offsetShift=Math.floor(a.borderwidth/2);var y=Math.round(c.l+h.w*f[0]),b=Math.round(h.t+h.h*(1-p)+d+a._offsetShift+gs.extraPad);i.attr("transform","translate("+y+","+b+")");var x=n.r2l(a.range[0]),_=n.r2l(a.range[1]),w=_-x;if(a.p2d=function(t){return t/a._width*w+x},a.d2p=function(t){return(t-x)/w*a._width},a._rl=[x,_],"match"!==s.rangemode){var M=o.r2l(s.range[0]),A=o.r2l(s.range[1])-M;a.d2pOppAxis=function(t){return(t-M)/A*a._height}}i.call(Bs,e,n,a).call(Us,e,n,a).call(Vs,e,n,a).call(Hs,e,n,a,s).call(qs,e,n,a).call(Gs,e,n,a),function(e,r,n,i){var a=e.select("rect."+gs.slideBoxClassName).node(),o=e.select("rect."+gs.grabAreaMinClassName).node(),s=e.select("rect."+gs.grabAreaMaxClassName).node();e.on("mousedown",function(){var l=t.event,u=l.target,c=l.clientX,h=c-e.node().getBoundingClientRect().left,f=i.d2p(n._rl[0]),d=i.d2p(n._rl[1]),p=rr.coverSlip();function g(e){var l,g,v,m=+e.clientX-c;switch(u){case a:v="ew-resize",l=f+m,g=d+m;break;case o:v="col-resize",l=f+m,g=d;break;case s:v="col-resize",l=f,g=d+m;break;default:v="ew-resize",l=h,g=h+m}if(g<l){var y=g;g=l,l=y}i._pixelMin=l,i._pixelMax=g,Nn(t.select(p),v),function(t,e,r,n){function i(t){return r.l2r(re.constrain(t,n._rl[0],n._rl[1]))}var a=i(n.p2d(n._pixelMin)),o=i(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){R.call("relayout",e,r._name+".range",[a,o])})}(0,r,n,i)}p.addEventListener("mousemove",g),p.addEventListener("mouseup",function t(){p.removeEventListener("mousemove",g),p.removeEventListener("mouseup",t),re.removeElement(p)})})}(i,e,n,a),function(t,e,r,n,i,a){var o=gs.handleWidth/2;function s(t){return re.constrain(t,0,n._width)}function l(t){return re.constrain(t,0,n._height)}function u(t){return re.constrain(t,-o,n._width+o)}var c=s(n.d2p(r._rl[0])),h=s(n.d2p(r._rl[1]));if(t.select("rect."+gs.slideBoxClassName).attr("x",c).attr("width",h-c),t.select("rect."+gs.maskMinClassName).attr("width",c),t.select("rect."+gs.maskMaxClassName).attr("x",h).attr("width",n._width-h),"match"!==a.rangemode){var f=n._height-l(n.d2pOppAxis(i._rl[1])),d=n._height-l(n.d2pOppAxis(i._rl[0]));t.select("rect."+gs.maskMinOppAxisClassName).attr("x",c).attr("height",f).attr("width",h-c),t.select("rect."+gs.maskMaxOppAxisClassName).attr("x",c).attr("y",d).attr("height",n._height-d).attr("width",h-c),t.select("rect."+gs.slideBoxClassName).attr("y",f).attr("height",d-f)}var p=Math.round(u(c-o))-.5,g=Math.round(u(h-o))+.5;t.select("g."+gs.grabberMinClassName).attr("transform","translate("+p+",0.5)"),t.select("g."+gs.grabberMaxClassName).attr("transform","translate("+g+",0.5)")}(i,0,n,a,o,s),"bottom"===n.side&&Ci.draw(e,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:r._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:b+a._height+a._offsetShift+10+1.5*n.titlefont.size,"text-anchor":"middle"}}),vi.autoMargin(e,a._id,{x:f[0],y:p,l:0,r:0,t:0,b:a._height+c.b+d,pad:gs.extraPad+2*a._offsetShift})})}},Ws=Gn.line,Ys=br.dash,Zs=m.extendFlat,Qs={_isLinkedToArray:"shape",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:Zs({},Ie.xref,{}),x0:{valType:"any",editType:"calcIfAutorange+arraydraw"},x1:{valType:"any",editType:"calcIfAutorange+arraydraw"},yref:Zs({},Ie.yref,{}),y0:{valType:"any",editType:"calcIfAutorange+arraydraw"},y1:{valType:"any",editType:"calcIfAutorange+arraydraw"},path:{valType:"string",editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:Zs({},Ws.color,{editType:"arraydraw"}),width:Zs({},Ws.width,{editType:"calcIfAutorange+arraydraw"}),dash:Zs({},Ys,{editType:"arraydraw"}),editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"},Ks={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},$s={rangeToShapePosition:function(t){return"log"===t.type?t.r2d:function(t){return t}},shapePositionToRange:function(t){return"log"===t.type?t.d2r:function(t){return t}},decodeDate:function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},encodeDate:function(t){return function(e){return t(e).replace(" ","_")}},getDataToPixel:function(t,e,r){var n,i=t._fullLayout._size;if(e){var a=$s.shapePositionToRange(e);n=function(t){return e._offset+e.r2p(a(t,!0))},"date"===e.type&&(n=$s.decodeDate(n))}else n=r?function(t){return i.t+i.h*(1-t)}:function(t){return i.l+i.w*t};return n},getPixelToData:function(t,e,r){var n,i=t._fullLayout._size;if(e){var a=$s.rangeToShapePosition(e);n=function(t){return a(e.p2r(t-e._offset))}}else n=r?function(t){return 1-(t-i.t)/i.h}:function(t){return(t-i.l)/i.w};return n}};function Js(t,e,r,n,i){var a="category"===t.type?t.r2c:t.d2c;if(void 0!==e)return[a(e),a(r)];if(n){var o,s,l,u,c=1/0,h=-1/0,f=n.match(Ks.segmentRE);for("date"===t.type&&(a=$s.decodeDate(a)),o=0;o<f.length;o++)void 0!==(s=i[f[o].charAt(0)].drawn)&&(!(l=f[o].substr(1).match(Ks.paramRE))||l.length<s||((u=a(l[s]))<c&&(c=u),u>h&&(h=u)));return h>=c?[c,h]:void 0}}var tl=function(t,e,r,n,i){function a(r,n){return re.coerce(t,e,Qs,r,n)}if(n=n||{},!a("visible",!(i=i||{}).itemIsNotPlainObject))return e;a("layer"),a("opacity"),a("fillcolor"),a("line.color"),a("line.width"),a("line.dash");for(var o=a("type",t.path?"path":"rect"),s=["x","y"],l=0;l<2;l++){var u=s[l],c={_fullLayout:r},h=Ki.coerceRef(t,e,c,u,"","paper");if("path"!==o){var f,d,p;"paper"!==h?(f=Ki.getFromId(c,h),p=$s.rangeToShapePosition(f),d=$s.shapePositionToRange(f)):d=p=re.identity;var g=u+"0",v=u+"1",m=t[g],y=t[v];t[g]=d(t[g],!0),t[v]=d(t[v],!0),Ki.coercePosition(e,c,a,h,g,.25),Ki.coercePosition(e,c,a,h,v,.75),e[g]=p(e[g]),e[v]=p(e[v]),t[g]=m,t[v]=y}}return"path"===o?a("path"):re.noneOrAll(t,e,["x0","x1","y0","y1"]),e},el={draw:function(t){var e=t._fullLayout;e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._shapeSubplotLayers.selectAll("path").remove();for(var r=0;r<e.shapes.length;r++)e.shapes[r].visible&&rl(t,r)},drawOne:rl};function rl(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var r=(t.layout.shapes||[])[e],n=t._fullLayout.shapes[e];if(r&&!1!==n.visible)if("below"!==n.layer)a(t._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)a(t._fullLayout._shapeLowerLayer);else{var i=t._fullLayout._plots[n.xref+n.yref];if(i)a((i.mainplotinfo||i).shapelayer);else a(t._fullLayout._shapeLowerLayer)}function a(r){var i={"data-index":e,"fill-rule":"evenodd",d:nl(t,n)},a=n.line.width?n.line.color:"rgba(0,0,0,0)",o=r.append("path").attr(i).style("opacity",n.opacity).call(Ne.stroke,a).call(Ne.fill,n.fillcolor).call(hn.dashLine,n.line.dash,n.line.width),s=(n.xref+n.yref).replace(/paper/g,"");o.call(hn.setClipUrl,s?"clip"+t._fullLayout._uid+s:null),t._context.edits.shapePosition&&function(t,e,r,n){var i,a,o,s,l,u,c,h,f,d,p,g,v,m,y,b,x,_,w,M,A,T,k,E,L,C,S,P,O,I,N=10,D=10,z={element:e.node(),gd:t,prepFn:function(e){E=Ki.getFromId(t,r.xref),L=Ki.getFromId(t,r.yref),C=$s.getDataToPixel(t,E),S=$s.getDataToPixel(t,L,!0),P=$s.getPixelToData(t,E),O=$s.getPixelToData(t,L,!0);var R="shapes["+n+"]";"path"===r.type?(T=r.path,k=R+".path"):(a=C(r.x0),o=S(r.y0),s=C(r.x1),l=S(r.y1),u=R+".x0",c=R+".y0",h=R+".x1",f=R+".y1");a<s?(g=a,b=R+".x0",M="x0",v=s,x=R+".x1",A="x1"):(g=s,b=R+".x1",M="x1",v=a,x=R+".x0",A="x0");o<l?(d=o,m=R+".y0",_="y0",p=l,y=R+".y1",w="y1"):(d=l,m=R+".y1",_="y1",p=o,y=R+".y0",w="y0");i={},j(e),z.moveFn="move"===I?B:U},doneFn:function(){Nn(e),R.call("relayout",t,i)}},F=z.element.getBoundingClientRect();function j(t){var r=F.right-F.left,n=F.bottom-F.top,i=t.clientX-F.left,a=t.clientY-F.top,o=r>N&&n>D&&!t.shiftKey?rr.getCursor(i/r,1-a/n):"move";Nn(e,o),I=o.split("-")[0]}function B(n,d){if("path"===r.type){var p=function(t){return P(C(t)+n)};E&&"date"===E.type&&(p=$s.encodeDate(p));var g=function(t){return O(S(t)+d)};L&&"date"===L.type&&(g=$s.encodeDate(g)),r.path=il(T,p,g),i[k]=r.path}else i[u]=r.x0=P(a+n),i[c]=r.y0=O(o+d),i[h]=r.x1=P(s+n),i[f]=r.y1=O(l+d);e.attr("d",nl(t,r))}function U(n,a){if("path"===r.type){var o=function(t){return P(C(t)+n)};E&&"date"===E.type&&(o=$s.encodeDate(o));var s=function(t){return O(S(t)+a)};L&&"date"===L.type&&(s=$s.encodeDate(s)),r.path=il(T,o,s),i[k]=r.path}else{var l=~I.indexOf("n")?d+a:d,u=~I.indexOf("s")?p+a:p,c=~I.indexOf("w")?g+n:g,h=~I.indexOf("e")?v+n:v;u-l>D&&(i[m]=r[_]=O(l),i[y]=r[w]=O(u)),h-c>N&&(i[b]=r[M]=P(c),i[x]=r[A]=P(h))}e.attr("d",nl(t,r))}rr.init(z),e.node().onmousemove=j}(t,o,n,e)}}function nl(t,e){var r,n,i,a,o=e.type,s=Ki.getFromId(t,e.xref),l=Ki.getFromId(t,e.yref),u=t._fullLayout._size;if(s?(r=$s.shapePositionToRange(s),n=function(t){return s._offset+s.r2p(r(t,!0))}):n=function(t){return u.l+u.w*t},l?(i=$s.shapePositionToRange(l),a=function(t){return l._offset+l.r2p(i(t,!0))}):a=function(t){return u.t+u.h*(1-t)},"path"===o)return s&&"date"===s.type&&(n=$s.decodeDate(n)),l&&"date"===l.type&&(a=$s.decodeDate(a)),function(t,e,r){return t.replace(Ks.segmentRE,function(t){var n=0,i=t.charAt(0),a=Ks.paramIsX[i],o=Ks.paramIsY[i],s=Ks.numParams[i],l=t.substr(1).replace(Ks.paramRE,function(t){return a[n]?t=e(t):o[n]&&(t=r(t)),++n>s&&(t="X"),t});return n>s&&(l=l.replace(/[\s,]*X.*/,""),re.log("Ignoring extra params in segment "+t)),i+l})}(e.path,n,a);var c=n(e.x0),h=n(e.x1),f=a(e.y0),d=a(e.y1);if("line"===o)return"M"+c+","+f+"L"+h+","+d;if("rect"===o)return"M"+c+","+f+"H"+h+"V"+d+"H"+c+"Z";var p=(c+h)/2,g=(f+d)/2,v=Math.abs(p-c),m=Math.abs(g-f),y="A"+v+","+m,b=p+v+","+g;return"M"+b+y+" 0 1,1 "+(p+","+(g-m))+y+" 0 0,1 "+b+"Z"}function il(t,e,r){return t.replace(Ks.segmentRE,function(t){var n=0,i=t.charAt(0),a=Ks.paramIsX[i],o=Ks.paramIsY[i],s=Ks.numParams[i];return i+t.substr(1).replace(Ks.paramRE,function(t){return n>=s?t:(a[n]?t=e(t):o[n]&&(t=r(t)),n++,t)})})}var al={moduleType:"component",name:"shapes",layoutAttributes:Qs,supplyLayoutDefaults:function(t,e){no(t,e,{name:"shapes",handleItemDefaults:tl})},includeBasePlot:io("shapes"),calcAutorange:function(t){var e=t._fullLayout,r=re.filterVisible(e.shapes);if(r.length&&t._fullData.length)for(var n=0;n<r.length;n++){var i,a,o=r[n],s=o.line.width/2;"paper"!==o.xref&&(a=Js(i=Ki.getFromId(t,o.xref),o.x0,o.x1,o.path,Ks.paramIsX))&&Ki.expand(i,a,{ppad:s}),"paper"!==o.yref&&(a=Js(i=Ki.getFromId(t,o.yref),o.y0,o.y1,o.path,Ks.paramIsY))&&Ki.expand(i,a,{ppad:s})}},draw:el.draw,drawOne:el.drawOne},ol={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},sl={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"},ll=m.extendDeepAll,ul=(0,gr.overrideAll)({_isLinkedToArray:"slider",visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:{_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:ll({},sl,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:Fn.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:k({})},font:k({}),activebgcolor:{valType:"color",dflt:ol.gripBgActiveColor},bgcolor:{valType:"color",dflt:ol.railBgColor},bordercolor:{valType:"color",dflt:ol.railBorderColor},borderwidth:{valType:"number",min:0,dflt:ol.railBorderWidth},ticklen:{valType:"number",min:0,dflt:ol.tickLength},tickcolor:{valType:"color",dflt:ol.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:ol.minorTickLength}},"arraydraw","from-root"),cl=ol.name,hl=ul.steps;function fl(t,e,r){function n(r,n){return re.coerce(t,e,ul,r,n)}n("visible",function(t,e){var r,n,i=t.steps||[],a=e.steps=[];function o(t,e){return re.coerce(r,n,hl,t,e)}for(var s=0;s<i.length;s++)r=i[s],n={},o("method"),re.isPlainObject(r)&&("skip"===n.method||Array.isArray(r.args))&&(o("args"),o("label","step-"+s),o("value",n.label),o("execute"),a.push(n));return a}(t,e).length>0)&&(n("active"),n("x"),n("y"),re.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),re.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),re.coerceFont(n,"currentvalue.font",e.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen"))}var dl=Nr.LINE_SPACING,pl=Nr.FROM_TL,vl=Nr.FROM_BR;function ml(t){return t._index}function yl(e,r){var n=hn.tester.selectAll("g."+ol.labelGroupClass).data(r.steps);n.enter().append("g").classed(ol.labelGroupClass,!0);var i=0,a=0;n.each(function(e){var n=_l(t.select(this),{step:e},r).node();if(n){var o=hn.bBox(n);a=Math.max(a,o.height),i=Math.max(i,o.width)}}),n.remove();var o=r._dims={};o.inputAreaWidth=Math.max(ol.railWidth,ol.gripHeight);var s=e._fullLayout._size;o.lx=s.l+s.w*r.x,o.ly=s.t+s.h*(1-r.y),"fraction"===r.lenmode?o.outerLength=Math.round(s.w*r.len):o.outerLength=r.len,o.inputAreaStart=0,o.inputAreaLength=Math.round(o.outerLength-r.pad.l-r.pad.r);var l=(o.inputAreaLength-2*ol.stepInset)/(r.steps.length-1),u=i+ol.labelPadding;if(o.labelStride=Math.max(1,Math.ceil(u/l)),o.labelHeight=a,o.currentValueMaxWidth=0,o.currentValueHeight=0,o.currentValueTotalHeight=0,o.currentValueMaxLines=1,r.currentvalue.visible){var c=hn.tester.append("g");n.each(function(t){var e=bl(c,r,t.label),n=e.node()&&hn.bBox(e.node())||{width:0,height:0},i=Fr.lineCount(e);o.currentValueMaxWidth=Math.max(o.currentValueMaxWidth,Math.ceil(n.width)),o.currentValueHeight=Math.max(o.currentValueHeight,Math.ceil(n.height)),o.currentValueMaxLines=Math.max(o.currentValueMaxLines,i)}),o.currentValueTotalHeight=o.currentValueHeight+r.currentvalue.offset,c.remove()}o.height=o.currentValueTotalHeight+ol.tickOffset+r.ticklen+ol.labelOffset+o.labelHeight+r.pad.t+r.pad.b;var h="left";jo.isRightAnchor(r)&&(o.lx-=o.outerLength,h="right"),jo.isCenterAnchor(r)&&(o.lx-=o.outerLength/2,h="center");var f="top";jo.isBottomAnchor(r)&&(o.ly-=o.height,f="bottom"),jo.isMiddleAnchor(r)&&(o.ly-=o.height/2,f="middle"),o.outerLength=Math.ceil(o.outerLength),o.height=Math.ceil(o.height),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),vi.autoMargin(e,ol.autoMarginIdRoot+r._index,{x:r.x,y:r.y,l:o.outerLength*pl[h],r:o.outerLength*vl[h],b:o.height*vl[f],t:o.height*pl[f]})}function bl(t,e,r){if(e.currentvalue.visible){var n,i,a=t.selectAll("text").data([0]),o=e._dims;switch(e.currentvalue.xanchor){case"right":n=o.inputAreaLength-ol.currentValueInset-o.currentValueMaxWidth,i="left";break;case"center":n=.5*o.inputAreaLength,i="middle";break;default:n=ol.currentValueInset,i="left"}a.enter().append("text").classed(ol.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":i,"data-notex":1});var s=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof r)s+=r;else s+=e.steps[e.active].label;e.currentvalue.suffix&&(s+=e.currentvalue.suffix),a.call(hn.font,e.currentvalue.font).text(s).call(Fr.convertToTspans,e._gd);var l=Fr.lineCount(a),u=(o.currentValueMaxLines+1-l)*e.currentvalue.font.size*dl;return Fr.positionText(a,n,u),a}}function xl(t,e,r){var n=t.selectAll("rect."+ol.gripRectClass).data([0]);n.enter().append("rect").classed(ol.gripRectClass,!0).call(Tl,e,t,r).style("pointer-events","all"),n.attr({width:ol.gripWidth,height:ol.gripHeight,rx:ol.gripRadius,ry:ol.gripRadius}).call(Ne.stroke,r.bordercolor).call(Ne.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function _l(t,e,r){var n=t.selectAll("text").data([0]);return n.enter().append("text").classed(ol.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1}),n.call(hn.font,r.font).text(e.step.label).call(Fr.convertToTspans,r._gd),n}function wl(e,r){var n=e.selectAll("g."+ol.labelsClass).data([0]),i=r._dims;n.enter().append("g").classed(ol.labelsClass,!0);var a=n.selectAll("g."+ol.labelGroupClass).data(i.labelSteps);a.enter().append("g").classed(ol.labelGroupClass,!0),a.exit().remove(),a.each(function(e){var n=t.select(this);n.call(_l,e,r),hn.setTranslate(n,Ll(r,e.fraction),ol.tickOffset+r.ticklen+r.font.size*dl+ol.labelOffset+i.currentValueTotalHeight)})}function Ml(t,e,r,n,i){var a=Math.round(n*(r.steps.length-1));a!==r.active&&Al(t,e,r,a,!0,i)}function Al(t,e,r,n,i,a){var o=r.active;r._input.active=r.active=n;var s=r.steps[r.active];e.call(El,r,r.active/(r.steps.length-1),a),e.call(bl,r),t.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:i,previousActive:o}),s&&s.method&&i&&(e._nextMethod?(e._nextMethod.step=s,e._nextMethod.doCallback=i,e._nextMethod.doTransition=a):(e._nextMethod={step:s,doCallback:i,doTransition:a},e._nextMethodRaf=window.requestAnimationFrame(function(){var r=e._nextMethod.step;r.method&&(r.execute&&vi.executeAPICommand(t,r.method,r.args),e._nextMethod=null,e._nextMethodRaf=null)})))}function Tl(e,r,n){var i=n.node(),a=t.select(r);function o(){return n.data()[0]}e.on("mousedown",function(){var e=o();r.emit("plotly_sliderstart",{slider:e});var s=n.select("."+ol.gripRectClass);t.event.stopPropagation(),t.event.preventDefault(),s.call(Ne.fill,e.activebgcolor);var l=Cl(e,t.mouse(i)[0]);Ml(r,n,e,l,!0),e._dragging=!0,a.on("mousemove",function(){var e=o(),a=Cl(e,t.mouse(i)[0]);Ml(r,n,e,a,!1)}),a.on("mouseup",function(){var t=o();t._dragging=!1,s.call(Ne.fill,t.bgcolor),a.on("mouseup",null),a.on("mousemove",null),r.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function kl(e,r){var n=e.selectAll("rect."+ol.tickRectClass).data(r.steps),i=r._dims;n.enter().append("rect").classed(ol.tickRectClass,!0),n.exit().remove(),n.attr({width:r.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(e,n){var a=n%i.labelStride==0,o=t.select(this);o.attr({height:a?r.ticklen:r.minorticklen}).call(Ne.fill,r.tickcolor),hn.setTranslate(o,Ll(r,n/(r.steps.length-1))-.5*r.tickwidth,(a?ol.tickOffset:ol.minorTickOffset)+i.currentValueTotalHeight)})}function El(t,e,r,n){var i=t.select("rect."+ol.gripRectClass),a=Ll(e,r);if(!e._invokingCommand){var o=i;n&&e.transition.duration>0&&(o=o.transition().duration(e.transition.duration).ease(e.transition.easing)),o.attr("transform","translate("+(a-.5*ol.gripWidth)+","+e._dims.currentValueTotalHeight+")")}}function Ll(t,e){var r=t._dims;return r.inputAreaStart+ol.stepInset+(r.inputAreaLength-2*ol.stepInset)*Math.min(1,Math.max(0,e))}function Cl(t,e){var r=t._dims;return Math.min(1,Math.max(0,(e-ol.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*ol.stepInset-2*r.inputAreaStart)))}function Sl(t,e,r){var n=t.selectAll("rect."+ol.railTouchRectClass).data([0]),i=r._dims;n.enter().append("rect").classed(ol.railTouchRectClass,!0).call(Tl,e,t,r).style("pointer-events","all"),n.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,ol.tickOffset+r.ticklen+i.labelHeight)}).call(Ne.fill,r.bgcolor).attr("opacity",0),hn.setTranslate(n,0,i.currentValueTotalHeight)}function Pl(t,e){var r=t.selectAll("rect."+ol.railRectClass).data([0]),n=e._dims;r.enter().append("rect").classed(ol.railRectClass,!0);var i=n.inputAreaLength-2*ol.railInset;r.attr({width:i,height:ol.railWidth,rx:ol.railRadius,ry:ol.railRadius,"shape-rendering":"crispEdges"}).call(Ne.stroke,e.bordercolor).call(Ne.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),hn.setTranslate(r,ol.railInset,.5*(n.inputAreaWidth-ol.railWidth)+n.currentValueTotalHeight)}var Rl={moduleType:"component",name:ol.name,layoutAttributes:ul,supplyLayoutDefaults:function(t,e){no(t,e,{name:cl,handleItemDefaults:fl})},draw:function(e){var r=e._fullLayout,n=function(t,e){for(var r=t[ol.name],n=[],i=0;i<r.length;i++){var a=r[i];a.visible&&a.steps.length&&(a._gd=e,n.push(a))}return n}(r,e),i=r._infolayer.selectAll("g."+ol.containerClassName).data(n.length>0?[0]:[]);if(i.enter().append("g").classed(ol.containerClassName,!0).style("cursor","ew-resize"),i.exit().remove(),i.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];-1!==i.indexOf(ol.autoMarginIdRoot)&&vi.autoMargin(t,i)}}(e),0!==n.length){var a=i.selectAll("g."+ol.groupClassName).data(n,ml);a.enter().append("g").classed(ol.groupClassName,!0),a.exit().each(function(r){t.select(this).remove(),r._commandObserver.remove(),delete r._commandObserver,vi.autoMargin(e,ol.autoMarginIdRoot+r._index)});for(var o=0;o<n.length;o++){var s=n[o];yl(e,s)}a.each(function(r){if(!(r.steps.length<2)){var n=t.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var r=t.steps.length,n=0;n<r;n+=e.labelStride)e.labelSteps.push({fraction:n/(r-1),step:t.steps[n]})}(r),vi.manageCommandObserver(e,r,r.steps,function(t){var r=n.data()[0];r.active!==t.index&&(r._dragging||Al(e,n,r,t.index,!1,!0))}),function(t,e,r){r.active>=r.steps.length&&(r.active=0),e.call(bl,r).call(Pl,r).call(wl,r).call(kl,r).call(Sl,t,r).call(xl,t,r);var n=r._dims;hn.setTranslate(e,n.lx+r.pad.l,n.ly+r.pad.t),e.call(El,r,r.active/(r.steps.length-1),!1),e.call(bl,r)}(e,t.select(this),r)}})}}},Ol=m.extendFlat,Il=(0,gr.overrideAll)({_isLinkedToArray:"updatemenu",_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:{_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}},x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:Ol({},sl,{}),font:k({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:C.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}},"arraydraw","from-root"),Nl={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}},Dl=Nl.name,zl=Il.buttons;function Fl(t,e,r){function n(r,n){return re.coerce(t,e,Il,r,n)}n("visible",function(t,e){var r,n,i=t.buttons||[],a=e.buttons=[];function o(t,e){return re.coerce(r,n,zl,t,e)}for(var s=0;s<i.length;s++)r=i[s],n={},o("method"),re.isPlainObject(r)&&("skip"===n.method||Array.isArray(r.args))&&(o("args"),o("label"),o("execute"),n._index=s,a.push(n));return a}(t,e).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),re.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),re.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}var jl=Bl;function Bl(t,e,r){this.gd=t,this.container=e,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}Bl.barWidth=2,Bl.barLength=20,Bl.barRadius=2,Bl.barPad=1,Bl.barColor="#808BA4",Bl.prototype.enable=function(e,r,n){var i=this.gd._fullLayout,a=i.width,o=i.height;this.position=e;var s,l,u,c,h=this.position.l,f=this.position.w,d=this.position.t,p=this.position.h,g=this.position.direction,v="down"===g,m="left"===g,y="up"===g,b=f,x=p;v||m||"right"===g||y||(this.position.direction="down",v=!0),v||y?(l=(s=h)+b,v?(u=d,x=(c=Math.min(u+x,o))-u):x=(c=d+x)-(u=Math.max(c-x,0))):(c=(u=d)+x,m?b=(l=h+b)-(s=Math.max(l-b,0)):(s=h,b=(l=Math.min(s+b,a))-s)),this._box={l:s,t:u,w:b,h:x};var _=f>b,w=Bl.barLength+2*Bl.barPad,M=Bl.barWidth+2*Bl.barPad,A=h,T=d+p;T+M>o&&(T=o-M);var k=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);k.exit().on(".drag",null).remove(),k.enter().append("rect").classed("scrollbar-horizontal",!0).call(Ne.fill,Bl.barColor),_?(this.hbar=k.attr({rx:Bl.barRadius,ry:Bl.barRadius,x:A,y:T,width:w,height:M}),this._hbarXMin=A+w/2,this._hbarTranslateMax=b-w):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var E=p>x,L=Bl.barWidth+2*Bl.barPad,C=Bl.barLength+2*Bl.barPad,S=h+f,P=d;S+L>a&&(S=a-L);var R=this.container.selectAll("rect.scrollbar-vertical").data(E?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-vertical",!0).call(Ne.fill,Bl.barColor),E?(this.vbar=R.attr({rx:Bl.barRadius,ry:Bl.barRadius,x:S,y:P,width:L,height:C}),this._vbarYMin=P+C/2,this._vbarTranslateMax=x-C):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var O=this.id,I=s-.5,N=E?l+L+.5:l+.5,D=u-.5,z=_?c+M+.5:c+.5,F=i._topdefs.selectAll("#"+O).data(_||E?[0]:[]);if(F.exit().remove(),F.enter().append("clipPath").attr("id",O).append("rect"),_||E?(this._clipRect=F.select("rect").attr({x:Math.floor(I),y:Math.floor(D),width:Math.ceil(N)-Math.floor(I),height:Math.ceil(z)-Math.floor(D)}),this.container.call(hn.setClipUrl,O),this.bg.attr({x:h,y:d,width:f,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(hn.setClipUrl,null),delete this._clipRect),_||E){var j=t.behavior.drag().on("dragstart",function(){t.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(j);var B=t.behavior.drag().on("dragstart",function(){t.event.sourceEvent.preventDefault(),t.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(B),E&&this.vbar.on(".drag",null).call(B)}this.setTranslate(r,n)},Bl.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(hn.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},Bl.prototype._onBoxDrag=function(){var e=this.translateX,r=this.translateY;this.hbar&&(e-=t.event.dx),this.vbar&&(r-=t.event.dy),this.setTranslate(e,r)},Bl.prototype._onBoxWheel=function(){var e=this.translateX,r=this.translateY;this.hbar&&(e+=t.event.deltaY),this.vbar&&(r+=t.event.deltaY),this.setTranslate(e,r)},Bl.prototype._onBarDrag=function(){var e=this.translateX,r=this.translateY;if(this.hbar){var n=e+this._hbarXMin,i=n+this._hbarTranslateMax;e=(re.constrain(t.event.x,n,i)-n)/(i-n)*(this.position.w-this._box.w)}if(this.vbar){var a=r+this._vbarYMin,o=a+this._vbarTranslateMax;r=(re.constrain(t.event.y,a,o)-a)/(o-a)*(this.position.h-this._box.h)}this.setTranslate(e,r)},Bl.prototype.setTranslate=function(t,e){var r=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=re.constrain(t||0,0,r),e=re.constrain(e||0,0,n),this.translateX=t,this.translateY=e,this.container.call(hn.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var i=t/r;this.hbar.call(hn.setTranslate,t+i*this._hbarTranslateMax,e)}if(this.vbar){var a=e/n;this.vbar.call(hn.setTranslate,t,e+a*this._vbarTranslateMax)}};var Ul=Nr.LINE_SPACING;function Vl(t){return t._index}function Hl(t,e){return+t.attr(Nl.menuIndexAttrName)===e._index}function ql(t,e,r,n,i,a,o,s){e._input.active=e.active=o,"buttons"===e.type?Xl(t,n,null,null,e):"dropdown"===e.type&&(i.attr(Nl.menuIndexAttrName,"-1"),Gl(t,n,i,a,e),s||Xl(t,n,i,a,e))}function Gl(t,e,r,n,i){var a=e.selectAll("g."+Nl.headerClassName).data([0]),o=i._dims;a.enter().append("g").classed(Nl.headerClassName,!0).style("pointer-events","all");var s=i.active,l=i.buttons[s]||Nl.blankHeaderOpts,u={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},c={width:o.headerWidth,height:o.headerHeight};a.call(Wl,i,l,t).call(tu,i,u,c);var h=e.selectAll("text."+Nl.headerArrowClassName).data([0]);h.enter().append("text").classed(Nl.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(hn.font,i.font).text(Nl.arrowSymbol[i.direction]),h.attr({x:o.headerWidth-Nl.arrowOffsetX+i.pad.l,y:o.headerHeight/2+Nl.textOffsetY+i.pad.t}),a.on("click",function(){r.call(eu),r.attr(Nl.menuIndexAttrName,Hl(r,i)?-1:String(i._index)),Xl(t,e,r,n,i)}),a.on("mouseover",function(){a.call(Kl)}),a.on("mouseout",function(){a.call($l,i)}),hn.setTranslate(e,o.lx,o.ly)}function Xl(e,r,n,i,a){n||(n=r).attr("pointer-events","all");var o=function(t){return-1==+t.attr(Nl.menuIndexAttrName)}(n)&&"buttons"!==a.type?[]:a.buttons,s="dropdown"===a.type?Nl.dropdownButtonClassName:Nl.buttonClassName,l=n.selectAll("g."+s).data(o),u=l.enter().append("g").classed(s,!0),c=l.exit();"dropdown"===a.type?(u.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var h=0,f=0,d=a._dims,p=-1!==["up","down"].indexOf(a.direction);"dropdown"===a.type&&(p?f=d.headerHeight+Nl.gapButtonHeader:h=d.headerWidth+Nl.gapButtonHeader),"dropdown"===a.type&&"up"===a.direction&&(f=-Nl.gapButtonHeader+Nl.gapButton-d.openHeight),"dropdown"===a.type&&"left"===a.direction&&(h=-Nl.gapButtonHeader+Nl.gapButton-d.openWidth);var g={x:d.lx+h+a.pad.l,y:d.ly+f+a.pad.t,yPad:Nl.gapButton,xPad:Nl.gapButton,index:0},v={l:g.x+a.borderwidth,t:g.y+a.borderwidth};l.each(function(o,s){var u=t.select(this);u.call(Wl,a,o,e).call(tu,a,g),u.on("click",function(){t.event.defaultPrevented||(ql(e,a,0,r,n,i,s),o.execute&&vi.executeAPICommand(e,o.method,o.args),e.emit("plotly_buttonclicked",{menu:a,button:o,active:a.active}))}),u.on("mouseover",function(){u.call(Kl)}),u.on("mouseout",function(){u.call($l,a),l.call(Ql,a)})}),l.call(Ql,a),p?(v.w=Math.max(d.openWidth,d.headerWidth),v.h=g.y-v.t):(v.w=g.x-v.l,v.h=Math.max(d.openHeight,d.headerHeight)),v.direction=a.direction,i&&(l.size()?function(t,e,r,n,i,a){var o,s,l,u=i.direction,c="up"===u||"down"===u,h=i._dims,f=i.active;if(c)for(s=0,l=0;l<f;l++)s+=h.heights[l]+Nl.gapButton;else for(o=0,l=0;l<f;l++)o+=h.widths[l]+Nl.gapButton;n.enable(a,o,s),n.hbar&&n.hbar.attr("opacity","0").transition().attr("opacity","1");n.vbar&&n.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,i,a,v):function(t){var e=!!t.hbar,r=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",function(){e=!1,r||t.disable()});r&&t.vbar.transition().attr("opacity","0").each("end",function(){r=!1,e||t.disable()})}(i))}function Wl(t,e,r,n){t.call(Yl,e).call(Zl,e,r,n)}function Yl(t,e){var r=t.selectAll("rect").data([0]);r.enter().append("rect").classed(Nl.itemRectClassName,!0).attr({rx:Nl.rx,ry:Nl.ry,"shape-rendering":"crispEdges"}),r.call(Ne.stroke,e.bordercolor).call(Ne.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function Zl(t,e,r,n){var i=t.selectAll("text").data([0]);i.enter().append("text").classed(Nl.itemTextClassName,!0).classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1}),i.call(hn.font,e.font).text(r.label).call(Fr.convertToTspans,n)}function Ql(e,r){var n=r.active;e.each(function(e,i){var a=t.select(this);i===n&&r.showactive&&a.select("rect."+Nl.itemRectClassName).call(Ne.fill,Nl.activeColor)})}function Kl(t){t.select("rect."+Nl.itemRectClassName).call(Ne.fill,Nl.hoverColor)}function $l(t,e){t.select("rect."+Nl.itemRectClassName).call(Ne.fill,e.bgcolor)}function Jl(e,r){var n=r._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=hn.tester.selectAll("g."+Nl.dropdownButtonClassName).data(r.buttons);i.enter().append("g").classed(Nl.dropdownButtonClassName,!0);var a=-1!==["up","down"].indexOf(r.direction);i.each(function(i,o){var s=t.select(this);s.call(Wl,r,i,e);var l=s.select("."+Nl.itemTextClassName),u=l.node()&&hn.bBox(l.node()).width,c=Math.max(u+Nl.textPadX,Nl.minWidth),h=r.font.size*Ul,f=Fr.lineCount(l),d=Math.max(h*f,Nl.minHeight)+Nl.textOffsetY;d=Math.ceil(d),c=Math.ceil(c),n.widths[o]=c,n.heights[o]=d,n.height1=Math.max(n.height1,d),n.width1=Math.max(n.width1,c),a?(n.totalWidth=Math.max(n.totalWidth,c),n.openWidth=n.totalWidth,n.totalHeight+=d+Nl.gapButton,n.openHeight+=d+Nl.gapButton):(n.totalWidth+=c+Nl.gapButton,n.openWidth+=c+Nl.gapButton,n.totalHeight=Math.max(n.totalHeight,d),n.openHeight=n.totalHeight)}),a?n.totalHeight-=Nl.gapButton:n.totalWidth-=Nl.gapButton,n.headerWidth=n.width1+Nl.arrowPadX,n.headerHeight=n.height1,"dropdown"===r.type&&(a?(n.width1+=Nl.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=Nl.arrowPadX),i.remove();var o=n.totalWidth+r.pad.l+r.pad.r,s=n.totalHeight+r.pad.t+r.pad.b,l=e._fullLayout._size;n.lx=l.l+l.w*r.x,n.ly=l.t+l.h*(1-r.y);var u="left";jo.isRightAnchor(r)&&(n.lx-=o,u="right"),jo.isCenterAnchor(r)&&(n.lx-=o/2,u="center");var c="top";jo.isBottomAnchor(r)&&(n.ly-=s,c="bottom"),jo.isMiddleAnchor(r)&&(n.ly-=s/2,c="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),vi.autoMargin(e,Nl.autoMarginIdRoot+r._index,{x:r.x,y:r.y,l:o*({right:1,center:.5}[u]||0),r:o*({left:1,center:.5}[u]||0),b:s*({top:1,middle:.5}[c]||0),t:s*({bottom:1,middle:.5}[c]||0)})}function tu(t,e,r,n){n=n||{};var i=t.select("."+Nl.itemRectClassName),a=t.select("."+Nl.itemTextClassName),o=e.borderwidth,s=r.index,l=e._dims;hn.setTranslate(t,o+r.x,o+r.y);var u=-1!==["up","down"].indexOf(e.direction),c=n.height||(u?l.heights[s]:l.height1);i.attr({x:0,y:0,width:n.width||(u?l.width1:l.widths[s]),height:c});var h=e.font.size*Ul,f=(Fr.lineCount(a)-1)*h/2;Fr.positionText(a,Nl.textOffsetX,c/2-f+Nl.textOffsetY),u?r.y+=l.heights[s]+r.yPad:r.x+=l.widths[s]+r.xPad,r.index++}function eu(t){t.selectAll("g."+Nl.dropdownButtonClassName).remove()}var ru={moduleType:"component",name:Nl.name,layoutAttributes:Il,supplyLayoutDefaults:function(t,e){no(t,e,{name:Dl,handleItemDefaults:Fl})},draw:function(e){var r=e._fullLayout,n=function(t){for(var e=t[Nl.name],r=[],n=0;n<e.length;n++){var i=e[n];i.visible&&r.push(i)}return r}(r),i=r._menulayer.selectAll("g."+Nl.containerClassName).data(n.length>0?[0]:[]);if(i.enter().append("g").classed(Nl.containerClassName,!0).style("cursor","pointer"),i.exit().remove(),i.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];-1!==i.indexOf(Nl.autoMarginIdRoot)&&vi.autoMargin(t,i)}}(e),0!==n.length){var a=i.selectAll("g."+Nl.headerGroupClassName).data(n,Vl);a.enter().append("g").classed(Nl.headerGroupClassName,!0);var o=i.selectAll("g."+Nl.dropdownButtonGroupClassName).data([0]);o.enter().append("g").classed(Nl.dropdownButtonGroupClassName,!0).style("pointer-events","all");for(var s=0;s<n.length;s++){var l=n[s];Jl(e,l)}var u="updatemenus"+r._uid,c=new jl(e,o,u);a.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(eu).attr(Nl.menuIndexAttrName,"-1")),a.exit().each(function(r){t.select(this).remove(),o.call(eu).attr(Nl.menuIndexAttrName,"-1"),vi.autoMargin(e,Nl.autoMarginIdRoot+r._index)}),a.each(function(r){var n=t.select(this),i="dropdown"===r.type?o:null;vi.manageCommandObserver(e,r,r.buttons,function(t){ql(e,r,r.buttons[t.index],n,i,c,t.index,!0)}),"dropdown"===r.type?(Gl(e,n,o,c,r),Hl(o,r)&&Xl(e,n,o,c,r)):Xl(e,n,null,null,r)})}}},nu={};"undefined"!=typeof MathJax?(nu.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):nu.MathJax=!1;var iu={add:function(t,e,r,n,i){var a,o;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},o=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(o,t.undoQueue.queue.length-o,a),t.undoQueue.index+=1):a=t.undoQueue.queue[o-1],t.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(e),a.undo.args.unshift(r),a.redo.calls.push(n),a.redo.args.push(i)),t.undoQueue.queue.length>x.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)iu.plotDo(t,e.undo.calls[r],e.undo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)iu.plotDo(t,e.redo.calls[r],e.redo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};iu.plotDo=function(t,e,r){t.autoplay=!0,r=function(t,e){for(var r,n=[],i=0;i<e.length;i++)r=e[i],n[i]=r===t?r:"object"==typeof r?Array.isArray(r)?re.extendDeep([],r):re.extendDeepAll({},r):r;return n}(t,r),e.apply(null,r)};var au=iu,ou=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,l=i+i,u=r*o,c=n*o,h=n*s,f=i*o,d=i*s,p=i*l,g=a*o,v=a*s,m=a*l;return t[0]=1-h-p,t[1]=c+m,t[2]=f-v,t[3]=0,t[4]=c-m,t[5]=1-u-p,t[6]=d+g,t[7]=0,t[8]=f+v,t[9]=d-g,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var su={},lu=ci.cleanId,uu=ci.getFromTrace;function cu(t,e){var r=t[e],n=e.charAt(0);r&&"paper"!==r&&(t[e]=lu(r,n))}function hu(t){var e="middle",r="center";return-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?r="left":-1!==t.indexOf("right")&&(r="right"),e+" "+r}function fu(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}su.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&re.log("Clearing previous rejected promises from queue."),t._promises=[]},su.cleanLayout=function(t){var e,r;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var n=(vi.subplotsRegistry.cartesian||{}).attrRegex,i=(vi.subplotsRegistry.gl3d||{}).attrRegex,a=Object.keys(t);for(e=0;e<a.length;e++){var o=a[e];if(n&&n.test(o)){var s=t[o];s.anchor&&"free"!==s.anchor&&(s.anchor=lu(s.anchor)),s.overlaying&&(s.overlaying=lu(s.overlaying)),s.type||(s.isdate?s.type="date":s.islog?s.type="log":!1===s.isdate&&!1===s.islog&&(s.type="linear")),"withzero"!==s.autorange&&"tozero"!==s.autorange||(s.autorange=!0,s.rangemode="tozero"),delete s.islog,delete s.isdate,delete s.categories,fu(s,"domain")&&delete s.domain,void 0!==s.autotick&&(void 0===s.tickmode&&(s.tickmode=s.autotick?"auto":"linear"),delete s.autotick)}else if(i&&i.test(o)){var l=t[o],u=l.cameraposition;if(Array.isArray(u)&&4===u[0].length){var c=u[0],h=u[1],f=u[2],d=ou([],c),p=[];for(r=0;r<3;++r)p[r]=h[r]+f*d[2+4*r];l.camera={eye:{x:p[0],y:p[1],z:p[2]},center:{x:h[0],y:h[1],z:h[2]},up:{x:d[1],y:d[5],z:d[9]}},delete l.cameraposition}}}var g=Array.isArray(t.annotations)?t.annotations.length:0;for(e=0;e<g;e++){var v=t.annotations[e];re.isPlainObject(v)&&(v.ref&&("paper"===v.ref?(v.xref="paper",v.yref="paper"):"data"===v.ref&&(v.xref="x",v.yref="y"),delete v.ref),cu(v,"xref"),cu(v,"yref"))}var m=Array.isArray(t.shapes)?t.shapes.length:0;for(e=0;e<m;e++){var y=t.shapes[e];re.isPlainObject(y)&&(cu(y,"xref"),cu(y,"yref"))}var b=t.legend;return b&&(b.x>3?(b.x=1.02,b.xanchor="left"):b.x<-2&&(b.x=-.02,b.xanchor="right"),b.y>3?(b.y=1.02,b.yanchor="bottom"):b.y<-2&&(b.y=-.02,b.yanchor="top")),"rotate"===t.dragmode&&(t.dragmode="orbit"),Ne.clean(t),t},su.cleanData=function(t,e){for(var r=[],n=t.concat(Array.isArray(e)?e:[]).filter(function(t){return"uid"in t}).map(function(t){return t.uid}),i=0;i<t.length;i++){var a,o=t[i];if(!("uid"in o)||-1!==r.indexOf(o.uid)){var s;for(a=0;a<100&&(s=re.randstr(n),-1!==r.indexOf(s));a++);o.uid=re.randstr(n),n.push(o.uid)}if(r.push(o.uid),"histogramy"===o.type&&"xbins"in o&&!("ybins"in o)&&(o.ybins=o.xbins,delete o.xbins),o.error_y&&"opacity"in o.error_y){var l=Ne.defaults,u=o.error_y.color||(R.traceIs(o,"bar")?Ne.defaultLine:l[i%l.length]);o.error_y.color=Ne.addOpacity(Ne.rgb(u),Ne.opacity(u)*o.error_y.opacity),delete o.error_y.opacity}if("bardir"in o&&("h"!==o.bardir||!R.traceIs(o,"bar")&&"histogram"!==o.type.substr(0,9)||(o.orientation="h",su.swapXYData(o)),delete o.bardir),"histogramy"===o.type&&su.swapXYData(o),"histogramx"!==o.type&&"histogramy"!==o.type||(o.type="histogram"),"scl"in o&&(o.colorscale=o.scl,delete o.scl),"reversescl"in o&&(o.reversescale=o.reversescl,delete o.reversescl),o.xaxis&&(o.xaxis=lu(o.xaxis,"x")),o.yaxis&&(o.yaxis=lu(o.yaxis,"y")),R.traceIs(o,"gl3d")&&o.scene&&(o.scene=vi.subplotsRegistry.gl3d.cleanId(o.scene)),!R.traceIs(o,"pie")&&!R.traceIs(o,"bar"))if(Array.isArray(o.textposition))for(a=0;a<o.textposition.length;a++)o.textposition[a]=hu(o.textposition[a]);else o.textposition&&(o.textposition=hu(o.textposition));if(R.traceIs(o,"2dMap")&&("YIGnBu"===o.colorscale&&(o.colorscale="YlGnBu"),"YIOrRd"===o.colorscale&&(o.colorscale="YlOrRd")),R.traceIs(o,"markerColorscale")&&o.marker){var c=o.marker;"YIGnBu"===c.colorscale&&(c.colorscale="YlGnBu"),"YIOrRd"===c.colorscale&&(c.colorscale="YlOrRd")}if("surface"===o.type&&re.isPlainObject(o.contours)){var h=["x","y","z"];for(a=0;a<h.length;a++){var f=o.contours[h[a]];re.isPlainObject(f)&&(f.highlightColor&&(f.highlightcolor=f.highlightColor,delete f.highlightColor),f.highlightWidth&&(f.highlightwidth=f.highlightWidth,delete f.highlightWidth))}}if(Array.isArray(o.transforms)){var d=o.transforms;for(a=0;a<d.length;a++){var p=d[a];if(re.isPlainObject(p))switch(p.type){case"filter":p.filtersrc&&(p.target=p.filtersrc,delete p.filtersrc),p.calendar&&(p.valuecalendar||(p.valuecalendar=p.calendar),delete p.calendar);break;case"groupby":if(p.styles=p.styles||p.style,p.styles&&!Array.isArray(p.styles)){var g=p.styles,v=Object.keys(g);p.styles=[];for(var m=0;m<v.length;m++)p.styles.push({target:v[m],value:g[v[m]]})}}}}fu(o,"line")&&delete o.line,"marker"in o&&(fu(o.marker,"line")&&delete o.marker.line,fu(o,"marker")&&delete o.marker),Ne.clean(o)}},su.swapXYData=function(t){var e;if(re.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var r=t.error_y,n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);re.swapAttrs(t,["error_?.copy_ystyle"]),n&&re.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var i=t.hoverinfo.split("+");for(e=0;e<i.length;e++)"x"===i[e]?i[e]="y":"y"===i[e]&&(i[e]="x");t.hoverinfo=i.join("+")}},su.coerceTraceIndices=function(t,r){return e(r)?[r]:Array.isArray(r)&&r.length?r:t.data.map(function(t,e){return e})},su.manageArrayContainers=function(t,r,n){var i=t.obj,a=t.parts,o=a.length,s=a[o-1],l=e(s);if(l&&null===r){var u=a.slice(0,o-1).join(".");re.nestedProperty(i,u).get().splice(s,1)}else l&&void 0===t.get()?(void 0===t.get()&&(n[t.astr]=null),t.set(r)):t.set(r)};var du=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function pu(t){var e=t.search(du);if(e>0)return t.substr(0,e)}su.hasParent=function(t,e){for(var r=pu(e);r;){if(r in t)return!0;r=pu(r)}return!1};var gu=["x","y","z"];su.clearAxisTypes=function(t,e,r){for(var n=0;n<e.length;n++)for(var i=t._fullData[n],a=0;a<3;a++){var o=uu(t,i,gu[a]);if(o&&"log"!==o.type){var s=o._name,l=o._id.substr(1);if("scene"===l.substr(0,5)){if(void 0!==r[l])continue;s=l+"."+s}var u=s+".type";void 0===r[s]&&void 0===r[u]&&re.nestedProperty(t.layout,u).set(null)}}},su.clearAxisAutomargins=function(t){for(var e=Object.keys(t._fullLayout._pushmargin),r=0;r<e.length;r++)-1!==e[r].indexOf("automargin")&&delete t._fullLayout._pushmargin[e[r]]};var vu={},mu=Gt.sorterAsc;vu.containerArrayMatch=q;var yu=vu.isAddVal=function(t){return"add"===t||v(t)},bu=vu.isRemoveVal=function(t){return null===t||"remove"===t};vu.applyContainerArrayChanges=function(t,e,r,n){var i=e.astr,a=R.getComponentMethod(i,"supplyLayoutDefaults"),o=R.getComponentMethod(i,"draw"),s=R.getComponentMethod(i,"drawOne"),l=n.replot||n.recalc||a===A||o===A,u=t.layout,c=t._fullLayout;if(r[""]){Object.keys(r).length>1&&_.warn("Full array edits are incompatible with other edits",i);var h=r[""][""];if(bu(h))e.set(null);else{if(!Array.isArray(h))return _.warn("Unrecognized full array edit value",i,h),!0;e.set(h)}return!l&&(a(u,c),o(t),!0)}var f,d,p,g,v,m,y,b=Object.keys(r).map(Number).sort(mu),x=e.get(),w=x||[],M=X(c,i).get(),T=[],k=-1,E=w.length;for(f=0;f<b.length;f++)if(g=r[p=b[f]],v=Object.keys(g),m=g[""],y=yu(m),p<0||p>w.length-(y?0:1))_.warn("index out of range",i,p);else if(void 0!==m)v.length>1&&_.warn("Insertion & removal are incompatible with edits to the same index.",i,p),bu(m)?T.push(p):y?("add"===m&&(m={}),w.splice(p,0,m),M&&M.splice(p,0,{})):_.warn("Unrecognized full object edit value",i,p,m),-1===k&&(k=p);else for(d=0;d<v.length;d++)X(w[p],v[d]).set(g[v[d]]);for(f=T.length-1;f>=0;f--)w.splice(T[f],1),M&&M.splice(T[f],1);if(w.length?x||e.set(w):e.set(null),l)return!1;if(a(u,c),s!==A){var L;if(-1===k)L=b;else{for(E=Math.max(w.length,E),L=[],f=0;f<b.length&&!((p=b[f])>=k);f++)L.push(p);for(f=k;f<E;f++)L.push(f)}for(f=0;f<L.length;f++)s(t,L[f])}else o(t);return!0};var xu={},_u=re._,wu=xu={};function Mu(t,e){var r,n,i=e.currentTarget,a=i.getAttribute("data-attr"),o=i.getAttribute("data-val")||!0,s=t._fullLayout,l={},u=ci.list(t,null,!0),c="on";if("zoom"===a){var h,f="in"===o?.5:2,d=(1+f)/2,p=(1-f)/2;for(n=0;n<u.length;n++)if(!(r=u[n]).fixedrange)if(h=r._name,"auto"===o)l[h+".autorange"]=!0;else if("reset"===o){if(void 0===r._rangeInitial)l[h+".autorange"]=!0;else{var g=r._rangeInitial.slice();l[h+".range[0]"]=g[0],l[h+".range[1]"]=g[1]}void 0!==r._showSpikeInitial&&(l[h+".showspikes"]=r._showSpikeInitial,"on"!==c||r._showSpikeInitial||(c="off"))}else{var v=[r.r2l(r.range[0]),r.r2l(r.range[1])],m=[d*v[0]+p*v[1],d*v[1]+p*v[0]];l[h+".range[0]"]=r.l2r(m[0]),l[h+".range[1]"]=r.l2r(m[1])}s._cartesianSpikesEnabled=c}else{if("hovermode"!==a||"x"!==o&&"y"!==o){if("hovermode"===a&&"closest"===o){for(n=0;n<u.length;n++)r=u[n],"on"!==c||r.showspikes||(c="off");s._cartesianSpikesEnabled=c}}else o=s._isHoriz?"y":"x",i.setAttribute("data-val",o);l[a]=o}R.call("relayout",t,l)}function Au(t,e){for(var r=e.currentTarget,n=r.getAttribute("data-attr"),i=r.getAttribute("data-val")||!0,a=t._fullLayout._subplots.gl3d,o={},s=n.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=i;var u="pan"===i?i:"zoom";o.dragmode=u,R.call("relayout",t,o)}function Tu(t,e){for(var r=e.currentTarget.getAttribute("data-attr"),n=t._fullLayout,i=n._subplots.gl3d,a={},o=0;o<i.length;o++){var s=i[o],l=s+".camera",u=n[s]._scene;"resetDefault"===r?a[l]=null:"resetLastSave"===r&&(a[l]=re.extendDeep({},u.cameraInitial))}R.call("relayout",t,a)}function ku(t,e){var r=e.currentTarget,n=r._previousVal||!1,i=t.layout,a=t._fullLayout,o=a._subplots.gl3d,s=["xaxis","yaxis","zaxis"],l=["showspikes","spikesides","spikethickness","spikecolor"],u={},c={},h={};if(n)h=re.extendDeep(i,n),r._previousVal=null;else{h={"allaxes.showspikes":!1};for(var f=0;f<o.length;f++){var d=o[f],p=a[d],g=u[d]={};g.hovermode=p.hovermode,h[d+".hovermode"]=!1;for(var v=0;v<3;v++){var m=s[v];c=g[m]={};for(var y=0;y<l.length;y++){var b=l[y];c[b]=p[m][b]}}}r._previousVal=re.extendDeep({},u)}R.call("relayout",t,h)}function Eu(t,e){for(var r=e.currentTarget,n=r.getAttribute("data-attr"),i=r.getAttribute("data-val")||!0,a=t._fullLayout,o=a._subplots.geo,s=0;s<o.length;s++){var l=o[s],u=a[l];if("zoom"===n){var c=u.projection.scale,h="in"===i?2*c:.5*c;R.call("relayout",t,l+".projection.scale",h)}else"reset"===n&&Cu(t,"geo")}}function Lu(t){var e,r=t._fullLayout;e=r._has("cartesian")?r._isHoriz?"y":"x":"closest";var n=!t._fullLayout.hovermode&&e;R.call("relayout",t,"hovermode",n)}function Cu(t,e){for(var r=t._fullLayout,n=r._subplots[e],i={},a=0;a<n.length;a++)for(var o=n[a],s=r[o]._subplot.viewInitial,l=Object.keys(s),u=0;u<l.length;u++){var c=l[u];i[o+"."+c]=s[c]}R.call("relayout",t,i)}function Su(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}wu.toImage={name:"toImage",title:function(t){return _u(t,"Download plot as a png")},icon:me.camera,click:function(t){var e="png";re.notifier(_u(t,"Taking snapshot - this may take a few seconds"),"long"),re.isIE()&&(re.notifier(_u(t,"IE only supports svg.  Changing format to svg."),"long"),e="svg"),R.call("downloadImage",t,{format:e}).then(function(e){re.notifier(_u(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){re.notifier(_u(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},wu.sendDataToCloud={name:"sendDataToCloud",title:function(t){return _u(t,"Edit in Chart Studio")},icon:me.disk,click:function(t){vi.sendDataToCloud(t)}},wu.zoom2d={name:"zoom2d",title:function(t){return _u(t,"Zoom")},attr:"dragmode",val:"zoom",icon:me.zoombox,click:Mu},wu.pan2d={name:"pan2d",title:function(t){return _u(t,"Pan")},attr:"dragmode",val:"pan",icon:me.pan,click:Mu},wu.select2d={name:"select2d",title:function(t){return _u(t,"Box Select")},attr:"dragmode",val:"select",icon:me.selectbox,click:Mu},wu.lasso2d={name:"lasso2d",title:function(t){return _u(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:me.lasso,click:Mu},wu.zoomIn2d={name:"zoomIn2d",title:function(t){return _u(t,"Zoom in")},attr:"zoom",val:"in",icon:me.zoom_plus,click:Mu},wu.zoomOut2d={name:"zoomOut2d",title:function(t){return _u(t,"Zoom out")},attr:"zoom",val:"out",icon:me.zoom_minus,click:Mu},wu.autoScale2d={name:"autoScale2d",title:function(t){return _u(t,"Autoscale")},attr:"zoom",val:"auto",icon:me.autoscale,click:Mu},wu.resetScale2d={name:"resetScale2d",title:function(t){return _u(t,"Reset axes")},attr:"zoom",val:"reset",icon:me.home,click:Mu},wu.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return _u(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:me.tooltip_basic,gravity:"ne",click:Mu},wu.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return _u(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:me.tooltip_compare,gravity:"ne",click:Mu},wu.zoom3d={name:"zoom3d",title:function(t){return _u(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:me.zoombox,click:Au},wu.pan3d={name:"pan3d",title:function(t){return _u(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:me.pan,click:Au},wu.orbitRotation={name:"orbitRotation",title:function(t){return _u(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:me["3d_rotate"],click:Au},wu.tableRotation={name:"tableRotation",title:function(t){return _u(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:me["z-axis"],click:Au},wu.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return _u(t,"Reset camera to default")},attr:"resetDefault",icon:me.home,click:Tu},wu.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return _u(t,"Reset camera to last save")},attr:"resetLastSave",icon:me.movie,click:Tu},wu.hoverClosest3d={name:"hoverClosest3d",title:function(t){return _u(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:me.tooltip_basic,gravity:"ne",click:ku},wu.zoomInGeo={name:"zoomInGeo",title:function(t){return _u(t,"Zoom in")},attr:"zoom",val:"in",icon:me.zoom_plus,click:Eu},wu.zoomOutGeo={name:"zoomOutGeo",title:function(t){return _u(t,"Zoom out")},attr:"zoom",val:"out",icon:me.zoom_minus,click:Eu},wu.resetGeo={name:"resetGeo",title:function(t){return _u(t,"Reset")},attr:"reset",val:null,icon:me.autoscale,click:Eu},wu.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return _u(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:me.tooltip_basic,gravity:"ne",click:Lu},wu.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return _u(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:me.tooltip_basic,gravity:"ne",click:Lu},wu.hoverClosestPie={name:"hoverClosestPie",title:function(t){return _u(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:me.tooltip_basic,gravity:"ne",click:Lu},wu.toggleHover={name:"toggleHover",title:function(t){return _u(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:me.tooltip_basic,gravity:"ne",click:function(t,e){Lu(t),ku(t,e)}},wu.resetViews={name:"resetViews",title:function(t){return _u(t,"Reset views")},icon:me.home,click:function(t,e){var r=e.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),Mu(t,e),r.setAttribute("data-attr","resetLastSave"),Tu(t,e),Cu(t,"geo"),Cu(t,"mapbox")}},wu.toggleSpikelines={name:"toggleSpikelines",title:function(t){return _u(t,"Toggle Spike Lines")},icon:me.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout;e._cartesianSpikesEnabled="on"===e._cartesianSpikesEnabled?"off":"on";var r=function(t){for(var e,r,n=t._fullLayout,i=ci.list(t,null,!0),a={},o=0;o<i.length;o++)e=i[o],r=e._name,a[r+".showspikes"]="on"===n._cartesianSpikesEnabled||e._showSpikeInitial;return a}(t);R.call("relayout",t,r)}},wu.resetViewMapbox={name:"resetViewMapbox",title:function(t){return _u(t,"Reset view")},attr:"reset",icon:me.home,click:function(t){Cu(t,"mapbox")}};var Pu=Su.prototype;Pu.update=function(t,e){this.graphInfo=t;var r=this.graphInfo._context;"hover"===r.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var n=!this.hasButtons(e),i=this.hasLogo!==r.displaylogo;(n||i)&&(this.removeAllButtons(),this.updateButtons(e),r.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},Pu.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var r=e.createGroup();t.forEach(function(t){var n=t.name;if(!n)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(n))throw new Error("button name '"+n+"' is taken");e.buttonsNames.push(n);var i=e.createButton(t);e.buttonElements.push(i),r.appendChild(i)}),e.element.appendChild(r)})},Pu.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},Pu.createButton=function(e){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=e.title;void 0===i?i=e.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&n.setAttribute("data-title",i),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var a=e.val;if(void 0!==a&&("function"==typeof a&&(a=a(this.graphInfo)),n.setAttribute("data-val",a)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");return n.addEventListener("click",function(t){e.click(r.graphInfo,t),r.updateActiveButton(t.currentTarget)}),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&t.select(n).classed("active",!0),n.appendChild(this.createIcon(e.icon||me.question,e.name)),n.setAttribute("data-gravity",e.gravity||"n"),n},Pu.createIcon=function(t,e){var r=t.ascent-t.descent,n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg"),a=document.createElementNS(n,"path");i.setAttribute("height","1em"),i.setAttribute("width",t.width/r+"em"),i.setAttribute("viewBox",[0,0,t.width,r].join(" "));var o="toggleSpikelines"===e?"matrix(1.5 0 0 -1.5 0 "+t.ascent+")":"matrix(1 0 0 -1 0 "+t.ascent+")";return a.setAttribute("d",t.path),a.setAttribute("transform",o),i.appendChild(a),i},Pu.updateActiveButton=function(e){var r=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var i=e.getAttribute("data-val")||!0,a=e.getAttribute("data-attr"),o="true"===e.getAttribute("data-toggle"),s=t.select(e);if(o)a===n&&s.classed("active",!s.classed("active"));else{var l=null===a?a:re.nestedProperty(r,a).get();s.classed("active",l===i)}})},Pu.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;n++)if(t[r][n].name!==e[r][n].name)return!1}return!0},Pu.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plot.ly/",e.target="_blank",e.setAttribute("data-title",re._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(me.plotlylogo)),t.appendChild(e),t},Pu.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},Pu.destroy=function(){re.removeElement(this.container.querySelector(".modebar"))};var Ru=function(e,r){var n=e._fullLayout,i=new Su({graphInfo:e,container:n._paperdiv.node(),buttons:r});return n._privateplot&&t.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i};var Ou={};Ou.manage=function(t){var e=t._fullLayout,r=t._context,n=e._modeBar;if(r.displayModeBar){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,a=r.modeBarButtons;i=Array.isArray(a)&&a.length?function(t){for(var e=0;e<t.length;e++)for(var r=t[e],n=0;n<r.length;n++){var i=r[n];if("string"==typeof i){if(void 0===xu[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][n]=xu[i]}}return t}(a):function(t,e,r){var n=t._fullLayout,i=t._fullData,a=n._has("cartesian"),o=n._has("gl3d"),s=n._has("geo"),l=n._has("pie"),u=n._has("gl2d"),c=n._has("ternary"),h=n._has("mapbox"),f=n._has("polar"),d=function(t){for(var e=ci.list({_fullLayout:t},null,!0),r=0;r<e.length;r++)if(!e[r].fixedrange)return!1;return!0}(n),p=[];function g(t){if(t.length){for(var r=[],n=0;n<t.length;n++){var i=t[n];-1===e.indexOf(i)&&r.push(xu[i])}p.push(r)}}g(["toImage","sendDataToCloud"]);var v=[],m=[],y=[],b=[];return(a||u||l||c)+s+o+h+f>1?(m=["toggleHover"],y=["resetViews"]):s?(v=["zoomInGeo","zoomOutGeo"],m=["hoverClosestGeo"],y=["resetGeo"]):o?(m=["hoverClosest3d"],y=["resetCameraDefault3d","resetCameraLastSave3d"]):h?(m=["toggleHover"],y=["resetViewMapbox"]):m=u?["hoverClosestGl2d"]:l?["hoverClosestPie"]:["toggleHover"],a&&(m=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),!a&&!u||d||(v=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==y[0]&&(y=["resetScale2d"])),o?b=["zoom3d","pan3d","orbitRotation","tableRotation"]:(a||u)&&!d||c?b=["zoom2d","pan2d"]:h||s?b=["pan2d"]:f&&(b=["zoom2d"]),function(t){for(var e=!1,r=0;r<t.length&&!e;r++){var n=t[r];n._module&&n._module.selectPoints&&(R.traceIs(n,"scatter-like")?(cn.hasMarkers(n)||cn.hasText(n))&&(e=!0):R.traceIs(n,"box-violin")&&"all"!==n.boxpoints&&"all"!==n.points||(e=!0))}return e}(i)&&b.push("select2d","lasso2d"),g(b),g(v.concat(y)),g(m),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var r=0;r<e.length;r++)t.push(e[r]);else t.push(e);return t}(p,r)}(t,r.modeBarButtonsToRemove,r.modeBarButtonsToAdd),n?n.update(t,i):e._modeBar=Ru(t,i)}else n&&(n.destroy(),delete e._modeBar)};var Iu=Nr.FROM_BL,Nu=function(t,e,r){void 0===r&&(r=Iu[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],i=n[0]+(n[1]-n[0])*r;t.range=t._input.range=[t.l2r(i+(n[0]-i)*e),t.l2r(i+(n[1]-i)*e)]};var Du=function(){var t,e=0,r=!1;function n(e,r){return t.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return n("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return n("div_seg",{seg:t,pt:e}),n("chop",{seg:t,pt:e})},statusRemove:function(t){return n("pop_seg",{seg:t})},segmentUpdate:function(t){return n("seg_update",{seg:t})},segmentNew:function(t,e){return n("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return n("rem_seg",{seg:t})},tempStatus:function(t,e,r){return n("temp_status",{seg:t,above:e,below:r})},rewind:function(t){return n("rewind",{seg:t})},status:function(t,e,r){return n("status",{seg:t,above:e,below:r})},vert:function(e){return e===r?t:(r=e,n("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),n("log",{txt:t})},reset:function(){return n("reset")},selected:function(t){return n("selected",{segs:t})},chainStart:function(t){return n("chain_start",{seg:t})},chainRemoveHead:function(t,e){return n("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return n("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return n("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return n("chain_match",{index:t})},chainClose:function(t){return n("chain_close",{index:t})},chainAddHead:function(t,e){return n("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return n("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return n("chain_con",{index1:t,index2:e})},chainReverse:function(t){return n("chain_rev",{index:t})},chainJoin:function(t,e){return n("chain_join",{index1:t,index2:e})},done:function(){return n("done")}}};var zu={toPolygon:function(t,e){function r(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function r(e){var r=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[r]})}for(var n=r(e[0]),i=1;i<e.length;i++)n=t.selectDifference(t.combine(n,r(e[i])));return n}if("Polygon"===e.type)return t.polygon(r(e.coordinates));if("MultiPolygon"===e.type){for(var n=t.segments({inverted:!1,regions:[]}),i=0;i<e.coordinates.length;i++)n=t.selectUnion(t.combine(n,r(e.coordinates[i])));return t.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,r){function n(t,r){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],r)}function i(t){return{region:t,children:[]}}r=t.polygon(t.segments(r));var a=i(null);function o(t,e){for(var r=0;r<t.children.length;r++){if(n(e,(s=t.children[r]).region))return void o(s,e)}var a=i(e);for(r=0;r<t.children.length;r++){var s;n((s=t.children[r]).region,e)&&(a.children.push(s),t.children.splice(r,1),r--)}t.children.push(a)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];l.length<3||o(a,l)}function u(t,e){for(var r=0,n=t[t.length-1][0],i=t[t.length-1][1],a=[],o=0;o<t.length;o++){var s=t[o][0],l=t[o][1];a.push([s,l]),r+=l*n-s*i,n=s,i=l}return r<0!==e&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var c=[];function h(t){var e=[u(t.region,!1)];c.push(e);for(var r=0;r<t.children.length;r++)e.push(f(t.children[r]))}function f(t){for(var e=0;e<t.children.length;e++)h(t.children[e]);return u(t.region,!0)}for(s=0;s<a.children.length;s++)h(a.children[s]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}},Fu={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,r){for(var n=t.root,i=t.root.next;null!==i;){if(r(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);n=i,i=i.next}n.next=e,e.prev=n,e.next=null},findTransition:function(e){for(var r=t.root,n=t.root.next;null!==n&&!e(n);)r=n,n=n.next;return{before:r===t.root?null:r,after:n,insert:function(t){return t.prev=r,t.next=n,r.next=t,null!==n&&(n.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}};var ju=function(t,e,r){function n(t,e,n){return{id:r?r.segmentId():-1,start:t,end:e,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var i=Fu.create();function a(t,r){i.insertBefore(t,function(n){return function(t,r,n,i,a,o){var s=e.pointsCompare(r,a);return 0!==s?s:e.pointsSame(n,o)?0:t!==i?t?1:-1:e.pointAboveOrOnLine(n,i?a:o,i?o:a)?1:-1}(t.isStart,t.pt,r,n.isStart,n.pt,n.other.pt)<0})}function o(t,e){var r=function(t,e){var r=Fu.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return a(r,t.end),r}(t,e);return function(t,e,r){var n=Fu.node({isStart:!1,pt:e.end,seg:e,primary:r,other:t,status:null});t.other=n,a(n,t.pt)}(r,t,e),r}function s(t,e){var i=n(e,t.seg.end,t.seg);return function(t,e){r&&r.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,a(t.other,t.pt)}(t,e),o(i,t.primary)}function l(n,a){var o=Fu.create();function l(t){return o.findTransition(function(r){var n,i,a,o,s,l;return n=t,i=r.ev,a=n.seg.start,o=n.seg.end,s=i.seg.start,l=i.seg.end,(e.pointsCollinear(a,s,l)?e.pointsCollinear(o,s,l)?1:e.pointAboveOrOnLine(o,s,l)?1:-1:e.pointAboveOrOnLine(a,s,l)?1:-1)>0})}function u(t,n){var i=t.seg,a=n.seg,o=i.start,l=i.end,u=a.start,c=a.end;r&&r.checkIntersection(i,a);var h=e.linesIntersect(o,l,u,c);if(!1===h){if(!e.pointsCollinear(o,l,u))return!1;if(e.pointsSame(o,c)||e.pointsSame(l,u))return!1;var f=e.pointsSame(o,u),d=e.pointsSame(l,c);if(f&&d)return n;var p=!f&&e.pointBetween(o,u,c),g=!d&&e.pointBetween(l,u,c);if(f)return g?s(n,l):s(t,c),n;p&&(d||(g?s(n,l):s(t,c)),s(n,o))}else 0===h.alongA&&(-1===h.alongB?s(t,u):0===h.alongB?s(t,h.pt):1===h.alongB&&s(t,c)),0===h.alongB&&(-1===h.alongA?s(n,o):0===h.alongA?s(n,h.pt):1===h.alongA&&s(n,l));return!1}for(var c=[];!i.isEmpty();){var h=i.getHead();if(r&&r.vert(h.pt[0]),h.isStart){r&&r.segmentNew(h.seg,h.primary);var f=l(h),d=f.before?f.before.ev:null,p=f.after?f.after.ev:null;function g(){if(d){var t=u(h,d);if(t)return t}return!!p&&u(h,p)}r&&r.tempStatus(h.seg,!!d&&d.seg,!!p&&p.seg);var v,m,y=g();if(y)t?(m=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above):y.seg.otherFill=h.seg.myFill,r&&r.segmentUpdate(y.seg),h.other.remove(),h.remove();if(i.getHead()!==h){r&&r.rewind(h.seg);continue}t?(m=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below,h.seg.myFill.below=p?p.seg.myFill.above:n,h.seg.myFill.above=m?!h.seg.myFill.below:h.seg.myFill.below):null===h.seg.otherFill&&(v=p?h.primary===p.primary?p.seg.otherFill.above:p.seg.myFill.above:h.primary?a:n,h.seg.otherFill={above:v,below:v}),r&&r.status(h.seg,!!d&&d.seg,!!p&&p.seg),h.other.status=f.insert(Fu.node({ev:h}))}else{var b=h.status;if(null===b)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(b.prev)&&o.exists(b.next)&&u(b.prev.ev,b.next.ev),r&&r.statusRemove(b.ev.seg),b.remove(),!h.primary){var x=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=x}c.push(h.seg)}i.getHead().remove()}return r&&r.done(),c}return t?{addRegion:function(t){for(var n,i,a,s=t[t.length-1],l=0;l<t.length;l++){n=s,s=t[l];var u=e.pointsCompare(n,s);0!==u&&o((i=u<0?n:s,a=u<0?s:n,{id:r?r.segmentId():-1,start:i,end:a,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return l(t,!1)}}:{calculate:function(t,e,r,i){return t.forEach(function(t){o(n(t.start,t.end,t),!0)}),r.forEach(function(t){o(n(t.start,t.end,t),!1)}),l(e,i)}}};var Bu=function(t,e,r){var n=[],i=[];return t.forEach(function(t){var a=t.start,o=t.end;if(e.pointsSame(a,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{r&&r.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},u=s,c=0;c<n.length;c++){var h=(v=n[c])[0],f=(v[1],v[v.length-1]);if(v[v.length-2],e.pointsSame(h,a)){if(A(c,!0,!0))break}else if(e.pointsSame(h,o)){if(A(c,!0,!1))break}else if(e.pointsSame(f,a)){if(A(c,!1,!0))break}else if(e.pointsSame(f,o)&&A(c,!1,!1))break}if(u===s)return n.push([a,o]),void(r&&r.chainNew(a,o));if(u===l){r&&r.chainMatch(s.index);var d=s.index,p=s.matches_pt1?o:a,g=s.matches_head,v=n[d],m=g?v[0]:v[v.length-1],y=g?v[1]:v[v.length-2],b=g?v[v.length-1]:v[0],x=g?v[v.length-2]:v[1];return e.pointsCollinear(y,m,p)&&(g?(r&&r.chainRemoveHead(s.index,p),v.shift()):(r&&r.chainRemoveTail(s.index,p),v.pop()),m=y),e.pointsSame(b,p)?(n.splice(d,1),e.pointsCollinear(x,b,m)&&(g?(r&&r.chainRemoveTail(s.index,m),v.pop()):(r&&r.chainRemoveHead(s.index,m),v.shift())),r&&r.chainClose(s.index),void i.push(v)):void(g?(r&&r.chainAddHead(s.index,p),v.unshift(p)):(r&&r.chainAddTail(s.index,p),v.push(p)))}var _=s.index,w=l.index;r&&r.chainConnect(_,w);var M=n[_].length<n[w].length;s.matches_head?l.matches_head?M?(T(_),k(_,w)):(T(w),k(w,_)):k(w,_):l.matches_head?k(_,w):M?(T(_),k(w,_)):(T(w),k(_,w))}function A(t,e,r){return u.index=t,u.matches_head=e,u.matches_pt1=r,u===s?(u=l,!1):(u=null,!0)}function T(t){r&&r.chainReverse(t),n[t].reverse()}function k(t,i){var a=n[t],o=n[i],s=a[a.length-1],l=a[a.length-2],u=o[0],c=o[1];e.pointsCollinear(l,s,u)&&(r&&r.chainRemoveTail(t,s),a.pop(),s=l),e.pointsCollinear(s,u,c)&&(r&&r.chainRemoveHead(i,u),o.shift()),r&&r.chainJoin(t,i),n[t]=a.concat(o),n.splice(i,1)}}),i};function Uu(t,e,r){var n=[];return t.forEach(function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[i]&&n.push({id:r?r.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[i],below:2===e[i]},otherFill:null})}),r&&r.selected(n),n}var Vu,Hu={union:function(t,e){return Uu(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return Uu(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return Uu(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return Uu(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return Uu(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}},qu=!1,Gu=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,r,n){var i=r[0],a=r[1],o=n[0],s=n[1],l=e[0];return(o-i)*(e[1]-a)-(s-a)*(l-i)>=-t},pointBetween:function(e,r,n){var i=e[1]-r[1],a=n[0]-r[0],o=e[0]-r[0],s=n[1]-r[1],l=o*a+i*s;return!(l<t||l-(a*a+s*s)>-t)},pointsSameX:function(e,r){return Math.abs(e[0]-r[0])<t},pointsSameY:function(e,r){return Math.abs(e[1]-r[1])<t},pointsSame:function(t,r){return e.pointsSameX(t,r)&&e.pointsSameY(t,r)},pointsCompare:function(t,r){return e.pointsSameX(t,r)?e.pointsSameY(t,r)?0:t[1]<r[1]?-1:1:t[0]<r[0]?-1:1},pointsCollinear:function(e,r,n){var i=e[0]-r[0],a=e[1]-r[1],o=r[0]-n[0],s=r[1]-n[1];return Math.abs(i*s-o*a)<t},linesIntersect:function(e,r,n,i){var a=r[0]-e[0],o=r[1]-e[1],s=i[0]-n[0],l=i[1]-n[1],u=a*l-o*s;if(Math.abs(u)<t)return!1;var c=e[0]-n[0],h=e[1]-n[1],f=(s*h-l*c)/u,d=(a*h-o*c)/u,p={alongA:0,alongB:0,pt:[e[0]+f*a,e[1]+f*o]};return p.alongA=f<=-t?-2:f<t?-1:f-1<=-t?0:f-1<t?1:2,p.alongB=d<=-t?-2:d<t?-1:d-1<=-t?0:d-1<t?1:2,p},pointInsideRegion:function(e,r){for(var n=e[0],i=e[1],a=r[r.length-1][0],o=r[r.length-1][1],s=!1,l=0;l<r.length;l++){var u=r[l][0],c=r[l][1];c-i>t!=o-i>t&&(a-u)*(i-c)/(o-c)+u-n>t&&(s=!s),a=u,o=c}return s}};return e}();function Xu(t,e,r){var n=Vu.segments(t),i=Vu.segments(e),a=r(Vu.combine(n,i));return Vu.polygon(a)}Vu={buildLog:function(t){return!0===t?qu=Du():!1===t&&(qu=!1),!1!==qu&&qu.list},epsilon:function(t){return Gu.epsilon(t)},segments:function(t){var e=ju(!0,Gu,qu);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:ju(!1,Gu,qu).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:Hu.union(t.combined,qu),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:Hu.intersect(t.combined,qu),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:Hu.difference(t.combined,qu),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:Hu.differenceRev(t.combined,qu),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:Hu.xor(t.combined,qu),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:Bu(t.segments,Gu,qu),inverted:t.inverted}},polygonFromGeoJSON:function(t){return zu.toPolygon(Vu,t)},polygonToGeoJSON:function(t){return zu.fromPolygon(Vu,Gu,t)},union:function(t,e){return Xu(t,e,Vu.selectUnion)},intersect:function(t,e){return Xu(t,e,Vu.selectIntersect)},difference:function(t,e){return Xu(t,e,Vu.selectDifference)},differenceRev:function(t,e){return Xu(t,e,Vu.selectDifferenceRev)},xor:function(t,e){return Xu(t,e,Vu.selectXor)}},"object"==typeof window&&(window.PolyBool=Vu);var Wu,Yu=Vu,Zu=Bt.dot,Qu=r.BADNUM,Ku=Wu={};Ku.tester=function(t){if(Array.isArray(t[0][0]))return Ku.multitester(t);var e,r=t.slice(),n=r[0][0],i=n,a=r[0][1],o=a;for(r.push(r[0]),e=1;e<r.length;e++)n=Math.min(n,r[e][0]),i=Math.max(i,r[e][0]),a=Math.min(a,r[e][1]),o=Math.max(o,r[e][1]);var s,l=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(l=!0,s=function(t){return t[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(l=!0,s=function(t){return t[1]===r[0][1]}));var u=!0,c=r[0];for(e=1;e<r.length;e++)if(c[0]!==r[e][0]||c[1]!==r[e][1]){u=!1;break}return{xmin:n,xmax:i,ymin:a,ymax:o,pts:r,contains:l?function(t,e){var r=t[0],l=t[1];return!(r===Qu||r<n||r>i||l===Qu||l<a||l>o||e&&s(t))}:function(t,e){var s=t[0],l=t[1];if(s===Qu||s<n||s>i||l===Qu||l<a||l>o)return!1;var u,c,h,f,d,p=r.length,g=r[0][0],v=r[0][1],m=0;for(u=1;u<p;u++)if(c=g,h=v,g=r[u][0],v=r[u][1],!(s<(f=Math.min(c,g))||s>Math.max(c,g)||l>Math.max(h,v)))if(l<Math.min(h,v))s!==f&&m++;else{if(l===(d=g===c?l:h+(s-c)*(v-h)/(g-c)))return 1!==u||!e;l<=d&&s!==f&&m++}return m%2==1},isRect:l,degenerate:u}},Ku.multitester=function(t){for(var e=[],r=t[0][0][0],n=r,i=t[0][0][1],a=i,o=0;o<t.length;o++){var s=Ku.tester(t[o]);s.subtract=t[o].subtract,e.push(s),r=Math.min(r,s.xmin),n=Math.max(n,s.xmax),i=Math.min(i,s.ymin),a=Math.max(a,s.ymax)}return{xmin:r,xmax:n,ymin:i,ymax:a,pts:[],contains:function(t,r){for(var n=!1,i=0;i<e.length;i++)e[i].contains(t,r)&&(n=!1===e[i].subtract);return n},isRect:!1,degenerate:!1}};var $u=Ku.isSegmentBent=function(t,e,r,n){var i,a,o,s=t[e],l=[t[r][0]-s[0],t[r][1]-s[1]],u=Zu(l,l),c=Math.sqrt(u),h=[-l[1]/c,l[0]/c];for(i=e+1;i<r;i++)if(a=[t[i][0]-s[0],t[i][1]-s[1]],(o=Zu(a,l))<0||o>u||Math.abs(Zu(a,h))>n)return!0;return!1};Ku.filter=function(t,e){var r=[t[0]],n=0,i=0;function a(a){t.push(a);var o=r.length,s=n;r.splice(i+1);for(var l=s+1;l<t.length;l++)(l===t.length-1||$u(t,s,l+1,e))&&(r.push(t[l]),r.length<o-2&&(n=l,i=r.length-1),s=l)}t.length>1&&a(t.pop());return{addPt:a,raw:t,filtered:r}};var Ju=Pn.makeEventData,tc=Wu.filter,ec=Wu.tester,rc=Wu.multitester,nc=Oe.MINSELECT;function ic(t){return t._id}var ac=function(t,e,r,n,i){var a,o,s,l,u=n.gd,c=u._fullLayout,h=c._zoomlayer,f=n.element.getBoundingClientRect(),d=n.plotinfo,p=d.xaxis._offset,g=d.yaxis._offset,v=e-f.left,m=r-f.top,y=v,b=m,x="M"+v+","+m,_=n.xaxes[0]._length,w=n.yaxes[0]._length,M=n.xaxes.map(ic),A=n.yaxes.map(ic),T=n.xaxes.concat(n.yaxes),k=t.altKey;(t.shiftKey||t.altKey)&&d.selection&&d.selection.polygons&&!n.polygons?(n.polygons=d.selection.polygons,n.mergedPolygons=d.selection.mergedPolygons):(!t.shiftKey&&!t.altKey||(t.shiftKey||t.altKey)&&!d.selection)&&(d.selection={},d.selection.polygons=n.polygons=[],d.selection.mergedPolygons=n.mergedPolygons=[]),"lasso"===i&&(a=tc([[v,m]],Oe.BENDPX));var E=h.selectAll("path.select-outline-"+d.id).data([1,2]);E.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+d.id}).attr("transform","translate("+p+", "+g+")").attr("d",x+"Z");var L,C,S,P,R,O,I=h.append("path").attr("class","zoombox-corners").style({fill:Ne.background,stroke:Ne.defaultLine,"stroke-width":1}).attr("transform","translate("+p+", "+g+")").attr("d","M0,0Z"),N=[],D=c._uid+Oe.SELECTID,z=[];for(L=0;L<u.calcdata.length;L++)if(!0===(S=(C=u.calcdata[L])[0].trace).visible&&S._module&&S._module.selectPoints)if(n.subplot)S.subplot!==n.subplot&&S.geo!==n.subplot||N.push({selectPoints:S._module.selectPoints,style:S._module.style,cd:C,xaxis:n.xaxes[0],yaxis:n.yaxes[0]});else{if(-1===M.indexOf(S.xaxis))continue;if(-1===A.indexOf(S.yaxis))continue;N.push({selectPoints:S._module.selectPoints,style:S._module.style,cd:C,xaxis:Ki.getFromId(u,S.xaxis),yaxis:Ki.getFromId(u,S.yaxis)})}function F(t){var e="y"===t._id.charAt(0)?1:0;return function(r){return t.p2d(r[e])}}function j(t,e){return t-e}O=d.fillRangeItems?d.fillRangeItems:"select"===i?function(t,e){var r=t.range={};for(L=0;L<T.length;L++){var n=T[L],i=n._id.charAt(0);r[n._id]=[n.p2d(e[i+"min"]),n.p2d(e[i+"max"])].sort(j)}}:function(t,e,r){var n=t.lassoPoints={};for(L=0;L<T.length;L++){var i=T[L];n[i._id]=r.filtered.map(F(i))}},n.moveFn=function(t,e){y=Math.max(0,Math.min(_,t+v)),b=Math.max(0,Math.min(w,e+m));var r=Math.abs(y-v),c=Math.abs(b-m);"select"===i?c<Math.min(.6*r,nc)?((l=[[v,0],[v,w],[y,w],[y,0]]).xmin=Math.min(v,y),l.xmax=Math.max(v,y),l.ymin=Math.min(0,w),l.ymax=Math.max(0,w),I.attr("d","M"+l.xmin+","+(m-nc)+"h-4v"+2*nc+"h4ZM"+(l.xmax-1)+","+(m-nc)+"h4v"+2*nc+"h-4Z")):r<Math.min(.6*c,nc)?((l=[[0,m],[0,b],[_,b],[_,m]]).xmin=Math.min(0,_),l.xmax=Math.max(0,_),l.ymin=Math.min(m,b),l.ymax=Math.max(m,b),I.attr("d","M"+(v-nc)+","+l.ymin+"v-4h"+2*nc+"v4ZM"+(v-nc)+","+(l.ymax-1)+"v4h"+2*nc+"v-4Z")):((l=[[v,m],[v,b],[y,b],[y,m]]).xmin=Math.min(v,y),l.xmax=Math.max(v,y),l.ymin=Math.min(m,b),l.ymax=Math.max(m,b),I.attr("d","M0,0Z")):"lasso"===i&&(a.addPt([y,b]),l=a.filtered),n.polygons&&n.polygons.length?(s=function(t,e,r){if(r)return Yu.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions;return Yu.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(n.mergedPolygons,l,k),l.subtract=k,o=rc(n.polygons.concat([l]))):(s=[l],o=ec(l));var h=[];for(L=0;L<s.length;L++){var f=s[L];h.push(f.join("L")+"L"+f[0])}E.attr("d","M"+h.join("M")+"Z"),$t.throttle(D,Oe.SELECTDELAY,function(){z=[];var t,e,r=[];for(L=0;L<N.length;L++)if(e=(P=N[L]).selectPoints(P,o),r.push(e),t=sc(e,P),z.length)for(var i=0;i<t.length;i++)z.push(t[i]);else z=t;oc(u,N,R={points:z}),O(R,l,a),n.gd.emit("plotly_selecting",R)})},n.clickFn=function(t,e){I.remove(),$t.done(D).then(function(){if($t.clear(D),2===t){for(E.remove(),L=0;L<N.length;L++)(P=N[L]).selectPoints(P,!1);oc(u,N),u.emit("plotly_deselect",null)}else u.emit("plotly_selected",void 0);Xa.click(u,e)})},n.doneFn=function(){I.remove(),$t.done(D).then(function(){$t.clear(D),n.gd.emit("plotly_selected",R),l&&n.polygons&&(l.subtract=k,n.polygons.push(l),n.mergedPolygons.length=0,[].push.apply(n.mergedPolygons,s))})}};function oc(t,e,r){var n,i,a;if(r){var o=r.points||[];for(n=0;n<e.length;n++)(a=e[n].cd[0].trace).selectedpoints=[],a._input.selectedpoints=[];for(n=0;n<o.length;n++){var s=o[n],l=s.data,u=s.fullData;s.pointIndices?([].push.apply(l.selectedpoints,s.pointIndices),[].push.apply(u.selectedpoints,s.pointIndices)):(l.selectedpoints.push(s.pointIndex),u.selectedpoints.push(s.pointIndex))}}else for(n=0;n<e.length;n++)delete(a=e[n].cd[0].trace).selectedpoints,delete a._input.selectedpoints,e[n].cd[0].t&&e[n].cd[0].t.scene&&e[n].cd[0].t.scene.clearSelect();for(n=0;n<e.length;n++)(i=e[n]).style&&i.style(t,i.cd)}function sc(t,e){if(Array.isArray(t))for(var r=e.cd,n=e.cd[0].trace,i=0;i<t.length;i++)t[i]=Ju(t[i],n,r);return t}var lc=Nr.FROM_TL,uc=Ki.doTicks,cc=ci.getFromId,hc=Oe.MINDRAG,fc=Oe.MINZOOM,dc=!0;function pc(t,e,r,n){var i=t.draglayer.selectAll("."+r).data([0]);return i.enter().append(e).classed("drag",!0).classed(r,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id),i.call(Nn,n),i.node()}function gc(e,r,n,i,a,o,s){var l=pc(e,"rect",r,n);return t.select(l).call(hn.setRect,i,a,o,s),l}function vc(t,e){for(var r=0;r<t.length;r++)if(!t[r].fixedrange)return e;return""}function mc(t,e,r,n,i){var a,o,s,l;for(a=0;a<t.length;a++)(o=t[a]).fixedrange||(s=o._rl[0],l=o._rl[1]-s,o.range=[o.l2r(s+l*e),o.l2r(s+l*r)],n[o._name+".range[0]"]=o.range[0],n[o._name+".range[1]"]=o.range[1]);if(i&&i.length){var u=(e+(1-r))/2;mc(i,u,1-u,n)}}function yc(t,e){for(var r=0;r<t.length;r++){var n=t[r];n.fixedrange||(n.range=[n.l2r(n._rl[0]-e/n._m),n.l2r(n._rl[1]-e/n._m)])}}function bc(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function xc(t,e,r,n,i){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+r+", "+n+")").attr("d",i+"Z")}function _c(t,e,r){return t.append("path").attr("class","zoombox-corners").style({fill:Ne.background,stroke:Ne.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+e+", "+r+")").attr("d","M0,0Z")}function wc(t){t.selectAll(".select-outline").remove()}function Mc(t,e,r,n,i,a){t.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),Ac(t,e,i,a)}function Ac(t,e,r,n){r||(t.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function Tc(e){t.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function kc(t){dc&&t.data&&t._context.showTips&&(re.notifier(re._(t,"Double-click to zoom back out"),"long"),dc=!1)}function Ec(t){return"lasso"===t||"select"===t}function Lc(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,fc)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function Cc(t,e){if(Ve){var r=void 0!==t.onwheel?"wheel":"mousewheel";t._onwheel&&t.removeEventListener(r,t._onwheel),t._onwheel=e,t.addEventListener(r,e,{passive:!1})}else void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel&&(t.onmousewheel=e)}var Sc=function(e,r,n,i,a,o,l,u){var c,h,f,d,p,g,v,m,y,b,x,_,w,M=e._fullLayout,A=e._fullLayout._zoomlayer,T=l+u==="nsew",k=1===(l+u).length;function E(){h=[r.xaxis],f=[r.yaxis];var t=h[0],n=f[0];g=t._length,v=n._length;var i,a,o=M._axisConstraintGroups,s=[t._id],A=[n._id];c=[r].concat(l&&u?r.overlays:[]);for(var T=1;T<c.length;T++){var k=c[T].xaxis,E=c[T].yaxis;-1===h.indexOf(k)&&(h.push(k),s.push(k._id)),-1===f.indexOf(E)&&(f.push(E),A.push(E._id))}m=vc(h,u),y=vc(f,l),i=y+m,a=M.dragmode,b=i?"nsew"===i?"pan"===a?"move":"crosshair":i.toLowerCase()+"-resize":"pointer",d=t._offset,p=n._offset;var L=function(t,e,r){var n,i,a,o,s,l,u=!1,c={},h={};for(n=0;n<t.length;n++){for(o=t[n],i=0;i<e.length;i++)if(o[e[i]]){for(s in o)-1===("x"===s.charAt(0)?e:r).indexOf(s)&&(c[s]=1);for(a=0;a<r.length;a++)o[r[a]]&&(u=!0)}for(i=0;i<r.length;i++)if(o[r[i]])for(l in o)-1===("x"===l.charAt(0)?e:r).indexOf(l)&&(h[l]=1)}return u&&(re.extendFlat(c,h),h={}),{x:c,y:h,xy:u}}(o,s,A);for(var C in x=L.xy,_=[],L.x)_.push(cc(e,C));for(var S in w=[],L.y)w.push(cc(e,S))}E();var L=gc(r,l+u+"drag",b,n,i,a,o),C=!y&&!m;if(C&&!T)return L.onmousedown=null,L.style.pointerEvents="none",L;var S,P,O,I,N,D,z,F,j,B={element:L,gd:e,plotinfo:r,prepFn:function(t,r,n){var i=e._fullLayout.dragmode;C||(T?t.shiftKey?"pan"===i?i="zoom":Ec(i)||(i="pan"):t.ctrlKey&&(i="pan"):i="pan"),B.minDrag="lasso"===i?1:void 0,Ec(i)?(B.xaxes=h,B.yaxes=f,ac(t,r,n,B,i)):C?wc(A):"zoom"===i?(B.moveFn=V,B.doneFn=H,B.minDrag=1,function(t,r,n){var i=L.getBoundingClientRect();S=r-i.left,P=n-i.top,O={l:S,r:S,w:0,t:P,b:P,h:0},I=e._hmpixcount?e._hmlumcount/e._hmpixcount:s(e._fullLayout.plot_bgcolor).getLuminance(),D=!1,z="xy",F=xc(A,I,d,p,N="M0,0H"+g+"V"+v+"H0V0"),j=_c(A,d,p),wc(A)}(0,r,n)):"pan"===i&&(B.moveFn=Y,B.doneFn=Q,wc(A))},clickFn:function(n,i){if(Tc(e),2!==n||k||function(){if(!e._transitioningWithDuration){var t,r,n,i=e._context.doubleClick,a=(m?h:[]).concat(y?f:[]),o={};if("reset+autosize"===i)for(i="autosize",r=0;r<a.length;r++)if((t=a[r])._rangeInitial&&(t.range[0]!==t._rangeInitial[0]||t.range[1]!==t._rangeInitial[1])||!t._rangeInitial&&!t.autorange){i="reset";break}if("autosize"===i)for(r=0;r<a.length;r++)(t=a[r]).fixedrange||(o[t._name+".autorange"]=!0);else if("reset"===i)for((m||x)&&(a=a.concat(_)),y&&!x&&(a=a.concat(w)),x&&(m?y||(a=a.concat(f)):a=a.concat(h)),r=0;r<a.length;r++)(t=a[r])._rangeInitial?(n=t._rangeInitial,o[t._name+".range[0]"]=n[0],o[t._name+".range[1]"]=n[1]):o[t._name+".autorange"]=!0;e.emit("plotly_doubleclick",null),R.call("relayout",e,o)}}(),T)Xa.click(e,i,r.id);else if(1===n&&k){var a=l?f[0]:h[0],o="s"===l||"w"===u?0:1,s=a._name+".range["+o+"]",c=function(e,r){var n,i=e.range[r],a=Math.abs(i-e.range[1-r]);return"date"===e.type?i:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3,t.format("."+n+"g")(Math.pow(10,i))):(n=Math.floor(Math.log(Math.abs(i))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4,t.format("."+String(n)+"g")(i))}(a,o),d="left",p="middle";if(a.fixedrange)return;l?(p="n"===l?"top":"bottom","right"===a.side&&(d="right")):"e"===u&&(d="right"),e._context.showAxisRangeEntryBoxes&&t.select(L).call(Fr.makeEditable,{gd:e,immediate:!0,background:M.paper_bgcolor,text:String(c),fill:a.tickfont?a.tickfont.color:"#444",horizontalAlign:d,verticalAlign:p}).on("edit",function(t){var r=a.d2r(t);void 0!==r&&R.call("relayout",e,s,r)})}}};rr.init(B);var U={};function V(t,r){if(e._transitioningWithDuration)return!1;var n=Math.max(0,Math.min(g,t+S)),i=Math.max(0,Math.min(v,r+P)),a=Math.abs(n-S),o=Math.abs(i-P);function s(){z="",O.r=O.l,O.t=O.b,j.attr("d","M0,0Z")}O.l=Math.min(S,n),O.r=Math.max(S,n),O.t=Math.min(P,i),O.b=Math.max(P,i),x?a>fc||o>fc?(z="xy",a/g>o/v?(o=a*v/g,P>i?O.t=P-o:O.b=P+o):(a=o*g/v,S>n?O.l=S-a:O.r=S+a),j.attr("d",Lc(O))):s():!y||o<Math.min(Math.max(.6*a,hc),fc)?a<hc?s():(O.t=0,O.b=v,z="x",j.attr("d",function(t,e){return"M"+(t.l-.5)+","+(e-fc-.5)+"h-3v"+(2*fc+1)+"h3ZM"+(t.r+.5)+","+(e-fc-.5)+"h3v"+(2*fc+1)+"h-3Z"}(O,P))):!m||a<Math.min(.6*o,fc)?(O.l=0,O.r=g,z="y",j.attr("d",function(t,e){return"M"+(e-fc-.5)+","+(t.t-.5)+"v-3h"+(2*fc+1)+"v3ZM"+(e-fc-.5)+","+(t.b+.5)+"v3h"+(2*fc+1)+"v-3Z"}(O,S))):(z="xy",j.attr("d",Lc(O))),O.w=O.r-O.l,O.h=O.b-O.t,Mc(F,j,O,N,D,I),D=!0}function H(){if(Math.min(O.h,O.w)<2*hc)return Tc(e);"xy"!==z&&"x"!==z||mc(h,O.l/g,O.r/g,U,_),"xy"!==z&&"y"!==z||mc(f,(v-O.b)/v,(v-O.t)/v,U,w),Tc(e),Q(),kc(e)}var q=[0,0,g,v],G=null,X=Oe.REDRAWDELAY,W=r.mainplot?M._plots[r.mainplot]:r;function Y(t,r){if(!e._transitioningWithDuration){if(E(),"ew"===m||"ns"===y)return m&&yc(h,t),y&&yc(f,r),K([m?-t:0,y?-r:0,g,v]),void Z(y,m);if(x&&m&&y){var n="w"===m==("n"===y)?1:-1,i=(t/g+n*r/v)/2;t=i*g,r=n*i*v}"w"===m?t=l(h,0,t):"e"===m?t=l(h,1,-t):m||(t=0),"n"===y?r=l(f,1,r):"s"===y?r=l(f,0,-r):y||(r=0);var a="w"===m?t:0,o="n"===y?r:0;if(x){var s;if(!m&&1===y.length){for(s=0;s<h.length;s++)h[s].range=h[s]._r.slice(),Nu(h[s],1-r/v);a=(t=r*g/v)/2}if(!y&&1===m.length){for(s=0;s<f.length;s++)f[s].range=f[s]._r.slice(),Nu(f[s],1-t/g);o=(r=t*v/g)/2}}K([a,o,g-t,v-r]),Z(y,m)}function l(t,e,r){for(var n,i,a=1-e,o=0;o<t.length;o++){var s=t[o];if(!s.fixedrange){n=s,i=s._rl[a]+(s._rl[e]-s._rl[a])/bc(r/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[e]=l)}}return n._length*(n._rl[e]-i)/(n._rl[e]-n._rl[a])}}function Z(t,r){var n,i=[];function a(t){for(n=0;n<t.length;n++)t[n].fixedrange||i.push(t[n]._id)}for((r||x)&&(a(h),a(_)),(t||x)&&(a(f),a(w)),U={},n=0;n<i.length;n++){var o=i[n];uc(e,o,!0);var s=cc(e,o);U[s._name+".range[0]"]=s.range[0],U[s._name+".range[1]"]=s.range[1]}function l(a,o,s){for(n=0;n<a.length;n++){var l=a[n];if((r&&-1!==i.indexOf(l.xref)||t&&-1!==i.indexOf(l.yref))&&(o(e,n),s))return}}l(M.annotations||[],R.getComponentMethod("annotations","drawOne")),l(M.shapes||[],R.getComponentMethod("shapes","drawOne")),l(M.images||[],R.getComponentMethod("images","draw"),!0)}function Q(){K([0,0,g,v]),re.syncOrAsync([vi.previousPromises,function(){R.call("relayout",e,U)}],e)}function K(t){var e,r,n,i,a,o=M._plots,s=Object.keys(o),c=t[2]/h[0]._length,d=t[3]/f[0]._length,p=u||x,g=l||x;function v(t){return t.fixedrange?0:p&&-1!==_.indexOf(t)?c:g&&-1!==(x?_:w).indexOf(t)?d:0}function m(t,e){return e?(t.range=t._r.slice(),Nu(t,e),y(t,e)):0}function y(t,e){return t._length*(1-e)*lc[t.constraintoward||"middle"]}for(M._glcanvas&&M._glcanvas.size()&&M._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0})}),e=0;e<s.length;e++){var b=o[s[e]],A=b.xaxis,T=b.yaxis,k=p&&!A.fixedrange&&-1!==h.indexOf(A),E=g&&!T.fixedrange&&-1!==f.indexOf(T);if(b._scene&&b._scene.update){var L=re.simpleMap(A.range,A.r2l),C=re.simpleMap(T.range,T.r2l);b._scene.update({range:[L[0],C[0],L[1],C[1]]})}if(k?(r=c,i=u?t[0]:y(A,r)):i=m(A,r=v(A)),E?(n=d,a=l?t[1]:y(T,n)):a=m(T,n=v(T)),r||n){r||(r=1),n||(n=1);var S=A._offset-i/r,P=T._offset-a/n;M._defs.select("#"+b.clipId+"> rect").call(hn.setTranslate,i,a).call(hn.setScale,r,n);var R=b.plot.selectAll(".scatterlayer .trace, .boxlayer .trace, .violinlayer .trace");b.plot.call(hn.setTranslate,S,P).call(hn.setScale,1/r,1/n),R.selectAll(".point").call(hn.setPointGroupScale,r,n),R.selectAll(".textpoint").call(hn.setTextPointsScale,r,n),R.call(hn.hideOutsideRangePoints,b),b.plot.selectAll(".barlayer .trace").call(hn.hideOutsideRangePoints,b,".bartext")}}}return l.length*u.length!=1&&Cc(L,function(t){if(e._context.scrollZoom||M._enablescrollzoom){if(null===G&&wc(A),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();var r=e.querySelector(".plotly");if(E(),!(r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10)){clearTimeout(G);var n=-t.deltaY;if(isFinite(n)||(n=t.wheelDelta/10),isFinite(n)){var i,a=Math.exp(-Math.min(Math.max(n,-20),20)/200),o=W.draglayer.select(".nsewdrag").node().getBoundingClientRect(),s=(t.clientX-o.left)/o.width,c=(o.bottom-t.clientY)/o.height;if(u||x){for(u||(s=.5),i=0;i<h.length;i++)d(h[i],s,a);q[2]*=a,q[0]+=q[2]*s*(1/a-1)}if(l||x){for(l||(c=.5),i=0;i<f.length;i++)d(f[i],c,a);q[3]*=a,q[1]+=q[3]*(1-c)*(1/a-1)}K(q),Z(l,u),G=setTimeout(function(){q=[0,0,g,v],Q()},X),t.preventDefault()}else re.log("Did not find wheel motion attributes: ",t)}}function d(t,e,r){if(!t.fixedrange){var n=re.simpleMap(t.range,t.r2l),i=n[0]+(n[1]-n[0])*e;t.range=n.map(function(e){return t.l2r(i+(e-i)*r)})}}}),L},Pc=function(e){var r=e._fullLayout;if(e._context.staticPlot)t.select(e).selectAll(".drag").remove();else if(r._has("cartesian")||r._has("gl2d")){Object.keys(r._plots||{}).sort(function(t,e){if((r._plots[t].mainplot&&!0)===(r._plots[e].mainplot&&!0)){var n=t.split("y"),i=e.split("y");return n[0]===i[0]?Number(n[1]||1)-Number(i[1]||1):Number(n[0]||1)-Number(i[0]||1)}return r._plots[t].mainplot?1:-1}).forEach(function(t){var n=r._plots[t],i=n.xaxis,a=n.yaxis,o=Oe.DRAGGERSIZE;if(!n.mainplot){var s=Sc(e,n,i._offset,a._offset,i._length,a._length,"ns","ew");s.onmousemove=function(r){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===t&&Xa.hover(e,r,t)},Xa.hover(e,r,t),e._fullLayout._lasthover=s,e._fullLayout._hoversubplot=t},s.onmouseout=function(t){e._dragging||(e._fullLayout._hoversubplot=null,rr.unhover(e,t))},e._context.showAxisDragHandles&&(Sc(e,n,i._offset-o,a._offset-o,o,o,"n","w"),Sc(e,n,i._offset+i._length,a._offset-o,o,o,"n","e"),Sc(e,n,i._offset-o,a._offset+a._length,o,o,"s","w"),Sc(e,n,i._offset+i._length,a._offset+a._length,o,o,"s","e"))}if(e._context.showAxisDragHandles){if(t===i._mainSubplot){var l=i._mainLinePosition;"top"===i.side&&(l-=o),Sc(e,n,i._offset+.1*i._length,l,.8*i._length,o,"","ew"),Sc(e,n,i._offset,l,.1*i._length,o,"","w"),Sc(e,n,i._offset+.9*i._length,l,.1*i._length,o,"","e")}if(t===a._mainSubplot){var u=a._mainLinePosition;"right"!==a.side&&(u-=o),Sc(e,n,u,a._offset+.1*a._length,o,.8*a._length,"ns",""),Sc(e,n,u,a._offset+.9*a._length,o,.1*a._length,"s",""),Sc(e,n,u,a._offset,o,.1*a._length,"n","")}}});var n=r._hoverlayer.node();n.onmousemove=function(t){t.target=r._lasthover,Xa.hover(e,t,r._hoversubplot)},n.onclick=function(t){t.target=r._lasthover,Xa.click(e,t)},n.onmousedown=function(t){r._lasthover.onmousedown(t)}}},Rc={};function Oc(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function Ic(t,e,r){if(!r.showline||!r._lw)return!1;if("all"===r.mirror||"allticks"===r.mirror)return!0;var n=r._anchorAxis;if(!n)return!1;var i=Nr.FROM_BL[e];return r.side===e?n.domain[i]===t.domain[i]:r.mirror&&n.domain[1-i]===t.domain[1-i]}function Nc(t,e,r,n){if(Ic(t,e,r))return r._lw;for(var i=0;i<n.length;i++){var a=n[i];if(a._mainAxis===r._mainAxis&&Ic(t,e,a))return a._lw}return 0}Rc.layoutStyles=function(t){return re.syncOrAsync([vi.doAutoMargin,Rc.lsInner],t)},Rc.lsInner=function(e){var r,n=e._fullLayout,i=n._size,a=i.p,o=Ki.list(e),s=n._has("cartesian");function l(t,e,r){var n=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===r?e._offset-a-n:e._offset+e._length+a+n:i.t+i.h*(1-(t.position||0))+n%1:e?"right"===r?e._offset+e._length+a+n:e._offset-a-n:i.l+i.w*(t.position||0)+n%1}for(r=0;r<o.length;r++){var u=o[r];u.setScale();var c=u._anchorAxis;u._linepositions={},u._lw=hn.crispRound(e,u.linewidth,1),u._mainLinePosition=l(u,c,u.side),u._mainMirrorPosition=u.mirror&&c?l(u,c,Nr.OPPOSITE_SIDE[u.side]):null}n._paperdiv.style({width:n.width+"px",height:n.height+"px"}).selectAll(".main-svg").call(hn.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor);var h=n._paper.selectAll("g.subplot"),f=[],d=[];h.each(function(t){var e=n._plots[t];if(e.mainplot)return e.bg&&e.bg.remove(),void(e.bg=void 0);var r=e.xaxis.domain,i=e.yaxis.domain,a=[];!function(t,e,r){for(var n=0;n<r.length;n++){var i=r[n][0],a=r[n][1];if(!(i[0]>=t[1]||i[1]<=t[0])&&a[0]<e[1]&&a[1]>e[0])return!0}return!1}(r,i,d)?(f.push(t),d.push([r,i])):a=[0];var o=e.plotgroup.selectAll(".bg").data(a);o.enter().append("rect").classed("bg",!0),o.exit().remove(),o.each(function(){e.bg=o;var t=e.plotgroup.node();t.insertBefore(this,t.childNodes[0])})});var p=n._bgLayer.selectAll(".bg").data(f);return p.enter().append("rect").classed("bg",!0),p.exit().remove(),p.each(function(e){n._plots[e].bg=t.select(this)}),h.each(function(t){var e=n._plots[t],i=e.xaxis,u=e.yaxis;e.bg&&s&&e.bg.call(hn.setRect,i._offset-a,u._offset-a,i._length+2*a,u._length+2*a).call(Ne.fill,n.plot_bgcolor).style("stroke-width",0),e.clipId="clip"+n._uid+t+"plot";var c,h,f=n._clips.selectAll("#"+e.clipId).data([0]);for(f.enter().append("clipPath").attr({class:"plotclip",id:e.clipId}).append("rect"),f.selectAll("rect").attr({width:i._length,height:u._length}),hn.setTranslate(e.plot,i._offset,u._offset),e._hasClipOnAxisFalse?(c=null,h=e.clipId):(c=e.clipId,h=null),hn.setClipUrl(e.plot,c),r=0;r<Oe.traceLayerClasses.length;r++){var d=Oe.traceLayerClasses[r];"scatterlayer"!==d&&"barlayer"!==d&&e.plot.selectAll("g."+d).call(hn.setClipUrl,h)}if(e.layerClipId=h,s){var p,g,v,m,y,b,x,_,w,M,A,T,k,E="M0,0";Oc(i,t)&&(y=Nc(i,"left",u,o),p=i._offset-(y?a+y:0),b=Nc(i,"right",u,o),g=i._offset+i._length+(b?a+b:0),v=l(i,u,"bottom"),m=l(i,u,"top"),(k=!i._anchorAxis||t!==i._mainSubplot)&&i.ticks&&"allticks"===i.mirror&&(i._linepositions[t]=[v,m]),E=P(i,C,function(t){return"M"+i._offset+","+t+"h"+i._length}),k&&i.showline&&("all"===i.mirror||"allticks"===i.mirror)&&(E+=C(v)+C(m)),e.xlines.style("stroke-width",i._lw+"px").call(Ne.stroke,i.showline?i.linecolor:"rgba(0,0,0,0)")),e.xlines.attr("d",E);var L="M0,0";Oc(u,t)&&(A=Nc(u,"bottom",i,o),x=u._offset+u._length+(A?a:0),T=Nc(u,"top",i,o),_=u._offset-(T?a:0),w=l(u,i,"left"),M=l(u,i,"right"),(k=!u._anchorAxis||t!==i._mainSubplot)&&u.ticks&&"allticks"===u.mirror&&(u._linepositions[t]=[w,M]),L=P(u,S,function(t){return"M"+t+","+u._offset+"v"+u._length}),k&&u.showline&&("all"===u.mirror||"allticks"===u.mirror)&&(L+=S(w)+S(M)),e.ylines.style("stroke-width",u._lw+"px").call(Ne.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")),e.ylines.attr("d",L)}function C(t){return"M"+p+","+t+"H"+g}function S(t){return"M"+t+","+_+"V"+x}function P(e,r,n){if(!e.showline||t!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var i=r(e._mainLinePosition);return e.mirror&&(i+=r(e._mainMirrorPosition)),i}}),Ki.makeClipPaths(e),Rc.drawMainTitle(e),Ou.manage(e),e._promises.length&&Promise.all(e._promises)},Rc.drawMainTitle=function(t){var e=t._fullLayout;Ci.draw(t,"gtitle",{propContainer:e,propName:"title",placeholder:e._dfltTitle.plot,attributes:{x:e.width/2,y:e._size.t/2,"text-anchor":"middle"}})},Rc.doTraceStyle=function(t){for(var e=0;e<t.calcdata.length;e++){var r=t.calcdata[e],n=(((r[0]||{}).trace||{})._module||{}).arraysToCalcdata;n&&n(r,r[0].trace)}return vi.style(t),R.getComponentMethod("legend","draw")(t),vi.previousPromises(t)},Rc.doColorBars=function(t){for(var e=0;e<t.calcdata.length;e++){var r=t.calcdata[e][0];if((r.t||{}).cb){var n=r.trace,i=r.t.cb;R.traceIs(n,"contour")&&i.line({width:!1!==n.contours.showlines?n.line.width:0,dash:n.line.dash,color:"line"===n.contours.coloring?i._opts.line.color:n.line.color}),R.traceIs(n,"markerColorscale")?i.options(n.marker.colorbar)():i.options(n.colorbar)()}}return vi.previousPromises(t)},Rc.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,R.call("plot",t,"",e)},Rc.doLegend=function(t){return R.getComponentMethod("legend","draw")(t),vi.previousPromises(t)},Rc.doTicksRelayout=function(t){return Ki.doTicks(t,"redraw"),Rc.drawMainTitle(t),vi.previousPromises(t)},Rc.doModeBar=function(t){var e=t._fullLayout;Ou.manage(t),Pc(t);for(var r=0;r<e._basePlotModules.length;r++){var n=e._basePlotModules[r].updateFx;n&&n(e)}return vi.previousPromises(t)},Rc.doCamera=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=0;n<r.length;n++){var i=e[r[n]];i._scene.setCamera(i.camera)}};var Dc={},zc=ci.id2name,Fc=Oi,jc=r.ALMOST_EQUAL,Bc=Nr.FROM_BL;function Uc(t,e){var r=t._inputDomain,n=Bc[t.constraintoward],i=r[0]+(r[1]-r[0])*n;t.domain=t._input.domain=[i+(r[0]-i)/e,i+(r[1]-i)/e]}Dc.enforce=function(t){var e,r,n,i,a,o,s,l=t._fullLayout,u=l._axisConstraintGroups||[];for(e=0;e<u.length;e++){var c=u[e],h=Object.keys(c),f=1/0,d=0,p=1/0,g={},v={},m=!1;for(r=0;r<h.length;r++)v[n=h[r]]=i=l[zc(n)],i._inputDomain?i.domain=i._inputDomain.slice():i._inputDomain=i.domain.slice(),i._inputRange||(i._inputRange=i.range.slice()),i.setScale(),g[n]=a=Math.abs(i._m)/c[n],f=Math.min(f,a),"domain"!==i.constrain&&i._constraintShrinkable||(p=Math.min(p,a)),delete i._constraintShrinkable,d=Math.max(d,a),"domain"===i.constrain&&(m=!0);if(!(f>jc*d)||m)for(r=0;r<h.length;r++)if(a=g[n=h[r]],o=(i=v[n]).constrain,a!==p||"domain"===o)if(s=a/p,"range"===o)Nu(i,s);else{var y=i._inputDomain,b=(i.domain[1]-i.domain[0])/(y[1]-y[0]),x=(i.r2l(i.range[1])-i.r2l(i.range[0]))/(i.r2l(i._inputRange[1])-i.r2l(i._inputRange[0]));if((s/=b)*x<1){i.domain=i._input.domain=y.slice(),Nu(i,s);continue}if(x<1&&(i.range=i._input.range=i._inputRange.slice(),s*=x),i.autorange&&i._min.length&&i._max.length){var _=i.r2l(i.range[0]),w=i.r2l(i.range[1]),M=(_+w)/2,A=M,T=M,k=Math.abs(w-M),E=M-k*s*1.0001,L=M+k*s*1.0001,C=Fc(i);Uc(i,s),i.setScale();var S,P,R=Math.abs(i._m);for(P=0;P<i._min.length;P++)(S=i._min[P].val-C(i._min[P])/R)>E&&S<A&&(A=S);for(P=0;P<i._max.length;P++)(S=i._max[P].val+C(i._max[P])/R)<L&&S>T&&(T=S);s/=(T-A)/(2*k),A=i.l2r(A),T=i.l2r(T),i.range=i._input.range=_<w?[A,T]:[T,A]}Uc(i,s)}}},Dc.clean=function(t,e){if(e._inputDomain){for(var r=!1,n=e._id,i=t._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][n]){r=!0;break}r&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}};var Vc={},Hc=re.extendDeepAll,qc=Nr.MID_SHIFT,Gc=Vc={version:"0.2.2"};Gc.Axis=function(){var e,r,n,i,a={data:[],layout:{}},o={},s={},l=t.dispatch("hover"),u={};return u.render=function(o){return function(o){r=o||r;var l=a.data,u=a.layout;("string"==typeof r||r.nodeName)&&(r=t.select(r)),r.datum(l).each(function(r,a){var o=r.slice();s={data:Gc.util.cloneJson(o),layout:Gc.util.cloneJson(u)};var l=0;o.forEach(function(e,r){e.color||(e.color=u.defaultColorRange[l],l=(l+1)%u.defaultColorRange.length),e.strokeColor||(e.strokeColor="LinePlot"===e.geometry?e.color:t.rgb(e.color).darker().toString()),s.data[r].color=e.color,s.data[r].strokeColor=e.strokeColor,s.data[r].strokeDash=e.strokeDash,s.data[r].strokeSize=e.strokeSize});var c=o.filter(function(t,e){var r=t.visible;return void 0===r||!0===r}),h=!1,f=c.map(function(t,e){return h=h||void 0!==t.groupId,t});if(h){var d=[],p=t.nest().key(function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"}).entries(f).map(function(t,e){if("unstacked"===t.key)return t.values;var r=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,n){t.yStack=[r],d.push(r),r=Gc.util.sumArrays(t.r,r)}),t.values});c=t.merge(p)}c.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var g=Math.min(u.width-u.margin.left-u.margin.right,u.height-u.margin.top-u.margin.bottom)/2;g=Math.max(10,g);var v,m=[u.margin.left+g,u.margin.top+g];v=h?[0,t.max(Gc.util.sumArrays(Gc.util.arrayLast(c).r[0],Gc.util.arrayLast(d)))]:t.extent(Gc.util.flattenArray(c.map(function(t,e){return t.r}))),u.radialAxis.domain!=Gc.DATAEXTENT&&(v[0]=0),n=t.scale.linear().domain(u.radialAxis.domain!=Gc.DATAEXTENT&&u.radialAxis.domain?u.radialAxis.domain:v).range([0,g]),s.layout.radialAxis.domain=n.domain();var y,b=Gc.util.flattenArray(c.map(function(t,e){return t.t})),x="string"==typeof b[0];x&&(b=Gc.util.deduplicate(b),y=b.slice(),b=t.range(b.length),c=c.map(function(t,e){var r=t;return t.t=[b],h&&(r.yStack=t.yStack),r}));var _=c.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===c.length,w=null===u.needsEndSpacing?x||!_:u.needsEndSpacing,M=u.angularAxis.domain&&u.angularAxis.domain!=Gc.DATAEXTENT&&!x&&u.angularAxis.domain[0]>=0?u.angularAxis.domain:t.extent(b),A=Math.abs(b[1]-b[0]);_&&!x&&(A=0);var T=M.slice();w&&x&&(T[1]+=A);var k=u.angularAxis.ticksCount||4;k>8&&(k=k/(k/8)+k%8),u.angularAxis.ticksStep&&(k=(T[1]-T[0])/k);var E=u.angularAxis.ticksStep||(T[1]-T[0])/(k*(u.minorTicks+1));y&&(E=Math.max(Math.round(E),1)),T[2]||(T[2]=E);var L=t.range.apply(this,T);if(L=L.map(function(t,e){return parseFloat(t.toPrecision(12))}),i=t.scale.linear().domain(T.slice(0,2)).range("clockwise"===u.direction?[0,360]:[360,0]),s.layout.angularAxis.domain=i.domain(),s.layout.angularAxis.endPadding=w?A:0,void 0===(e=t.select(this).select("svg.chart-root"))||e.empty()){var C=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),S=this.appendChild(this.ownerDocument.importNode(C.documentElement,!0));e=t.select(S)}e.select(".guides-group").style({"pointer-events":"none"}),e.select(".angular.axis-group").style({"pointer-events":"none"}),e.select(".radial.axis-group").style({"pointer-events":"none"});var P,R=e.select(".chart-group"),O={fill:"none",stroke:u.tickColor},I={"font-size":u.font.size,"font-family":u.font.family,fill:u.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+u.font.outlineColor}).join(",")};if(u.showLegend){P=e.select(".legend-group").attr({transform:"translate("+[g,u.margin.top]+")"}).style({display:"block"});var N=c.map(function(t,e){var r=Gc.util.cloneJson(t);return r.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",r.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,r.color="LinePlot"===t.geometry?t.strokeColor:t.color,r});Gc.Legend().config({data:c.map(function(t,e){return t.name||"Element"+e}),legendConfig:Hc({},Gc.Legend.defaultConfig().legendConfig,{container:P,elements:N,reverseOrder:u.legend.reverseOrder})})();var D=P.node().getBBox();g=Math.min(u.width-D.width-u.margin.left-u.margin.right,u.height-u.margin.top-u.margin.bottom)/2,g=Math.max(10,g),m=[u.margin.left+g,u.margin.top+g],n.range([0,g]),s.layout.radialAxis.domain=n.domain(),P.attr("transform","translate("+[m[0]+g,m[1]-g]+")")}else P=e.select(".legend-group").style({display:"none"});e.attr({width:u.width,height:u.height}).style({opacity:u.opacity}),R.attr("transform","translate("+m+")").style({cursor:"crosshair"});var z=[(u.width-(u.margin.left+u.margin.right+2*g+(D?D.width:0)))/2,(u.height-(u.margin.top+u.margin.bottom+2*g))/2];if(z[0]=Math.max(0,z[0]),z[1]=Math.max(0,z[1]),e.select(".outer-group").attr("transform","translate("+z+")"),u.title){var F=e.select("g.title-group text").style(I).text(u.title),j=F.node().getBBox();F.attr({x:m[0]-j.width/2,y:m[1]-g-20})}var B=e.select(".radial.axis-group");if(u.radialAxis.gridLinesVisible){var U=B.selectAll("circle.grid-circle").data(n.ticks(5));U.enter().append("circle").attr({class:"grid-circle"}).style(O),U.attr("r",n),U.exit().remove()}B.select("circle.outside-circle").attr({r:g}).style(O);var V=e.select("circle.background-circle").attr({r:g}).style({fill:u.backgroundColor,stroke:u.stroke});function H(t,e){return i(t)%360+u.orientation}if(u.radialAxis.visible){var q=t.svg.axis().scale(n).ticks(5).tickSize(5);B.call(q).attr({transform:"rotate("+u.radialAxis.orientation+")"}),B.selectAll(".domain").style(O),B.selectAll("g>text").text(function(t,e){return this.textContent+u.radialAxis.ticksSuffix}).style(I).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===u.radialAxis.tickOrientation?"rotate("+-u.radialAxis.orientation+") translate("+[0,I["font-size"]]+")":"translate("+[0,I["font-size"]]+")"}}),B.selectAll("g>line").style({stroke:"black"})}var G=e.select(".angular.axis-group").selectAll("g.angular-tick").data(L),X=G.enter().append("g").classed("angular-tick",!0);G.attr({transform:function(t,e){return"rotate("+H(t)+")"}}).style({display:u.angularAxis.visible?"block":"none"}),G.exit().remove(),X.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(u.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(u.minorTicks+1)==0)}).style(O),X.selectAll(".minor").style({stroke:u.minorTickColor}),G.select("line.grid-line").attr({x1:u.tickLength?g-u.tickLength:0,x2:g}).style({display:u.angularAxis.gridLinesVisible?"block":"none"}),X.append("text").classed("axis-text",!0).style(I);var W=G.select("text.axis-text").attr({x:g+u.labelOffset,dy:qc+"em",transform:function(t,e){var r=H(t),n=g+u.labelOffset,i=u.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+-r+" "+n+" 0)":"radial"==i?r<270&&r>90?"rotate(180 "+n+" 0)":null:"rotate("+(r<=180&&r>0?-90:90)+" "+n+" 0)"}}).style({"text-anchor":"middle",display:u.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(u.minorTicks+1)!=0?"":y?y[t]+u.angularAxis.ticksSuffix:t+u.angularAxis.ticksSuffix}).style(I);u.angularAxis.rewriteTicks&&W.text(function(t,e){return e%(u.minorTicks+1)!=0?"":u.angularAxis.rewriteTicks(this.textContent,e)});var Y=t.max(R.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));P.attr({transform:"translate("+[g+Y,u.margin.top]+")"});var Z=e.select("g.geometry-group").selectAll("g").size()>0,Q=e.select("g.geometry-group").selectAll("g.geometry").data(c);if(Q.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),Q.exit().remove(),c[0]||Z){var K=[];c.forEach(function(t,e){var r={};r.radialScale=n,r.angularScale=i,r.container=Q.filter(function(t,r){return r==e}),r.geometry=t.geometry,r.orientation=u.orientation,r.direction=u.direction,r.index=e,K.push({data:t,geometryConfig:r})});var $=[];t.nest().key(function(t,e){return void 0!==t.data.groupId||"unstacked"}).entries(K).forEach(function(t,e){"unstacked"===t.key?$=$.concat(t.values.map(function(t,e){return[t]})):$.push(t.values)}),$.forEach(function(t,e){var r;r=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var n=t.map(function(t,e){return Hc(Gc[r].defaultConfig(),t)});Gc[r]().config(n)()})}var J,tt,et=e.select(".guides-group"),rt=e.select(".tooltips-group"),nt=Gc.tooltipPanel().config({container:rt,fontSize:8})(),it=Gc.tooltipPanel().config({container:rt,fontSize:8})(),at=Gc.tooltipPanel().config({container:rt,hasTick:!0})();if(!x){var ot=et.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});R.on("mousemove.angular-guide",function(t,e){var r=Gc.util.getMousePos(V).angle;ot.attr({x2:-g,transform:"rotate("+r+")"}).style({opacity:.5});var n=(r+180+360-u.orientation)%360;J=i.invert(n);var a=Gc.util.convertToCartesian(g+12,r+180);nt.text(Gc.util.round(J)).move([a[0]+m[0],a[1]+m[1]])}).on("mouseout.angular-guide",function(t,e){et.select("line").style({opacity:0})})}var st=et.select("circle").style({stroke:"grey",fill:"none"});R.on("mousemove.radial-guide",function(t,e){var r=Gc.util.getMousePos(V).radius;st.attr({r:r}).style({opacity:.5}),tt=n.invert(Gc.util.getMousePos(V).radius);var i=Gc.util.convertToCartesian(r,u.radialAxis.orientation);it.text(Gc.util.round(tt)).move([i[0]+m[0],i[1]+m[1]])}).on("mouseout.radial-guide",function(t,e){st.style({opacity:0}),at.hide(),nt.hide(),it.hide()}),e.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(r,n){var i=t.select(this),a=this.style.fill,o="black",s=this.style.opacity||1;if(i.attr({"data-opacity":s}),a&&"none"!==a){i.attr({"data-fill":a}),o=t.hsl(a).darker().toString(),i.style({fill:o,opacity:1});var l={t:Gc.util.round(r[0]),r:Gc.util.round(r[1])};x&&(l.t=y[r[0]]);var u="t: "+l.t+", r: "+l.r,c=this.getBoundingClientRect(),h=e.node().getBoundingClientRect(),f=[c.left+c.width/2-z[0]-h.left,c.top+c.height/2-z[1]-h.top];at.config({color:o}).text(u),at.move(f)}else a=this.style.stroke||"black",i.attr({"data-stroke":a}),o=t.hsl(a).darker().toString(),i.style({stroke:o,opacity:1})}).on("mousemove.tooltip",function(e,r){if(0!=t.event.which)return!1;t.select(this).attr("data-fill")&&at.show()}).on("mouseout.tooltip",function(e,r){at.hide();var n=t.select(this),i=n.attr("data-fill");i?n.style({fill:i,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(o),this},u.config=function(t){if(!arguments.length)return a;var e=Gc.util.cloneJson(t);return e.data.forEach(function(t,e){a.data[e]||(a.data[e]={}),Hc(a.data[e],Gc.Axis.defaultConfig().data[0]),Hc(a.data[e],t)}),Hc(a.layout,Gc.Axis.defaultConfig().layout),Hc(a.layout,e.layout),this},u.getLiveConfig=function(){return s},u.getinputConfig=function(){return o},u.radialScale=function(t){return n},u.angularScale=function(t){return i},u.svg=function(){return e},t.rebind(u,l,"on"),u},Gc.Axis.defaultConfig=function(e,r){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:t.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},Gc.util={},Gc.DATAEXTENT="dataExtent",Gc.AREA="AreaChart",Gc.LINE="LinePlot",Gc.DOT="DotPlot",Gc.BAR="BarChart",Gc.util._override=function(t,e){for(var r in t)r in e&&(e[r]=t[r])},Gc.util._extend=function(t,e){for(var r in t)e[r]=t[r]},Gc.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},Gc.util.dataFromEquation2=function(e,r){var n=r||6;return t.range(0,360+n,n).map(function(t,r){var n=t*Math.PI/180;return[t,e(n)]})},Gc.util.dataFromEquation=function(e,r,n){var i=r||6,a=[],o=[];t.range(0,360+i,i).forEach(function(t,r){var n=t*Math.PI/180,i=e(n);a.push(t),o.push(i)});var s={t:a,r:o};return n&&(s.name=n),s},Gc.util.ensureArray=function(e,r){if(void 0===e)return null;var n=[].concat(e);return t.range(r).map(function(t,e){return n[e]||n[0]})},Gc.util.fillArrays=function(t,e,r){return e.forEach(function(e,n){t[e]=Gc.util.ensureArray(t[e],r)}),t},Gc.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},Gc.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var r=e.shift();return t[r]&&(!e.length||objHasKeys(t[r],e))},Gc.util.sumArrays=function(e,r){return t.zip(e,r).map(function(e,r){return t.sum(e)})},Gc.util.arrayLast=function(t){return t[t.length-1]},Gc.util.arrayEqual=function(t,e){for(var r=Math.max(t.length,e.length,1);r-- >=0&&t[r]===e[r];);return-2===r},Gc.util.flattenArray=function(t){for(var e=[];!Gc.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},Gc.util.deduplicate=function(t){return t.filter(function(t,e,r){return r.indexOf(t)==e})},Gc.util.convertToCartesian=function(t,e){var r=e*Math.PI/180;return[t*Math.cos(r),t*Math.sin(r)]},Gc.util.round=function(t,e){var r=e||2,n=Math.pow(10,r);return Math.round(t*n)/n},Gc.util.getMousePos=function(e){var r=t.mouse(e.node()),n=r[0],i=r[1],a={};return a.x=n,a.y=i,a.pos=r,a.angle=180*(Math.atan2(i,n)+Math.PI)/Math.PI,a.radius=Math.sqrt(n*n+i*i),a},Gc.util.duplicatesCount=function(t){for(var e,r={},n={},i=0,a=t.length;i<a;i++)(e=t[i])in r?(r[e]++,n[e]=r[e]):r[e]=1;return n},Gc.util.duplicates=function(t){return Object.keys(Gc.util.duplicatesCount(t))},Gc.util.translator=function(t,e,r,n){if(n){var i=r.slice();r=e,e=i}var a=e.reduce(function(t,e){if(void 0!==t)return t[e]},t);void 0!==a&&(e.reduce(function(t,r,n){if(void 0!==t)return n===e.length-1&&delete t[r],t[r]},t),r.reduce(function(t,e,n){return void 0===t[e]&&(t[e]={}),n===r.length-1&&(t[e]=a),t[e]},t))},Gc.PolyChart=function(){var e=[Gc.PolyChart.defaultConfig()],r=t.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};function i(){var r=e[0].geometryConfig,i=r.container;"string"==typeof i&&(i=t.select(i)),i.datum(e).each(function(e,i){var a=!!e[0].data.yStack,o=e.map(function(e,r){return a?t.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):t.zip(e.data.t[0],e.data.r[0])}),s=r.angularScale,l=r.radialScale.domain()[0],u={bar:function(n,i,a){var o=e[a].data,l=r.radialScale(n[1])-r.radialScale(0),u=r.radialScale(n[2]||0),c=o.barWidth;t.select(this).attr({class:"mark bar",d:"M"+[[l+u,-c/2],[l+u,c/2],[u,c/2],[u,-c/2]].join("L")+"Z",transform:function(t,e){return"rotate("+(r.orientation+s(t[0]))+")"}})}};u.dot=function(n,i,a){var o=n[2]?[n[0],n[1]+n[2]]:n,s=t.svg.symbol().size(e[a].data.dotSize).type(e[a].data.dotType)(n,i);t.select(this).attr({class:"mark dot",d:s,transform:function(t,e){var n,i,a,s=(n=function(t,e){var n=r.radialScale(t[1]),i=(r.angularScale(t[0])+r.orientation)*Math.PI/180;return{r:n,t:i}}(o),i=n.r*Math.cos(n.t),a=n.r*Math.sin(n.t),{x:i,y:a});return"translate("+[s.x,s.y]+")"}})};var c=t.svg.line.radial().interpolate(e[0].data.lineInterpolation).radius(function(t){return r.radialScale(t[1])}).angle(function(t){return r.angularScale(t[0])*Math.PI/180});u.line=function(n,i,a){var s=n[2]?o[a].map(function(t,e){return[t[0],t[1]+t[2]]}):o[a];if(t.select(this).each(u.dot).style({opacity:function(t,r){return+e[a].data.dotVisible},fill:p.stroke(n,i,a)}).attr({class:"mark dot"}),!(i>0)){var l=t.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path"),l.attr({class:"line",d:c(s),transform:function(t,e){return"rotate("+(r.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return p.fill(n,i,a)},"fill-opacity":0,stroke:function(t,e){return p.stroke(n,i,a)},"stroke-width":function(t,e){return p["stroke-width"](n,i,a)},"stroke-dasharray":function(t,e){return p["stroke-dasharray"](n,i,a)},opacity:function(t,e){return p.opacity(n,i,a)},display:function(t,e){return p.display(n,i,a)}})}};var h=r.angularScale.range(),f=Math.abs(h[1]-h[0])/o[0].length*Math.PI/180,d=t.svg.arc().startAngle(function(t){return-f/2}).endAngle(function(t){return f/2}).innerRadius(function(t){return r.radialScale(l+(t[2]||0))}).outerRadius(function(t){return r.radialScale(l+(t[2]||0))+r.radialScale(t[1])});u.arc=function(e,n,i){t.select(this).attr({class:"mark arc",d:d,transform:function(t,e){return"rotate("+(r.orientation+s(t[0])+90)+")"}})};var p={fill:function(t,r,n){return e[n].data.color},stroke:function(t,r,n){return e[n].data.strokeColor},"stroke-width":function(t,r,n){return e[n].data.strokeSize+"px"},"stroke-dasharray":function(t,r,i){return n[e[i].data.strokeDash]},opacity:function(t,r,n){return e[n].data.opacity},display:function(t,r,n){return void 0===e[n].data.visible||e[n].data.visible?"block":"none"}},g=t.select(this).selectAll("g.layer").data(o);g.enter().append("g").attr({class:"layer"});var v=g.selectAll("path.mark").data(function(t,e){return t});v.enter().append("path").attr({class:"mark"}),v.style(p).each(u[r.geometryType]),v.exit().remove(),g.exit().remove()})}return i.config=function(t){return arguments.length?(t.forEach(function(t,r){e[r]||(e[r]={}),Hc(e[r],Gc.PolyChart.defaultConfig()),Hc(e[r],t)}),this):e},i.getColorScale=function(){},t.rebind(i,r,"on"),i},Gc.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:t.scale.category20()}}},Gc.BarChart=function(){return Gc.PolyChart()},Gc.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},Gc.AreaChart=function(){return Gc.PolyChart()},Gc.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},Gc.DotPlot=function(){return Gc.PolyChart()},Gc.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},Gc.LinePlot=function(){return Gc.PolyChart()},Gc.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},Gc.Legend=function(){var e=Gc.Legend.defaultConfig(),r=t.dispatch("hover");function n(){var r=e.legendConfig,i=e.data.map(function(t,e){return[].concat(t).map(function(t,n){var i=Hc({},r.elements[e]);return i.name=t,i.color=[].concat(r.elements[e].color)[n],i})}),a=t.merge(i);a=a.filter(function(t,e){return r.elements[e]&&(r.elements[e].visibleInLegend||void 0===r.elements[e].visibleInLegend)}),r.reverseOrder&&(a=a.reverse());var o=r.container;("string"==typeof o||o.nodeName)&&(o=t.select(o));var s=a.map(function(t,e){return t.color}),l=r.fontSize,u=null==r.isContinuous?"number"==typeof a[0]:r.isContinuous,c=u?r.height:l*a.length,h=o.classed("legend-group",!0).selectAll("svg").data([0]),f=h.enter().append("svg").attr({width:300,height:c+l,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});f.append("g").classed("legend-axis",!0),f.append("g").classed("legend-marks",!0);var d=t.range(a.length),p=t.scale[u?"linear":"ordinal"]().domain(d).range(s),g=t.scale[u?"linear":"ordinal"]().domain(d)[u?"range":"rangePoints"]([0,c]);if(u){var v=h.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(s);v.enter().append("stop"),v.attr({offset:function(t,e){return e/(s.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),h.append("rect").classed("legend-mark",!0).attr({height:r.height,width:r.colorBandWidth,fill:"url(#grad1)"})}else{var m=h.select(".legend-marks").selectAll("path.legend-mark").data(a);m.enter().append("path").classed("legend-mark",!0),m.attr({transform:function(t,e){return"translate("+[l/2,g(e)+l/2]+")"},d:function(e,r){var n,i,a,o=e.symbol;return a=3*(i=l),"line"===(n=o)?"M"+[[-i/2,-i/12],[i/2,-i/12],[i/2,i/12],[-i/2,i/12]]+"Z":-1!=t.svg.symbolTypes.indexOf(n)?t.svg.symbol().type(n).size(a)():t.svg.symbol().type("square").size(a)()},fill:function(t,e){return p(e)}}),m.exit().remove()}var y=t.svg.axis().scale(g).orient("right"),b=h.select("g.legend-axis").attr({transform:"translate("+[u?r.colorBandWidth:l,l/2]+")"}).call(y);return b.selectAll(".domain").style({fill:"none",stroke:"none"}),b.selectAll("line").style({fill:"none",stroke:u?r.textColor:"none"}),b.selectAll("text").style({fill:r.textColor,"font-size":r.fontSize}).text(function(t,e){return a[e].name}),n}return n.config=function(t){return arguments.length?(Hc(e,t),this):e},t.rebind(n,r,"on"),n},Gc.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},Gc.tooltipPanel=function(){var e,r,n,i={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},a="tooltip-"+Gc.tooltipPanel.uid++,o=10,s=function(){var t=(e=i.container.selectAll("g."+a).data([0])).enter().append("g").classed(a,!0).style({"pointer-events":"none",display:"none"});return n=t.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),r=t.append("text").attr({dx:i.padding+o,dy:.3*+i.fontSize}),s};return s.text=function(a){var l=t.hsl(i.color).l,u=l>=.5?"#aaa":"white",c=l>=.5?"black":"white",h=a||"";r.style({fill:c,"font-size":i.fontSize+"px"}).text(h);var f=i.padding,d=r.node().getBBox(),p={fill:i.color,stroke:u,"stroke-width":"2px"},g=d.width+2*f+o,v=d.height+2*f;return n.attr({d:"M"+[[o,-v/2],[o,-v/4],[i.hasTick?0:o,0],[o,v/4],[o,v/2],[g,v/2],[g,-v/2]].join("L")+"Z"}).style(p),e.attr({transform:"translate("+[o,-v/2+2*f]+")"}),e.style({display:"block"}),s},s.move=function(t){if(e)return e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),s},s.hide=function(){if(e)return e.style({display:"none"}),s},s.show=function(){if(e)return e.style({display:"block"}),s},s.config=function(t){return Hc(i,t),s},s},Gc.tooltipPanel.uid=1,Gc.adapter={},Gc.adapter.plotly=function(){var e={convert:function(e,r){var n={};if(e.data&&(n.data=e.data.map(function(t,e){var n=Hc({},t);return[[n,["marker","color"],["color"]],[n,["marker","opacity"],["opacity"]],[n,["marker","line","color"],["strokeColor"]],[n,["marker","line","dash"],["strokeDash"]],[n,["marker","line","width"],["strokeSize"]],[n,["marker","symbol"],["dotType"]],[n,["marker","size"],["dotSize"]],[n,["marker","barWidth"],["barWidth"]],[n,["line","interpolation"],["lineInterpolation"]],[n,["showlegend"],["visibleInLegend"]]].forEach(function(t,e){Gc.util.translator.apply(null,t.concat(r))}),r||delete n.marker,r&&delete n.groupId,r?("LinePlot"===n.geometry?(n.type="scatter",!0===n.dotVisible?(delete n.dotVisible,n.mode="lines+markers"):n.mode="lines"):"DotPlot"===n.geometry?(n.type="scatter",n.mode="markers"):"AreaChart"===n.geometry?n.type="area":"BarChart"===n.geometry&&(n.type="bar"),delete n.geometry):("scatter"===n.type?"lines"===n.mode?n.geometry="LinePlot":"markers"===n.mode?n.geometry="DotPlot":"lines+markers"===n.mode&&(n.geometry="LinePlot",n.dotVisible=!0):"area"===n.type?n.geometry="AreaChart":"bar"===n.type&&(n.geometry="BarChart"),delete n.mode,delete n.type),n}),!r&&e.layout&&"stack"===e.layout.barmode)){var i=Gc.util.duplicates(n.data.map(function(t,e){return t.geometry}));n.data.forEach(function(t,e){var r=i.indexOf(t.geometry);-1!=r&&(n.data[e].groupId=r)})}if(e.layout){var a=Hc({},e.layout);if([[a,["plot_bgcolor"],["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(t,e){Gc.util.translator.apply(null,t.concat(r))}),r?(void 0!==a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=a.tickColor,delete a.tickColor)):(a.angularAxis&&void 0!==a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&void 0!==a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor)),a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder),a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder),a.margin&&void 0!==a.margin.t){var o=["t","r","b","l","pad"],s=["top","right","bottom","left","pad"],l={};t.entries(a.margin).forEach(function(t,e){l[s[o.indexOf(t.key)]]=t.value}),a.margin=l}r&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks),n.layout=a}return n}};return e};var Xc,Wc=re.extendDeepAll,Yc=Xc={};Yc.framework=function(e){var r,n,i,a,o,s=new function(){var t,e=[],r=-1,n=!1;function i(t,e){return t?(n=!0,t[e](),n=!1,this):this}return{add:function(t){return n?this:(e.splice(r+1,e.length-r),e.push(t),r=e.length-1,this)},setCallback:function(e){t=e},undo:function(){var n=e[r];return n?(i(n,"undo"),r-=1,t&&t(n.undo),this):this},redo:function(){var n=e[r+1];return n?(i(n,"redo"),r+=1,t&&t(n.redo),this):this},clear:function(){e=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[r-1]},getIndex:function(){return r}}};function l(n,s){return s&&(o=s),t.select(t.select(o).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),r=r?Wc(r,n):n,i||(i=Vc.Axis()),a=Vc.adapter.plotly().convert(r),i.config(a).render(o),e.data=r.data,e.layout=r.layout,Yc.fillLayout(e),r}return l.isPolar=!0,l.svg=function(){return i.svg()},l.getConfig=function(){return r},l.getLiveConfig=function(){return Vc.adapter.plotly().convert(i.getLiveConfig(),!0)},l.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},l.setUndoPoint=function(){var t,e,i=this,a=Vc.util.cloneJson(r);t=a,e=n,s.add({undo:function(){e&&i(e)},redo:function(){i(t)}}),n=Vc.util.cloneJson(a)},l.undo=function(){s.undo()},l.redo=function(){s.redo()},l},Yc.fillLayout=function(e){var r=t.select(e).selectAll(".plot-container"),n=r.selectAll(".svg-container"),i=e.framework&&e.framework.svg&&e.framework.svg(),a={width:800,height:600,paper_bgcolor:Ne.background,_container:r,_paperdiv:n,_paper:i};e._fullLayout=Wc(a,e.layout)};var Zc={};(Zc=Vc).manager=Xc;var Qc={},Kc=Dc.enforce,$c=Dc.clean,Jc=Ii,th=0;function eh(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){re.error(t)}}function rh(t,e){eh(t,Ne.combine(e,"white"))}function nh(t,e){t._context||(t._context=re.extendDeep({},x));var r,n,i,a=t._context;if(e){for(n=Object.keys(e),r=0;r<n.length;r++)"editable"!==(i=n[r])&&"edits"!==i&&i in a&&("setBackground"===i&&"opaque"===e[i]?a[i]=rh:a[i]=e[i]);e.plot3dPixelRatio&&!a.plotGlPixelRatio&&(a.plotGlPixelRatio=a.plot3dPixelRatio);var o=e.editable;if(void 0!==o)for(a.editable=o,n=Object.keys(a.edits),r=0;r<n.length;r++)a.edits[n[r]]=o;if(e.edits)for(n=Object.keys(e.edits),r=0;r<n.length;r++)(i=n[r])in a.edits&&(a.edits[i]=e.edits[i])}a.staticPlot&&(a.editable=!1,a.edits={},a.autosizable=!1,a.scrollZoom=!1,a.doubleClick=!1,a.showTips=!1,a.showLink=!1,a.displayModeBar=!1),"hover"!==a.displayModeBar||Ue||(a.displayModeBar=!0),"transparent"!==a.setBackground&&"function"==typeof a.setBackground||(a.setBackground=eh)}function ih(t,e){var r,n,i=e+1,a=[];for(r=0;r<t.length;r++)(n=t[r])<0?a.push(i+n):a.push(n);return a}function ah(t,e,r){var n,i;for(n=0;n<e.length;n++){if((i=e[n])!==parseInt(i,10))throw new Error("all values in "+r+" must be integers");if(i>=t.data.length||i<-t.data.length)throw new Error(r+" must be valid indices for gd.data.");if(e.indexOf(i,n+1)>-1||i>=0&&e.indexOf(-t.data.length+i)>-1||i<0&&e.indexOf(t.data.length+i)>-1)throw new Error("each index in "+r+" must be unique.")}}function oh(t,e,r){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),ah(t,e,"currentIndices"),void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&ah(t,r,"newIndices"),void 0!==r&&e.length!==r.length)throw new Error("current and new indices must be of equal length.")}function sh(t,r,n,i,a){!function(t,e,r,n){var i=re.isPlainObject(n);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!re.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===r)throw new Error("indices must be an integer or array of integers");for(var a in ah(t,r,"indices"),e){if(!Array.isArray(e[a])||e[a].length!==r.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(i&&(!(a in n)||!Array.isArray(n[a])||n[a].length!==e[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,r,n,i);for(var o=function(t,r,n,i){var a,o,s,l,u,c=re.isPlainObject(i),h=[];for(var f in Array.isArray(n)||(n=[n]),n=ih(n,t.data.length-1),r)for(var d=0;d<n.length;d++){if(a=t.data[n[d]],o=(s=re.nestedProperty(a,f)).get(),l=r[f][d],!re.isArrayOrTypedArray(l))throw new Error("attribute: "+f+" index: "+d+" must be an array");if(!re.isArrayOrTypedArray(o))throw new Error("cannot extend missing or non-array attribute: "+f);if(o.constructor!==l.constructor)throw new Error("cannot extend array with an array of a different type: "+f);u=c?i[f][d]:i,e(u)||(u=-1),h.push({prop:s,target:o,insert:l,maxp:Math.floor(u)})}return h}(t,r,n,i),s={},l={},u=0;u<o.length;u++){var c=o[u].prop,h=o[u].maxp,f=a(o[u].target,o[u].insert,h);c.set(f[0]),Array.isArray(s[c.astr])||(s[c.astr]=[]),s[c.astr].push(f[1]),Array.isArray(l[c.astr])||(l[c.astr]=[]),l[c.astr].push(o[u].target.length)}return{update:s,maxPoints:l}}function lh(t,e){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}function uh(t){return void 0===t?null:t}function ch(t,e,r){var n,i,a=t._fullLayout,o=t._fullData,s=t.data,l=gr.traceFlags(),u={},c={};function h(){return r.map(function(){})}function f(t){var e=Ki.id2name(t);-1===i.indexOf(e)&&i.push(e)}function d(t){return"LAYOUT"+t+".autorange"}function p(t){return"LAYOUT"+t+".range"}function g(n,i,a){var o;Array.isArray(n)?n.forEach(function(t){g(t,i,a)}):n in e||su.hasParent(e,n)||(o="LAYOUT"===n.substr(0,6)?re.nestedProperty(t.layout,n.replace("LAYOUT","")):re.nestedProperty(s[r[a]],n),n in c||(c[n]=h()),void 0===c[n][a]&&(c[n][a]=uh(o.get())),void 0!==i&&o.set(i))}for(var v in e){if(su.hasParent(e,v))throw new Error("cannot set "+v+"and a parent attribute simultaneously");var m,y,b,x,_,w,M=e[v];if(u[v]=M,"LAYOUT"!==v.substr(0,6)){for(c[v]=h(),n=0;n<r.length;n++)if(m=s[r[n]],y=o[r[n]],x=(b=re.nestedProperty(m,v)).get(),void 0!==(_=Array.isArray(M)?M[n%M.length]:M)){if((w=Jn.getTraceValObject(y,b.parts))&&w.impliedEdits&&null!==_)for(var A in w.impliedEdits)g(re.relativeAttr(v,A),w.impliedEdits[A],n);else if("colorbar.thicknessmode"===v&&b.get()!==_&&-1!==["fraction","pixels"].indexOf(_)&&y.colorbar){var T=-1!==["top","bottom"].indexOf(y.colorbar.orient)?a.height-a.margin.t-a.margin.b:a.width-a.margin.l-a.margin.r;g("colorbar.thickness",y.colorbar.thickness*("fraction"===_?1/T:T),n)}else if("colorbar.lenmode"===v&&b.get()!==_&&-1!==["fraction","pixels"].indexOf(_)&&y.colorbar){var k=-1!==["top","bottom"].indexOf(y.colorbar.orient)?a.width-a.margin.l-a.margin.r:a.height-a.margin.t-a.margin.b;g("colorbar.len",y.colorbar.len*("fraction"===_?1/k:k),n)}else"colorbar.tick0"!==v&&"colorbar.dtick"!==v||g("colorbar.tickmode","linear",n);if("type"===v&&"pie"===_!=("pie"===x)){var E="x",L="y";"bar"!==_&&"bar"!==x||"h"!==m.orientation||(E="y",L="x"),re.swapAttrs(m,["?","?src"],"labels",E),re.swapAttrs(m,["d?","?0"],"label",E),re.swapAttrs(m,["?","?src"],"values",L),"pie"===x?(re.nestedProperty(m,"marker.color").set(re.nestedProperty(m,"marker.colors").get()),a._pielayer.selectAll("g.trace").remove()):R.traceIs(m,"cartesian")&&re.nestedProperty(m,"marker.colors").set(re.nestedProperty(m,"marker.color").get())}c[v][n]=uh(x);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(v)){if("orientation"===v){b.set(_);var C=m.x&&!m.y?"h":"v";if((b.get()||C)===y.orientation)continue}else"orientationaxes"===v&&(m.orientation={v:"h",h:"v"}[y.orientation]);su.swapXYData(m),l.calc=l.clearAxisTypes=!0}else-1!==vi.dataArrayContainers.indexOf(b.parts[0])?(su.manageArrayContainers(b,_,c),l.calc=!0):(w?w.arrayOk&&(re.isArrayOrTypedArray(_)||re.isArrayOrTypedArray(x))?l.calc=!0:gr.update(l,w):l.calc=!0,b.set(_))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(v)&&Ki.swap(t,r),"orientationaxes"===v){var S=re.nestedProperty(t.layout,"hovermode");"x"===S.get()?S.set("y"):"y"===S.get()&&S.set("x")}if(-1!==["orientation","type"].indexOf(v)){for(i=[],n=0;n<r.length;n++){var P=s[r[n]];R.traceIs(P,"cartesian")&&(f(P.xaxis||"x"),f(P.yaxis||"y"),"type"===v&&g(["autobinx","autobiny"],!0,n))}g(i.map(d),!0,0),g(i.map(p),[0,1],0)}}else b=re.nestedProperty(t.layout,v.replace("LAYOUT","")),c[v]=[uh(b.get())],b.set(Array.isArray(M)?M[0]:M),l.calc=!0}var O=!1,I=Ki.list(t);for(n=0;n<I.length;n++)if(I[n].autorange){O=!0;break}return(l.calc||l.calcIfAutorange&&O)&&(l.clearCalc=!0),(l.calc||l.plot||l.calcIfAutorange)&&(l.fullReplot=!0),{flags:l,undoit:c,redoit:u,traces:r,eventData:re.extendDeepNoArrays([],[u,r])}}function hh(t,e){var r,n,i,a=t.layout,o=t._fullLayout,s=Object.keys(e),l=Ki.list(t),u={};for(n=0;n<s.length;n++)if(0===s[n].indexOf("allaxes")){for(i=0;i<l.length;i++){var c=l[i]._id.substr(1),h=-1!==c.indexOf("scene")?c+".":"",f=s[n].replace("allaxes",h+l[i]._name);e[f]||(e[f]=e[s[n]])}delete e[s[n]]}var d=gr.layoutFlags(),p={},g={};function v(t,r){if(Array.isArray(t))t.forEach(function(t){v(t,r)});else if(!(t in e||su.hasParent(e,t))){var n=re.nestedProperty(a,t);t in g||(g[t]=uh(n.get())),void 0!==r&&n.set(r)}}var m,y={};function b(t){var e=Ki.name2id(t.split(".")[0]);return y[e]=1,e}for(var x in e){if(su.hasParent(e,x))throw new Error("cannot set "+x+"and a parent attribute simultaneously");for(var _=re.nestedProperty(a,x),w=e[x],M=_.parts.length,A=M-1;A>0&&"string"!=typeof _.parts[M-1];)A--;var T=_.parts[A],k=_.parts[A-1]+"."+T,E=_.parts.slice(0,A).join("."),L=re.nestedProperty(t.layout,E).get(),C=re.nestedProperty(o,E).get(),S=_.get();if(void 0!==w){p[x]=w,g[x]="reverse"===T?w:uh(S);var P=Jn.getLayoutValObject(o,_.parts);if(P&&P.impliedEdits&&null!==w)for(var O in P.impliedEdits)v(re.relativeAttr(x,O),P.impliedEdits[O]);if(-1!==["width","height"].indexOf(x)&&null===w)o[x]=t._initialAutoSize[x];else if(k.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/))b(k),re.nestedProperty(o,E+"._inputRange").set(null);else if(k.match(/^[xyz]axis[0-9]*\.autorange$/)){b(k),re.nestedProperty(o,E+"._inputRange").set(null);var I=re.nestedProperty(o,E).get();I._inputDomain&&(I._input.domain=I._inputDomain.slice())}else k.match(/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/)&&re.nestedProperty(o,E+"._inputDomain").set(null);if("type"===T){var N=L,D="linear"===C.type&&"log"===w,z="log"===C.type&&"linear"===w;if(D||z){if(N&&N.range)if(C.autorange)D&&(N.range=N.range[1]>N.range[0]?[1,2]:[2,1]);else{var F=N.range[0],j=N.range[1];D?(F<=0&&j<=0&&v(E+".autorange",!0),F<=0?F=j/1e6:j<=0&&(j=F/1e6),v(E+".range[0]",Math.log(F)/Math.LN10),v(E+".range[1]",Math.log(j)/Math.LN10)):(v(E+".range[0]",Math.pow(10,F)),v(E+".range[1]",Math.pow(10,j)))}else v(E+".autorange",!0);Array.isArray(o._subplots.polar)&&o._subplots.polar.length&&o[_.parts[0]]&&"radialaxis"===_.parts[1]&&delete o[_.parts[0]]._subplot.viewInitial["radialaxis.range"],R.getComponentMethod("annotations","convertCoords")(t,C,w,v),R.getComponentMethod("images","convertCoords")(t,C,w,v)}else v(E+".autorange",!0),v(E+".range",null);re.nestedProperty(o,E+"._inputRange").set(null)}else if(T.match(Oe.AX_NAME_PATTERN)){var B=re.nestedProperty(o,x).get(),U=(w||{}).type;U&&"-"!==U||(U="linear"),R.getComponentMethod("annotations","convertCoords")(t,B,U,v),R.getComponentMethod("images","convertCoords")(t,B,U,v)}var V=vu.containerArrayMatch(x);if(V){r=V.array,n=V.index;var H=V.property,q=(re.nestedProperty(a,r)||[])[n]||{},G=q,X=P||{editType:"calc"},W=-1!==X.editType.indexOf("calcIfAutorange");""===n?(W?d.calc=!0:gr.update(d,X),W=!1):""===H&&(G=w,vu.isAddVal(w)?g[x]=null:vu.isRemoveVal(w)?(g[x]=q,G=q):re.warn("unrecognized full object value",e)),W&&(dh(t,G,"x")||dh(t,G,"y"))?d.calc=!0:gr.update(d,X),u[r]||(u[r]={});var Y=u[r][n];Y||(Y=u[r][n]={}),Y[H]=w,delete e[x]}else"reverse"===T?(L.range?L.range.reverse():(v(E+".autorange",!0),L.range=[1,0]),C.autorange?d.calc=!0:d.plot=!0):(o._has("scatter-like")&&o._has("regl")&&"dragmode"===x&&("lasso"===w||"select"===w)&&"lasso"!==S&&"select"!==S?d.plot=!0:P?gr.update(d,P):d.calc=!0,_.set(w))}}for(r in u){vu.applyContainerArrayChanges(t,re.nestedProperty(a,r),u[r],d)||(d.plot=!0)}var Z=o._axisConstraintGroups||[];for(m in y)for(n=0;n<Z.length;n++){var Q=Z[n];if(Q[m])for(var K in d.calc=!0,Q)y[K]||(Ki.getFromId(t,K)._constraintShrinkable=!0)}return(fh(t)||e.height||e.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,undoit:g,redoit:p,eventData:re.extendDeep({},p)}}function fh(t){var e=t._fullLayout,r=e.width,n=e.height;return t.layout.autosize&&vi.plotAutoSize(t,t.layout,e),e.width!==r||e.height!==n}function dh(t,e,r){if(!re.isPlainObject(e))return!1;var n=e[r+"ref"]||r,i=Ki.getFromId(t,n);return i||n.charAt(0)!==r||(i=Ki.getFromId(t,r)),(i||{}).autorange}function ph(t,e,r,n){var i,a,o=n.getValObject,s=n.flags,l=n.immutable,u=n.inArray,c=n.arrayIndex,h=n.gd,f=n.autoranged;function d(){var t=i.editType;-1!==t.indexOf("calcIfAutorange")&&(f||void 0===f&&(dh(h,e,"x")||dh(h,e,"y")))?s.calc=!0:u&&-1!==t.indexOf("arraydraw")?re.pushUnique(s.arrays[u],c):gr.update(s,i)}function p(t){return"data_array"===t.valType||t.arrayOk}var g=e._fullInput,v=t._fullInput;for(a in g&&g!==e&&(e=g),v&&v!==t&&(t=v),t){if(s.calc)return;var m=t[a],y=e[a];if("_"!==a.charAt(0)&&"function"!=typeof m&&m!==y){if("tick0"===a||"dtick"===a){var b=e.tickmode;if("auto"===b||"array"===b||!b)continue}if(("range"!==a||!e.autorange)&&("zmin"!==a&&"zmax"!==a||"contourcarpet"!==e.type)){var x=r.concat(a);if(i=o(x)){var _,w=i.valType,M=p(i),A=Array.isArray(m),T=Array.isArray(y);if(A&&T){var k="_input_"+a,E=t[k],L=e[k];if(Array.isArray(E)&&E===L)continue}if(void 0===y)M&&A?s.calc=!0:d();else if(i._isLinkedToArray){var C=[],S=!1;u||(s.arrays[a]=C);var P=Math.min(m.length,y.length),R=Math.max(m.length,y.length);if(P!==R){if("arraydraw"!==i.editType){d();continue}S=!0}for(_=0;_<P;_++)ph(m[_],y[_],x.concat(_),re.extendFlat({inArray:a,arrayIndex:_},n));if(S)for(_=P;_<R;_++)C.push(_)}else!w&&re.isPlainObject(m)?ph(m,y,x,n):M?A&&T?l&&(s.calc=!0):A!==T?s.calc=!0:d():A&&T&&m.length===y.length&&String(m)===String(y)||d()}}}}for(a in e)if(!(a in t||"_"===a.charAt(0)||"function"==typeof e[a])){if(p(i=o(r.concat(a)))&&Array.isArray(e[a]))return void(s.calc=!0);d()}}function gh(e){var r=t.select(e),n=e._fullLayout;if(n._container=r.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._glcanvas=null,n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var i=[];t.selectAll("defs").each(function(){this.id&&i.push(this.id.split("-")[1])}),n._uid=re.randstr(i)}n._paperdiv.selectAll(".main-svg").attr(Dr.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var a=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=a.append("g").classed("imagelayer",!0),n._shapeLowerLayer=a.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var o=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=o.append("g").classed("imagelayer",!0),n._shapeUpperLayer=o.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework")}Qc.plot=function(e,r,n,i){var a;if(e=re.getGraphDiv(e),tr.init(e),re.isPlainObject(r)){var o=r;r=o.data,n=o.layout,i=o.config,a=o.frames}if(!1===tr.triggerHandler(e,"plotly_beforeplot",[r,n,i]))return Promise.reject();r||n||re.isPlotDiv(e)||re.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",e),nh(e,i),n||(n={}),t.select(e).classed("js-plotly-plot",!0),hn.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var s=0===(e.data||[]).length&&Array.isArray(r);if(Array.isArray(r)&&(su.cleanData(r,e.data),s?e.data=r:e.data.push.apply(e.data,r),e.empty=!1),e.layout&&!s||(e.layout=su.cleanLayout(n)),e._dragging&&!e._transitioning)return e._replotPending=!0,Promise.reject();e._replotPending=!1,vi.supplyDefaults(e);var l=e._fullLayout,u=l._has("cartesian");if(!l._has("polar")&&r&&r[0]&&r[0].r)return re.log("Legacy polar charts are deprecated!"),function(e,r,n){var i=t.select(e).selectAll(".plot-container").data([0]);i.enter().insert("div",":first-child").classed("plot-container plotly",!0);var a=i.selectAll(".svg-container").data([0]);a.enter().append("div").classed("svg-container",!0).style("position","relative"),a.html(""),r&&(e.data=r);n&&(e.layout=n);Zc.manager.fillLayout(e),a.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=Zc.manager.framework(e),e.framework({data:e.data,layout:e.layout},a.node()),e.framework.setUndoPoint();var o=e.framework.svg(),s=1,l=e._fullLayout.title;""!==l&&l||(s=0);var u=function(){this.call(Fr.convertToTspans,e)},c=o.select(".title-group text").call(u);if(e._context.edits.titleText){var h=re._(e,"Click to enter Plot title");l&&l!==h||(s=.2,c.attr({"data-unformatted":h}).text(h).style({opacity:s}).on("mouseover.opacity",function(){t.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){t.select(this).transition().duration(1e3).style("opacity",0)}));var f=function(){this.call(Fr.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:t}}),this.text(t).call(u),this.call(f)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(u)})};c.call(f)}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),vi.addLinks(e),Promise.resolve()}(e,r,n);l._replotting=!0,s&&gh(e),e.framework!==gh&&(e.framework=gh,gh(e)),hn.initGradients(e),s&&Ki.saveShowSpikeInitial(e);var c=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;c&&vi.doCalcdata(e);for(var h=0;h<e.calcdata.length;h++)e.calcdata[h][0].trace=e._fullData[h];var f=JSON.stringify(l._size);function d(){var t,r,n,i=e.calcdata;for(R.getComponentMethod("legend","draw")(e),R.getComponentMethod("rangeselector","draw")(e),R.getComponentMethod("sliders","draw")(e),R.getComponentMethod("updatemenus","draw")(e),t=0;t<i.length;t++)!0===(n=(r=i[t])[0].trace).visible&&n._module.colorbar?n._module.colorbar(e,r):vi.autoMargin(e,"cb"+n.uid);return vi.doAutoMargin(e),vi.previousPromises(e)}function p(){if(!e._transitioning){for(var t=Ki.list(e,"",!0),r=0;r<t.length;r++){var n=t[r];$c(e,n),Jc(n)}Kc(e),s&&Ki.saveRangeInitial(e)}}var g=[vi.previousPromises,function(){if(a)return Qc.addFrames(e,a)},function(){for(var t=l._basePlotModules,r=0;r<t.length;r++)t[r].drawFramework&&t[r].drawFramework(e);return!l._glcanvas&&l._has("gl")&&(l._glcanvas=l._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),l._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})),l._glcanvas&&l._glcanvas.attr("width",l.width).attr("height",l.height),re.syncOrAsync([Rc.layoutStyles],e)},d,function(){if(JSON.stringify(l._size)!==f)return re.syncOrAsync([d,Rc.layoutStyles],e)}];u&&g.push(function(){if(c){var t,r,n,i=l._subplots.cartesian,a=l._modules,o=[];for(n=0;n<a.length;n++)re.pushUnique(o,a[n].setPositions);if(o.length)for(r=0;r<i.length;r++)for(t=l._plots[i[r]],n=0;n<o.length;n++)o[n](e,t);return R.getComponentMethod("errorbars","calc")(e),re.syncOrAsync([R.getComponentMethod("shapes","calcAutorange"),R.getComponentMethod("annotations","calcAutorange"),p,R.getComponentMethod("rangeslider","calcAutorange")],e)}p()}),g.push(Rc.layoutStyles),u&&g.push(function(){return Ki.doTicks(e,"redraw")}),g.push(function(){var t,r=e.calcdata,n=l._infolayer.selectAll("g.rangeslider-container");for(t=0;t<r.length;t++){var i=r[t][0].trace,a=!0===i.visible,o=i.uid;if(!a||!R.traceIs(i,"2dMap")){var s=".hm"+o+",.contour"+o+",#clip"+o;l._paper.selectAll(s).remove(),n.selectAll(s).remove()}a&&i._module.colorbar||l._infolayer.selectAll(".cb"+o).remove()}var u=l._basePlotModules;for(t=0;t<u.length;t++)u[t].plot(e);var c=l._paper.selectAll(".layer-subplot");return l._shapeSubplotLayers=c.selectAll(".shapelayer"),vi.style(e),R.getComponentMethod("shapes","draw")(e),R.getComponentMethod("annotations","draw")(e),vi.addLinks(e),l._replotting=!1,vi.previousPromises(e)},function(){R.getComponentMethod("shapes","draw")(e),R.getComponentMethod("images","draw")(e),R.getComponentMethod("annotations","draw")(e),R.getComponentMethod("legend","draw")(e),R.getComponentMethod("rangeslider","draw")(e),R.getComponentMethod("rangeselector","draw")(e),R.getComponentMethod("sliders","draw")(e),R.getComponentMethod("updatemenus","draw")(e)},Pc,vi.rehover,vi.previousPromises);var v=re.syncOrAsync(g,e);return v&&v.then||(v=Promise.resolve()),v.then(function(){return e.emit("plotly_afterplot"),e})},Qc.setPlotConfig=function(t){return re.extendFlat(x,t)},Qc.redraw=function(t){if(t=re.getGraphDiv(t),!re.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return su.cleanData(t.data,t.data),su.cleanLayout(t.layout),t.calcdata=void 0,Qc.plot(t).then(function(){return t.emit("plotly_redraw"),t})},Qc.newPlot=function(t,e,r,n){return t=re.getGraphDiv(t),vi.cleanPlot([],{},t._fullData||{},t._fullLayout||{}),vi.purge(t),Qc.plot(t,e,r,n)},Qc.extendTraces=function t(e,r,n,i){var a=sh(e=re.getGraphDiv(e),r,n,i,function(t,e,r){var n,i;if(re.isTypedArray(t))if(r<0){var a=new t.constructor(0),o=lh(t,e);r<0?(n=o,i=a):(n=a,i=o)}else if(n=new t.constructor(r),i=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),i.set(t);else if(r<e.length){var s=e.length-r;n.set(e.subarray(s)),i.set(t),i.set(e.subarray(0,s),t.length)}else{var l=r-e.length,u=t.length-l;n.set(t.subarray(u)),n.set(e,l),i.set(t.subarray(0,u))}else n=t.concat(e),i=r>=0&&r<n.length?n.splice(0,n.length-r):[];return[n,i]}),o=Qc.redraw(e),s=[e,a.update,n,a.maxPoints];return au.add(e,Qc.prependTraces,s,t,arguments),o},Qc.prependTraces=function t(e,r,n,i){var a=sh(e=re.getGraphDiv(e),r,n,i,function(t,e,r){var n,i;if(re.isTypedArray(t))if(r<=0){var a=new t.constructor(0),o=lh(e,t);r<0?(n=o,i=a):(n=a,i=o)}else if(n=new t.constructor(r),i=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),i.set(t);else if(r<e.length){var s=e.length-r;n.set(e.subarray(0,s)),i.set(e.subarray(s)),i.set(t,s)}else{var l=r-e.length;n.set(e),n.set(t.subarray(0,l),e.length),i.set(t.subarray(l))}else n=e.concat(t),i=r>=0&&r<n.length?n.splice(r,n.length):[];return[n,i]}),o=Qc.redraw(e),s=[e,a.update,n,a.maxPoints];return au.add(e,Qc.extendTraces,s,t,arguments),o},Qc.addTraces=function t(e,r,n){e=re.getGraphDiv(e);var i,a,o=[],s=Qc.deleteTraces,l=t,u=[e,o],c=[e,r];for(function(t,e,r){var n,i;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),n=0;n<e.length;n++)if("object"!=typeof(i=e[n])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&r.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,r,n),Array.isArray(r)||(r=[r]),r=r.map(function(t){return re.extendFlat({},t)}),su.cleanData(r,e.data),i=0;i<r.length;i++)e.data.push(r[i]);for(i=0;i<r.length;i++)o.push(-r.length+i);if(void 0===n)return a=Qc.redraw(e),au.add(e,s,u,l,c),a;Array.isArray(n)||(n=[n]);try{oh(e,o,n)}catch(t){throw e.data.splice(e.data.length-r.length,r.length),t}return au.startSequence(e),au.add(e,s,u,l,c),a=Qc.moveTraces(e,o,n),au.stopSequence(e),a},Qc.deleteTraces=function t(e,r){e=re.getGraphDiv(e);var n,i,a=[],o=Qc.addTraces,s=t,l=[e,a,r],u=[e,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),ah(e,r,"indices"),(r=ih(r,e.data.length-1)).sort(re.sorterDes),n=0;n<r.length;n+=1)i=e.data.splice(r[n],1)[0],a.push(i);var c=Qc.redraw(e);return au.add(e,o,l,s,u),c},Qc.moveTraces=function t(e,r,n){var i,a=[],o=[],s=t,l=t,u=[e=re.getGraphDiv(e),n,r],c=[e,r,n];if(oh(e,r,n),r=Array.isArray(r)?r:[r],void 0===n)for(n=[],i=0;i<r.length;i++)n.push(-r.length+i);for(n=Array.isArray(n)?n:[n],r=ih(r,e.data.length-1),n=ih(n,e.data.length-1),i=0;i<e.data.length;i++)-1===r.indexOf(i)&&a.push(e.data[i]);for(i=0;i<r.length;i++)o.push({newIndex:n[i],trace:e.data[r[i]]});for(o.sort(function(t,e){return t.newIndex-e.newIndex}),i=0;i<o.length;i+=1)a.splice(o[i].newIndex,0,o[i].trace);e.data=a;var h=Qc.redraw(e);return au.add(e,s,u,l,c),h},Qc.restyle=function t(e,r,n,i){e=re.getGraphDiv(e),su.clearPromiseQueue(e);var a={};if("string"==typeof r)a[r]=n;else{if(!re.isPlainObject(r))return re.warn("Restyle fail.",r,n,i),Promise.reject();a=re.extendFlat({},r),void 0===i&&(i=n)}Object.keys(a).length&&(e.changed=!0);var o=su.coerceTraceIndices(e,i),s=ch(e,a,o),l=s.flags;l.clearCalc&&(e.calcdata=void 0),l.clearAxisTypes&&su.clearAxisTypes(e,o,{});var u=[];l.fullReplot?u.push(Qc.plot):(u.push(vi.previousPromises),vi.supplyDefaults(e),l.style&&u.push(Rc.doTraceStyle),l.colorbars&&u.push(Rc.doColorBars)),u.push(vi.rehover),au.add(e,t,[e,s.undoit,s.traces],t,[e,s.redoit,s.traces]);var c=re.syncOrAsync(u,e);return c&&c.then||(c=Promise.resolve()),c.then(function(){return e.emit("plotly_restyle",s.eventData),e})},Qc.relayout=function t(e,r,n){if(e=re.getGraphDiv(e),su.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);var i={};if("string"==typeof r)i[r]=n;else{if(!re.isPlainObject(r))return re.warn("Relayout fail.",r,n),Promise.reject();i=re.extendFlat({},r)}Object.keys(i).length&&(e.changed=!0);var a=hh(e,i),o=a.flags;o.calc&&(e.calcdata=void 0),o.margins&&su.clearAxisAutomargins(e);var s=[vi.previousPromises];o.layoutReplot?s.push(Rc.layoutReplot):Object.keys(i).length&&(vi.supplyDefaults(e),o.legend&&s.push(Rc.doLegend),o.layoutstyle&&s.push(Rc.layoutStyles),o.ticks&&s.push(Rc.doTicksRelayout),o.modebar&&s.push(Rc.doModeBar),o.camera&&s.push(Rc.doCamera)),s.push(vi.rehover),au.add(e,t,[e,a.undoit],t,[e,a.redoit]);var l=re.syncOrAsync(s,e);return l&&l.then||(l=Promise.resolve(e)),l.then(function(){return e.emit("plotly_relayout",a.eventData),e})},Qc.update=function t(e,r,n,i){if(e=re.getGraphDiv(e),su.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);re.isPlainObject(r)||(r={}),re.isPlainObject(n)||(n={}),Object.keys(r).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var a=su.coerceTraceIndices(e,i),o=ch(e,re.extendFlat({},r),a),s=o.flags,l=hh(e,re.extendFlat({},n)),u=l.flags;(s.clearCalc||u.calc)&&(e.calcdata=void 0),s.clearAxisTypes&&su.clearAxisTypes(e,a,n),u.margins&&su.clearAxisAutomargins(e);var c=[];if(s.fullReplot&&u.layoutReplot){var h=e.data,f=e.layout;e.data=void 0,e.layout=void 0,c.push(function(){return Qc.plot(e,h,f)})}else s.fullReplot?c.push(Qc.plot):u.layoutReplot?c.push(Rc.layoutReplot):(c.push(vi.previousPromises),vi.supplyDefaults(e),s.style&&c.push(Rc.doTraceStyle),s.colorbars&&c.push(Rc.doColorBars),u.legend&&c.push(Rc.doLegend),u.layoutstyle&&c.push(Rc.layoutStyles),u.ticks&&c.push(Rc.doTicksRelayout),u.modebar&&c.push(Rc.doModeBar),u.camera&&c.push(Rc.doCamera));c.push(vi.rehover),au.add(e,t,[e,o.undoit,l.undoit,o.traces],t,[e,o.redoit,l.redoit,o.traces]);var d=re.syncOrAsync(c,e);return d&&d.then||(d=Promise.resolve(e)),d.then(function(){return e.emit("plotly_update",{data:o.eventData,layout:l.eventData}),e})},Qc.react=function(t,e,r,n){var i,a;var o=(t=re.getGraphDiv(t))._fullData,s=t._fullLayout;if(re.isPlotDiv(t)&&o&&s){if(re.isPlainObject(e)){var l=e;e=l.data,r=l.layout,n=l.config,i=l.frames}var u=!1;if(n){var c=re.extendDeep({},t._context);t._context=void 0,nh(t,n),u=function t(e,r){var n;for(n in e){var i=e[n],a=r[n];if(i!==a)if(re.isPlainObject(i)&&re.isPlainObject(a)){if(t(i,a))return!0}else{if(!Array.isArray(i)||!Array.isArray(a))return!0;if(i.length!==a.length)return!0;for(var o=0;o<i.length;o++)if(i[o]!==a[o]){if(!re.isPlainObject(i[o])||!re.isPlainObject(a[o]))return!0;if(t(i[o],a[o]))return!0}}}}(c,t._context)}t.data=e||[],su.cleanData(t.data,[]),t.layout=r||{},su.cleanLayout(t.layout),vi.supplyDefaults(t);var h=t._fullData,f=t._fullLayout,d=void 0===f.datarevision,p=function(t,e,r,n){if(e.length!==r.length)return{fullReplot:!0,clearCalc:!0};var i,a,o=gr.traceFlags();o.arrays={};var s={getValObject:function(t){return Jn.getTraceValObject(a,t)},flags:o,immutable:n,gd:t};for(i=0;i<e.length;i++)a=r[i],s.autoranged=!!a.xaxis&&(Ki.getFromId(t,a.xaxis).autorange||Ki.getFromId(t,a.yaxis).autorange),ph(e[i],a,[],s);(o.calc||o.plot||o.calcIfAutorange)&&(o.fullReplot=!0);return o}(t,o,h,d),g=function(t,e,r,n){var i=gr.layoutFlags();i.arrays={},ph(e,r,[],{getValObject:function(t){return Jn.getLayoutValObject(r,t)},flags:i,immutable:n,gd:t}),(i.plot||i.calc)&&(i.layoutReplot=!0);return i}(t,s,f,d);fh(t)&&(g.layoutReplot=!0),(p.calc||g.calc)&&(t.calcdata=void 0),g.margins&&su.clearAxisAutomargins(t);var v=[];if(i&&(t._transitionData={},vi.createTransitionData(t),v.push(function(){return Qc.addFrames(t,i)})),p.fullReplot||g.layoutReplot||u)t._fullLayout._skipDefaults=!0,v.push(Qc.plot);else{for(var m in g.arrays){var y=g.arrays[m];if(y.length){var b=R.getComponentMethod(m,"drawOne");if(b!==re.noop)for(var x=0;x<y.length;x++)b(t,y[x]);else{var _=R.getComponentMethod(m,"draw");if(_===re.noop)throw new Error("cannot draw components: "+m);_(t)}}}v.push(vi.previousPromises),p.style&&v.push(Rc.doTraceStyle),p.colorbars&&v.push(Rc.doColorBars),g.legend&&v.push(Rc.doLegend),g.layoutstyle&&v.push(Rc.layoutStyles),g.ticks&&v.push(Rc.doTicksRelayout),g.modebar&&v.push(Rc.doModeBar),g.camera&&v.push(Rc.doCamera)}v.push(vi.rehover),(a=re.syncOrAsync(v,t))&&a.then||(a=Promise.resolve(t))}else a=Qc.newPlot(t,e,r,n);return a.then(function(){return t.emit("plotly_react",{data:e,layout:r}),t})},Qc.animate=function(t,e,r){if(t=re.getGraphDiv(t),!re.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var n=t._transitionData;n._frameQueue||(n._frameQueue=[]);var i=(r=vi.supplyAnimationDefaults(r)).transition,a=r.frame;function o(t){return Array.isArray(i)?t>=i.length?i[0]:i[t]:i}function s(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function l(t,e){var r=0;return function(){if(t&&++r===e)return t()}}return void 0===n._frameWaitingCnt&&(n._frameWaitingCnt=0),new Promise(function(a,u){function c(){n._currentFrame&&n._currentFrame.onComplete&&n._currentFrame.onComplete();var e=n._currentFrame=n._frameQueue.shift();if(e){var r=e.name?e.name.toString():null;t._fullLayout._currentFrame=r,n._lastFrameAt=Date.now(),n._timeToNext=e.frameOpts.duration,vi.transition(t,e.frame.data,e.frame.layout,su.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),t.emit("plotly_animatingframe",{name:r,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(n._animationRaf),n._animationRaf=null}function h(){t.emit("plotly_animating"),n._lastFrameAt=-1/0,n._timeToNext=0,n._runningTransitions=0,n._currentFrame=null;var e=function(){n._animationRaf=window.requestAnimationFrame(e),Date.now()-n._lastFrameAt>n._timeToNext&&c()};e()}var f,d,p=0;function g(t){return Array.isArray(i)?p>=i.length?t.transitionOpts=i[p]:t.transitionOpts=i[0]:t.transitionOpts=i,p++,t}var v=[],m=void 0===e||null===e,y=Array.isArray(e);if(!m&&!y&&re.isPlainObject(e))v.push({type:"object",data:g(re.extendFlat({},e))});else if(m||-1!==["string","number"].indexOf(typeof e))for(f=0;f<n._frames.length;f++)(d=n._frames[f])&&(m||String(d.group)===String(e))&&v.push({type:"byname",name:String(d.name),data:g({name:d.name})});else if(y)for(f=0;f<e.length;f++){var b=e[f];-1!==["number","string"].indexOf(typeof b)?(b=String(b),v.push({type:"byname",name:b,data:g({name:b})})):re.isPlainObject(b)&&v.push({type:"object",data:g(re.extendFlat({},b))})}for(f=0;f<v.length;f++)if("byname"===(d=v[f]).type&&!n._frameHash[d.data.name])return re.warn('animate failure: frame not found: "'+d.data.name+'"'),void u();-1!==["next","immediate"].indexOf(r.mode)&&function(){if(0!==n._frameQueue.length){for(;n._frameQueue.length;){var e=n._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===r.direction&&v.reverse();var x=t._fullLayout._currentFrame;if(x&&r.fromcurrent){var _=-1;for(f=0;f<v.length;f++)if("byname"===(d=v[f]).type&&d.name===x){_=f;break}if(_>0&&_<v.length-1){var w=[];for(f=0;f<v.length;f++)d=v[f],("byname"!==v[f].type||f>_)&&w.push(d);v=w}}v.length>0?function(e){if(0!==e.length){for(var i=0;i<e.length;i++){var c;c="byname"===e[i].type?vi.computeFrame(t,e[i].name):e[i].data;var f=s(i),d=o(i);d.duration=Math.min(d.duration,f.duration);var p={frame:c,name:e[i].name,frameOpts:f,transitionOpts:d};i===e.length-1&&(p.onComplete=l(a,2),p.onInterrupt=u),n._frameQueue.push(p)}"immediate"===r.mode&&(n._lastFrameAt=-1/0),n._animationRaf||h()}}(v):(t.emit("plotly_animated"),a())})},Qc.addFrames=function(t,e,r){if(t=re.getGraphDiv(t),null===e||void 0===e)return Promise.resolve();if(!re.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var n,i,a,o,s=t._transitionData._frames,l=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var u=s.length+2*e.length,c=[],h={};for(n=e.length-1;n>=0;n--)if(re.isPlainObject(e[n])){var f=e[n].name,d=(l[f]||h[f]||{}).name,p=e[n].name,g=l[d]||h[d];d&&p&&"number"==typeof p&&g&&th<5&&(th++,re.warn('addFrames: overwriting frame "'+(l[d]||h[d]).name+'" with a frame whose name of type "number" also equates to "'+d+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===th&&re.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),h[f]={name:f},c.push({frame:vi.supplyFrameDefaults(e[n]),index:r&&void 0!==r[n]&&null!==r[n]?r[n]:u+n})}c.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var v=[],m=[],y=s.length;for(n=c.length-1;n>=0;n--){if("number"==typeof(i=c[n].frame).name&&re.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;l[i.name="frame "+t._transitionData._counter++];);if(l[i.name]){for(a=0;a<s.length&&(s[a]||{}).name!==i.name;a++);v.push({type:"replace",index:a,value:i}),m.unshift({type:"replace",index:a,value:s[a]})}else o=Math.max(0,Math.min(c[n].index,y)),v.push({type:"insert",index:o,value:i}),m.unshift({type:"delete",index:o}),y++}var b=vi.modifyFrames,x=vi.modifyFrames,_=[t,m],w=[t,v];return au&&au.add(t,b,_,x,w),vi.modifyFrames(t,v)},Qc.deleteFrames=function(t,e){if(t=re.getGraphDiv(t),!re.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var r,n,i=t._transitionData._frames,a=[],o=[];if(!e)for(e=[],r=0;r<i.length;r++)e.push(r);for((e=e.slice(0)).sort(),r=e.length-1;r>=0;r--)n=e[r],a.push({type:"delete",index:n}),o.unshift({type:"insert",index:n,value:i[n]});var s=vi.modifyFrames,l=vi.modifyFrames,u=[t,o],c=[t,a];return au&&au.add(t,s,u,l,c),vi.modifyFrames(t,a)},Qc.purge=function(t){var e=(t=re.getGraphDiv(t))._fullLayout||{},r=t._fullData||[];return vi.cleanPlot([],{},r,e),vi.purge(t),tr.purge(t),e._container&&e._container.remove(),delete t._context,t};var vh={getDelay:function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},getRedrawFunc:function(t){var e=t._fullLayout||{};if(!(!(e._has&&e._has("polar"))&&t.data&&t.data[0]&&t.data[0].r))return function(){(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()})}}},mh=Ye.EventEmitter;var yh=function(t){var e=t.emitter||new mh,r=new Promise(function(n,i){var a=window.Image,o=t.svg,s=t.format||"png";if(re.isIE()&&"svg"!==s){var l=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return i(l),t.promise?r:e.emit("error",l)}var u=t.canvas,c=t.scale||1,h=c*(t.width||300),f=c*(t.height||150),d=u.getContext("2d"),p=new a,g="data:image/svg+xml,"+encodeURIComponent(o);u.width=h,u.height=f,p.onload=function(){var r;switch("svg"!==s&&d.drawImage(p,0,0,h,f),s){case"jpeg":r=u.toDataURL("image/jpeg");break;case"png":r=u.toDataURL("image/png");break;case"webp":r=u.toDataURL("image/webp");break;case"svg":r=g;break;default:var a="Image format is not jpeg, png, svg or webp.";if(i(new Error(a)),!t.promise)return e.emit("error",a)}n(r),t.promise||e.emit("success",r)},p.onerror=function(r){if(i(r),!t.promise)return e.emit("error",r)},p.src=g});return t.promise?r:e},bh=/"/g,xh=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");var _h=function(e,r,n){var i,a=e._fullLayout,o=a._paper,s=a._toppaper,l=a.width,u=a.height;o.insert("rect",":first-child").call(hn.setRect,0,0,l,u).call(Ne.fill,a.paper_bgcolor);var c=a._basePlotModules||[];for(i=0;i<c.length;i++){var h=c[i];h.toSVG&&h.toSVG(e)}if(s){var f=s.node().childNodes,d=Array.prototype.slice.call(f);for(i=0;i<d.length;i++){var p=d[i];p.childNodes.length&&o.node().appendChild(p)}}a._draggers&&a._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=t.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var r=this.style.fontFamily;r&&-1!==r.indexOf('"')&&e.style("font-family",r.replace(bh,"TOBESTRIPPED"))}else e.remove()}),o.selectAll(".point,.scatterpts").each(function(){var e=t.select(this),r=this.style.fill;r&&-1!==r.indexOf("url(")&&e.style("fill",r.replace(bh,"TOBESTRIPPED"))}),"pdf"!==r&&"eps"!==r||o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(Dr.xmlns,"xmlns",Dr.svg),o.node().setAttributeNS(Dr.xmlns,"xmlns:xlink",Dr.xlink),"svg"===r&&n&&(o.attr("width",n*l),o.attr("height",n*u),o.attr("viewBox","0 0 "+l+" "+u));var g=(new window.XMLSerializer).serializeToString(o.node());return g=function(e){var r=t.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":r.html(t).text()});return r.remove(),n}(g),g=(g=g.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(xh,"'"),re.isIE()&&(g=(g=(g=g.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),g},wh={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},Mh=/^data:image\/\w+;base64,/;var Ah=function(t,e){var r,n,i;function a(t){return!(t in e)||re.validate(e[t],wh[t])}if(e=e||{},re.isPlainObject(t)?(r=t.data||[],n=t.layout||{},i=t.config||{}):(t=re.getGraphDiv(t),r=re.extendDeep([],t.data),n=re.extendDeep({},t.layout),i=t._context),!a("width")||!a("height"))throw new Error("Height and width should be pixel values.");if(!a("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var o={};function s(t,r){return re.coerce(e,o,wh,t,r)}var l=s("format"),u=s("width"),c=s("height"),h=s("scale"),f=s("setBackground"),d=s("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var g=re.extendFlat({},n);u&&(g.width=u),c&&(g.height=c);var v=re.extendFlat({},i,{staticPlot:!0,setBackground:f}),m=vh.getRedrawFunc(p);function y(){return new Promise(function(t){setTimeout(t,vh.getDelay(p._fullLayout))})}function b(){return new Promise(function(t,e){var r=_h(p,l,h),n=p._fullLayout.width,i=p._fullLayout.height;if(Qc.purge(p),document.body.removeChild(p),"svg"===l)return t(d?r:"data:image/svg+xml,"+encodeURIComponent(r));var a=document.createElement("canvas");a.id=re.randstr(),yh({format:l,width:n,height:i,scale:h,canvas:a,svg:r,promise:!0}).then(t).catch(e)})}return new Promise(function(t,e){Qc.plot(p,r,g,v).then(m).then(y).then(b).then(function(e){t(function(t){return d?t.replace(Mh,""):t}(e))}).catch(function(t){e(t)})})},Th=re.isPlainObject,kh=Array.isArray,Eh=re.isArrayOrTypedArray;function Lh(t,e,r,n,i,a){a=a||[];for(var o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var u=a.slice();u.push(l);var c=t[l],h=e[l],f=Oh(r,l),d="info_array"===(f||{}).valType,p="colorscale"===(f||{}).valType,g=(f||{}).items;if(Rh(r,l))if(Th(c)&&Th(h))Lh(c,h,f,n,i,u);else if(d&&kh(c)){c.length>h.length&&n.push(Ph("unused",i,u.concat(h.length)));var v,m,y,b,x,_=h.length,w=Array.isArray(g);if(w&&(_=Math.min(_,g.length)),2===f.dimensions)for(m=0;m<_;m++)if(kh(c[m])){c[m].length>h[m].length&&n.push(Ph("unused",i,u.concat(m,h[m].length)));var M=h[m].length;for(v=0;v<(w?Math.min(M,g[m].length):M);v++)y=w?g[m][v]:g,b=c[m][v],x=h[m][v],re.validate(b,y)?x!==b&&x!==+b&&n.push(Ph("dynamic",i,u.concat(m,v),b,x)):n.push(Ph("value",i,u.concat(m,v),b))}else n.push(Ph("array",i,u.concat(m),c[m]));else for(m=0;m<_;m++)y=w?g[m]:g,b=c[m],x=h[m],re.validate(b,y)?x!==b&&x!==+b&&n.push(Ph("dynamic",i,u.concat(m),b,x)):n.push(Ph("value",i,u.concat(m),b))}else if(f.items&&!d&&kh(c)){var A,T,k=g[Object.keys(g)[0]],E=[];for(A=0;A<h.length;A++){var L=h[A]._index||A;(T=u.slice()).push(L),Th(c[L])&&Th(h[A])&&(E.push(L),Lh(c[L],h[A],k,n,i,T))}for(A=0;A<c.length;A++)(T=u.slice()).push(A),Th(c[A])?-1===E.indexOf(A)&&n.push(Ph("unused",i,T)):n.push(Ph("object",i,T,c[A]))}else!Th(c)&&Th(h)?n.push(Ph("object",i,u,c)):Eh(c)||!Eh(h)||d||p?l in e?re.validate(c,f)?"enumerated"===f.valType&&(f.coerceNumber&&c!==+h||c!==h)&&n.push(Ph("dynamic",i,u,c,h)):n.push(Ph("value",i,u,c)):n.push(Ph("unused",i,u,c)):n.push(Ph("array",i,u,c));else n.push(Ph("schema",i,u))}}return n}var Ch={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":Sh(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":Sh(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return Sh(t)+"key "+e+" is not part of the schema"},unused:function(t,e,r){var n=Th(r)?"container":"key";return Sh(t)+n+" "+e+" did not get coerced"},dynamic:function(t,e,r,n){return[Sh(t)+"key",e,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(t){return"Trace "+t[1]+" got defaulted to be not visible"},value:function(t,e,r){return[Sh(t)+"key "+e,"is set to an invalid value ("+r+")"].join(" ")}};function Sh(t){return kh(t)?"In data trace "+t[1]+", ":"In "+t+", "}function Ph(t,e,r,n,i){var a,o;r=r||"",kh(e)?(a=e[0],o=e[1]):(a=e,o=null);var s=function(t){if(!kh(t))return String(t);for(var e="",r=0;r<t.length;r++){var n=t[r];"number"==typeof n?e=e.substr(0,e.length-1)+"["+n+"]":e+=n,r<t.length-1&&(e+=".")}return e}(r),l=Ch[t](e,s,n,i);return re.log(l),{code:t,container:a,trace:o,path:r,astr:s,msg:l}}function Rh(t,e){var r=Nh(e),n=r.keyMinusId,i=r.id;return!!(n in t&&t[n]._isSubplotObj&&i)||e in t}function Oh(t,e){return t[Nh(e).keyMinusId]}var Ih=re.counterRegex("([a-z]+)");function Nh(t){var e=t.match(Ih);return{keyMinusId:e&&e[1],id:e&&e[2]}}var Dh=function(t,e){var r=document.createElement("a"),n="download"in r,i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(a,o){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&o(new Error("IE < 10 unsupported")),i&&(document.location.href="data:application/octet-stream"+t.slice(t.search(/[,;]/)),a(e)),e||(e="download"),n&&(r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),a(e)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var s=t.split(/^data:image\/svg\+xml,/)[1],l=decodeURIComponent(s);navigator.msSaveBlob(new Blob([l]),e),a(e)}o(new Error("download error"))})};var zh=function(t,e){return(e=e||{}).format=e.format||"png",new Promise(function(r,n){t._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),re.isIE()&&"svg"!==e.format&&n(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),t._snapshotInProgress=!0;var i=Ah(t,e),a=e.filename||t.fn||"newplot";a+="."+e.format,i.then(function(e){return t._snapshotInProgress=!1,Dh(e,a)}).then(function(t){r(t)}).catch(function(e){t._snapshotInProgress=!1,n(e)})})},Fh={};Fh.plot=Qc.plot,Fh.newPlot=Qc.newPlot,Fh.restyle=Qc.restyle,Fh.relayout=Qc.relayout,Fh.redraw=Qc.redraw,Fh.update=Qc.update,Fh.react=Qc.react,Fh.extendTraces=Qc.extendTraces,Fh.prependTraces=Qc.prependTraces,Fh.addTraces=Qc.addTraces,Fh.deleteTraces=Qc.deleteTraces,Fh.moveTraces=Qc.moveTraces,Fh.purge=Qc.purge,Fh.addFrames=Qc.addFrames,Fh.deleteFrames=Qc.deleteFrames,Fh.animate=Qc.animate,Fh.setPlotConfig=Qc.setPlotConfig,Fh.toImage=Ah,Fh.validate=function(t,e){var r,n,i=Jn.get(),a=[],o={_context:re.extendFlat({},x)};kh(t)?(o.data=re.extendDeep([],t),r=t):(o.data=[],r=[],a.push(Ph("array","data"))),Th(e)?(o.layout=re.extendDeep({},e),n=e):(o.layout={},n={},arguments.length>1&&a.push(Ph("object","layout"))),vi.supplyDefaults(o);for(var s=o._fullData,l=r.length,u=0;u<l;u++){var c=r[u],h=["data",u];if(Th(c)){var f=s[u],d=f.type,p=i.traces[d].attributes;p.type={valType:"enumerated",values:[d]},!1===f.visible&&!1!==c.visible&&a.push(Ph("invisible",h)),Lh(c,f,p,a,h);var g=c.transforms,v=f.transforms;if(g){kh(g)||a.push(Ph("array",h,["transforms"])),h.push("transforms");for(var m=0;m<g.length;m++){var y=["transforms",m],b=g[m].type;if(Th(g[m])){var _=i.transforms[b]?i.transforms[b].attributes:{};_.type={valType:"enumerated",values:Object.keys(i.transforms)},Lh(g[m],v[m],_,a,h,y)}else a.push(Ph("object",h,y))}}}else a.push(Ph("object",h))}return Lh(n,o._fullLayout,function(t,e){for(var r=0;r<e.length;r++){var n=e[r].type,i=t.traces[n].layoutAttributes;i&&re.extendFlat(t.layout.layoutAttributes,i)}return t.layout.layoutAttributes}(i,s),a,"layout"),0===a.length?void 0:a},Fh.downloadImage=zh;var jh=re.extendFlat,Bh=re.extendDeep;function Uh(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}var Vh=function(t,e){var r;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var n,i=t.data,a=t.layout,o=Bh([],i),s=Bh({},a,Uh(e.tileClass)),l=t._context||{};if(e.width&&(s.width=e.width),e.height&&(s.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){s.annotations=[];var u=Object.keys(s);for(r=0;r<u.length;r++)n=u[r],["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))>-1&&(s[u[r]].title="");for(r=0;r<o.length;r++){var c=o[r];c.showscale=!1,c.marker&&(c.marker.showscale=!1),"pie"===c.type&&(c.textposition="none")}}if(Array.isArray(e.annotations))for(r=0;r<e.annotations.length;r++)s.annotations.push(e.annotations[r]);var h=Object.keys(s).filter(function(t){return t.match(/^scene\d*$/)});if(h.length){var f={};for("thumbnail"===e.tileClass&&(f={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),r=0;r<h.length;r++){var d=s[h[r]];d.xaxis||(d.xaxis={}),d.yaxis||(d.yaxis={}),d.zaxis||(d.zaxis={}),jh(d.xaxis,f),jh(d.yaxis,f),jh(d.zaxis,f),d._scene=null}}var p=document.createElement("div");e.tileClass&&(p.className=e.tileClass);var g={gd:p,td:p,layout:s,data:o,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return"transparent"!==e.setBackground&&(g.config.setBackground=e.setBackground||"opaque"),g.gd.defaultLayout=Uh(e.tileClass),g},Hh=Ye.EventEmitter;var qh=function(t,e){var r=new Hh,n=Vh(t,{format:"png"}),i=n.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var a=vh.getRedrawFunc(i);return R.call("plot",i,n.data,n.layout,n.config).then(a).then(function(){var t=vh.getDelay(i._fullLayout);setTimeout(function(){var t=_h(i),n=document.createElement("canvas");n.id=re.randstr(),(r=yh({format:e.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:n,emitter:r,svg:t})).clean=function(){i&&document.body.removeChild(i)}},t)}).catch(function(t){r.emit("error",t)}),r},Gh={getDelay:vh.getDelay,getRedrawFunc:vh.getRedrawFunc,clone:Vh,toSVG:_h,svgToImg:yh,toImage:qh,downloadImage:zh},Xh=function(t,e){for(var r=0;r<t.length;r++)t[r].i=r;re.mergeArray(e.text,t,"tx"),re.mergeArray(e.hovertext,t,"htx"),re.mergeArray(e.customdata,t,"data"),re.mergeArray(e.textposition,t,"tp"),e.textfont&&(re.mergeArray(e.textfont.size,t,"ts"),re.mergeArray(e.textfont.color,t,"tc"),re.mergeArray(e.textfont.family,t,"tf"));var n=e.marker;if(n){re.mergeArray(n.size,t,"ms"),re.mergeArray(n.opacity,t,"mo"),re.mergeArray(n.symbol,t,"mx"),re.mergeArray(n.color,t,"mc");var i=n.line;n.line&&(re.mergeArray(i.color,t,"mlc"),re.mergeArray(i.width,t,"mlw"));var a=n.gradient;a&&"none"!==a.type&&(re.mergeArray(a.type,t,"mgt"),re.mergeArray(a.color,t,"mgc"))}},Wh=function(t,e){re.isArrayOrTypedArray(e.selectedpoints)&&re.tagSelected(t,e)},Yh=function(t){cn.hasLines(t)&&Pr(t,"line")&&lr(t,t.line.color,"line","c"),cn.hasMarkers(t)&&(Pr(t,"marker")&&lr(t,t.marker.color,"marker","c"),Pr(t,"marker.line")&&lr(t,t.marker.line.color,"marker.line","c"))},Zh=re.isArrayOrTypedArray,Qh=r.BADNUM;function Kh(t,e,r,n,i,a,o){var s=e._length;r._minDtick=0,n._minDtick=0;var l={padded:!0},u={padded:!0};o&&(l.ppad=u.ppad=o),!("tozerox"===e.fill||"tonextx"===e.fill&&t.firstscatter)||i[0]===i[s-1]&&a[0]===a[s-1]?e.error_y.visible||-1===["tonexty","tozeroy"].indexOf(e.fill)&&(cn.hasMarkers(e)||cn.hasText(e))||(l.padded=!1,l.ppad=0):l.tozero=!0,!("tozeroy"===e.fill||"tonexty"===e.fill&&t.firstscatter)||i[0]===i[s-1]&&a[0]===a[s-1]?-1!==["tonextx","tozerox"].indexOf(e.fill)&&(u.padded=!1):u.tozero=!0,Ki.expand(r,i,l),Ki.expand(n,a,u)}function $h(t,e){if(cn.hasMarkers(t)){var r,n=t.marker,i=1.6*(t.marker.sizeref||1);if(r="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/i),3)}:function(t){return Math.max((t||0)/i,3)},Zh(n.size)){var a={type:"linear"};Ki.setConvert(a);for(var o=a.makeCalcdata(t.marker,"size"),s=new Array(e),l=0;l<e;l++)s[l]=r(o[l]);return s}return r(n.size)}}var Jh=function(t,r){var n=Ki.getFromId(t,r.xaxis||"x"),i=Ki.getFromId(t,r.yaxis||"y"),a=n.makeCalcdata(r,"x"),o=i.makeCalcdata(r,"y"),s=r._length,l=new Array(s);Kh(t,r,n,i,a,o,$h(r,s));for(var u=0;u<s;u++)l[u]=e(a[u])&&e(o[u])?{x:a[u],y:o[u]}:{x:Qh,y:Qh},r.ids&&(l[u].id=String(r.ids[u]));return Xh(l,r),Yh(r),Wh(l,r),t.firstscatter=!1,l},tf=m.extendFlat,ef=Nr.LINE_SPACING,rf={colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"},nf=function(e,r){var n={};function i(){var o=e._fullLayout,l=o._size;if("function"==typeof n.fillcolor||"function"==typeof n.line.color){var u,c,h=t.extent(("function"==typeof n.fillcolor?n.fillcolor:n.line.color).domain()),f=[],d=[],p="function"==typeof n.line.color?n.line.color:function(){return n.line.color},g="function"==typeof n.fillcolor?n.fillcolor:function(){return n.fillcolor},v=n.levels.end+n.levels.size/100,m=n.levels.size,y=1.001*h[0]-.001*h[1],b=1.001*h[1]-.001*h[0];for(c=0;c<1e5&&(u=n.levels.start+c*m,!(m>0?u>=v:u<=v));c++)u>y&&u<b&&f.push(u);if("function"==typeof n.fillcolor)if(n.filllevels)for(v=n.filllevels.end+n.filllevels.size/100,m=n.filllevels.size,c=0;c<1e5&&(u=n.filllevels.start+c*m,!(m>0?u>=v:u<=v));c++)u>h[0]&&u<h[1]&&d.push(u);else(d=f.map(function(t){return t-n.levels.size/2})).push(d[d.length-1]+n.levels.size);else n.fillcolor&&"string"==typeof n.fillcolor&&(d=[0]);n.levels.size<0&&(f.reverse(),d.reverse());var x,_=o.height-o.margin.t-o.margin.b,w=o.width-o.margin.l-o.margin.r,M=Math.round(n.thickness*("fraction"===n.thicknessmode?w:1)),A=M/l.w,T=Math.round(n.len*("fraction"===n.lenmode?_:1)),k=T/l.h,E=n.xpad/l.w,L=(n.borderwidth+n.outlinewidth)/2,C=n.ypad/l.h,S=Math.round(n.x*l.w+n.xpad),P=n.x-A*({middle:.5,right:1}[n.xanchor]||0),O=n.y+k*(({top:-.5,bottom:.5}[n.yanchor]||0)-.5),I=Math.round(l.h*(1-O)),N=I-T,D={type:"linear",range:h,tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,exponentformat:n.exponentformat,separatethousands:n.separatethousands,showexponent:n.showexponent,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,title:n.title,titlefont:n.titlefont,showline:!0,anchor:"free",position:1},z={type:"linear",_id:"y"+r},F={letter:"y",font:o.font,noHover:!0,calendar:o.calendar};if(ws(D,z,J,F,o),Ts(D,z,J,F),z.position=n.x+E+A,i.axis=z,-1!==["top","bottom"].indexOf(n.titleside)&&(z.titleside=n.titleside,z.titlex=n.x+E,z.titley=O+("top"===n.titleside?k-C:C)),n.line.color&&"auto"===n.tickmode){z.tickmode="linear",z.tick0=n.levels.start;var j=n.levels.size,B=re.constrain((I-N)/50,4,15)+1,U=(h[1]-h[0])/((n.nticks||B)*j);if(U>1){var V=Math.pow(10,Math.floor(Math.log(U)/Math.LN10));j*=V*re.roundUp(U/V,[2,5,10]),(Math.abs(n.levels.start)/n.levels.size+1e-6)%1<2e-6&&(z.tick0=0)}z.dtick=j}z.domain=[O+C,O+k-C],z.setScale();var H=o._infolayer.selectAll("g."+r).data([0]);H.enter().append("g").classed(r,!0).classed(rf.colorbar,!0).each(function(){var e=t.select(this);e.append("rect").classed(rf.cbbg,!0),e.append("g").classed(rf.cbfills,!0),e.append("g").classed(rf.cblines,!0),e.append("g").classed(rf.cbaxis,!0).classed(rf.crisp,!0),e.append("g").classed(rf.cbtitleunshift,!0).append("g").classed(rf.cbtitle,!0),e.append("rect").classed(rf.cboutline,!0),e.select(".cbtitle").datum(0)}),H.attr("transform","translate("+Math.round(l.l)+","+Math.round(l.t)+")");var q=H.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(l.l)+",-"+Math.round(l.t)+")");z._axislayer=H.select(".cbaxis");var G=0;if(-1!==["top","bottom"].indexOf(n.titleside)){var X,W=l.l+(n.x+E)*l.w,Y=z.titlefont.size;X="top"===n.titleside?(1-(O+k-C))*l.h+l.t+3+.75*Y:(1-(O+C))*l.h+l.t-3-.25*Y,tt(z._id+"title",{attributes:{x:W,y:X,"text-anchor":"start"}})}var Z,Q,K,$=re.syncOrAsync([vi.previousPromises,function(){if(-1!==["top","bottom"].indexOf(n.titleside)){var r=H.select(".cbtitle"),i=r.select("text"),a=[-n.outlinewidth/2,n.outlinewidth/2],u=r.select(".h"+z._id+"title-math-group").node(),c=15.6;if(i.node()&&(c=parseInt(i.node().style.fontSize,10)*ef),u?(G=hn.bBox(u).height)>c&&(a[1]-=(G-c)/2):i.node()&&!i.classed(rf.jsPlaceholder)&&(G=hn.bBox(i.node()).height),G){if(G+=5,"top"===n.titleside)z.domain[1]-=G/l.h,a[1]*=-1;else{z.domain[0]+=G/l.h;var v=Fr.lineCount(i);a[1]+=(1-v)*c}r.attr("transform","translate("+a+")"),z.setScale()}}H.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(l.h*(1-z.domain[1]))+")"),z._axislayer.attr("transform","translate(0,"+Math.round(-l.t)+")");var m=H.select(".cbfills").selectAll("rect.cbfill").data(d);m.enter().append("rect").classed(rf.cbfill,!0).style("stroke","none"),m.exit().remove(),m.each(function(e,r){var n=[0===r?h[0]:(d[r]+d[r-1])/2,r===d.length-1?h[1]:(d[r]+d[r+1])/2].map(z.c2p).map(Math.round);r!==d.length-1&&(n[1]+=n[1]>n[0]?1:-1);var i=g(e).replace("e-",""),a=s(i).toHexString();t.select(this).attr({x:S,width:Math.max(M,2),y:t.min(n),height:Math.max(t.max(n)-t.min(n),2),fill:a})});var y=H.select(".cblines").selectAll("path.cbline").data(n.line.color&&n.line.width?f:[]);return y.enter().append("path").classed(rf.cbline,!0),y.exit().remove(),y.each(function(e){t.select(this).attr("d","M"+S+","+(Math.round(z.c2p(e))+n.line.width/2%1)+"h"+M).call(hn.lineGroupStyle,n.line.width,p(e),n.line.dash)}),z._axislayer.selectAll("g."+z._id+"tick,path").remove(),z._pos=S+M+(n.outlinewidth||0)/2-("outside"===n.ticks?1:0),z.side="right",re.syncOrAsync([function(){return Ki.doTicks(e,z,!0)},function(){if(-1===["top","bottom"].indexOf(n.titleside)){var r=z.titlefont.size,i=z._offset+z._length/2,a=l.l+(z.position||0)*l.w+("right"===z.side?10+r*(z.showticklabels?1:.5):-10-r*(z.showticklabels?.5:0));tt("h"+z._id+"title",{avoid:{selection:t.select(e).selectAll("g."+z._id+"tick"),side:n.titleside,offsetLeft:l.l,offsetTop:0,maxShift:o.width},attributes:{x:a,y:i,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},vi.previousPromises,function(){var t=M+n.outlinewidth/2+hn.bBox(z._axislayer.node()).width;if((x=q.select("text")).node()&&!x.classed(rf.jsPlaceholder)){var i,a=q.select(".h"+z._id+"title-math-group").node();i=a&&-1!==["top","bottom"].indexOf(n.titleside)?hn.bBox(a).width:hn.bBox(q.node()).right-S-l.l,t=Math.max(t,i)}var o=2*n.xpad+t+n.borderwidth+n.outlinewidth/2,s=I-N;H.select(".cbbg").attr({x:S-n.xpad-(n.borderwidth+n.outlinewidth)/2,y:N-L,width:Math.max(o,2),height:Math.max(s+2*L,2)}).call(Ne.fill,n.bgcolor).call(Ne.stroke,n.bordercolor).style({"stroke-width":n.borderwidth}),H.selectAll(".cboutline").attr({x:S,y:N+n.ypad+("top"===n.titleside?G:0),width:Math.max(M,2),height:Math.max(s-2*n.ypad-G,2)}).call(Ne.stroke,n.outlinecolor).style({fill:"None","stroke-width":n.outlinewidth});var u=({center:.5,right:1}[n.xanchor]||0)*o;H.attr("transform","translate("+(l.l-u)+","+l.t+")"),vi.autoMargin(e,r,{x:n.x,y:n.y,l:o*({right:1,center:.5}[n.xanchor]||0),r:o*({left:1,center:.5}[n.xanchor]||0),t:s*({bottom:1,middle:.5}[n.yanchor]||0),b:s*({top:1,middle:.5}[n.yanchor]||0)})}],e);if($&&$.then&&(e._promises||[]).push($),e._context.edits.colorbarPosition)rr.init({element:H.node(),gd:e,prepFn:function(){Z=H.attr("transform"),Nn(H)},moveFn:function(t,e){H.attr("transform",Z+" translate("+t+","+e+")"),Q=rr.align(P+t/l.w,A,0,1,n.xanchor),K=rr.align(O-e/l.h,k,0,1,n.yanchor);var r=rr.getCursor(Q,K,n.xanchor,n.yanchor);Nn(H,r)},doneFn:function(){Nn(H),void 0!==Q&&void 0!==K&&R.call("restyle",e,{"colorbar.x":Q,"colorbar.y":K},a().index)}});return $}function J(t,e){return re.coerce(D,z,wr,t,e)}function tt(t,r){var n,i=a();n=R.traceIs(i,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var s={propContainer:z,propName:n,traceIndex:i.index,placeholder:o._dfltTitle.colorbar,containerGroup:H.select(".cbtitle")},l="h"===t.charAt(0)?t.substr(1):"h"+t;H.selectAll("."+l+",."+l+"-math-group").remove(),Ci.draw(e,t,tf(s,r||{}))}o._infolayer.selectAll("g."+r).remove()}function a(){var t,n,i=r.substr(2);for(t=0;t<e._fullData.length;t++)if((n=e._fullData[t]).uid===i)return n}return Object.keys(Ar).forEach(function(t){n[t]=null}),n.fillcolor=null,n.line={color:null,width:null,dash:null},n.levels={start:null,end:null,size:null},n.filllevels=null,Object.keys(n).forEach(function(t){i[t]=function(e){return arguments.length?(n[t]=re.isPlainObject(n[t])?re.extendFlat(n[t],e):e,i):n[t]}}),i.options=function(t){return Object.keys(t).forEach(function(e){"function"==typeof i[e]&&i[e](t[e])}),i},i._opts=n,i},af=function(t,r){var n=r[0].trace,i=n.marker,a="cb"+n.uid;if(t._fullLayout._infolayer.selectAll("."+a).remove(),void 0!==i&&i.showscale){var o=i.color,s=i.cmin,l=i.cmax;e(s)||(s=re.aggNums(Math.min,null,o)),e(l)||(l=re.aggNums(Math.max,null,o));var u=r[0].t.cb=nf(t,a),c=Or.makeColorScaleFunc(Or.extractScale(i.colorscale,s,l),{noNumericCheck:!0});u.fillcolor(c).filllevels({start:s,end:l,size:(l-s)/254}).options(i.colorbar)()}else vi.autoMargin(t,a)},of=re.isArrayOrTypedArray,sf=re.isArrayOrTypedArray,lf=function(t,e,r,n,i,a){var o=(t.marker||{}).color;(i("line.color",r),Pr(t,"line"))?Sr(t,e,n,i,{prefix:"line.",cLetter:"c"}):i("line.color",!sf(o)&&o||r);i("line.width"),(a||{}).noDash||i("line.dash")},uf=function(t,e,r){"spline"===r("line.shape")&&r("line.smoothing")},cf=function(t,e,r,n,i,a){var o=cn.isBubble(t),s=(t.line||{}).color;(a=a||{},s&&(r=s),i("marker.symbol"),i("marker.opacity",o?.7:1),i("marker.size"),i("marker.color",r),Pr(t,"marker")&&Sr(t,e,n,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&e.marker.color!==s?s:o?Ne.background:Ne.defaultLine),Pr(t,"marker.line")&&Sr(t,e,n,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",o?1:0)),o&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient)&&("none"!==i("marker.gradient.type")&&i("marker.gradient.color"))},hf=function(t,e,r,n,i){i=i||{},n("textposition"),re.coerceFont(n,"textfont",r.font),i.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))};function ff(t){return t||0===t}var df=r.BADNUM,pf=re.segmentsIntersect,gf=re.constrain,vf=function(t,e){var r,n,i,a,o,s,l,u,c,h,f,d,p,g,v,m,y=e.xaxis,b=e.yaxis,x=e.simplify,_=e.connectGaps,w=e.baseTolerance,M=e.shape,A="linear"===M,T=[],k=Vn.minTolerance,E=new Array(t.length),L=0;function C(e){var r=t[e],n=y.c2p(r.x),i=b.c2p(r.y);return n===df||i===df?r.intoCenter||!1:[n,i]}function S(t){var e=t[0]/y._length,r=t[1]/b._length;return(1+Vn.toleranceGrowth*Math.max(0,-e,e-1,-r,r-1))*w}function P(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}x||(w=k=-1);var R,O,I,N,D,z,F,j=Vn.maxScreensAway,B=-y._length*j,U=y._length*(1+j),V=-b._length*j,H=b._length*(1+j),q=[[B,V,U,V],[U,V,U,H],[U,H,B,H],[B,H,B,V]];function G(t){if(t[0]<B||t[0]>U||t[1]<V||t[1]>H)return[gf(t[0],B,U),gf(t[1],V,H)]}function X(t,e){return t[0]===e[0]&&(t[0]===B||t[0]===U)||(t[1]===e[1]&&(t[1]===V||t[1]===H)||void 0)}function W(t,e,r){return function(n,i){var a=G(n),o=G(i),s=[];if(a&&o&&X(a,o))return s;a&&s.push(a),o&&s.push(o);var l=2*re.constrain((n[t]+i[t])/2,e,r)-((a||n)[t]+(o||i)[t]);l&&((a&&o?l>0==a[t]>o[t]?a:o:a||o)[t]+=l);return s}}function Y(t){var e=t[0],r=t[1],n=e===E[L-1][0],i=r===E[L-1][1];if(!n||!i)if(L>1){var a=e===E[L-2][0],o=r===E[L-2][1];n&&(e===B||e===U)&&a?o?L--:E[L-1]=t:i&&(r===V||r===H)&&o?a?L--:E[L-1]=t:E[L++]=t}else E[L++]=t}function Z(t){E[L-1][0]!==t[0]&&E[L-1][1]!==t[1]&&Y([I,N]),Y(t),D=null,I=N=0}function Q(t){if(R=t[0]<B?B:t[0]>U?U:0,O=t[1]<V?V:t[1]>H?H:0,R||O){if(L)if(D){var e=F(D,t);e.length>1&&(Z(e[0]),E[L++]=e[1])}else z=F(E[L-1],t)[0],E[L++]=z;else E[L++]=[R||t[0],O||t[1]];var r=E[L-1];R&&O&&(r[0]!==R||r[1]!==O)?(D&&(I!==R&&N!==O?Y(I&&N?(n=D,a=(i=t)[0]-n[0],o=(i[1]-n[1])/a,(n[1]*i[0]-i[1]*n[0])/a>0?[o>0?B:U,H]:[o>0?U:B,V]):[I||R,N||O]):I&&N&&Y([I,N])),Y([R,O])):I-R&&N-O&&Y([R||I,O||N]),D=t,I=R,N=O}else D&&Z(F(D,t)[0]),E[L++]=t;var n,i,a,o}for("linear"===M||"spline"===M?F=function(t,e){for(var r=[],n=0,i=0;i<4;i++){var a=q[i],o=pf(t[0],t[1],e[0],e[1],a[0],a[1],a[2],a[3]);o&&(!n||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)&&(o=[o.x,o.y],n&&P(o,t)<P(r[0],t)?r.unshift(o):r.push(o),n++)}return r}:"hv"===M||"vh"===M?F=function(t,e){var r=[],n=G(t),i=G(e);return n&&i&&X(n,i)?r:(n&&r.push(n),i&&r.push(i),r)}:"hvh"===M?F=W(0,B,U):"vhv"===M&&(F=W(1,V,H)),r=0;r<t.length;r++)if(n=C(r)){for(L=0,D=null,Q(n),r++;r<t.length;r++){if(!(a=C(r))){if(_)continue;break}if(A){if(!((h=P(a,n))<S(a)*k)){for(u=[(a[0]-n[0])/h,(a[1]-n[1])/h],o=n,f=h,d=g=v=0,l=!1,i=a,r++;r<t.length;r++){if(!(s=C(r))){if(_)continue;break}if(m=(c=[s[0]-n[0],s[1]-n[1]])[0]*u[1]-c[1]*u[0],g=Math.min(g,m),(v=Math.max(v,m))-g>S(s))break;i=s,(p=c[0]*u[0]+c[1]*u[1])>f?(f=p,a=s,l=!1):p<d&&(d=p,o=s,l=!0)}if(l?(Q(a),i!==o&&Q(o)):(o!==n&&Q(o),i!==a&&Q(a)),Q(i),r>=t.length||!s)break;Q(s),n=s}}else Q(a)}D&&Y([I||D[0],N||D[1]]),T.push(E.slice(0,L))}return T},mf=Wu.tester;function yf(e,r,n,i,a,o,s){var l,u;!function(e,r,n,i,a){var o=n.xaxis,s=n.yaxis,l=t.extent(re.simpleMap(o.range,o.r2c)),u=t.extent(re.simpleMap(s.range,s.r2c)),c=i[0].trace;if(!cn.hasMarkers(c))return;var h=c.marker.maxdisplayed;if(0===h)return;var f=i.filter(function(t){return t.x>=l[0]&&t.x<=l[1]&&t.y>=u[0]&&t.y<=u[1]}),d=Math.ceil(f.length/h),p=0;a.forEach(function(t,e){var n=t[0].trace;cn.hasMarkers(n)&&n.marker.maxdisplayed>0&&e<r&&p++});var g=Math.round(p*d/3+Math.floor(p/3)*d/7.1);i.forEach(function(t){delete t.vis}),f.forEach(function(t,e){0===Math.round((e+g)%d)&&(t.vis=!0)})}(0,r,n,i,a);var c=!!s&&s.duration>0;function h(t){return c?t.transition():t}var f=n.xaxis,d=n.yaxis,p=i[0].trace,g=p.line,v=t.select(o);if(R.getComponentMethod("errorbars","plot")(v,n,s),!0===p.visible){var m,y;h(v).style("opacity",p.opacity);var b=p.fill.charAt(p.fill.length-1);"x"!==b&&"y"!==b&&(b=""),i[0].node3=v;var x="",_=[],w=p._prevtrace;w&&(x=w._prevRevpath||"",y=w._nextFill,_=w._polygons);var M,A,T,k,E,L,C,S,P,O="",I="",N=[],D=re.noop;if(m=p._ownFill,cn.hasLines(p)||"none"!==p.fill){for(y&&y.datum(i),-1!==["hv","vh","hvh","vhv"].indexOf(g.shape)?(T=hn.steps(g.shape),k=hn.steps(g.shape.split("").reverse().join(""))):T=k="spline"===g.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?hn.smoothclosed(t.slice(1),g.smoothing):hn.smoothopen(t,g.smoothing)}:function(t){return"M"+t.join("L")},E=function(t){return k(t.reverse())},N=vf(i,{xaxis:f,yaxis:d,connectGaps:p.connectgaps,baseTolerance:Math.max(g.width||1,3)/4,shape:g.shape,simplify:g.simplify}),P=p._polygons=new Array(N.length),u=0;u<N.length;u++)p._polygons[u]=mf(N[u]);N.length&&(L=N[0][0],S=(C=N[N.length-1])[C.length-1]),D=function(e){return function(r){if(M=T(r),A=E(r),O?b?(O+="L"+M.substr(1),I=A+"L"+I.substr(1)):(O+="Z"+M,I=A+"Z"+I):(O=M,I=A),cn.hasLines(p)&&r.length>1){var n=t.select(this);if(n.datum(i),e)h(n.style("opacity",0).attr("d",M).call(hn.lineGroupStyle)).style("opacity",1);else{var a=h(n);a.attr("d",M),hn.singleLineStyle(i,a)}}}}}var z=v.selectAll(".js-line").data(N);h(z.exit()).style("opacity",0).remove(),z.each(D(!1)),z.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(hn.lineGroupStyle).each(D(!0)),hn.setClipUrl(z,n.layerClipId),N.length?(m?L&&S&&(b?("y"===b?L[1]=S[1]=d.c2p(0,!0):"x"===b&&(L[0]=S[0]=f.c2p(0,!0)),h(m).attr("d","M"+S+"L"+L+"L"+O.substr(1)).call(hn.singleFillStyle)):h(m).attr("d",O+"Z").call(hn.singleFillStyle)):y&&("tonext"===p.fill.substr(0,6)&&O&&x?("tonext"===p.fill?h(y).attr("d",O+"Z"+x+"Z").call(hn.singleFillStyle):h(y).attr("d",O+"L"+x.substr(1)+"Z").call(hn.singleFillStyle),p._polygons=p._polygons.concat(_)):(j(y),p._polygons=null)),p._prevRevpath=I,p._prevPolygons=P):(m?j(m):y&&j(y),p._polygons=p._prevRevpath=p._prevPolygons=null);var F=v.selectAll(".points");l=F.data([i]),F.each(q),l.enter().append("g").classed("points",!0).each(q),l.exit().remove(),l.each(function(e){var r=!1===e[0].trace.cliponaxis;hn.setClipUrl(t.select(this),r?null:n.layerClipId)})}function j(t){h(t).attr("d","M0,0Z")}function B(t){return t.filter(function(t){return t.vis})}function U(t){return t.id}function V(t){if(t.ids)return U}function H(){return!1}function q(r){var i,a=r[0].trace,o=t.select(this),s=cn.hasMarkers(a),l=cn.hasText(a),u=V(a),p=H,g=H;s&&(p=a.marker.maxdisplayed||a._needsCull?B:re.identity),l&&(g=a.marker.maxdisplayed||a._needsCull?B:re.identity);var v=(i=o.selectAll("path.point").data(p,u)).enter().append("path").classed("point",!0);c&&v.call(hn.pointStyle,a,e).call(hn.translatePoints,f,d).style("opacity",0).transition().style("opacity",1);var m=s&&hn.tryColorscale(a.marker,""),y=s&&hn.tryColorscale(a.marker,"line");i.order(),i.each(function(r){var i=t.select(this),o=h(i);hn.translatePoint(r,o,f,d)?(hn.singlePointStyle(r,o,a,m,y,e),n.layerClipId&&hn.hideOutsideRangePoint(r,o,f,d,a.xcalendar,a.ycalendar),a.customdata&&i.classed("plotly-customdata",null!==r.data&&void 0!==r.data)):o.remove()}),c?i.exit().transition().style("opacity",0).remove():i.exit().remove(),(i=o.selectAll("g").data(g,u)).enter().append("g").classed("textpoint",!0).append("text"),i.order(),i.each(function(e){var r=t.select(this),i=h(r.select("text"));hn.translatePoint(e,i,f,d)?n.layerClipId&&hn.hideOutsideRangePoint(e,r,f,d,a.xcalendar,a.ycalendar):r.remove()}),i.selectAll("text").call(hn.textPointStyle,a,e).each(function(e){var r=f.c2p(e.x),n=d.c2p(e.y);t.select(this).selectAll("tspan.line").each(function(){h(t.select(this)).attr({x:r,y:n})})}),i.exit().remove()}}function bf(t,e,r){var n=t.selectAll("path.point"),i=t.selectAll("text");hn.pointStyle(n,e,r),hn.textPointStyle(i,e,r),hn.selectedPointStyle(n,e),hn.selectedTextStyle(i,e)}var xf=function(e,r){var n=r?r[0].node3:t.select(e).selectAll("g.trace.scatter");n.style("opacity",function(t){return t[0].trace.opacity}),n.selectAll("g.points").each(function(r){bf(t.select(this),r.trace||r[0].trace,e)}),n.selectAll("g.trace path.js-line").call(hn.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(hn.fillGroupStyle),R.getComponentMethod("errorbars","style")(n)},_f={};_f.hasLines=cn.hasLines,_f.hasMarkers=cn.hasMarkers,_f.hasText=cn.hasText,_f.isBubble=cn.isBubble,_f.attributes=Gn,_f.supplyDefaults=function(t,e,r,n){function i(r,n){return re.coerce(t,e,Gn,r,n)}var a=function(t,e,r,n){var i,a=n("x"),o=n("y");if(R.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r),a)o?i=Math.min(a.length,o.length):(i=a.length,n("y0"),n("dy"));else{if(!o)return 0;i=e.y.length,n("x0"),n("dx")}return e._length=i,i}(t,e,n,i),o=a<Vn.PTS_LINESONLY?"lines+markers":"lines";if(a){i("text"),i("hovertext"),i("mode",o),cn.hasLines(e)&&(lf(t,e,r,n,i),uf(0,0,i),i("connectgaps"),i("line.simplify")),cn.hasMarkers(e)&&cf(t,e,r,n,i,{gradient:!0}),cn.hasText(e)&&hf(0,0,n,i);var s=[];(cn.hasMarkers(e)||cn.hasText(e))&&(i("cliponaxis"),i("marker.maxdisplayed"),s.push("points")),i("fill"),"none"!==e.fill&&(function(t,e,r,n){var i=!1;if(e.marker){var a=e.marker.color,o=(e.marker.line||{}).color;a&&!of(a)?i=a:o&&!of(o)&&(i=o)}n("fillcolor",Ne.addOpacity((e.line||{}).color||i||r,.5))}(0,e,r,i),cn.hasLines(e)||uf(0,0,i)),"tonext"!==e.fill&&"toself"!==e.fill||s.push("fills"),i("hoveron",s.join("+")||"points");var l=R.getComponentMethod("errorbars","supplyDefaults");l(t,e,r,{axis:"y"}),l(t,e,r,{axis:"x",inherit:"y"}),re.coerceSelectionMarkerOpacity(e,i)}else e.visible=!1},_f.cleanData=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var i=e-1;i>=0;i--){var a=t[i];if("scatter"===a.type&&a.xaxis===r.xaxis&&a.yaxis===r.yaxis){a.opacity=void 0;break}}}}},_f.calc=Jh,_f.arraysToCalcdata=Xh,_f.plot=function(e,r,n,i,a){var o,s,l,u,c=r.plot.select("g.scatterlayer"),h=!i,f=!!i&&i.duration>0;for((l=c.selectAll("g.trace").data(n,function(t){return t[0].trace.uid})).enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),function(t,e,r){var n,i,a=null;for(i=0;i<r.length;++i)!0===(n=r[i][0].trace).visible?(n._nexttrace=null,-1!==["tonextx","tonexty","tonext"].indexOf(n.fill)&&(n._prevtrace=a,a&&(a._nexttrace=n)),a=n):n._prevtrace=n._nexttrace=null}(0,0,n),function(e,r,n){var i;r.selectAll("g.trace").each(function(e){var r=t.select(this);if((i=e[0].trace)._nexttrace){if(i._nextFill=r.select(".js-fill.js-tonext"),!i._nextFill.size()){var a=":first-child";r.select(".js-fill.js-tozero").size()&&(a+=" + *"),i._nextFill=r.insert("path",a).attr("class","js-fill js-tonext")}}else r.selectAll(".js-fill.js-tonext").remove(),i._nextFill=null;i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace)?(i._ownFill=r.select(".js-fill.js-tozero"),i._ownFill.size()||(i._ownFill=r.insert("path",":first-child").attr("class","js-fill js-tozero"))):(r.selectAll(".js-fill.js-tozero").remove(),i._ownFill=null),r.selectAll(".js-fill").call(hn.setClipUrl,n.layerClipId)})}(0,c,r),o=0,s={};o<n.length;o++)s[n[o][0].trace.uid]=o;c.selectAll("g.trace").sort(function(t,e){return s[t[0].trace.uid]>s[e[0].trace.uid]?1:-1}),f?(a&&(u=a()),t.transition().duration(i.duration).ease(i.easing).each("end",function(){u&&u()}).each("interrupt",function(){u&&u()}).each(function(){c.selectAll("g.trace").each(function(t,a){yf(e,a,r,t,n,this,i)})})):c.selectAll("g.trace").each(function(t,a){yf(e,a,r,t,n,this,i)});h&&l.exit().remove(),c.selectAll("path:not([d])").remove()},_f.colorbar=af,_f.style=xf,_f.hoverPoints=function(t,e,r,n){var i=t.cd,a=i[0].trace,o=t.xa,s=t.ya,l=o.c2p(e),u=s.c2p(r),c=[l,u],h=a.hoveron||"",f=-1!==a.mode.indexOf("markers")?3:.5;if(-1!==h.indexOf("points")){var d=function(t){var e=Math.max(f,t.mrc||0),r=o.c2p(t.x)-l,n=s.c2p(t.y)-u;return Math.max(Math.sqrt(r*r+n*n)-e,1-f/e)},p=Xa.getDistanceFunction(n,function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,n=Math.abs(o.c2p(t.x)-l);return n<e?r*n/e:n-e+r},function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,n=Math.abs(s.c2p(t.y)-u);return n<e?r*n/e:n-e+r},d);if(Xa.getClosest(i,p,t),!1!==t.index){var g=i[t.index],v=o.c2p(g.x,!0),m=s.c2p(g.y,!0),y=g.mrc||1;return re.extendFlat(t,{color:function(t,e){var r,n;if("lines"===t.mode)return(r=t.line.color)&&Ne.opacity(r)?r:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var i=e.mcc||(t.marker||{}).color,a=e.mlcc||((t.marker||{}).line||{}).color;return(n=i&&Ne.opacity(i)?i:a&&Ne.opacity(a)&&(e.mlw||((t.marker||{}).line||{}).width)?a:"")?Ne.opacity(n)<.3?Ne.addOpacity(n,.3):n:(r=(t.line||{}).color)&&Ne.opacity(r)&&cn.hasLines(t)&&t.line.width?r:t.fillcolor}(a,g),x0:v-y,x1:v+y,xLabelVal:g.x,y0:m-y,y1:m+y,yLabelVal:g.y,spikeDistance:d(g)}),function(t,e,r){var n=Array.isArray(r)?function(t){r.push(t)}:function(t){r.text=t},i=re.extractOption(t,e,"htx","hovertext");if(ff(i))return n(i);var a=re.extractOption(t,e,"tx","text");ff(a)&&n(a)}(g,a,t),R.getComponentMethod("errorbars","hoverInfo")(g,a,t),[t]}}if(-1!==h.indexOf("fills")&&a._polygons){var b,x,_,w,M,A,T,k,E,L=a._polygons,C=[],S=!1,P=1/0,O=-1/0,I=1/0,N=-1/0;for(b=0;b<L.length;b++)(_=L[b]).contains(c)&&(S=!S,C.push(_),I=Math.min(I,_.ymin),N=Math.max(N,_.ymax));if(S){var D=((I=Math.max(I,0))+(N=Math.min(N,s._length)))/2;for(b=0;b<C.length;b++)for(w=C[b].pts,x=1;x<w.length;x++)(k=w[x-1][1])>D!=(E=w[x][1])>=D&&(A=w[x-1][0],T=w[x][0],E-k&&(M=A+(T-A)*(D-k)/(E-k),P=Math.min(P,M),O=Math.max(O,M)));P=Math.max(P,0),O=Math.min(O,o._length);var z=Ne.defaultLine;return Ne.opacity(a.fillcolor)?z=a.fillcolor:Ne.opacity((a.line||{}).color)&&(z=a.line.color),re.extendFlat(t,{distance:t.maxHoverDistance,x0:P,x1:O,y0:D,y1:D,color:z}),delete t.index,a.text&&!Array.isArray(a.text)?t.text=String(a.text):t.text=a.name,[t]}}},_f.selectPoints=function(t,e){var r,n,i,a,o=t.cd,s=t.xaxis,l=t.yaxis,u=[],c=o[0].trace;if(!cn.hasMarkers(c)&&!cn.hasText(c))return[];if(!1===e)for(r=0;r<o.length;r++)o[r].selected=0;else for(r=0;r<o.length;r++)n=o[r],i=s.c2p(n.x),a=l.c2p(n.y),e.contains([i,a])?(u.push({pointNumber:r,x:s.c2d(n.x),y:l.c2d(n.y)}),n.selected=1):n.selected=0;return u},_f.animatable=!0,_f.moduleType="trace",_f.name="scatter",_f.basePlotModule=Os,_f.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend","scatter-like"],_f.meta={};var wf=_f,Mf={version:"1.35.2"};Se.polyfill();for(var Af=Mf.register=R.register,Tf=Object.keys(Fh),kf=0;kf<Tf.length;kf++){var Ef=Tf[kf];Mf[Ef]=Fh[Ef],Af({moduleType:"apiMethod",name:Ef,fn:Fh[Ef]})}Af(wf),Af([Xa,es,ao,po,al,Do,ru,Rl,Xs,ds,Ro,Mo]),Af([{moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},{moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}]),Mf.Icons=me,Mf.Plots=vi,Mf.Fx=Xa,Mf.Snapshot=Gh,Mf.PlotSchema=Jn,Mf.Queue=au,Mf.d3=t;var Lf=Mf,Cf=m.extendFlat,Sf=(0,gr.overrideAll)({visible:wr.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:Ne.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:wr.color,categoryorder:wr.categoryorder,categoryarray:wr.categoryarray,title:wr.title,titlefont:wr.titlefont,type:wr.type,autorange:wr.autorange,rangemode:wr.rangemode,range:wr.range,tickmode:wr.tickmode,nticks:wr.nticks,tick0:wr.tick0,dtick:wr.dtick,tickvals:wr.tickvals,ticktext:wr.ticktext,ticks:wr.ticks,mirror:wr.mirror,ticklen:wr.ticklen,tickwidth:wr.tickwidth,tickcolor:wr.tickcolor,showticklabels:wr.showticklabels,tickfont:wr.tickfont,tickangle:wr.tickangle,tickprefix:wr.tickprefix,showtickprefix:wr.showtickprefix,ticksuffix:wr.ticksuffix,showticksuffix:wr.showticksuffix,showexponent:wr.showexponent,exponentformat:wr.exponentformat,separatethousands:wr.separatethousands,tickformat:wr.tickformat,tickformatstops:wr.tickformatstops,hoverformat:wr.hoverformat,showline:wr.showline,linecolor:wr.linecolor,linewidth:wr.linewidth,showgrid:wr.showgrid,gridcolor:Cf({},wr.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:wr.gridwidth,zeroline:wr.zeroline,zerolinecolor:wr.zerolinecolor,zerolinewidth:wr.zerolinewidth},"plot","from-root"),Pf=s.mix,Rf=["xaxis","yaxis","zaxis"],Of=function(t,e,r){var n,i;function a(t,e){return re.coerce(n,i,Sf,t,e)}for(var o=0;o<Rf.length;o++){var s=Rf[o];n=t[s]||{},i=e[s]={_id:s[0]+r.scene,_name:s},Es(n,i,a,r.data),ws(n,i,a,{font:r.font,letter:s[0],data:r.data,showGrid:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),a("gridcolor",Pf(i.color,r.bgColor,13600/187).toRgbString()),a("title",s[0]),i.setScale=re.noop,a("showspikes")&&(a("spikesides"),a("spikethickness"),a("spikecolor",i.color)),a("showaxeslabels"),a("showbackground")&&a("backgroundcolor")}},If=Ao.attributes,Nf=m.extendFlat;function Df(t,e,r){return{x:{valType:"number",dflt:t,editType:"camera"},y:{valType:"number",dflt:e,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}var zf={_arrayAttrRegexps:[(0,re.counterRegex)("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:Nf(Df(0,0,1),{}),center:Nf(Df(0,0,0),{}),eye:Nf(Df(1.25,1.25,1.25),{}),editType:"camera"},domain:If({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:Sf,yaxis:Sf,zaxis:Sf,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],dflt:"turntable",editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}},Ff=Ao.defaults;function jf(t,e,r,n){for(var i=r("bgcolor"),a=Ne.combine(i,n.paper_bgcolor),o=["up","center","eye"],s=0;s<o.length;s++)r("camera."+o[s]+".x"),r("camera."+o[s]+".y"),r("camera."+o[s]+".z");var l=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),u=r("aspectmode",l?"manual":"auto");l||(t.aspectratio=e.aspectratio={x:1,y:1,z:1},"manual"===u&&(e.aspectmode="auto"),t.aspectmode=e.aspectmode),Of(t,e,{font:n.font,scene:n.id,data:n.fullData,bgColor:a,calendar:n.calendar,fullLayout:n.fullLayout}),R.getComponentMethod("annotations3d","handleDefaults")(t,e,n),r("dragmode",n.getDfltFromLayout("dragmode")),r("hovermode",n.getDfltFromLayout("hovermode"))}function Bf(t,e,r,n,i,a){var o=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return a?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),a?o.push("return -1};"):o.push("return i};"),o.join("")}function Uf(t,e,r,n){return new Function([Bf("A","x"+t+"y",e,["y"],!1,n),Bf("B","x"+t+"y",e,["y"],!0,n),Bf("P","c(x,y)"+t+"0",e,["y","c"],!1,n),Bf("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}var Vf={ge:Uf(">=",!1,"GE"),gt:Uf(">",!1,"GT"),lt:Uf("<",!0,"LT"),le:Uf("<=",!0,"LE"),eq:Uf("-",!0,"EQ",!0)},Hf=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=r*s-n*o,b=r*l-i*o,x=r*u-a*o,_=n*l-i*s,w=n*u-a*s,M=i*u-a*l,A=c*g-h*p,T=c*v-f*p,k=c*m-d*p,E=h*v-f*g,L=h*m-d*g,C=f*m-d*v,S=y*C-b*L+x*E+_*k-w*T+M*A;if(!S)return null;return S=1/S,t[0]=(s*C-l*L+u*E)*S,t[1]=(i*L-n*C-a*E)*S,t[2]=(g*M-v*w+m*_)*S,t[3]=(f*w-h*M-d*_)*S,t[4]=(l*k-o*C-u*T)*S,t[5]=(r*C-i*k+a*T)*S,t[6]=(v*x-p*M-m*b)*S,t[7]=(c*M-f*x+d*b)*S,t[8]=(o*L-s*k+u*A)*S,t[9]=(n*k-r*L-a*A)*S,t[10]=(p*w-g*x+m*y)*S,t[11]=(h*x-c*w-d*y)*S,t[12]=(s*T-o*E-l*A)*S,t[13]=(r*E-n*T+i*A)*S,t[14]=(g*b-p*_-v*y)*S,t[15]=(c*_-h*b+f*y)*S,t};var qf=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Gf=function(t,e,r,n){var i,a,o,s,l,u,c,h,f,d,p=e[0],g=e[1],v=e[2],m=n[0],y=n[1],b=n[2],x=r[0],_=r[1],w=r[2];if(Math.abs(p-x)<1e-6&&Math.abs(g-_)<1e-6&&Math.abs(v-w)<1e-6)return qf(t);c=p-x,h=g-_,f=v-w,d=1/Math.sqrt(c*c+h*h+f*f),i=y*(f*=d)-b*(h*=d),a=b*(c*=d)-m*f,o=m*h-y*c,(d=Math.sqrt(i*i+a*a+o*o))?(i*=d=1/d,a*=d,o*=d):(i=0,a=0,o=0);s=h*o-f*a,l=f*i-c*o,u=c*a-h*i,(d=Math.sqrt(s*s+l*l+u*u))?(s*=d=1/d,l*=d,u*=d):(s=0,l=0,u=0);return t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=o,t[9]=u,t[10]=f,t[11]=0,t[12]=-(i*p+a*g+o*v),t[13]=-(s*p+l*g+u*v),t[14]=-(c*p+h*g+f*v),t[15]=1,t};var Xf=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*i+u*n,t[5]=o*i+c*n,t[6]=s*i+h*n,t[7]=l*i+f*n,t[8]=u*i-a*n,t[9]=c*i-o*n,t[10]=h*i-s*n,t[11]=f*i-l*n,t};var Wf=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i-u*n,t[1]=o*i-c*n,t[2]=s*i-h*n,t[3]=l*i-f*n,t[8]=a*n+u*i,t[9]=o*n+c*i,t[10]=s*n+h*i,t[11]=l*n+f*i,t};var Yf=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i+u*n,t[1]=o*i+c*n,t[2]=s*i+h*n,t[3]=l*i+f*n,t[4]=u*i-a*n,t[5]=c*i-o*n,t[6]=h*i-s*n,t[7]=f*i-l*n,t};var Zf=function(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};var Qf=function(t,e,r){var n,i,a,o,s,l,u,c,h,f,d,p,g=r[0],v=r[1],m=r[2];e===t?(t[12]=e[0]*g+e[4]*v+e[8]*m+e[12],t[13]=e[1]*g+e[5]*v+e[9]*m+e[13],t[14]=e[2]*g+e[6]*v+e[10]*m+e[14],t[15]=e[3]*g+e[7]*v+e[11]*m+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=n*g+s*v+h*m+e[12],t[13]=i*g+l*v+f*m+e[13],t[14]=a*g+u*v+d*m+e[14],t[15]=o*g+c*v+p*m+e[15]);return t};var Kf=function(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a);return t};var $f=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],g=t[14],v=t[15];return(e*o-r*a)*(h*v-f*g)-(e*s-n*a)*(c*v-f*p)+(e*l-i*a)*(c*g-h*p)+(r*s-n*o)*(u*v-f*d)-(r*l-i*o)*(u*g-h*d)+(n*l-i*s)*(u*p-c*d)};var Jf=function(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t};var td=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};var ed=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var rd=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t};var nd=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],l=r[2];return t[0]=i*l-a*s,t[1]=a*o-n*l,t[2]=n*s-i*o,t};var id=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]};var ad={length:function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},normalize:Kf,dot:id,cross:nd},od=ed(),sd=ed(),ld=[0,0,0,0],ud=[[0,0,0],[0,0,0],[0,0,0]],cd=[0,0,0],hd=function(t,e,r,n,i,a){if(e||(e=[0,0,0]),r||(r=[0,0,0]),n||(n=[0,0,0]),i||(i=[0,0,0,1]),a||(a=[0,0,0,1]),!function(t,e){var r=e[15];if(0===r)return!1;for(var n=1/r,i=0;i<16;i++)t[i]=e[i]*n;return!0}(od,t))return!1;if(td(sd,od),sd[3]=0,sd[7]=0,sd[11]=0,sd[15]=1,Math.abs($f(sd)<1e-8))return!1;var o,s,l,u,c,h,f,d=od[3],p=od[7],g=od[11],v=od[12],m=od[13],y=od[14],b=od[15];if(0!==d||0!==p||0!==g){if(ld[0]=d,ld[1]=p,ld[2]=g,ld[3]=b,!Hf(sd,sd))return!1;rd(sd,sd),o=i,l=sd,u=(s=ld)[0],c=s[1],h=s[2],f=s[3],o[0]=l[0]*u+l[4]*c+l[8]*h+l[12]*f,o[1]=l[1]*u+l[5]*c+l[9]*h+l[13]*f,o[2]=l[2]*u+l[6]*c+l[10]*h+l[14]*f,o[3]=l[3]*u+l[7]*c+l[11]*h+l[15]*f}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=v,e[1]=m,e[2]=y,function(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}(ud,od),r[0]=ad.length(ud[0]),ad.normalize(ud[0],ud[0]),n[0]=ad.dot(ud[0],ud[1]),fd(ud[1],ud[1],ud[0],1,-n[0]),r[1]=ad.length(ud[1]),ad.normalize(ud[1],ud[1]),n[0]/=r[1],n[1]=ad.dot(ud[0],ud[2]),fd(ud[2],ud[2],ud[0],1,-n[1]),n[2]=ad.dot(ud[1],ud[2]),fd(ud[2],ud[2],ud[1],1,-n[2]),r[2]=ad.length(ud[2]),ad.normalize(ud[2],ud[2]),n[1]/=r[2],n[2]/=r[2],ad.cross(cd,ud[1],ud[2]),ad.dot(ud[0],cd)<0)for(var x=0;x<3;x++)r[x]*=-1,ud[x][0]*=-1,ud[x][1]*=-1,ud[x][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+ud[0][0]-ud[1][1]-ud[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-ud[0][0]+ud[1][1]-ud[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-ud[0][0]-ud[1][1]+ud[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+ud[0][0]+ud[1][1]+ud[2][2],0)),ud[2][1]>ud[1][2]&&(a[0]=-a[0]),ud[0][2]>ud[2][0]&&(a[1]=-a[1]),ud[1][0]>ud[0][1]&&(a[2]=-a[2]),!0};function fd(t,e,r,n,i){t[0]=e[0]*n+r[0]*i,t[1]=e[1]*n+r[1]*i,t[2]=e[2]*n+r[2]*i}var dd=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],g=e[12],v=e[13],m=e[14],y=e[15],b=r[0],x=r[1],_=r[2],w=r[3];return t[0]=b*n+x*s+_*h+w*g,t[1]=b*i+x*l+_*f+w*v,t[2]=b*a+x*u+_*d+w*m,t[3]=b*o+x*c+_*p+w*y,b=r[4],x=r[5],_=r[6],w=r[7],t[4]=b*n+x*s+_*h+w*g,t[5]=b*i+x*l+_*f+w*v,t[6]=b*a+x*u+_*d+w*m,t[7]=b*o+x*c+_*p+w*y,b=r[8],x=r[9],_=r[10],w=r[11],t[8]=b*n+x*s+_*h+w*g,t[9]=b*i+x*l+_*f+w*v,t[10]=b*a+x*u+_*d+w*m,t[11]=b*o+x*c+_*p+w*y,b=r[12],x=r[13],_=r[14],w=r[15],t[12]=b*n+x*s+_*h+w*g,t[13]=b*i+x*l+_*f+w*v,t[14]=b*a+x*u+_*d+w*m,t[15]=b*o+x*c+_*p+w*y,t};var pd={identity:qf,translate:Qf,multiply:dd,create:ed,scale:Zf,fromRotationTranslation:function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,l=i+i,u=a+a,c=n*s,h=n*l,f=n*u,d=i*l,p=i*u,g=a*u,v=o*s,m=o*l,y=o*u;return t[0]=1-(d+g),t[1]=h+y,t[2]=f-m,t[3]=0,t[4]=h-y,t[5]=1-(c+g),t[6]=p+v,t[7]=0,t[8]=f+m,t[9]=p-v,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}},gd=(pd.create(),pd.create()),vd=function(t,e,r,n,i,a){return pd.identity(t),pd.fromRotationTranslation(t,a,e),t[3]=i[0],t[7]=i[1],t[11]=i[2],t[15]=i[3],pd.identity(gd),0!==n[2]&&(gd[9]=n[2],pd.multiply(t,t,gd)),0!==n[1]&&(gd[9]=0,gd[8]=n[1],pd.multiply(t,t,gd)),0!==n[0]&&(gd[8]=0,gd[4]=n[0],pd.multiply(t,t,gd)),pd.scale(t,t,r),t};var md=function(t,e,r,n){var i,a,o,s,l,u=e[0],c=e[1],h=e[2],f=e[3],d=r[0],p=r[1],g=r[2],v=r[3];(a=u*d+c*p+h*g+f*v)<0&&(a=-a,d=-d,p=-p,g=-g,v=-v);1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,l=Math.sin(n*i)/o):(s=1-n,l=n);return t[0]=s*u+l*d,t[1]=s*c+l*p,t[2]=s*h+l*g,t[3]=s*f+l*v,t},yd=wd(),bd=wd(),xd=wd(),_d=function(t,e,r,n){if(0===$f(e)||0===$f(r))return!1;var i=hd(e,yd.translate,yd.scale,yd.skew,yd.perspective,yd.quaternion),a=hd(r,bd.translate,bd.scale,bd.skew,bd.perspective,bd.quaternion);return!(!i||!a||(Jf(xd.translate,yd.translate,bd.translate,n),Jf(xd.skew,yd.skew,bd.skew,n),Jf(xd.scale,yd.scale,bd.scale,n),Jf(xd.perspective,yd.perspective,bd.perspective,n),md(xd.quaternion,yd.quaternion,bd.quaternion,n),vd(t,xd.translate,xd.scale,xd.skew,xd.perspective,xd.quaternion),0))};function wd(){return{translate:Md(),scale:Md(1),skew:Md(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function Md(t){return[t||0,t||0,t||0]}var Ad=[0,0,0],Td=function(t){return new kd((t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};function kd(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var Ed=kd.prototype;Ed.recalcMatrix=function(t){var e=this._time,r=Vf.le(e,t),n=this.computedMatrix;if(!(r<0)){var i=this._components;if(r===e.length-1)for(var a=16*r,o=0;o<16;++o)n[o]=i[a++];else{var s=e[r+1]-e[r],l=(a=16*r,this.prevMatrix),u=!0;for(o=0;o<16;++o)l[o]=i[a++];var c=this.nextMatrix;for(o=0;o<16;++o)c[o]=i[a++],u=u&&l[o]===c[o];if(s<1e-6||u)for(o=0;o<16;++o)n[o]=l[o];else _d(n,l,c,(t-e[r])/s)}var h=this.computedUp;h[0]=n[1],h[1]=n[5],h[2]=n[9],Kf(h,h);var f=this.computedInverse;Hf(f,n);var d=this.computedEye,p=f[15];d[0]=f[12]/p,d[1]=f[13]/p,d[2]=f[14]/p;var g=this.computedCenter,v=Math.exp(this.computedRadius[0]);for(o=0;o<3;++o)g[o]=d[o]-n[2+4*o]*v}},Ed.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,r=e.length-16,n=0;n<16;++n)e.push(e[r++]);this._time.push(t)}},Ed.flush=function(t){var e=Vf.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},Ed.lastT=function(){return this._time[this._time.length-1]},Ed.lookAt=function(t,e,r,n){this.recalcMatrix(t),e=e||this.computedEye,r=r||Ad,n=n||this.computedUp,this.setMatrix(t,Gf(this.computedMatrix,e,r,n));for(var i=0,a=0;a<3;++a)i+=Math.pow(r[a]-e[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},Ed.rotate=function(t,e,r,n){this.recalcMatrix(t);var i=this.computedInverse;e&&Wf(i,i,e),r&&Xf(i,i,r),n&&Yf(i,i,n),this.setMatrix(t,Hf(this.computedMatrix,i))};var Ld=[0,0,0];Ed.pan=function(t,e,r,n){Ld[0]=-(e||0),Ld[1]=-(r||0),Ld[2]=-(n||0),this.recalcMatrix(t);var i=this.computedInverse;Qf(i,i,Ld),this.setMatrix(t,Hf(i,i))},Ed.translate=function(t,e,r,n){Ld[0]=e||0,Ld[1]=r||0,Ld[2]=n||0,this.recalcMatrix(t);var i=this.computedMatrix;Qf(i,i,Ld),this.setMatrix(t,i)},Ed.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var r=0;r<16;++r)this._components.push(e[r])}},Ed.setDistance=function(t,e){this.computedRadius[0]=e},Ed.setDistanceLimits=function(t,e){var r=this._limits;r[0]=t,r[1]=e},Ed.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e};var Cd={};(Cd=function(t,e,r,n,i,a){var o=i-1,s=i*i,l=o*o,u=(1+2*i)*l,c=i*l,h=s*(3-2*i),f=s*o;if(t.length){a||(a=new Array(t.length));for(var d=t.length-1;d>=0;--d)a[d]=u*t[d]+c*e[d]+h*r[d]+f*n[d];return a}return u*t+c*e+h*r+f*n}).derivative=function(t,e,r,n,i,a){var o=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,u=3*i*i-2*i;if(t.length){a||(a=new Array(t.length));for(var c=t.length-1;c>=0;--c)a[c]=o*t[c]+s*e[c]+l*r[c]+u*n[c];return a}return o*t+s*e+l*r[c]+u*n};var Sd=function(t,e,r){switch(arguments.length){case 0:return new Rd([0],[0],0);case 1:if("number"==typeof t){var n=Id(t);return new Rd(n,n,0)}return new Rd(t,Id(t.length),0);case 2:if("number"==typeof e){var n=Id(t.length);return new Rd(t,n,+e)}r=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new Rd(t,e,r)}};function Pd(t,e,r){return Math.min(e,Math.max(t,r))}function Rd(t,e,r){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-1/0,this.bounds[1][n]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[r],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var Od=Rd.prototype;function Id(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=0;return e}Od.flush=function(t){var e=Vf.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},Od.curve=function(t){var e=this._time,r=e.length,n=Vf.le(e,t),i=this._scratch[0],a=this._state,o=this._velocity,s=this.dimension,l=this.bounds;if(n<0)for(var u=s-1,c=0;c<s;++c,--u)i[c]=a[u];else if(n>=r-1){u=a.length-1;var h=t-e[r-1];for(c=0;c<s;++c,--u)i[c]=a[u]+h*o[u]}else{u=s*(n+1)-1;var f=e[n],d=e[n+1]-f||1,p=this._scratch[1],g=this._scratch[2],v=this._scratch[3],m=this._scratch[4],y=!0;for(c=0;c<s;++c,--u)p[c]=a[u],v[c]=o[u]*d,g[c]=a[u+s],m[c]=o[u+s]*d,y=y&&p[c]===g[c]&&v[c]===m[c]&&0===v[c];if(y)for(c=0;c<s;++c)i[c]=p[c];else Cd(p,v,g,m,(t-f)/d,i)}var b=l[0],x=l[1];for(c=0;c<s;++c)i[c]=Pd(b[c],x[c],i[c]);return i},Od.dcurve=function(t){var e=this._time,r=e.length,n=Vf.le(e,t),i=this._scratch[0],a=this._state,o=this._velocity,s=this.dimension;if(n>=r-1)for(var l=a.length-1,u=(e[r-1],0);u<s;++u,--l)i[u]=o[l];else{l=s*(n+1)-1;var c=e[n],h=e[n+1]-c||1,f=this._scratch[1],d=this._scratch[2],p=this._scratch[3],g=this._scratch[4],v=!0;for(u=0;u<s;++u,--l)f[u]=a[l],p[u]=o[l]*h,d[u]=a[l+s],g[u]=o[l+s]*h,v=v&&f[u]===d[u]&&p[u]===g[u]&&0===p[u];if(v)for(u=0;u<s;++u)i[u]=0;else{Cd.derivative(f,p,d,g,(t-c)/h,i);for(u=0;u<s;++u)i[u]/=h}}return i},Od.lastT=function(){var t=this._time;return t[t.length-1]},Od.stable=function(){for(var t=this._velocity,e=t.length,r=this.dimension-1;r>=0;--r)if(t[--e])return!1;return!0},Od.jump=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e||arguments.length!==r+1)){var n=this._state,i=this._velocity,a=n.length-this.dimension,o=this.bounds,s=o[0],l=o[1];this._time.push(e,t);for(var u=0;u<2;++u)for(var c=0;c<r;++c)n.push(n[a++]),i.push(0);this._time.push(t);for(c=r;c>0;--c)n.push(Pd(s[c-1],l[c-1],arguments[c])),i.push(0)}},Od.push=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e||arguments.length!==r+1)){var n=this._state,i=this._velocity,a=n.length-this.dimension,o=t-e,s=this.bounds,l=s[0],u=s[1],c=o>1e-6?1/o:0;this._time.push(t);for(var h=r;h>0;--h){var f=Pd(l[h-1],u[h-1],arguments[h]);n.push(f),i.push((f-n[a++])*c)}}},Od.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var r=this._state,n=this._velocity,i=this.bounds,a=i[0],o=i[1];this._time.push(t);for(var s=e;s>0;--s)r.push(Pd(a[s-1],o[s-1],arguments[s])),n.push(0)}},Od.move=function(t){var e=this.lastT(),r=this.dimension;if(!(t<=e||arguments.length!==r+1)){var n=this._state,i=this._velocity,a=n.length-this.dimension,o=this.bounds,s=o[0],l=o[1],u=t-e,c=u>1e-6?1/u:0;this._time.push(t);for(var h=r;h>0;--h){var f=arguments[h];n.push(Pd(s[h-1],l[h-1],n[a++]+f)),i.push(f*c)}}},Od.idle=function(t){var e=this.lastT();if(!(t<e)){var r=this.dimension,n=this._state,i=this._velocity,a=n.length-r,o=this.bounds,s=o[0],l=o[1],u=t-e;this._time.push(t);for(var c=r-1;c>=0;--c)n.push(Pd(s[c],l[c],n[a]+u*i[a])),i.push(0),a+=1}};var Nd=function(t,e,r,n,i,a,o,s,l,u){var c=e+a+u;if(h>0){var h=Math.sqrt(c+1);t[0]=.5*(o-l)/h,t[1]=.5*(s-n)/h,t[2]=.5*(r-a)/h,t[3]=.5*h}else{var f=Math.max(e,a,u),h=Math.sqrt(2*f-c+1);e>=f?(t[0]=.5*h,t[1]=.5*(i+r)/h,t[2]=.5*(s+n)/h,t[3]=.5*(o-l)/h):a>=f?(t[0]=.5*(r+i)/h,t[1]=.5*h,t[2]=.5*(l+o)/h,t[3]=.5*(s-n)/h):(t[0]=.5*(n+s)/h,t[1]=.5*(o+l)/h,t[2]=.5*h,t[3]=.5*(r-i)/h)}return t};var Dd=function(t){var e=(t=t||{}).center||[0,0,0],r=t.rotation||[0,0,0,1],n=t.radius||1;e=[].slice.call(e,0,3),jd(r=[].slice.call(r,0,4),r);var i=new Bd(r,e,Math.log(n));i.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&i.lookAt(0,t.eye,t.center,t.up);return i};function zd(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function Fd(t,e,r,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2)+Math.pow(n,2))}function jd(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Fd(r,n,i,a);o>1e-6?(t[0]=r/o,t[1]=n/o,t[2]=i/o,t[3]=a/o):(t[0]=t[1]=t[2]=0,t[3]=1)}function Bd(t,e,r){this.radius=Sd([r]),this.center=Sd(e),this.rotation=Sd(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var Ud=Bd.prototype;Ud.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},Ud.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;jd(e,e);var r=this.computedMatrix;ou(r,e);var n=this.computedCenter,i=this.computedEye,a=this.computedUp,o=Math.exp(this.computedRadius[0]);i[0]=n[0]+o*r[2],i[1]=n[1]+o*r[6],i[2]=n[2]+o*r[10],a[0]=r[1],a[1]=r[5],a[2]=r[9];for(var s=0;s<3;++s){for(var l=0,u=0;u<3;++u)l+=r[s+4*u]*i[u];r[12+s]=-l}},Ud.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=r[n];return e}return r},Ud.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},Ud.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},Ud.pan=function(t,e,r,n){e=e||0,r=r||0,n=n||0,this.recalcMatrix(t);var i=this.computedMatrix,a=i[1],o=i[5],s=i[9],l=zd(a,o,s);a/=l,o/=l,s/=l;var u=i[0],c=i[4],h=i[8],f=u*a+c*o+h*s,d=zd(u-=a*f,c-=o*f,h-=s*f);u/=d,c/=d,h/=d;var p=i[2],g=i[6],v=i[10],m=p*a+g*o+v*s,y=p*u+g*c+v*h,b=zd(p-=m*a+y*u,g-=m*o+y*c,v-=m*s+y*h);p/=b,g/=b,v/=b;var x=u*e+a*r,_=c*e+o*r,w=h*e+s*r;this.center.move(t,x,_,w);var M=Math.exp(this.computedRadius[0]);M=Math.max(1e-4,M+n),this.radius.set(t,Math.log(M))},Ud.rotate=function(t,e,r,n){this.recalcMatrix(t),e=e||0,r=r||0;var i=this.computedMatrix,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],d=i[10],p=e*a+r*l,g=e*o+r*u,v=e*s+r*c,m=-(f*v-d*g),y=-(d*p-h*v),b=-(h*g-f*p),x=Math.sqrt(Math.max(0,1-Math.pow(m,2)-Math.pow(y,2)-Math.pow(b,2))),_=Fd(m,y,b,x);_>1e-6?(m/=_,y/=_,b/=_,x/=_):(m=y=b=0,x=1);var w=this.computedRotation,M=w[0],A=w[1],T=w[2],k=w[3],E=M*x+k*m+A*b-T*y,L=A*x+k*y+T*m-M*b,C=T*x+k*b+M*y-A*m,S=k*x-M*m-A*y-T*b;if(n){m=h,y=f,b=d;var P=Math.sin(n)/zd(m,y,b);m*=P,y*=P,b*=P,S=S*(x=Math.cos(e))-(E=E*x+S*m+L*b-C*y)*m-(L=L*x+S*y+C*m-E*b)*y-(C=C*x+S*b+E*y-L*m)*b}var R=Fd(E,L,C,S);R>1e-6?(E/=R,L/=R,C/=R,S/=R):(E=L=C=0,S=1),this.rotation.set(t,E,L,C,S)},Ud.lookAt=function(t,e,r,n){this.recalcMatrix(t),r=r||this.computedCenter,e=e||this.computedEye,n=n||this.computedUp;var i=this.computedMatrix;Gf(i,e,r,n);var a=this.computedRotation;Nd(a,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]),jd(a,a),this.rotation.set(t,a[0],a[1],a[2],a[3]);for(var o=0,s=0;s<3;++s)o+=Math.pow(r[s]-e[s],2);this.radius.set(t,.5*Math.log(Math.max(o,1e-6))),this.center.set(t,r[0],r[1],r[2])},Ud.translate=function(t,e,r,n){this.center.move(t,e||0,r||0,n||0)},Ud.setMatrix=function(t,e){var r=this.computedRotation;Nd(r,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),jd(r,r),this.rotation.set(t,r[0],r[1],r[2],r[3]);var n=this.computedMatrix;Hf(n,e);var i=n[15];if(Math.abs(i)>1e-6){var a=n[12]/i,o=n[13]/i,s=n[14]/i;this.recalcMatrix(t);var l=Math.exp(this.computedRadius[0]);this.center.set(t,a-n[2]*l,o-n[6]*l,s-n[10]*l),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},Ud.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},Ud.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},Ud.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},Ud.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},Ud.fromJSON=function(t){var e=this.lastT(),r=t.center;r&&this.center.set(e,r[0],r[1],r[2]);var n=t.rotation;n&&this.rotation.set(e,n[0],n[1],n[2],n[3]);var i=t.distance;i&&i>0&&this.radius.set(e,Math.log(i)),this.setDistanceLimits(t.zoomMin,t.zoomMax)};var Vd=function(t,e,r,n){var i,a,o,s,l,u,c,h,f,d,p,g,v,m,y,b,x,_,w,M,A,T,k,E,L=n[0],C=n[1],S=n[2],P=Math.sqrt(L*L+C*C+S*S);if(Math.abs(P)<1e-6)return null;L*=P=1/P,C*=P,S*=P,i=Math.sin(r),a=Math.cos(r),o=1-a,s=e[0],l=e[1],u=e[2],c=e[3],h=e[4],f=e[5],d=e[6],p=e[7],g=e[8],v=e[9],m=e[10],y=e[11],b=L*L*o+a,x=C*L*o+S*i,_=S*L*o-C*i,w=L*C*o-S*i,M=C*C*o+a,A=S*C*o+L*i,T=L*S*o+C*i,k=C*S*o-L*i,E=S*S*o+a,t[0]=s*b+h*x+g*_,t[1]=l*b+f*x+v*_,t[2]=u*b+d*x+m*_,t[3]=c*b+p*x+y*_,t[4]=s*w+h*M+g*A,t[5]=l*w+f*M+v*A,t[6]=u*w+d*M+m*A,t[7]=c*w+p*M+y*A,t[8]=s*T+h*k+g*E,t[9]=l*T+f*k+v*E,t[10]=u*T+d*k+m*E,t[11]=c*T+p*k+y*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t};var Hd=function(t){var e=(t=t||{}).center||[0,0,0],r=t.up||[0,1,0],n=t.right||Xd(r),i=t.radius||1,a=t.theta||0,o=t.phi||0;if(e=[].slice.call(e,0,3),r=[].slice.call(r,0,3),Kf(r,r),n=[].slice.call(n,0,3),Kf(n,n),"eye"in t){var s=t.eye,l=[s[0]-e[0],s[1]-e[1],s[2]-e[2]];nd(n,l,r),qd(n[0],n[1],n[2])<1e-6?n=Xd(r):Kf(n,n),i=qd(l[0],l[1],l[2]);var u=id(r,l)/i,c=id(n,l)/i;o=Math.acos(u),a=Math.acos(c)}return i=Math.log(i),new Wd(t.zoomMin,t.zoomMax,e,r,n,i,a,o)};function qd(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function Gd(t){return Math.min(1,Math.max(-1,t))}function Xd(t){var e=Math.abs(t[0]),r=Math.abs(t[1]),n=Math.abs(t[2]),i=[0,0,0];e>Math.max(r,n)?i[2]=1:r>Math.max(e,n)?i[0]=1:i[1]=1;for(var a=0,o=0,s=0;s<3;++s)a+=t[s]*t[s],o+=i[s]*t[s];for(s=0;s<3;++s)i[s]-=o/a*t[s];return Kf(i,i),i}function Wd(t,e,r,n,i,a,o,s){this.center=Sd(r),this.up=Sd(n),this.right=Sd(i),this.radius=Sd([a]),this.angle=Sd([o,s]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}var Yd=Wd.prototype;Yd.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},Yd.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},Yd.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,r=this.computedRight,n=0,i=0,a=0;a<3;++a)i+=e[a]*r[a],n+=e[a]*e[a];var o=Math.sqrt(n),s=0;for(a=0;a<3;++a)r[a]-=e[a]*i/n,s+=r[a]*r[a],e[a]/=o;var l=Math.sqrt(s);for(a=0;a<3;++a)r[a]/=l;var u=this.computedToward;nd(u,e,r),Kf(u,u);var c=Math.exp(this.computedRadius[0]),h=this.computedAngle[0],f=this.computedAngle[1],d=Math.cos(h),p=Math.sin(h),g=Math.cos(f),v=Math.sin(f),m=this.computedCenter,y=d*g,b=p*g,x=v,_=-d*v,w=-p*v,M=g,A=this.computedEye,T=this.computedMatrix;for(a=0;a<3;++a){var k=y*r[a]+b*u[a]+x*e[a];T[4*a+1]=_*r[a]+w*u[a]+M*e[a],T[4*a+2]=k,T[4*a+3]=0}var E=T[1],L=T[5],C=T[9],S=T[2],P=T[6],R=T[10],O=L*R-C*P,I=C*S-E*R,N=E*P-L*S,D=qd(O,I,N);O/=D,I/=D,N/=D,T[0]=O,T[4]=I,T[8]=N;for(a=0;a<3;++a)A[a]=m[a]+T[2+4*a]*c;for(a=0;a<3;++a){s=0;for(var z=0;z<3;++z)s+=T[a+4*z]*A[z];T[12+a]=-s}T[15]=1},Yd.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=r[n];return e}return r};var Zd=[0,0,0];Yd.rotate=function(t,e,r,n){if(this.angle.move(t,e,r),n){this.recalcMatrix(t);var i=this.computedMatrix;Zd[0]=i[2],Zd[1]=i[6],Zd[2]=i[10];for(var a=this.computedUp,o=this.computedRight,s=this.computedToward,l=0;l<3;++l)i[4*l]=a[l],i[4*l+1]=o[l],i[4*l+2]=s[l];Vd(i,i,n,Zd);for(l=0;l<3;++l)a[l]=i[4*l],o[l]=i[4*l+1];this.up.set(t,a[0],a[1],a[2]),this.right.set(t,o[0],o[1],o[2])}},Yd.pan=function(t,e,r,n){e=e||0,r=r||0,n=n||0,this.recalcMatrix(t);var i=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),i[1]),o=i[5],s=i[9],l=qd(a,o,s);a/=l,o/=l,s/=l;var u=i[0],c=i[4],h=i[8],f=u*a+c*o+h*s,d=qd(u-=a*f,c-=o*f,h-=s*f),p=(u/=d)*e+a*r,g=(c/=d)*e+o*r,v=(h/=d)*e+s*r;this.center.move(t,p,g,v);var m=Math.exp(this.computedRadius[0]);m=Math.max(1e-4,m+n),this.radius.set(t,Math.log(m))},Yd.translate=function(t,e,r,n){this.center.move(t,e||0,r||0,n||0)},Yd.setMatrix=function(t,e,r,n){var i=1;"number"==typeof r&&(i=0|r),(i<0||i>3)&&(i=1);var a=(i+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var o=e[i],s=e[i+4],l=e[i+8];if(n){var u=Math.abs(o),c=Math.abs(s),h=Math.abs(l),f=Math.max(u,c,h);u===f?(o=o<0?-1:1,s=l=0):h===f?(l=l<0?-1:1,o=s=0):(s=s<0?-1:1,o=l=0)}else{var d=qd(o,s,l);o/=d,s/=d,l/=d}var p,g,v=e[a],m=e[a+4],y=e[a+8],b=v*o+m*s+y*l,x=qd(v-=o*b,m-=s*b,y-=l*b),_=s*(y/=x)-l*(m/=x),w=l*(v/=x)-o*y,M=o*m-s*v,A=qd(_,w,M);if(_/=A,w/=A,M/=A,this.center.jump(t,U,V,H),this.radius.idle(t),this.up.jump(t,o,s,l),this.right.jump(t,v,m,y),2===i){var T=e[1],k=e[5],E=e[9],L=T*v+k*m+E*y,C=T*_+k*w+E*M;p=O<0?-Math.PI/2:Math.PI/2,g=Math.atan2(C,L)}else{var S=e[2],P=e[6],R=e[10],O=S*o+P*s+R*l,I=S*v+P*m+R*y,N=S*_+P*w+R*M;p=Math.asin(Gd(O)),g=Math.atan2(N,I)}this.angle.jump(t,g,p),this.recalcMatrix(t);var D=e[2],z=e[6],F=e[10],j=this.computedMatrix;Hf(j,e);var B=j[15],U=j[12]/B,V=j[13]/B,H=j[14]/B,q=Math.exp(this.computedRadius[0]);this.center.jump(t,U-D*q,V-z*q,H-F*q)},Yd.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},Yd.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},Yd.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},Yd.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},Yd.lookAt=function(t,e,r,n){this.recalcMatrix(t),e=e||this.computedEye,r=r||this.computedCenter;var i=(n=n||this.computedUp)[0],a=n[1],o=n[2],s=qd(i,a,o);if(!(s<1e-6)){i/=s,a/=s,o/=s;var l=e[0]-r[0],u=e[1]-r[1],c=e[2]-r[2],h=qd(l,u,c);if(!(h<1e-6)){l/=h,u/=h,c/=h;var f=this.computedRight,d=f[0],p=f[1],g=f[2],v=i*d+a*p+o*g,m=qd(d-=v*i,p-=v*a,g-=v*o);if(!(m<.01&&(m=qd(d=a*c-o*u,p=o*l-i*c,g=i*u-a*l))<1e-6)){d/=m,p/=m,g/=m,this.up.set(t,i,a,o),this.right.set(t,d,p,g),this.center.set(t,r[0],r[1],r[2]),this.radius.set(t,Math.log(h));var y=a*g-o*p,b=o*d-i*g,x=i*p-a*d,_=qd(y,b,x),w=i*l+a*u+o*c,M=d*l+p*u+g*c,A=(y/=_)*l+(b/=_)*u+(x/=_)*c,T=Math.asin(Gd(w)),k=Math.atan2(A,M),E=this.angle._state,L=E[E.length-1],C=E[E.length-2];L%=2*Math.PI;var S=Math.abs(L+2*Math.PI-k),P=Math.abs(L-k),R=Math.abs(L-2*Math.PI-k);S<P&&(L+=2*Math.PI),R<P&&(L-=2*Math.PI),this.angle.jump(this.angle.lastT(),L,C),this.angle.set(t,k,T)}}}};var Qd=function(t){var e=(t=t||{}).eye||[0,0,1],r=t.center||[0,0,0],n=t.up||[0,1,0],i=t.distanceLimits||[0,1/0],a=t.mode||"turntable",o=Hd(),s=Dd(),l=Td();return o.setDistanceLimits(i[0],i[1]),o.lookAt(0,e,r,n),s.setDistanceLimits(i[0],i[1]),s.lookAt(0,e,r,n),l.setDistanceLimits(i[0],i[1]),l.lookAt(0,e,r,n),new Kd({turntable:o,orbit:s,matrix:l},a)};function Kd(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map(function(e){return t[e]}),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var $d=Kd.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(t){for(var e=t[0],r=[],n=0;n<t[1];++n)r.push("a"+n);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+t[0]+"("+r.join()+")}";$d[e]=Function.apply(null,r.concat(i))}),$d.recalcMatrix=function(t){this._active.recalcMatrix(t)},$d.getDistance=function(t){return this._active.getDistance(t)},$d.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},$d.lastT=function(){return this._active.lastT()},$d.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var r=this._active,n=this._controllerList[e],i=Math.max(r.lastT(),n.lastT());r.recalcMatrix(i),n.setMatrix(i,r.computedMatrix),this._active=n,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},$d.getMode=function(){return this._mode};var Jd={};function tp(t){return t.target||t.srcElement||window}Jd.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},Jd.element=tp,Jd.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=tp(t).getBoundingClientRect();return t.clientX-e.left}return 0},Jd.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=tp(t).getBoundingClientRect();return t.clientY-e.top}return 0};var ep=function(t,e){e||(e=t,t=window);var r=0,n=0,i=0,a={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function s(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==a.alt,a.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==a.shift,a.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==a.control,a.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==a.meta,a.meta=!!t.metaKey),e}function l(t,o){var l=Jd.x(o),u=Jd.y(o);"buttons"in o&&(t=0|o.buttons),(t!==r||l!==n||u!==i||s(o))&&(r=0|t,n=l||0,i=u||0,e&&e(r,n,i,a))}function u(t){l(0,t)}function c(){(r||n||i||a.shift||a.alt||a.meta||a.control)&&(n=i=0,r=0,a.shift=a.alt=a.control=a.meta=!1,e&&e(0,0,0,a))}function h(t){s(t)&&e&&e(r,n,i,a)}function f(t){0===Jd.buttons(t)?l(0,t):l(r,t)}function d(t){l(r|Jd.buttons(t),t)}function p(t){l(r&~Jd.buttons(t),t)}function g(){o||(o=!0,t.addEventListener("mousemove",f),t.addEventListener("mousedown",d),t.addEventListener("mouseup",p),t.addEventListener("mouseleave",u),t.addEventListener("mouseenter",u),t.addEventListener("mouseout",u),t.addEventListener("mouseover",u),t.addEventListener("blur",c),t.addEventListener("keyup",h),t.addEventListener("keydown",h),t.addEventListener("keypress",h),t!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}g();var v={element:t};return Object.defineProperties(v,{enabled:{get:function(){return o},set:function(e){e?g():o&&(o=!1,t.removeEventListener("mousemove",f),t.removeEventListener("mousedown",d),t.removeEventListener("mouseup",p),t.removeEventListener("mouseleave",u),t.removeEventListener("mouseenter",u),t.removeEventListener("mouseout",u),t.removeEventListener("mouseover",u),t.removeEventListener("blur",c),t.removeEventListener("keyup",h),t.removeEventListener("keydown",h),t.removeEventListener("keypress",h),t!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),v};var rp=function(t,e){e||(e=[0,""]),t=String(t);var r=parseFloat(t,10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e},np=op,ip=96;function ap(t,e){var r=rp(getComputedStyle(t).getPropertyValue(e));return r[0]*op(r[1],t)}function op(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return function(t,e){var r=document.createElement("div");r.style["font-size"]="128"+t,e.appendChild(r);var n=ap(r,"font-size")/128;return e.removeChild(r),n}(t,e);case"em":return ap(e,"font-size");case"rem":return ap(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return ip;case"cm":return ip/2.54;case"mm":return ip/25.4;case"pt":return ip/72;case"pc":return ip/6}return 1}var sp=function(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var n=np("ex",t),i=function(t){r&&t.preventDefault();var i=t.deltaX||0,a=t.deltaY||0,o=t.deltaZ||0,s=t.deltaMode,l=1;switch(s){case 1:l=n;break;case 2:l=window.innerHeight}if(a*=l,o*=l,(i*=l)||a||o)return e(i,a,o,t)};return t.addEventListener("wheel",i),i};var lp={};(function(t){lp=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var up=function(t,e){t=t||document.body,e=e||{};var r=[.01,1/0];"distanceLimits"in e&&(r[0]=e.distanceLimits[0],r[1]=e.distanceLimits[1]);"zoomMin"in e&&(r[0]=e.zoomMin);"zoomMax"in e&&(r[1]=e.zoomMax);var n=Qd({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:r}),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0,o=t.clientWidth,s=t.clientHeight,l={view:n,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:n.modes,tick:function(){var e=lp(),r=this.delay;n.idle(e-r),n.flush(e-(100+2*r));var l=e-2*r;n.recalcMatrix(l);for(var u=!0,c=n.computedMatrix,h=0;h<16;++h)u=u&&i[h]===c[h],i[h]=c[h];var f=t.clientWidth===o&&t.clientHeight===s;return o=t.clientWidth,s=t.clientHeight,u?!f:(a=Math.exp(n.computedRadius[0]),!0)},lookAt:function(t,e,r){n.lookAt(n.lastT(),t,e,r)},rotate:function(t,e,r){n.rotate(n.lastT(),t,e,r)},pan:function(t,e,r){n.pan(n.lastT(),t,e,r)},translate:function(t,e,r){n.translate(n.lastT(),t,e,r)}};Object.defineProperties(l,{matrix:{get:function(){return n.computedMatrix},set:function(t){return n.setMatrix(n.lastT(),t),n.computedMatrix},enumerable:!0},mode:{get:function(){return n.getMode()},set:function(t){return n.setMode(t),n.getMode()},enumerable:!0},center:{get:function(){return n.computedCenter},set:function(t){return n.lookAt(n.lastT(),t),n.computedCenter},enumerable:!0},eye:{get:function(){return n.computedEye},set:function(t){return n.lookAt(n.lastT(),null,t),n.computedEye},enumerable:!0},up:{get:function(){return n.computedUp},set:function(t){return n.lookAt(n.lastT(),null,null,t),n.computedUp},enumerable:!0},distance:{get:function(){return a},set:function(t){return n.setDistance(n.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return n.getDistanceLimits(r)},set:function(t){return n.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",function(t){return t.preventDefault(),!1});var u=0,c=0,h={shift:!1,control:!1,alt:!1,meta:!1};function f(e,r,i,o){var s=1/t.clientHeight,f=s*(r-u),d=s*(i-c),p=l.flipX?1:-1,g=l.flipY?1:-1,v=Math.PI*l.rotateSpeed,m=lp();if(1&e)o.shift?n.rotate(m,0,0,-f*v):n.rotate(m,p*v*f,-g*v*d,0);else if(2&e)n.pan(m,-l.translateSpeed*f*a,l.translateSpeed*d*a,0);else if(4&e){var y=l.zoomSpeed*d/window.innerHeight*(m-n.lastT())*50;n.pan(m,0,0,a*(Math.exp(y)-1))}u=r,c=i,h=o}return ep(t,f),t.addEventListener("touchstart",function(e){var r=qe(e.changedTouches[0],t);f(0,r[0],r[1],h),f(1,r[0],r[1],h),e.preventDefault()},!!Ve&&{passive:!1}),t.addEventListener("touchmove",function(e){var r=qe(e.changedTouches[0],t);f(1,r[0],r[1],h),e.preventDefault()},!!Ve&&{passive:!1}),t.addEventListener("touchend",function(e){qe(e.changedTouches[0],t),f(0,u,c,h),e.preventDefault()},!!Ve&&{passive:!1}),sp(t,function(t,e,r){var i=l.flipX?1:-1,o=l.flipY?1:-1,s=lp();if(Math.abs(t)>Math.abs(e))n.rotate(s,0,0,-t*i*Math.PI*l.rotateSpeed/window.innerWidth);else{var u=l.zoomSpeed*o*e/window.innerHeight*(s-n.lastT())/100;n.pan(s,0,0,a*(Math.exp(u)-1))}},!0),l};var cp=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,e(i=t[o],a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,(n=t[a])!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}(t))};function hp(t,e,r){var n,i,a=t.length,o=e.arrayArgs.length,s=e.indexArgs.length>0,l=[],u=[],c=0,h=0;for(n=0;n<a;++n)u.push(["i",n,"=0"].join(""));for(i=0;i<o;++i)for(n=0;n<a;++n)h=c,c=t[n],0===n?u.push(["d",i,"s",n,"=t",i,"p",c].join("")):u.push(["d",i,"s",n,"=(t",i,"p",c,"-s",h,"*t",i,"p",h,")"].join(""));for(u.length>0&&l.push("var "+u.join(",")),n=a-1;n>=0;--n)c=t[n],l.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(l.push(r),n=0;n<a;++n){for(h=c,c=t[n],i=0;i<o;++i)l.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&l.push(["index[",h,"]-=s",h].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function fp(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var h=e.offsetArgIndex.indexOf(o);c=e.offsetArgs[h].array,u="+q"+h;case"array":u="p"+c+u;var f="l"+o,d="a"+c;if(0===e.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(i.push(["var ",f,"=",d,".get(",u,")"].join("")),n=n.replace(l,f),a.push([d,".set(",u,",",f,")"].join(""))):n=n.replace(l,[d,".get(",u,")"].join("")):n=n.replace(l,[d,"[",u,"]"].join("")):"generic"===r[c]?(i.push(["var ",f,"=",d,".get(",u,")"].join("")),n=n.replace(l,f),s.lvalue&&a.push([d,".set(",u,",",f,")"].join(""))):(i.push(["var ",f,"=",d,"[",u,"]"].join("")),n=n.replace(l,f),s.lvalue&&a.push([d,"[",u,"]=",f].join("")));else{for(var p=[s.name],g=[u],v=0;v<Math.abs(e.arrayBlockIndices[c]);v++)p.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(v+1)+"*t"+c+"b"+v);if(l=new RegExp(p.join(""),"g"),u=g.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[d,"[",u,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape")}}}return[i.join("\n"),n,a.join("\n")].join("\n").trim()}var dp=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];var o=[],s=[],l=[],u=[],c=[];for(a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),u.push(r),o.push(r),s.push(r+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),u.push(t.arrayBlockIndices[a]+r),o.push(0),s.push(t.arrayBlockIndices[a]));for(var h=[],f=0;f<n[a].length;f++)l[a]<=n[a][f]&&n[a][f]<u[a]&&h.push(n[a][f]-l[a]);c.push(h)}var d=["SS"],p=["'use strict'"],g=[];for(f=0;f<r;++f)g.push(["s",f,"=SS[",f,"]"].join(""));for(a=0;a<t.arrayArgs.length;++a){for(d.push("a"+a),d.push("t"+a),d.push("p"+a),f=0;f<r;++f)g.push(["t",a,"p",f,"=t",a,"[",l[a]+f,"]"].join(""));for(f=0;f<Math.abs(t.arrayBlockIndices[a]);++f)g.push(["t",a,"b",f,"=t",a,"[",o[a]+f,"]"].join(""))}for(a=0;a<t.scalarArgs.length;++a)d.push("Y"+a);if(t.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),t.indexArgs.length>0){var v=new Array(r);for(a=0;a<r;++a)v[a]="0";g.push(["index=[",v.join(","),"]"].join(""))}for(a=0;a<t.offsetArgs.length;++a){var m=t.offsetArgs[a],y=[];for(f=0;f<m.offset.length;++f)0!==m.offset[f]&&(1===m.offset[f]?y.push(["t",m.array,"p",f].join("")):y.push([m.offset[f],"*t",m.array,"p",f].join("")));0===y.length?g.push("q"+a+"=0"):g.push(["q",a,"=",y.join("+")].join(""))}var b=cp([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((g=g.concat(b)).length>0&&p.push("var "+g.join(",")),a=0;a<t.arrayArgs.length;++a)p.push("p"+a+"|=0");t.pre.body.length>3&&p.push(fp(t.pre,t,i));var x=fp(t.body,t,i),_=function(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}(c);_<r?p.push(function(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,l=[],u=0;u<a;++u)l.push(["var offset",u,"=p",u].join(""));for(u=t;u<i;++u)l.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),l.push(["if(j",u,"<",o,"){"].join("")),l.push(["s",e[u],"=j",u].join("")),l.push(["j",u,"=0"].join("")),l.push(["}else{s",e[u],"=",o].join("")),l.push(["j",u,"-=",o,"}"].join("")),s&&l.push(["index[",e[u],"]=j",u].join(""));for(u=0;u<a;++u){for(var c=["offset"+u],h=t;h<i;++h)c.push(["j",h,"*t",u,"p",e[h]].join(""));l.push(["p",u,"=(",c.join("+"),")"].join(""))}for(l.push(hp(e,r,n)),u=t;u<i;++u)l.push("}");return l.join("\n")}(_,c[0],t,x)):p.push(hp(c[0],t,x)),t.post.body.length>3&&p.push(fp(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+p.join("\n")+"\n----------");var w=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",_,function(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}(i)].join("");return new Function(["function ",w,"(",d.join(","),"){",p.join("\n"),"} return ",w].join(""))()};var pp=function(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],u=0;u<t.arrayArgs.length;++u){var c=t.arrayArgs[u];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),u>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[u]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[u])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),u=0;u<t.scalarArgs.length;++u)o.push("scalar"+t.scalarArgs[u]);return r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(dp.bind(void 0,t))};var gp=function(t){var e=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if("array"===i||"object"==typeof i&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if("index"===i){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof i||!i.offset)throw new Error("cwise: Unknown argument type "+r[n]);e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,pp(e)},vp={},mp={body:"",args:[],thisVars:[],localVars:[]};function yp(t){if(!t)return mp;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function bp(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return gp({args:t.args,pre:yp(t.pre),body:yp(t.body),post:yp(t.proc),funcName:t.funcName})}(t))}var xp={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in xp){var e=xp[t];vp[t]=bp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),vp[t+"eq"]=bp({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),vp[t+"s"]=bp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),vp[t+"seq"]=bp({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var _p={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in _p){var e=_p[t];vp[t]=bp({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),vp[t+"eq"]=bp({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var wp={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in wp){var e=wp[t];vp[t]=bp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),vp[t+"s"]=bp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),vp[t+"eq"]=bp({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),vp[t+"seq"]=bp({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var Mp=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<Mp.length;++t){var e=Mp[t];vp[e]=bp({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),vp[e+"eq"]=bp({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var Ap=["max","min","atan2","pow"];!function(){for(var t=0;t<Ap.length;++t){var e=Ap[t];vp[e]=bp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),vp[e+"s"]=bp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),vp[e+"eq"]=bp({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),vp[e+"seq"]=bp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var Tp=["atan2","pow"];!function(){for(var t=0;t<Tp.length;++t){var e=Tp[t];vp[e+"op"]=bp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),vp[e+"ops"]=bp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),vp[e+"opeq"]=bp({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),vp[e+"opseq"]=bp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),vp.any=gp({args:["array"],pre:mp,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),vp.all=gp({args:["array"],pre:mp,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),vp.sum=gp({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),vp.prod=gp({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),vp.norm2squared=gp({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),vp.norm2=gp({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),vp.norminf=gp({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),vp.norm1=gp({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),vp.sup=gp({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),vp.inf=gp({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),vp.argmin=gp({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),vp.argmax=gp({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),vp.random=bp({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),vp.assign=bp({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),vp.assigns=bp({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),vp.equals=gp({args:["array","array"],pre:mp,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});var kp=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e},Ep=function(t){return null!=t&&(Lp(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Lp(t.slice(0,0))}(t)||!!t._isBuffer)};function Lp(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Cp="undefined"!=typeof Float64Array;function Sp(t,e){return t[0]-e[0]}function Pp(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(Sp);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function Rp(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n="generic"===t;if(-1===e){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(i)()}if(0===e){i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",i)(Op[t][0])}i=["'use strict'"];var a=kp(e),o=a.map(function(t){return"i"+t}),s="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),l=a.map(function(t){return"b"+t}).join(","),u=a.map(function(t){return"c"+t}).join(",");i.push("function "+r+"(a,"+l+","+u+",d){this.data=a","this.shape=["+l+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),2===e?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var c=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),h=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+h.join(","));for(var f=0;f<e;++f)i.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(f=0;f<e;++f)i.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");var d=new Array(e),p=new Array(e);for(f=0;f<e;++f)d[f]="a[i"+f+"]",p[f]="b[i"+f+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+d.join(",")+","+p.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(f=0;f<e;++f)i.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(Op[t],Pp)}var Op={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};var Ip=function(t,e,r,n){if(void 0===t)return(0,Op.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var i=e.length;if(void 0===r){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(void 0===n)for(n=0,a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a]);for(var s=function(t){if(Ep(t))return"buffer";if(Cp)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}(t),l=Op[s];l.length<=i+1;)l.push(Rp(s,l.length-1));return(0,l[i+1])(t,e,r,n)},Np={};function Dp(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}Np.INT_BITS=32,Np.INT_MAX=2147483647,Np.INT_MIN=-1<<31,Np.sign=function(t){return(t>0)-(t<0)},Np.abs=function(t){var e=t>>31;return(t^e)-e},Np.min=function(t,e){return e^(t^e)&-(t<e)},Np.max=function(t,e){return t^(t^e)&-(t<e)},Np.isPow2=function(t){return!(t&t-1||!t)},Np.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},Np.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},Np.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},Np.countTrailingZeros=Dp,Np.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},Np.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},Np.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var zp=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(zp),Np.reverse=function(t){return zp[255&t]<<24|zp[t>>>8&255]<<16|zp[t>>>16&255]<<8|zp[t>>>24&255]},Np.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},Np.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},Np.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},Np.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},Np.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>Dp(t)+1};for(var Fp={byteLength:function(t){return 3*t.length/4-Gp(t)},toByteArray:function(t){var e,r,n,i,a,o=t.length;i=Gp(t),a=new Up(3*o/4-i),r=i>0?o-4:o;var s=0;for(e=0;e<r;e+=4)n=Bp[t.charCodeAt(e)]<<18|Bp[t.charCodeAt(e+1)]<<12|Bp[t.charCodeAt(e+2)]<<6|Bp[t.charCodeAt(e+3)],a[s++]=n>>16&255,a[s++]=n>>8&255,a[s++]=255&n;2===i?(n=Bp[t.charCodeAt(e)]<<2|Bp[t.charCodeAt(e+1)]>>4,a[s++]=255&n):1===i&&(n=Bp[t.charCodeAt(e)]<<10|Bp[t.charCodeAt(e+1)]<<4|Bp[t.charCodeAt(e+2)]>>2,a[s++]=n>>8&255,a[s++]=255&n);return a},fromByteArray:function(t){for(var e,r=t.length,n=r%3,i="",a=[],o=0,s=r-n;o<s;o+=16383)a.push(Xp(t,o,o+16383>s?s:o+16383));1===n?(e=t[r-1],i+=jp[e>>2],i+=jp[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=jp[e>>10],i+=jp[e>>4&63],i+=jp[e<<2&63],i+="=");return a.push(i),a.join("")}},jp=[],Bp=[],Up="undefined"!=typeof Uint8Array?Uint8Array:Array,Vp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hp=0,qp=Vp.length;Hp<qp;++Hp)jp[Hp]=Vp[Hp],Bp[Vp.charCodeAt(Hp)]=Hp;function Gp(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function Xp(t,e,r){for(var n,i,a=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(jp[(i=n)>>18&63]+jp[i>>12&63]+jp[i>>6&63]+jp[63&i]);return a.join("")}Bp["-".charCodeAt(0)]=62,Bp["_".charCodeAt(0)]=63;var Wp={read:function(t,e,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+t[e+h],h+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=u}return(d?-1:1)*o*Math.pow(2,a-n)},write:function(t,e,r,n,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*l-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;t[r+d]=255&o,d+=p,o/=256,u-=8);t[r+d-p]|=128*g}},Yp={};Yp.Buffer=Kp,Yp.SlowBuffer=function(t){+t!=t&&(t=0);return Kp.alloc(+t)},Yp.INSPECT_MAX_BYTES=50;var Zp=2147483647;function Qp(t){if(t>Zp)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=Kp.prototype,e}function Kp(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return tg(t)}return $p(t,e,r)}function $p(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return Sg(t)||t&&Sg(t.buffer)?function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=Kp.prototype,n}(t,e,r):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!Kp.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|ng(t,e),n=Qp(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e):function(t){if(Kp.isBuffer(t)){var e=0|rg(t.length),r=Qp(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||Pg(t.length)?Qp(0):eg(t);if("Buffer"===t.type&&Array.isArray(t.data))return eg(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(t)}function Jp(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function tg(t){return Jp(t),Qp(t<0?0:0|rg(t))}function eg(t){for(var e=t.length<0?0:0|rg(t.length),r=Qp(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function rg(t){if(t>=Zp)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Zp.toString(16)+" bytes");return 0|t}function ng(t,e){if(Kp.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Sg(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Eg(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Lg(t).length;default:if(n)return Eg(t).length;e=(""+e).toLowerCase(),n=!0}}function ig(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function ag(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Pg(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=Kp.from(e,n)),Kp.isBuffer(e))return 0===e.length?-1:og(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):og(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function og(t,e,r,n,i){var a,o=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,s/=2,l/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=r;a<s;a++)if(u(t,a)===u(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){for(var h=!0,f=0;f<l;f++)if(u(t,a+f)!==u(e,f)){h=!1;break}if(h)return a}return-1}function sg(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=e.length;n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(e.substr(2*o,2),16);if(Pg(s))return o;t[r+o]=s}return o}function lg(t,e,r,n){return Cg(Eg(e,t.length-r),t,r,n)}function ug(t,e,r,n){return Cg(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function cg(t,e,r,n){return ug(t,e,r,n)}function hg(t,e,r,n){return Cg(Lg(e),t,r,n)}function fg(t,e,r,n){return Cg(function(t,e){for(var r,n,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(e,t.length-r),t,r,n)}function dg(t,e,r){return 0===e&&r===t.length?Fp.fromByteArray(t):Fp.fromByteArray(t.slice(e,r))}function pg(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a,o,s,l,u=t[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(a=t[i+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=t[i+1],o=t[i+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=gg)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=gg));return r}(n)}Yp.kMaxLength=Zp,Kp.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),Kp.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Kp.prototype,"parent",{get:function(){if(this instanceof Kp)return this.buffer}}),Object.defineProperty(Kp.prototype,"offset",{get:function(){if(this instanceof Kp)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&Kp[Symbol.species]===Kp&&Object.defineProperty(Kp,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Kp.poolSize=8192,Kp.from=function(t,e,r){return $p(t,e,r)},Kp.prototype.__proto__=Uint8Array.prototype,Kp.__proto__=Uint8Array,Kp.alloc=function(t,e,r){return function(t,e,r){return Jp(t),t<=0?Qp(t):void 0!==e?"string"==typeof r?Qp(t).fill(e,r):Qp(t).fill(e):Qp(t)}(t,e,r)},Kp.allocUnsafe=function(t){return tg(t)},Kp.allocUnsafeSlow=function(t){return tg(t)},Kp.isBuffer=function(t){return null!=t&&!0===t._isBuffer},Kp.compare=function(t,e){if(!Kp.isBuffer(t)||!Kp.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},Kp.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Kp.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Kp.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Kp.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(ArrayBuffer.isView(a)&&(a=Kp.from(a)),!Kp.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},Kp.byteLength=ng,Kp.prototype._isBuffer=!0,Kp.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ig(this,e,e+1);return this},Kp.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ig(this,e,e+3),ig(this,e+1,e+2);return this},Kp.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ig(this,e,e+7),ig(this,e+1,e+6),ig(this,e+2,e+5),ig(this,e+3,e+4);return this},Kp.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?pg(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return yg(this,e,r);case"utf8":case"utf-8":return pg(this,e,r);case"ascii":return vg(this,e,r);case"latin1":case"binary":return mg(this,e,r);case"base64":return dg(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bg(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},Kp.prototype.toLocaleString=Kp.prototype.toString,Kp.prototype.equals=function(t){if(!Kp.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Kp.compare(this,t)},Kp.prototype.inspect=function(){var t="",e=Yp.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Kp.prototype.compare=function(t,e,r,n,i){if(!Kp.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var a=i-n,o=r-e,s=Math.min(a,o),l=this.slice(n,i),u=t.slice(e,r),c=0;c<s;++c)if(l[c]!==u[c]){a=l[c],o=u[c];break}return a<o?-1:o<a?1:0},Kp.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},Kp.prototype.indexOf=function(t,e,r){return ag(this,t,e,r,!0)},Kp.prototype.lastIndexOf=function(t,e,r){return ag(this,t,e,r,!1)},Kp.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return sg(this,t,e,r);case"utf8":case"utf-8":return lg(this,t,e,r);case"ascii":return ug(this,t,e,r);case"latin1":case"binary":return cg(this,t,e,r);case"base64":return hg(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fg(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},Kp.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var gg=4096;function vg(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function mg(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function yg(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=e;a<r;++a)i+=kg(t[a]);return i}function bg(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function xg(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function _g(t,e,r,n,i,a){if(!Kp.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function wg(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Mg(t,e,r,n,i){return e=+e,r>>>=0,i||wg(t,0,r,4),Wp.write(t,e,r,n,23,4),r+4}function Ag(t,e,r,n,i){return e=+e,r>>>=0,i||wg(t,0,r,8),Wp.write(t,e,r,n,52,8),r+8}Kp.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=Kp.prototype,n},Kp.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||xg(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},Kp.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||xg(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},Kp.prototype.readUInt8=function(t,e){return t>>>=0,e||xg(t,1,this.length),this[t]},Kp.prototype.readUInt16LE=function(t,e){return t>>>=0,e||xg(t,2,this.length),this[t]|this[t+1]<<8},Kp.prototype.readUInt16BE=function(t,e){return t>>>=0,e||xg(t,2,this.length),this[t]<<8|this[t+1]},Kp.prototype.readUInt32LE=function(t,e){return t>>>=0,e||xg(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Kp.prototype.readUInt32BE=function(t,e){return t>>>=0,e||xg(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Kp.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||xg(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},Kp.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||xg(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},Kp.prototype.readInt8=function(t,e){return t>>>=0,e||xg(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Kp.prototype.readInt16LE=function(t,e){t>>>=0,e||xg(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Kp.prototype.readInt16BE=function(t,e){t>>>=0,e||xg(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Kp.prototype.readInt32LE=function(t,e){return t>>>=0,e||xg(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Kp.prototype.readInt32BE=function(t,e){return t>>>=0,e||xg(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Kp.prototype.readFloatLE=function(t,e){return t>>>=0,e||xg(t,4,this.length),Wp.read(this,t,!0,23,4)},Kp.prototype.readFloatBE=function(t,e){return t>>>=0,e||xg(t,4,this.length),Wp.read(this,t,!1,23,4)},Kp.prototype.readDoubleLE=function(t,e){return t>>>=0,e||xg(t,8,this.length),Wp.read(this,t,!0,52,8)},Kp.prototype.readDoubleBE=function(t,e){return t>>>=0,e||xg(t,8,this.length),Wp.read(this,t,!1,52,8)},Kp.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||_g(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},Kp.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||_g(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},Kp.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,1,255,0),this[e]=255&t,e+1},Kp.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},Kp.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},Kp.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},Kp.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Kp.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);_g(this,t,e,r,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},Kp.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);_g(this,t,e,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+r},Kp.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},Kp.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},Kp.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},Kp.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},Kp.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||_g(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Kp.prototype.writeFloatLE=function(t,e,r){return Mg(this,t,e,!0,r)},Kp.prototype.writeFloatBE=function(t,e,r){return Mg(this,t,e,!1,r)},Kp.prototype.writeDoubleLE=function(t,e,r){return Ag(this,t,e,!0,r)},Kp.prototype.writeDoubleBE=function(t,e,r){return Ag(this,t,e,!1,r)},Kp.prototype.copy=function(t,e,r,n){if(!Kp.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var a=i-1;a>=0;--a)t[a+e]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return i},Kp.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Kp.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var o=Kp.isBuffer(t)?t:new Kp(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<r-e;++a)this[a+e]=o[a%s]}return this};var Tg=/[^+/0-9A-Za-z-_]/g;function kg(t){return t<16?"0"+t.toString(16):t.toString(16)}function Eg(t,e){var r;e=e||1/0;for(var n=t.length,i=null,a=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Lg(t){return Fp.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Tg,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Cg(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Sg(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function Pg(t){return t!=t}var Rg=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,n){var i=0|e[n];if(i<=0)return[];var a,o=new Array(i);if(n===e.length-1)for(a=0;a<i;++a)o[a]=r;else for(a=0;a<i;++a)o[a]=t(e,r,n+1);return o}(t,e,0)}return[]},Og={};(function(t,e){"use strict";t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:Rg([32,0]),UINT16:Rg([32,0]),UINT32:Rg([32,0]),INT8:Rg([32,0]),INT16:Rg([32,0]),INT32:Rg([32,0]),FLOAT:Rg([32,0]),DOUBLE:Rg([32,0]),DATA:Rg([32,0]),UINT8C:Rg([32,0]),BUFFER:Rg([32,0])});var r="undefined"!=typeof Uint8ClampedArray,n=t.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=Rg([32,0])),n.BUFFER||(n.BUFFER=Rg([32,0]));var i=n.DATA,a=n.BUFFER;function o(t){if(t){var e=t.length||t.byteLength,r=Np.log2(e);i[r].push(t)}}function s(t){t=Np.nextPow2(t);var e=Np.log2(t),r=i[e];return r.length>0?r.pop():new ArrayBuffer(t)}function l(t){return new Uint8Array(s(t),0,t)}function u(t){return new Uint16Array(s(2*t),0,t)}function c(t){return new Uint32Array(s(4*t),0,t)}function h(t){return new Int8Array(s(t),0,t)}function f(t){return new Int16Array(s(2*t),0,t)}function d(t){return new Int32Array(s(4*t),0,t)}function p(t){return new Float32Array(s(4*t),0,t)}function g(t){return new Float64Array(s(8*t),0,t)}function v(t){return r?new Uint8ClampedArray(s(t),0,t):l(t)}function m(t){return new DataView(s(t),0,t)}function y(t){t=Np.nextPow2(t);var r=Np.log2(t),n=a[r];return n.length>0?n.pop():new e(t)}Og.free=function(t){if(e.isBuffer(t))a[Np.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,n=0|Np.log2(r);i[n].push(t)}},Og.freeUint8=Og.freeUint16=Og.freeUint32=Og.freeInt8=Og.freeInt16=Og.freeInt32=Og.freeFloat32=Og.freeFloat=Og.freeFloat64=Og.freeDouble=Og.freeUint8Clamped=Og.freeDataView=function(t){o(t.buffer)},Og.freeArrayBuffer=o,Og.freeBuffer=function(t){a[Np.log2(t.length)].push(t)},Og.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return s(t);switch(e){case"uint8":return l(t);case"uint16":return u(t);case"uint32":return c(t);case"int8":return h(t);case"int16":return f(t);case"int32":return d(t);case"float":case"float32":return p(t);case"double":case"float64":return g(t);case"uint8_clamped":return v(t);case"buffer":return y(t);case"data":case"dataview":return m(t);default:return null}return null},Og.mallocArrayBuffer=s,Og.mallocUint8=l,Og.mallocUint16=u,Og.mallocUint32=c,Og.mallocInt8=h,Og.mallocInt16=f,Og.mallocInt32=d,Og.mallocFloat32=Og.mallocFloat=p,Og.mallocFloat64=Og.mallocDouble=g,Og.mallocUint8Clamped=v,Og.mallocDataView=m,Og.mallocBuffer=y,Og.clearCache=function(){for(var t=0;t<32;++t)n.UINT8[t].length=0,n.UINT16[t].length=0,n.UINT32[t].length=0,n.INT8[t].length=0,n.INT16[t].length=0,n.INT32[t].length=0,n.FLOAT[t].length=0,n.DOUBLE[t].length=0,n.UINT8C[t].length=0,i[t].length=0,a[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Yp.Buffer);var Ig=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function Ng(t,e,r,n,i){this.gl=t,this.type=e,this.handle=r,this.length=n,this.usage=i}var Dg=Ng.prototype;function zg(t,e,r,n,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0)return t.bufferData(e,i,n),o;if(o+a>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,a,i),r}function Fg(t,e){for(var r=Og.malloc(t.length,e),n=t.length,i=0;i<n;++i)r[i]=t[i];return r}Dg.bind=function(){this.gl.bindBuffer(this.type,this.handle)},Dg.unbind=function(){this.gl.bindBuffer(this.type,null)},Dg.dispose=function(){this.gl.deleteBuffer(this.handle)},Dg.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var r=t.dtype;if(Ig.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16";if(r===t.dtype&&function(t,e){for(var r=1,n=e.length-1;n>=0;--n){if(e[n]!==r)return!1;r*=t[n]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=zg(this.gl,this.type,this.length,this.usage,t.data,e):this.length=zg(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var n=Og.malloc(t.size,r),i=Ip(n,t.shape);vp.assign(i,t),this.length=zg(this.gl,this.type,this.length,this.usage,e<0?n:n.subarray(0,t.size),e),Og.free(n)}}else if(Array.isArray(t)){var a;a=this.type===this.gl.ELEMENT_ARRAY_BUFFER?Fg(t,"uint16"):Fg(t,"float32"),this.length=zg(this.gl,this.type,this.length,this.usage,e<0?a:a.subarray(0,t.length),e),Og.free(a)}else if("object"==typeof t&&"number"==typeof t.length)this.length=zg(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}};var jg=function(t,e,r,n){if(r=r||t.ARRAY_BUFFER,n=n||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==t.DYNAMIC_DRAW&&n!==t.STATIC_DRAW&&n!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=new Ng(t,r,t.createBuffer(),0,n);return i.update(e),i};var Bg=function(t,e,r){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var n=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<r.length;++i){var a=r[i];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||t.FLOAT,u=!!a.normalized,c=a.stride||0,h=a.offset||0;o.bind(),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,s,l,u,c,h)}else{if("number"==typeof a)t.vertexAttrib1f(i,a);else if(1===a.length)t.vertexAttrib1f(i,a[0]);else if(2===a.length)t.vertexAttrib2f(i,a[0],a[1]);else if(3===a.length)t.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}t.disableVertexAttribArray(i)}}for(;i<n;++i)t.disableVertexAttribArray(i)}else for(t.bindBuffer(t.ARRAY_BUFFER,null),i=0;i<n;++i)t.disableVertexAttribArray(i)};function Ug(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}Ug.prototype.bind=function(){Bg(this.gl,this._elements,this._attributes)},Ug.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},Ug.prototype.dispose=function(){},Ug.prototype.unbind=function(){},Ug.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._elements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)};var Vg=function(t){return new Ug(t)};function Hg(t,e,r,n,i,a){this.location=t,this.dimension=e,this.a=r,this.b=n,this.c=i,this.d=a}function qg(t,e,r){this.gl=t,this._ext=e,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}Hg.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},qg.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},qg.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},qg.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},qg.prototype.update=function(t,e,r){if(this.bind(),Bg(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var n=0;n<t.length;++n){var i=t[n];"number"==typeof i?this._attribs.push(new Hg(n,1,i)):Array.isArray(i)&&this._attribs.push(new Hg(n,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!e,this._elementsType=r||this.gl.UNSIGNED_SHORT},qg.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._useElements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)};var Gg=function(t,e){return new qg(t,e,e.createVertexArrayOES())};var Xg=function(t,e,r,n){var i,a=t.createVertexArray?new function(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}(t):t.getExtension("OES_vertex_array_object");return(i=a?Gg(t,a):Vg(t)).update(e,r,n),i},Wg={};!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=g);var t=!1;if("function"==typeof WeakMap){var e=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var r=new e,n=Object.freeze({});if(r.set(n,1),1===r.get(n))return void(Wg=WeakMap);t=!0}}Object.prototype.hasOwnProperty;var i=Object.getOwnPropertyNames,a=Object.defineProperty,o=Object.isExtensible,s="weakmap:",l=s+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var u=new ArrayBuffer(25),c=new Uint8Array(u);crypto.getRandomValues(c),l=s+"rand:"+Array.prototype.map.call(c,function(t){return(t%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(t){return i(t).filter(v)}}),"getPropertyNames"in Object){var h=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(t){return h(t).filter(v)}})}!function(){var t=Object.freeze;a(Object,"freeze",{value:function(e){return m(e),t(e)}});var e=Object.seal;a(Object,"seal",{value:function(t){return m(t),e(t)}});var r=Object.preventExtensions;a(Object,"preventExtensions",{value:function(t){return m(t),r(t)}})}();var f=!1,d=0,p=function(){this instanceof p||b();var t=[],e=[],r=d++;return Object.create(p.prototype,{get___:{value:y(function(n,i){var a,o=m(n);return o?r in o?o[r]:i:(a=t.indexOf(n))>=0?e[a]:i})},has___:{value:y(function(e){var n=m(e);return n?r in n:t.indexOf(e)>=0})},set___:{value:y(function(n,i){var a,o=m(n);return o?o[r]=i:(a=t.indexOf(n))>=0?e[a]=i:(a=t.length,e[a]=i,t[a]=n),this})},delete___:{value:y(function(n){var i,a,o=m(n);return o?r in o&&delete o[r]:!((i=t.indexOf(n))<0||(a=t.length-1,t[i]=void 0,e[i]=e[a],t[i]=t[a],t.length=a,e.length=a,0))})}})};p.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof e?function(){function r(){this instanceof p||b();var r,n=new e,i=void 0,a=!1;return r=t?function(t,e){return n.set(t,e),n.has(t)||(i||(i=new p),i.set(t,e)),this}:function(t,e){if(a)try{n.set(t,e)}catch(r){i||(i=new p),i.set___(t,e)}else n.set(t,e);return this},Object.create(p.prototype,{get___:{value:y(function(t,e){return i?n.has(t)?n.get(t):i.get___(t,e):n.get(t,e)})},has___:{value:y(function(t){return n.has(t)||!!i&&i.has___(t)})},set___:{value:y(r)},delete___:{value:y(function(t){var e=!!n.delete(t);return i&&i.delete___(t)||e})},permitHostObjects___:{value:y(function(t){if(t!==g)throw new Error("bogus call to permitHostObjects___");a=!0})}})}t&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=p.prototype,Wg=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),Wg=p)}function g(t){t.permitHostObjects___&&t.permitHostObjects___(g)}function v(t){return!(t.substr(0,s.length)==s&&"___"===t.substr(t.length-3))}function m(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[l];if(e&&e.key===t)return e;if(o(t)){e={key:t};try{return a(t,l,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function y(t){return t.prototype=null,Object.freeze(t)}function b(){f||"undefined"==typeof console||(f=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}();var Yg=new("undefined"==typeof WeakMap?Wg:WeakMap);var Zg=function(t){var e=Yg.get(t),r=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);if(!r||!t.isBuffer(r)){var n=jg(t,new Float32Array([-1,-1,-1,4,4,-1]));(e=Xg(t,[{buffer:n,type:t.FLOAT,size:2}]))._triangleBuffer=n,Yg.set(t,e)}e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()};function Qg(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}Qg.prototype=new Error,Qg.prototype.name="GLError",Qg.prototype.constructor=Qg;var Kg=Qg,$g=function(t,e,r,n){for(var i={},a=0,o=r.length;a<o;++a){var s=r[a],l=s.name,u=s.type,c=s.locations;switch(u){case"bool":case"int":case"float":ev(t,e,c[0],n,1,i,l);break;default:if(u.indexOf("vec")>=0){var h=u.charCodeAt(u.length-1)-48;if(h<2||h>4)throw new Kg("","Invalid data type for attribute "+l+": "+u);ev(t,e,c[0],n,h,i,l)}else{if(!(u.indexOf("mat")>=0))throw new Kg("","Unknown data type for attribute "+l+": "+u);var h=u.charCodeAt(u.length-1)-48;if(h<2||h>4)throw new Kg("","Invalid data type for attribute "+l+": "+u);rv(t,e,c,n,h,i,l)}}}return i};function Jg(t,e,r,n,i,a){this._gl=t,this._wrapper=e,this._index=r,this._locations=n,this._dimension=i,this._constFunc=a}var tv=Jg.prototype;function ev(t,e,r,n,i,a,o){for(var s=["gl","v"],l=[],u=0;u<i;++u)s.push("x"+u),l.push("x"+u);s.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var c=Function.apply(null,s),h=new Jg(t,e,r,n,i,c);Object.defineProperty(a,o,{set:function(e){return t.disableVertexAttribArray(n[r]),c(t,n[r],e),e},get:function(){return h},enumerable:!0})}function rv(t,e,r,n,i,a,o){for(var s=new Array(i),l=new Array(i),u=0;u<i;++u)ev(t,e,r[u],n,i,s,u),l[u]=s[u];Object.defineProperty(s,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<i;++e)l[e].location=t[e];else for(e=0;e<i;++e)l[e].location=t+e;return t},get:function(){for(var t=new Array(i),e=0;e<i;++e)t[e]=n[r[e]];return t},enumerable:!0}),s.pointer=function(e,a,o,s){e=e||t.FLOAT,a=!!a,o=o||i*i,s=s||0;for(var l=0;l<i;++l){var u=n[r[l]];t.vertexAttribPointer(u,i,e,a,o,s+l*i),t.enableVertexAttribArray(u)}};var c=new Array(i),h=t["vertexAttrib"+i+"fv"];Object.defineProperty(a,o,{set:function(e){for(var a=0;a<i;++a){var o=n[r[a]];if(t.disableVertexAttribArray(o),Array.isArray(e[0]))h.call(t,o,e[a]);else{for(var s=0;s<i;++s)c[s]=e[i*a+s];h.call(t,o,c)}}return e},get:function(){return s},enumerable:!0})}tv.pointer=function(t,e,r,n){var i=this._gl,a=this._locations[this._index];i.vertexAttribPointer(a,this._dimension,t||i.FLOAT,!!e,r||0,n||0),i.enableVertexAttribArray(a)},tv.set=function(t,e,r,n){return this._constFunc(this._locations[this._index],t,e,r,n)},Object.defineProperty(tv,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});var nv=function(t,e){for(var r={},n=0;n<t.length;++n)for(var i=t[n].name,a=i.split("."),o=r,s=0;s<a.length;++s){var l=a[s].split("[");if(l.length>1){l[0]in o||(o[l[0]]=[]),o=o[l[0]];for(var u=1;u<l.length;++u){var c=parseInt(l[u]);u<l.length-1||s<a.length-1?(c in o||(u<l.length-1?o[c]=[]:o[c]={}),o=o[c]):o[c]=e?n:t[n].type}}else s<a.length-1?(l[0]in o||(o[l[0]]={}),o=o[l[0]]):o[l[0]]=e?n:t[n].type}return r};var iv=function(t,e,r,n){function i(t,e,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4)throw new Kg("","Invalid uniform dimension type for matrix "+Io+": "+r);return"gl.uniformMatrix"+i+"fv(locations["+e+"],false,obj"+t+")"}throw new Kg("","Unknown uniform data type for "+Io+": "+r)}var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4)throw new Kg("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+i+"fv(locations["+e+"],obj"+t+")";default:throw new Kg("","Unrecognized data type for vector "+Io+": "+r)}}}function a(e){for(var a=["return function updateProperty(obj){"],o=function t(e,r){if("object"!=typeof r)return[[e,r]];var n=[];for(var i in r){var a=r[i],o=e;parseInt(i)+""===i?o+="["+i+"]":o+="."+i,"object"==typeof a?n.push.apply(n,t(o,a)):n.push([o,a])}return n}("",e),s=0;s<o.length;++s){var l=o[s],u=l[0],c=l[1];n[c]&&a.push(i(u,c,r[c].type))}a.push("return obj}");var h=new Function("gl","locations",a.join("\n"));return h(t,n)}function o(i,o,l){if("object"==typeof l){var u=s(l);Object.defineProperty(i,o,{get:av(u),set:a(l),enumerable:!0,configurable:!1})}else n[l]?Object.defineProperty(i,o,{get:(c=l,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+c+"])}")(t,e,n)),set:a(l),enumerable:!0,configurable:!1}):i[o]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new Kg("","Invalid data type");return"b"===t.charAt(0)?ov(r,!1):ov(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new Kg("","Invalid uniform dimension type for matrix "+Io+": "+t);return ov(r*r,0)}throw new Kg("","Unknown uniform data type for "+Io+": "+t)}}(r[l].type);var c}function s(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)o(e,r,t[r])}else for(var n in e={},t)o(e,n,t[n]);return e}var l=nv(r,!0);return{get:av(s(l)),set:a(l),enumerable:!0,configurable:!0}};function av(t){return new Function("y","return function(){return y}")(t)}function ov(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}var sv={uniforms:function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],i=0;i<r;++i){var a=t.getActiveUniform(e,i);if(a){var o=cv(t,a.type);if(a.size>1)for(var s=0;s<a.size;++s)n.push({name:a.name.replace("[0]","["+s+"]"),type:o});else n.push({name:a.name,type:o})}}return n},attributes:function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=[],i=0;i<r;++i){var a=t.getActiveAttrib(e,i);a&&n.push({name:a.name,type:cv(t,a.type)})}return n}},lv={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},uv=null;function cv(t,e){if(!uv){var r=Object.keys(lv);uv={};for(var n=0;n<r.length;++n){var i=r[n];uv[t[i]]=lv[i]}}return uv[e]}var hv,fv="",dv=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var r=t.length*e;if(hv!==t||void 0===hv)hv=t,fv="";else if(fv.length>=r)return fv.substr(0,r);for(;r>fv.length&&e>1;)1&e&&(fv+=t),e>>=1,t+=t;return fv=(fv+=t).substr(0,r)};var pv=function(t,e,r){return dv(r=void 0!==r?r+"":" ",e)+t},gv=function(t,e,r){e="number"==typeof e?e:1,r=r||": ";var n=t.split(/\r?\n/),i=String(n.length+e-1).length;return n.map(function(t,n){var a=n+e,o=String(a).length,s=pv(a,i-o);return s+r+t}).join("\n")};var vv={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34000:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"},mv=function(t){return vv[t]},yv=function(t){return atob(t)},bv=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],xv=(bv=bv.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)})).concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),_v=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],wv=_v.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),Mv=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],Av=function(t){var e,r,n,i=0,a=0,o=Tv,s=[],l=[],u=1,c=0,h=0,f=!1,d=!1,p="",g=bv,v=_v;"300 es"===(t=t||{}).version&&(g=xv,v=wv);return function(t){return l=[],null!==t?function(t){var r;i=0,n=(p+=t).length;for(;e=p[i],i<n;){switch(r=i,o){case Ev:i=_();break;case Lv:case Cv:i=x();break;case Sv:i=w();break;case Pv:i=T();break;case Fv:i=A();break;case Rv:i=k();break;case kv:i=E();break;case Dv:i=b();break;case Tv:i=y()}if(r!==i)switch(p[r]){case"\n":c=0,++u;break;default:++c}}return a+=i,p=p.slice(i),l}(t.replace?t.replace(/\r\n/g,"\n"):t):function(t){s.length&&m(s.join(""));return o=zv,m("(eof)"),l}()};function m(t){t.length&&l.push({type:jv[o],data:t,position:h,line:u,column:c})}function y(){return s=s.length?[]:s,"/"===r&&"*"===e?(h=a+i-1,o=Ev,r=e,i+1):"/"===r&&"/"===e?(h=a+i-1,o=Lv,r=e,i+1):"#"===e?(o=Cv,h=a+i,i):/\s/.test(e)?(o=Dv,h=a+i,i):(f=/\d/.test(e),d=/[^\w_]/.test(e),h=a+i,o=f?Pv:d?Sv:kv,i)}function b(){return/[^\s]/g.test(e)?(m(s.join("")),o=Tv,i):(s.push(e),r=e,i+1)}function x(){return"\r"!==e&&"\n"!==e||"\\"===r?(s.push(e),r=e,i+1):(m(s.join("")),o=Tv,i)}function _(){return"/"===e&&"*"===r?(s.push(e),m(s.join("")),o=Tv,i+1):(s.push(e),r=e,i+1)}function w(){if("."===r&&/\d/.test(e))return o=Rv,i;if("/"===r&&"*"===e)return o=Ev,i;if("/"===r&&"/"===e)return o=Lv,i;if("."===e&&s.length){for(;M(s););return o=Rv,i}if(";"===e||")"===e||"("===e){if(s.length)for(;M(s););return m(e),o=Tv,i+1}var t=2===s.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;M(s););return o=Tv,i}return s.push(e),r=e,i+1}function M(t){for(var e,r,n=0;;){if(e=Mv.indexOf(t.slice(0,t.length+n).join("")),r=Mv[e],-1===e){if(n--+t.length>0)continue;r=t.slice(0,1).join("")}return m(r),h+=r.length,(s=s.slice(r.length)).length}}function A(){return/[^a-fA-F0-9]/.test(e)?(m(s.join("")),o=Tv,i):(s.push(e),r=e,i+1)}function T(){return"."===e?(s.push(e),o=Rv,r=e,i+1):/[eE]/.test(e)?(s.push(e),o=Rv,r=e,i+1):"x"===e&&1===s.length&&"0"===s[0]?(o=Fv,s.push(e),r=e,i+1):/[^\d]/.test(e)?(m(s.join("")),o=Tv,i):(s.push(e),r=e,i+1)}function k(){return"f"===e&&(s.push(e),r=e,i+=1),/[eE]/.test(e)?(s.push(e),r=e,i+1):"-"===e&&/[eE]/.test(r)?(s.push(e),r=e,i+1):/[^\d]/.test(e)?(m(s.join("")),o=Tv,i):(s.push(e),r=e,i+1)}function E(){if(/[^\d\w_]/.test(e)){var t=s.join("");return o=v.indexOf(t)>-1?Nv:g.indexOf(t)>-1?Iv:Ov,m(s.join("")),o=Tv,i}return s.push(e),r=e,i+1}},Tv=999,kv=9999,Ev=0,Lv=1,Cv=2,Sv=3,Pv=4,Rv=5,Ov=6,Iv=7,Nv=8,Dv=9,zv=10,Fv=11,jv=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];var Bv=function(t,e){var r=Av(e),n=[];return n=(n=n.concat(r(t))).concat(r(null))};var Uv=function(t){for(var e=Array.isArray(t)?t:Bv(t),r=0;r<e.length;r++){var n=e[r];if("preprocessor"===n.type){var i=n.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(i&&i[2]){var a=i[1],o=i[2];return(a?yv(o):o).trim()}}}};var Vv={};!function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function e(r){return function(r,n){var i,a,o,s,l,u,c,h,f,d=1,p=r.length,g="";for(a=0;a<p;a++)if("string"==typeof r[a])g+=r[a];else if(Array.isArray(r[a])){if((s=r[a])[2])for(i=n[d],o=0;o<s[2].length;o++){if(!i.hasOwnProperty(s[2][o]))throw new Error(e('[sprintf] property "%s" does not exist',s[2][o]));i=i[s[2][o]]}else i=s[1]?n[s[1]]:n[d++];if(t.not_type.test(s[8])&&t.not_primitive.test(s[8])&&i instanceof Function&&(i=i()),t.numeric_arg.test(s[8])&&"number"!=typeof i&&isNaN(i))throw new TypeError(e("[sprintf] expecting number but found %T",i));switch(t.number.test(s[8])&&(h=i>=0),s[8]){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,s[6]?parseInt(s[6]):0);break;case"e":i=s[7]?parseFloat(i).toExponential(s[7]):parseFloat(i).toExponential();break;case"f":i=s[7]?parseFloat(i).toFixed(s[7]):parseFloat(i);break;case"g":i=s[7]?String(Number(i.toPrecision(s[7]))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=s[7]?i.substring(0,s[7]):i;break;case"t":i=String(!!i),i=s[7]?i.substring(0,s[7]):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=s[7]?i.substring(0,s[7]):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=s[7]?i.substring(0,s[7]):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}t.json.test(s[8])?g+=i:(!t.number.test(s[8])||h&&!s[3]?f="":(f=h?"+":"-",i=i.toString().replace(t.sign,"")),u=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",c=s[6]-(f+i).length,l=s[6]&&c>0?u.repeat(c):"",g+=s[5]?f+i+l:"0"===u?f+l+i:l+f+i)}return g}(function(e){if(n[e])return n[e];var r,i=e,a=[],o=0;for(;i;){if(null!==(r=t.text.exec(i)))a.push(r[0]);else if(null!==(r=t.modulo.exec(i)))a.push("%");else{if(null===(r=t.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){o|=1;var s=[],l=r[2],u=[];if(null===(u=t.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(l=l.substring(u[0].length));)if(null!==(u=t.key_access.exec(l)))s.push(u[1]);else{if(null===(u=t.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}r[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push(r)}i=i.substring(r[0].length)}return n[e]=a}(r),arguments)}function r(t,r){return e.apply(null,[t].concat(r||[]))}var n=Object.create(null);void 0!==Vv&&(Vv.sprintf=e,Vv.vsprintf=r),"undefined"!=typeof window&&(window.sprintf=e,window.vsprintf=r)}();var Hv=Vv.sprintf,qv=function(t,e,r){"use strict";var n=Uv(e)||"of unknown name (see npm glsl-shader-name)",i="unknown type";void 0!==r&&(i=r===mv.FRAGMENT_SHADER?"fragment":"vertex");for(var a=Hv("Error compiling %s shader %s:\n",i,n),o=Hv("%s%s",a,t),s=t.split("\n"),l={},u=0;u<s.length;u++){var c=s[u];if(""!==c&&"\0"!==c){var h=parseInt(c.split(":")[2]);if(isNaN(h))throw new Error(Hv("Could not parse error: %s",c));l[h]=c}}for(var f=gv(e).split("\n"),u=0;u<f.length;u++)if(l[u+3]||l[u+2]||l[u+1]){var d=f[u];if(a+=d+"\n",l[u+1]){var p=l[u+1];p=p.substr(p.split(":",3).join(":").length+1).trim(),a+=Hv("^^^ %s\n\n",p)}}return{long:a.trim(),short:o.trim()}};var Gv=function(t,e){var r={identity:e},n=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?n.apply(this,arguments):r},writable:!0}),r};var Xv=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var r=e.valueOf(t);return r&&r.identity===t?r:Gv(e,t)}};var Wv={shader:function(t,e,r){return Jv(t).getShaderReference(e,r)},program:function(t,e,r,n,i){return Jv(t).getProgram(e,r,n,i)}},Yv=new("undefined"==typeof WeakMap?function(){var t=Xv();return{get:function(e,r){var n=t(e);return n.hasOwnProperty("value")?n.value:r},set:function(e,r){return t(e).value=r,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}:WeakMap),Zv=0;function Qv(t,e,r,n,i,a,o){this.id=t,this.src=e,this.type=r,this.shader=n,this.count=a,this.programs=[],this.cache=o}function Kv(t){this.gl=t,this.shaders=[{},{}],this.programs={}}Qv.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,r=this.programs,n=0,i=r.length;n<i;++n){var a=t.programs[r[n]];a&&(delete t.programs[n],e.deleteProgram(a))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var $v=Kv.prototype;function Jv(t){var e=Yv.get(t);return e||(e=new Kv(t),Yv.set(t,e)),e}function tm(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}$v.getShaderReference=function(t,e){var r=this.gl,n=this.shaders[t===r.FRAGMENT_SHADER|0],i=n[e];if(i&&r.isShader(i.shader))i.count+=1;else{var a=function(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(n);try{var a=qv(i,r,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new Kg(i,"Error compiling shader:\n"+i)}throw new Kg(i,a.short,a.long)}return n}(r,t,e);i=n[e]=new Qv(Zv++,e,t,a,[],1,this)}return i},$v.getProgram=function(t,e,r,n){var i=[t.id,e.id,r.join(":"),n.join(":")].join("@"),a=this.programs[i];return a&&this.gl.isProgram(a)||(this.programs[i]=a=function(t,e,r,n,i){var a=t.createProgram();t.attachShader(a,e),t.attachShader(a,r);for(var o=0;o<n.length;++o)t.bindAttribLocation(a,i[o],n[o]);if(t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){var s=t.getProgramInfoLog(a);throw new Kg(s,"Error linking program: "+s)}return a}(this.gl,t.shader,e.shader,r,n),t.programs.push(i),e.programs.push(i)),a};var em=tm.prototype;function rm(t,e){return t.name<e.name?-1:1}em.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},em.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},em.update=function(t,e,r,n){if(!e||1===arguments.length){var i=t;t=i.vertex,e=i.fragment,r=i.uniforms,n=i.attributes}var a=this,o=a.gl,s=a._vref;a._vref=Wv.shader(o,o.VERTEX_SHADER,t),s&&s.dispose(),a.vertShader=a._vref.shader;var l=this._fref;if(a._fref=Wv.shader(o,o.FRAGMENT_SHADER,e),l&&l.dispose(),a.fragShader=a._fref.shader,!r||!n){var u=o.createProgram();if(o.attachShader(u,a.fragShader),o.attachShader(u,a.vertShader),o.linkProgram(u),!o.getProgramParameter(u,o.LINK_STATUS)){var c=o.getProgramInfoLog(u);throw new Kg(c,"Error linking program:"+c)}r=r||sv.uniforms(o,u),n=n||sv.attributes(o,u),o.deleteProgram(u)}(n=n.slice()).sort(rm);var h,f=[],d=[],p=[];for(h=0;h<n.length;++h){var g=n[h];if(g.type.indexOf("mat")>=0){for(var v=0|g.type.charAt(g.type.length-1),m=new Array(v),y=0;y<v;++y)m[y]=p.length,d.push(g.name+"["+y+"]"),"number"==typeof g.location?p.push(g.location+y):Array.isArray(g.location)&&g.location.length===v&&"number"==typeof g.location[y]?p.push(0|g.location[y]):p.push(-1);f.push({name:g.name,type:g.type,locations:m})}else f.push({name:g.name,type:g.type,locations:[p.length]}),d.push(g.name),"number"==typeof g.location?p.push(0|g.location):p.push(-1)}var b=0;for(h=0;h<p.length;++h)if(p[h]<0){for(;p.indexOf(b)>=0;)b+=1;p[h]=b}var x=new Array(r.length);function _(){a.program=Wv.program(o,a._vref,a._fref,d,p);for(var t=0;t<r.length;++t)x[t]=o.getUniformLocation(a.program,r[t].name)}_(),a._relink=_,a.types={uniforms:nv(r),attributes:nv(n)},a.attributes=$g(o,a,f,p),Object.defineProperty(a,"uniforms",iv(o,a,r,x))};var nm=function(t,e,r,n,i){var a=new tm(t);return a.update(e,r,n,i),a},im=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],n=0;n<t.length-1;n++)r.push(t[n],e[n]||"");return r.push(t[n]),r.join("")},am={},om=im(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),sm=im(["precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);am.line=function(t){return nm(t,om,sm,null,[{name:"position",type:"vec3"}])};var lm=im(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}"]),um=im(["precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);am.text=function(t){return nm(t,lm,um,null,[{name:"position",type:"vec3"}])};var cm=im(["#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}"]),hm=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);am.bg=function(t){return nm(t,cm,hm,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])};var fm=function(t){for(var e=[],r=[],n=0,i=0;i<3;++i)for(var a=(i+1)%3,o=(i+2)%3,s=[0,0,0],l=[0,0,0],u=-1;u<=1;u+=2){r.push(n,n+2,n+1,n+1,n+2,n+3),s[i]=u,l[i]=u;for(var c=-1;c<=1;c+=2){s[a]=c;for(var h=-1;h<=1;h+=2)s[o]=h,e.push(s[0],s[1],s[2],l[0],l[1],l[2]),n+=1}var f=a;a=o,o=f}var d=jg(t,new Float32Array(e)),p=jg(t,new Uint16Array(r),t.ELEMENT_ARRAY_BUFFER),g=Xg(t,[{buffer:d,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:d,type:t.FLOAT,size:3,offset:12,stride:24}],p),v=dm(t);return v.attributes.position.location=0,v.attributes.normal.location=1,new pm(t,d,g,v)},dm=am.bg;function pm(t,e,r,n){this.gl=t,this.buffer=e,this.vao=r,this.shader=n}var gm=pm.prototype;gm.draw=function(t,e,r,n,i,a){for(var o=!1,s=0;s<3;++s)o=o||i[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:r,bounds:n,enable:i,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},gm.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};var vm=function(t,e,r){var n=t*e,i=mm*t,a=i-(i-t),o=t-a,s=mm*e,l=s-(s-e),u=e-l,c=o*u-(n-a*l-o*l-a*u);if(r)return r[0]=c,r[1]=n,r;return[c,n]},mm=+(Math.pow(2,27)+1);var ym=function(t,e,r){var n=t+e,i=n-t,a=e-i,o=t-(n-i);if(r)return r[0]=o+a,r[1]=n,r;return[o+a,n]};var bm=function(t,e){var r=t.length;if(1===r){var n=vm(t[0],e);return n[0]?n:[n[1]]}var i=new Array(2*r),a=[.1,.1],o=[.1,.1],s=0;vm(t[0],e,a),a[0]&&(i[s++]=a[0]);for(var l=1;l<r;++l){vm(t[l],e,o);var u=a[1];ym(u,o[0],a),a[0]&&(i[s++]=a[0]);var c=o[1],h=a[1],f=c+h,d=f-c,p=h-d;a[1]=f,p&&(i[s++]=p)}a[1]&&(i[s++]=a[1]);0===s&&(i[s++]=0);return i.length=s,i};var xm=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],-e[0]);var i,a,o=new Array(r+n),s=0,l=0,u=0,c=Math.abs,h=t[l],f=c(h),d=-e[u],p=c(d);f<p?(a=h,(l+=1)<r&&(h=t[l],f=c(h))):(a=d,(u+=1)<n&&(d=-e[u],p=c(d)));l<r&&f<p||u>=n?(i=h,(l+=1)<r&&(h=t[l],f=c(h))):(i=d,(u+=1)<n&&(d=-e[u],p=c(d)));var g,v,m=i+a,y=m-i,b=a-y,x=b,_=m;for(;l<r&&u<n;)f<p?(i=h,(l+=1)<r&&(h=t[l],f=c(h))):(i=d,(u+=1)<n&&(d=-e[u],p=c(d))),(b=(a=x)-(y=(m=i+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(v=g-_))+(m-v),_=g;for(;l<r;)(b=(a=x)-(y=(m=(i=h)+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(v=g-_))+(m-v),_=g,(l+=1)<r&&(h=t[l]);for(;u<n;)(b=(a=x)-(y=(m=(i=d)+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(v=g-_))+(m-v),_=g,(u+=1)<n&&(d=-e[u]);x&&(o[s++]=x);_&&(o[s++]=_);s||(o[s++]=0);return o.length=s,o};var _m=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],e[0]);var i,a,o=new Array(r+n),s=0,l=0,u=0,c=Math.abs,h=t[l],f=c(h),d=e[u],p=c(d);f<p?(a=h,(l+=1)<r&&(h=t[l],f=c(h))):(a=d,(u+=1)<n&&(d=e[u],p=c(d)));l<r&&f<p||u>=n?(i=h,(l+=1)<r&&(h=t[l],f=c(h))):(i=d,(u+=1)<n&&(d=e[u],p=c(d)));var g,v,m=i+a,y=m-i,b=a-y,x=b,_=m;for(;l<r&&u<n;)f<p?(i=h,(l+=1)<r&&(h=t[l],f=c(h))):(i=d,(u+=1)<n&&(d=e[u],p=c(d))),(b=(a=x)-(y=(m=i+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(v=g-_))+(m-v),_=g;for(;l<r;)(b=(a=x)-(y=(m=(i=h)+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(v=g-_))+(m-v),_=g,(l+=1)<r&&(h=t[l]);for(;u<n;)(b=(a=x)-(y=(m=(i=d)+a)-i))&&(o[s++]=b),x=_-((g=_+m)-(v=g-_))+(m-v),_=g,(u+=1)<n&&(d=e[u]);x&&(o[s++]=x);_&&(o[s++]=_);s||(o[s++]=0);return o.length=s,o};var wm={},Mm=5;function Am(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(i[o++]=t[n][a]);return r}function Tm(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",Tm(t.slice(0,e)),",",Tm(t.slice(e)),")"].join("")}function km(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",Tm(km(Am(t,r))),",",(n=r,1&n?"-":""),t[0][r],")"].join(""));return e;var n}function Em(t){for(var e=[],r=[],n=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),i=[],a=0;a<t;++a)0==(1&a)?e.push.apply(e,km(Am(n,a))):r.push.apply(r,km(Am(n,a))),i.push("m"+a);var o=Tm(e),s=Tm(r),l="orientation"+t+"Exact",u=["function ",l,"(",i.join(),"){var p=",o,",n=",s,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",u)(_m,vm,bm,xm)}var Lm=Em(3),Cm=Em(4),Sm=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),a=(t[0]-r[0])*(e[1]-r[1]),o=i-a;if(i>0){if(a<=0)return o;n=i+a}else{if(!(i<0))return o;if(a>=0)return o;n=-(i+a)}var s=3.3306690738754716e-16*n;return o>=s||o<=-s?o:Lm(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],a=e[0]-n[0],o=r[0]-n[0],s=t[1]-n[1],l=e[1]-n[1],u=r[1]-n[1],c=t[2]-n[2],h=e[2]-n[2],f=r[2]-n[2],d=a*u,p=o*l,g=o*s,v=i*u,m=i*l,y=a*s,b=c*(d-p)+h*(g-v)+f*(m-y),x=7.771561172376103e-16*((Math.abs(d)+Math.abs(p))*Math.abs(c)+(Math.abs(g)+Math.abs(v))*Math.abs(h)+(Math.abs(m)+Math.abs(y))*Math.abs(f));return b>x||-b>x?b:Cm(t,e,r,n)}];!function(){for(;Sm.length<=Mm;)Sm.push(Em(Sm.length));for(var t=[],e=["slow"],r=0;r<=Mm;++r)t.push("a"+r),e.push("o"+r);var n=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=Mm;++r)n.push("case ",r,":return o",r,"(",t.slice(0,r).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(n.join(""));var i=Function.apply(void 0,e);for(wm=i.apply(void 0,[function(t){var e=Sm[t.length];return e||(e=Sm[t.length]=Em(t.length)),e.apply(void 0,t)}].concat(Sm)),r=0;r<=Mm;++r)wm[r]=Sm[r]}();var Pm=function(t,e){for(var r=vm(t[0],e[0]),n=1;n<t.length;++n)r=_m(r,vm(t[n],e[n]));return r};var Rm={};function Om(t,e){var r=_m(Pm(t,e),[e[e.length-1]]);return r[r.length-1]}function Im(t,e,r,n){var i=-e/(n-e);i<0?i=0:i>1&&(i=1);for(var a=1-i,o=t.length,s=new Array(o),l=0;l<o;++l)s[l]=i*t[l]+a*r[l];return s}(Rm=function(t,e){for(var r=[],n=[],i=Om(t[t.length-1],e),a=t[t.length-1],o=t[0],s=0;s<t.length;++s,a=o){var l=Om(o=t[s],e);if(i<0&&l>0||i>0&&l<0){var u=Im(a,l,o,i);r.push(u),n.push(u.slice())}l<0?n.push(o.slice()):l>0?r.push(o.slice()):(r.push(o.slice()),n.push(o.slice())),i=l}return{positive:r,negative:n}}).positive=function(t,e){for(var r=[],n=Om(t[t.length-1],e),i=t[t.length-1],a=t[0],o=0;o<t.length;++o,i=a){var s=Om(a=t[o],e);(n<0&&s>0||n>0&&s<0)&&r.push(Im(i,s,a,n)),s>=0&&r.push(a.slice()),n=s}return r},Rm.negative=function(t,e){for(var r=[],n=Om(t[t.length-1],e),i=t[t.length-1],a=t[0],o=0;o<t.length;++o,i=a){var s=Om(a=t[o],e);(n<0&&s>0||n>0&&s<0)&&r.push(Im(i,s,a,n)),s<=0&&r.push(a.slice()),n=s}return r};var Nm=function(t,e,r,n){dd(Dm,e,t),dd(Dm,r,Dm);for(var i=0,a=0;a<2;++a){jm[2]=n[a][2];for(var o=0;o<2;++o){jm[1]=n[o][1];for(var s=0;s<2;++s)jm[0]=n[s][0],Um(zm[i],jm,Dm),i+=1}}for(var l=-1,a=0;a<8;++a){for(var u=zm[a][3],c=0;c<3;++c)Fm[a][c]=zm[a][c]/u;u<0&&(l<0?l=a:Fm[a][2]<Fm[l][2]&&(l=a))}if(l<0){l=0;for(var h=0;h<3;++h){for(var f=(h+2)%3,d=(h+1)%3,p=-1,g=-1,v=0;v<2;++v){var m=v<<h,y=m+(v<<f)+(1-v<<d),b=m+(1-v<<f)+(v<<d);wm(Fm[m],Fm[y],Fm[b],Bm)<0||(v?p=1:g=1)}if(p<0||g<0)g>p&&(l|=1<<h);else{for(var v=0;v<2;++v){var m=v<<h,y=m+(v<<f)+(1-v<<d),b=m+(1-v<<f)+(v<<d),x=Hm([zm[m],zm[y],zm[b],zm[m+(1<<f)+(1<<d)]]);v?p=x:g=x}g>p&&(l|=1<<h)}}}for(var _=7^l,w=-1,a=0;a<8;++a)a!==l&&a!==_&&(w<0?w=a:Fm[w][1]>Fm[a][1]&&(w=a));for(var M=-1,a=0;a<3;++a){var A=w^1<<a;if(A!==l&&A!==_){M<0&&(M=A);var d=Fm[A];d[0]<Fm[M][0]&&(M=A)}}for(var T=-1,a=0;a<3;++a){var A=w^1<<a;if(A!==l&&A!==_&&A!==M){T<0&&(T=A);var d=Fm[A];d[0]>Fm[T][0]&&(T=A)}}var k=qm;k[0]=k[1]=k[2]=0,k[Np.log2(M^w)]=w&M,k[Np.log2(w^T)]=w&T;var E=7^T;E===l||E===_?(E=7^M,k[Np.log2(T^E)]=E&T):k[Np.log2(M^E)]=E&M;for(var L=Gm,C=l,h=0;h<3;++h)L[h]=C&1<<h?-1:1;return Xm},Dm=new Array(16),zm=(new Array(16),new Array(8)),Fm=new Array(8),jm=new Array(3),Bm=[0,0,0];function Um(t,e,r){for(var n=0;n<4;++n){t[n]=r[12+n];for(var i=0;i<3;++i)t[n]+=e[i]*r[4*i+n]}}!function(){for(var t=0;t<8;++t)zm[t]=[1,1,1,1],Fm[t]=[1,1,1]}();var Vm=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function Hm(t){for(var e=0;e<Vm.length;++e)if((t=Rm.positive(t,Vm[e])).length<3)return 0;var r=t[0],n=r[0]/r[3],i=r[1]/r[3],a=0;for(e=1;e+1<t.length;++e){var o=t[e],s=t[e+1],l=o[0]/o[3]-n,u=o[1]/o[3]-i,c=s[0]/s[3]-n,h=s[1]/s[3]-i;a+=Math.abs(l*h-u*c)}return a}var qm=[1,1,1],Gm=[0,0,0],Xm={cubeEdges:qm,axis:Gm};var Wm=function(t,e,r){var n=[],i=[0,0,0],a=[0,0,0],o=[0,0,0],s=[0,0,0];n.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var l=0;l<3;++l){for(var u=n.length/3|0,c=0;c<r[l].length;++c){var h=+r[l][c].x;n.push(h,0,1,h,1,1,h,0,-1,h,0,-1,h,1,1,h,1,-1)}var f=n.length/3|0;i[l]=u,a[l]=f-u;for(var u=n.length/3|0,d=0;d<r[l].length;++d){var h=+r[l][d].x;n.push(h,0,1,h,1,1,h,0,-1,h,0,-1,h,1,1,h,1,-1)}var f=n.length/3|0;o[l]=u,s[l]=f-u}var p=jg(t,new Float32Array(n)),g=Xg(t,[{buffer:p,type:t.FLOAT,size:3,stride:0,offset:0}]),v=Ym(t);return v.attributes.position.location=0,new ry(t,p,g,v,a,i,s,o)},Ym=am.line,Zm=[0,0,0],Qm=[0,0,0],Km=[0,0,0],$m=[0,0,0],Jm=[1,1];function ty(t){return t[0]=t[1]=t[2]=0,t}function ey(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ry(t,e,r,n,i,a,o,s){this.gl=t,this.vertBuffer=e,this.vao=r,this.shader=n,this.tickCount=i,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}var ny=ry.prototype;function iy(t,e,r,n,i){var a=["function ",t,"(a,l,h,",n.join(","),"){",i?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?e.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",e,"){i=m;"),r?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),i?a.push("return -1};"):a.push("return i};"),a.join("")}function ay(t,e,r,n){return new Function([iy("A","x"+t+"y",e,["y"],n),iy("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}ny.bind=function(t,e,r){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=r,Jm[0]=this.gl.drawingBufferWidth,Jm[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=Jm,this.vao.bind()},ny.unbind=function(){this.vao.unbind()},ny.drawAxisLine=function(t,e,r,n,i){var a=ty(Qm);this.shader.uniforms.majorAxis=Qm,a[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=a;var o,s=ey($m,r);s[t]+=e[0][t],this.shader.uniforms.offset=s,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=n,(o=ty(Km))[(t+2)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6),(o=ty(Km))[(t+1)%3]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,6)},ny.drawAxisTicks=function(t,e,r,n,i){if(this.tickCount[t]){var a=ty(Zm);a[t]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=r,this.shader.uniforms.color=n,this.shader.uniforms.lineWidth=i;var o=ty(Km);o[t]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}},ny.drawGrid=function(t,e,r,n,i,a){if(this.gridCount[t]){var o=ty(Qm);o[e]=r[1][e]-r[0][e],this.shader.uniforms.minorAxis=o;var s=ey($m,n);s[e]+=r[0][e],this.shader.uniforms.offset=s;var l=ty(Zm);l[t]=1,this.shader.uniforms.majorAxis=l;var u=ty(Km);u[t]=1,this.shader.uniforms.screenAxis=u,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t])}},ny.drawZero=function(t,e,r,n,i,a){var o=ty(Qm);this.shader.uniforms.majorAxis=o,o[t]=r[1][t]-r[0][t],this.shader.uniforms.minorAxis=o;var s=ey($m,n);s[t]+=r[0][t],this.shader.uniforms.offset=s;var l=ty(Km);l[e]=1,this.shader.uniforms.screenAxis=l,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},ny.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};var oy={ge:ay(">=",!1,"GE"),gt:ay(">",!1,"GT"),lt:ay("<",!0,"LT"),le:ay("<=",!0,"LE"),eq:ay("-",!0,"EQ",!0)},sy={},ly=6;function uy(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(i[o++]=t[n][a]);return r}function cy(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",cy(t.slice(0,e)),",",cy(t.slice(e)),")"].join("")}function hy(t,e){if("m"===t.charAt(0)){if("w"===e.charAt(0)){var r=t.split("[");return["w",e.substr(1),"m",r[0].substr(1)].join("")}return["prod(",t,",",e,")"].join("")}return hy(e,t)}function fy(t){if(2===t.length)return[["diff(",hy(t[0][0],t[1][1]),",",hy(t[1][0],t[0][1]),")"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",cy(fy(uy(t,r))),",",(n=r,!0&n?"-":""),t[0][r],")"].join(""));return e;var n}function dy(t,e){for(var r=[],n=0;n<e-2;++n)r.push(["prod(m",t,"[",n,"],m",t,"[",n,"])"].join(""));return cy(r)}function py(t){for(var e=[],r=[],n=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-2,"]"].join("")}return e}(t),i=0;i<t;++i)n[0][i]="1",n[t-1][i]="w"+i;for(i=0;i<t;++i)0==(1&i)?e.push.apply(e,fy(uy(n,i))):r.push.apply(r,fy(uy(n,i)));var a=cy(e),o=cy(r),s="exactInSphere"+t,l=[];for(i=0;i<t;++i)l.push("m"+i);var u=["function ",s,"(",l.join(),"){"];for(i=0;i<t;++i){u.push("var w",i,"=",dy(i,t),";");for(var c=0;c<t;++c)c!==i&&u.push("var w",i,"m",c,"=scale(w",i,",m",c,"[0]);")}return u.push("var p=",a,",n=",o,",d=diff(p,n);return d[d.length-1];}return ",s),new Function("sum","diff","prod","scale",u.join(""))(_m,xm,vm,bm)}var gy=[function(){return 0},function(){return 0},function(){return 0}];!function(){for(;gy.length<=ly;)gy.push(py(gy.length));for(var t=[],e=["slow"],r=0;r<=ly;++r)t.push("a"+r),e.push("o"+r);var n=["function testInSphere(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=ly;++r)n.push("case ",r,":return o",r,"(",t.slice(0,r).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),e.push(n.join(""));var i=Function.apply(void 0,e);for(sy=i.apply(void 0,[function(t){var e=gy[t.length];return e||(e=gy[t.length]=py(t.length)),e.apply(void 0,t)}].concat(gy)),r=0;r<=ly;++r)sy[r]=gy[r]}();var vy=sy[4],my=function(t,e){for(var r=[],n=t.length,i=e.stars,a=0;a<n;++a)for(var o=i[a],s=1;s<o.length;s+=2){var l=o[s];if(!(l<a)&&!e.isConstraint(a,l)){for(var u=o[s-1],c=-1,h=1;h<o.length;h+=2)if(o[h-1]===l){c=o[h];break}c<0||vy(t[a],t[l],t[u],t[c])<0&&r.push(a,l)}}for(;r.length>0;){for(var l=r.pop(),a=r.pop(),u=-1,c=-1,o=i[a],f=1;f<o.length;f+=2){var d=o[f-1],p=o[f];d===l?c=p:p===l&&(u=d)}u<0||c<0||(vy(t[a],t[l],t[u],t[c])>=0||(e.flip(a,l),yy(t,e,r,u,a,c),yy(t,e,r,a,c,u),yy(t,e,r,c,l,u),yy(t,e,r,l,u,c)))}};function yy(t,e,r,n,i,a){var o=e.opposite(n,i);if(!(o<0)){if(i<n){var s=n;n=i,i=s,s=a,a=o,o=s}e.isConstraint(n,i)||vy(t[n],t[i],t[a],t[o])<0&&r.push(n,i)}}var by,xy=function(t,e,r){var n=function(t,e){for(var r=t.cells(),n=r.length,i=0;i<n;++i){var a=r[i],o=a[0],s=a[1],l=a[2];s<l?s<o&&(a[0]=s,a[1]=l,a[2]=o):l<o&&(a[0]=l,a[1]=o,a[2]=s)}r.sort(wy);for(var u=new Array(n),i=0;i<u.length;++i)u[i]=0;var c=[],h=[],f=new Array(3*n),d=new Array(3*n),p=null;e&&(p=[]);for(var g=new _y(r,f,d,u,c,h,p),i=0;i<n;++i)for(var a=r[i],v=0;v<3;++v){var o=a[v],s=a[(v+1)%3],m=f[3*i+v]=g.locate(s,o,t.opposite(s,o)),y=d[3*i+v]=t.isConstraint(o,s);m<0&&(y?h.push(i):(c.push(i),u[i]=1),e&&p.push([s,o,-1]))}return g}(t,r);if(0===e)return r?n.cells.concat(n.boundary):n.cells;var i=1,a=n.active,o=n.next,s=n.flags,l=n.cells,u=n.constraint,c=n.neighbor;for(;a.length>0||o.length>0;){for(;a.length>0;){var h=a.pop();if(s[h]!==-i){s[h]=i;l[h];for(var f=0;f<3;++f){var d=c[3*h+f];d>=0&&0===s[d]&&(u[3*h+f]?o.push(d):(a.push(d),s[d]=i))}}}var p=o;o=a,a=p,o.length=0,i=-i}var g=function(t,e,r){for(var n=0,i=0;i<t.length;++i)e[i]===r&&(t[n++]=t[i]);return t.length=n,t}(l,s,e);if(r)return g.concat(n.boundary);return g};function _y(t,e,r,n,i,a,o){this.cells=t,this.neighbor=e,this.flags=n,this.constraint=r,this.active=i,this.next=a,this.boundary=o}function wy(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}_y.prototype.locate=(by=[0,0,0],function(t,e,r){var n=t,i=e,a=r;return e<r?e<t&&(n=e,i=r,a=t):r<t&&(n=r,i=t,a=e),n<0?-1:(by[0]=n,by[1]=i,by[2]=a,oy.eq(this.cells,by,wy))});var My=wm[3],Ay=0,Ty=1,ky=2,Ey=function(t,e){for(var r=t.length,n=e.length,i=[],a=0;a<r;++a)i.push(new Cy(t[a],null,Ay,a));for(var a=0;a<n;++a){var o=e[a],s=t[o[0]],l=t[o[1]];s[0]<l[0]?i.push(new Cy(s,l,ky,a),new Cy(l,s,Ty,a)):s[0]>l[0]&&i.push(new Cy(l,s,ky,a),new Cy(s,l,Ty,a))}i.sort(Sy);for(var u=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),c=[new Ly([u,1],[u,0],-1,[],[],[],[])],h=[],a=0,f=i.length;a<f;++a){var d=i[a],p=d.type;p===Ay?Ry(h,c,t,d.a,d.idx):p===ky?Iy(c,t,d):Ny(c,t,d)}return h};function Ly(t,e,r,n,i){this.a=t,this.b=e,this.idx=r,this.lowerIds=n,this.upperIds=i}function Cy(t,e,r,n){this.a=t,this.b=e,this.type=r,this.idx=n}function Sy(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||(t.type!==Ay&&(r=My(t.a,t.b,e.b))?r:t.idx-e.idx)}function Py(t,e){return My(t.a,t.b,e)}function Ry(t,e,r,n,i){for(var a=oy.lt(e,n,Py),o=oy.gt(e,n,Py),s=a;s<o;++s){for(var l=e[s],u=l.lowerIds,c=u.length;c>1&&My(r[u[c-2]],r[u[c-1]],n)>0;)t.push([u[c-1],u[c-2],i]),c-=1;u.length=c,u.push(i);var h=l.upperIds;for(c=h.length;c>1&&My(r[h[c-2]],r[h[c-1]],n)<0;)t.push([h[c-2],h[c-1],i]),c-=1;h.length=c,h.push(i)}}function Oy(t,e){var r;return(r=t.a[0]<e.a[0]?My(t.a,t.b,e.a):My(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?My(t.a,t.b,e.b):My(e.b,e.a,t.b))||t.idx-e.idx}function Iy(t,e,r){var n=oy.le(t,r,Oy),i=t[n],a=i.upperIds,o=a[a.length-1];i.upperIds=[o],t.splice(n+1,0,new Ly(r.a,r.b,r.idx,[o],a))}function Ny(t,e,r){var n=r.a;r.a=r.b,r.b=n;var i=oy.eq(t,r,Oy),a=t[i];t[i-1].upperIds=a.upperIds,t.splice(i,1)}var Dy=function(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=[];return new zy(r,e)};function zy(t,e){this.stars=t,this.edges=e}var Fy=zy.prototype;function jy(t,e,r){for(var n=1,i=t.length;n<i;n+=2)if(t[n-1]===e&&t[n]===r)return t[n-1]=t[i-2],t[n]=t[i-1],void(t.length=i-2)}Fy.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(r,n){return t[0]=Math.min(r,n),t[1]=Math.max(r,n),oy.eq(this.edges,t,e)>=0}}(),Fy.removeTriangle=function(t,e,r){var n=this.stars;jy(n[t],e,r),jy(n[e],r,t),jy(n[r],t,e)},Fy.addTriangle=function(t,e,r){var n=this.stars;n[t].push(e,r),n[e].push(r,t),n[r].push(t,e)},Fy.opposite=function(t,e){for(var r=this.stars[e],n=1,i=r.length;n<i;n+=2)if(r[n]===t)return r[n-1];return-1},Fy.flip=function(t,e){var r=this.opposite(t,e),n=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,n),this.addTriangle(t,n,r),this.addTriangle(e,r,n)},Fy.edges=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,o=i.length;a<o;a+=2)e.push([i[a],i[a+1]]);return e},Fy.cells=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,o=i.length;a<o;a+=2){var s=i[a],l=i[a+1];r<Math.min(s,l)&&e.push([r,s,l])}return e};var By=function(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var n=!!Hy(r,"delaunay",!0),i=!!Hy(r,"interior",!0),a=!!Hy(r,"exterior",!0),o=!!Hy(r,"infinity",!1);if(!i&&!a||0===t.length)return[];var s=Ey(t,e);if(n||i!==a||o){for(var l=Dy(t.length,function(t){return t.map(Uy).sort(Vy)}(e)),u=0;u<s.length;++u){var c=s[u];l.addTriangle(c[0],c[1],c[2])}return n&&my(t,l),a?i?o?xy(l,0,o):l.cells():xy(l,1,o):xy(l,-1)}return s};function Uy(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function Vy(t,e){return t[0]-e[0]||t[1]-e[1]}function Hy(t,e,r){return e in t?t[e]:r}var qy=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))};var Gy={},Xy={exports:{}};!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{a=Gy.Buffer}catch(t){}function o(t,e,r){for(var n=0,i=Math.min(t.length,r),a=e;a<i;a++){var o=t.charCodeAt(a)-48;n<<=4,n|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return n}function s(t,e,r,n){for(var i=0,a=Math.min(t.length,r),o=e;o<a;o++){var s=t.charCodeAt(o)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},i.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,a=0;for(r=t.length-6,n=0;r>=e;r-=6)i=o(t,r,r+6),this.words[n]|=i<<a&67108863,this.words[n+1]|=i>>>26-a&4194303,(a+=24)>=26&&(a-=26,n++);r+6!==e&&(i=o(t,e,r+6),this.words[n]|=i<<a&67108863,this.words[n+1]|=i>>>26-a&4194303),this.strip()},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var a=t.length-r,o=a%n,l=Math.min(a,a-o)+r,u=0,c=r;c<l;c+=n)u=s(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var h=1;for(u=s(t,c,t.length,e),c=0;c<o;c++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],a=0|e.words[0],o=i*a,s=67108863&o,l=o/67108864|0;r.words[0]=s;for(var u=1;u<n;u++){for(var c=l>>>26,h=67108863&l,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;c+=(o=(i=0|t.words[p])*(a=0|e.words[d])+h)/67108864|0,h=67108863&o}r.words[u]=0|h,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}i.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],h=(16777215&(s<<i|a)).toString(16);n=0!==(a=s>>>24-i&16777215)||o!==this.length-1?l[6-h.length]+h+n:h+n,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(n=a.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=u[t],d=c[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?g+n:l[f-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(t,e){return r(void 0!==a),this.toArrayLike(a,t,e)},i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},i.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===e,u=new t(a),c=this.clone();if(l){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),u[s]=o;for(;s<a;s++)u[s]=0}else{for(s=0;s<a-i;s++)u[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),u[a-s-1]=o}return u},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,a=0;a<n.length;a++)e=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&e,i=e>>>26;for(;0!==i&&a<r.length;a++)e=(0|r.words[a])+i,this.words[a]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var a=0,o=0;o<n.length;o++)a=(e=(0|r.words[o])-(0|n.words[o])+a)>>26,this.words[o]=67108863&e;for(;0!==a&&o<r.length;o++)a=(e=(0|r.words[o])+a)>>26,this.words[o]=67108863&e;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,r){var n,i,a,o=t.words,s=e.words,l=r.words,u=0,c=0|o[0],h=8191&c,f=c>>>13,d=0|o[1],p=8191&d,g=d>>>13,v=0|o[2],m=8191&v,y=v>>>13,b=0|o[3],x=8191&b,_=b>>>13,w=0|o[4],M=8191&w,A=w>>>13,T=0|o[5],k=8191&T,E=T>>>13,L=0|o[6],C=8191&L,S=L>>>13,P=0|o[7],R=8191&P,O=P>>>13,I=0|o[8],N=8191&I,D=I>>>13,z=0|o[9],F=8191&z,j=z>>>13,B=0|s[0],U=8191&B,V=B>>>13,H=0|s[1],q=8191&H,G=H>>>13,X=0|s[2],W=8191&X,Y=X>>>13,Z=0|s[3],Q=8191&Z,K=Z>>>13,$=0|s[4],J=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],at=8191&it,ot=it>>>13,st=0|s[7],lt=8191&st,ut=st>>>13,ct=0|s[8],ht=8191&ct,ft=ct>>>13,dt=0|s[9],pt=8191&dt,gt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var vt=(u+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,U)|0))<<13)|0;u=((a=Math.imul(f,V))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,V))+Math.imul(g,U)|0,a=Math.imul(g,V);var mt=(u+(n=n+Math.imul(h,q)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(f,q)|0))<<13)|0;u=((a=a+Math.imul(f,G)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,U),i=(i=Math.imul(m,V))+Math.imul(y,U)|0,a=Math.imul(y,V),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,q)|0,a=a+Math.imul(g,G)|0;var yt=(u+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,W)|0))<<13)|0;u=((a=a+Math.imul(f,Y)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(x,U),i=(i=Math.imul(x,V))+Math.imul(_,U)|0,a=Math.imul(_,V),n=n+Math.imul(m,q)|0,i=(i=i+Math.imul(m,G)|0)+Math.imul(y,q)|0,a=a+Math.imul(y,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,W)|0,a=a+Math.imul(g,Y)|0;var bt=(u+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,Q)|0))<<13)|0;u=((a=a+Math.imul(f,K)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(M,U),i=(i=Math.imul(M,V))+Math.imul(A,U)|0,a=Math.imul(A,V),n=n+Math.imul(x,q)|0,i=(i=i+Math.imul(x,G)|0)+Math.imul(_,q)|0,a=a+Math.imul(_,G)|0,n=n+Math.imul(m,W)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(y,W)|0,a=a+Math.imul(y,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(g,Q)|0,a=a+Math.imul(g,K)|0;var xt=(u+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,J)|0))<<13)|0;u=((a=a+Math.imul(f,tt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(k,U),i=(i=Math.imul(k,V))+Math.imul(E,U)|0,a=Math.imul(E,V),n=n+Math.imul(M,q)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(A,q)|0,a=a+Math.imul(A,G)|0,n=n+Math.imul(x,W)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(_,W)|0,a=a+Math.imul(_,Y)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,K)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,J)|0,a=a+Math.imul(g,tt)|0;var _t=(u+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(f,rt)|0))<<13)|0;u=((a=a+Math.imul(f,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(C,U),i=(i=Math.imul(C,V))+Math.imul(S,U)|0,a=Math.imul(S,V),n=n+Math.imul(k,q)|0,i=(i=i+Math.imul(k,G)|0)+Math.imul(E,q)|0,a=a+Math.imul(E,G)|0,n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(A,W)|0,a=a+Math.imul(A,Y)|0,n=n+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,K)|0)+Math.imul(_,Q)|0,a=a+Math.imul(_,K)|0,n=n+Math.imul(m,J)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(y,J)|0,a=a+Math.imul(y,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,a=a+Math.imul(g,nt)|0;var wt=(u+(n=n+Math.imul(h,at)|0)|0)+((8191&(i=(i=i+Math.imul(h,ot)|0)+Math.imul(f,at)|0))<<13)|0;u=((a=a+Math.imul(f,ot)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(R,U),i=(i=Math.imul(R,V))+Math.imul(O,U)|0,a=Math.imul(O,V),n=n+Math.imul(C,q)|0,i=(i=i+Math.imul(C,G)|0)+Math.imul(S,q)|0,a=a+Math.imul(S,G)|0,n=n+Math.imul(k,W)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(E,W)|0,a=a+Math.imul(E,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(A,Q)|0,a=a+Math.imul(A,K)|0,n=n+Math.imul(x,J)|0,i=(i=i+Math.imul(x,tt)|0)+Math.imul(_,J)|0,a=a+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=(i=i+Math.imul(m,nt)|0)+Math.imul(y,rt)|0,a=a+Math.imul(y,nt)|0,n=n+Math.imul(p,at)|0,i=(i=i+Math.imul(p,ot)|0)+Math.imul(g,at)|0,a=a+Math.imul(g,ot)|0;var Mt=(u+(n=n+Math.imul(h,lt)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,lt)|0))<<13)|0;u=((a=a+Math.imul(f,ut)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,V))+Math.imul(D,U)|0,a=Math.imul(D,V),n=n+Math.imul(R,q)|0,i=(i=i+Math.imul(R,G)|0)+Math.imul(O,q)|0,a=a+Math.imul(O,G)|0,n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(S,W)|0,a=a+Math.imul(S,Y)|0,n=n+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(E,Q)|0,a=a+Math.imul(E,K)|0,n=n+Math.imul(M,J)|0,i=(i=i+Math.imul(M,tt)|0)+Math.imul(A,J)|0,a=a+Math.imul(A,tt)|0,n=n+Math.imul(x,rt)|0,i=(i=i+Math.imul(x,nt)|0)+Math.imul(_,rt)|0,a=a+Math.imul(_,nt)|0,n=n+Math.imul(m,at)|0,i=(i=i+Math.imul(m,ot)|0)+Math.imul(y,at)|0,a=a+Math.imul(y,ot)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(g,lt)|0,a=a+Math.imul(g,ut)|0;var At=(u+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((a=a+Math.imul(f,ft)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(F,U),i=(i=Math.imul(F,V))+Math.imul(j,U)|0,a=Math.imul(j,V),n=n+Math.imul(N,q)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(D,q)|0,a=a+Math.imul(D,G)|0,n=n+Math.imul(R,W)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,Y)|0,n=n+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(S,Q)|0,a=a+Math.imul(S,K)|0,n=n+Math.imul(k,J)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(E,J)|0,a=a+Math.imul(E,tt)|0,n=n+Math.imul(M,rt)|0,i=(i=i+Math.imul(M,nt)|0)+Math.imul(A,rt)|0,a=a+Math.imul(A,nt)|0,n=n+Math.imul(x,at)|0,i=(i=i+Math.imul(x,ot)|0)+Math.imul(_,at)|0,a=a+Math.imul(_,ot)|0,n=n+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,ut)|0)+Math.imul(y,lt)|0,a=a+Math.imul(y,ut)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(g,ht)|0,a=a+Math.imul(g,ft)|0;var Tt=(u+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,gt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((a=a+Math.imul(f,gt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(F,q),i=(i=Math.imul(F,G))+Math.imul(j,q)|0,a=Math.imul(j,G),n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(D,W)|0,a=a+Math.imul(D,Y)|0,n=n+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,K)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,K)|0,n=n+Math.imul(C,J)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(S,J)|0,a=a+Math.imul(S,tt)|0,n=n+Math.imul(k,rt)|0,i=(i=i+Math.imul(k,nt)|0)+Math.imul(E,rt)|0,a=a+Math.imul(E,nt)|0,n=n+Math.imul(M,at)|0,i=(i=i+Math.imul(M,ot)|0)+Math.imul(A,at)|0,a=a+Math.imul(A,ot)|0,n=n+Math.imul(x,lt)|0,i=(i=i+Math.imul(x,ut)|0)+Math.imul(_,lt)|0,a=a+Math.imul(_,ut)|0,n=n+Math.imul(m,ht)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(y,ht)|0,a=a+Math.imul(y,ft)|0;var kt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;u=((a=a+Math.imul(g,gt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(F,W),i=(i=Math.imul(F,Y))+Math.imul(j,W)|0,a=Math.imul(j,Y),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(D,Q)|0,a=a+Math.imul(D,K)|0,n=n+Math.imul(R,J)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(O,J)|0,a=a+Math.imul(O,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(S,rt)|0,a=a+Math.imul(S,nt)|0,n=n+Math.imul(k,at)|0,i=(i=i+Math.imul(k,ot)|0)+Math.imul(E,at)|0,a=a+Math.imul(E,ot)|0,n=n+Math.imul(M,lt)|0,i=(i=i+Math.imul(M,ut)|0)+Math.imul(A,lt)|0,a=a+Math.imul(A,ut)|0,n=n+Math.imul(x,ht)|0,i=(i=i+Math.imul(x,ft)|0)+Math.imul(_,ht)|0,a=a+Math.imul(_,ft)|0;var Et=(u+(n=n+Math.imul(m,pt)|0)|0)+((8191&(i=(i=i+Math.imul(m,gt)|0)+Math.imul(y,pt)|0))<<13)|0;u=((a=a+Math.imul(y,gt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(F,Q),i=(i=Math.imul(F,K))+Math.imul(j,Q)|0,a=Math.imul(j,K),n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(D,J)|0,a=a+Math.imul(D,tt)|0,n=n+Math.imul(R,rt)|0,i=(i=i+Math.imul(R,nt)|0)+Math.imul(O,rt)|0,a=a+Math.imul(O,nt)|0,n=n+Math.imul(C,at)|0,i=(i=i+Math.imul(C,ot)|0)+Math.imul(S,at)|0,a=a+Math.imul(S,ot)|0,n=n+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,ut)|0)+Math.imul(E,lt)|0,a=a+Math.imul(E,ut)|0,n=n+Math.imul(M,ht)|0,i=(i=i+Math.imul(M,ft)|0)+Math.imul(A,ht)|0,a=a+Math.imul(A,ft)|0;var Lt=(u+(n=n+Math.imul(x,pt)|0)|0)+((8191&(i=(i=i+Math.imul(x,gt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((a=a+Math.imul(_,gt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(F,J),i=(i=Math.imul(F,tt))+Math.imul(j,J)|0,a=Math.imul(j,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(D,rt)|0,a=a+Math.imul(D,nt)|0,n=n+Math.imul(R,at)|0,i=(i=i+Math.imul(R,ot)|0)+Math.imul(O,at)|0,a=a+Math.imul(O,ot)|0,n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(S,lt)|0,a=a+Math.imul(S,ut)|0,n=n+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(E,ht)|0,a=a+Math.imul(E,ft)|0;var Ct=(u+(n=n+Math.imul(M,pt)|0)|0)+((8191&(i=(i=i+Math.imul(M,gt)|0)+Math.imul(A,pt)|0))<<13)|0;u=((a=a+Math.imul(A,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(F,rt),i=(i=Math.imul(F,nt))+Math.imul(j,rt)|0,a=Math.imul(j,nt),n=n+Math.imul(N,at)|0,i=(i=i+Math.imul(N,ot)|0)+Math.imul(D,at)|0,a=a+Math.imul(D,ot)|0,n=n+Math.imul(R,lt)|0,i=(i=i+Math.imul(R,ut)|0)+Math.imul(O,lt)|0,a=a+Math.imul(O,ut)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(S,ht)|0,a=a+Math.imul(S,ft)|0;var St=(u+(n=n+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,gt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((a=a+Math.imul(E,gt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(F,at),i=(i=Math.imul(F,ot))+Math.imul(j,at)|0,a=Math.imul(j,ot),n=n+Math.imul(N,lt)|0,i=(i=i+Math.imul(N,ut)|0)+Math.imul(D,lt)|0,a=a+Math.imul(D,ut)|0,n=n+Math.imul(R,ht)|0,i=(i=i+Math.imul(R,ft)|0)+Math.imul(O,ht)|0,a=a+Math.imul(O,ft)|0;var Pt=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,gt)|0)+Math.imul(S,pt)|0))<<13)|0;u=((a=a+Math.imul(S,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(F,lt),i=(i=Math.imul(F,ut))+Math.imul(j,lt)|0,a=Math.imul(j,ut),n=n+Math.imul(N,ht)|0,i=(i=i+Math.imul(N,ft)|0)+Math.imul(D,ht)|0,a=a+Math.imul(D,ft)|0;var Rt=(u+(n=n+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,gt)|0)+Math.imul(O,pt)|0))<<13)|0;u=((a=a+Math.imul(O,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(F,ht),i=(i=Math.imul(F,ft))+Math.imul(j,ht)|0,a=Math.imul(j,ft);var Ot=(u+(n=n+Math.imul(N,pt)|0)|0)+((8191&(i=(i=i+Math.imul(N,gt)|0)+Math.imul(D,pt)|0))<<13)|0;u=((a=a+Math.imul(D,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863;var It=(u+(n=Math.imul(F,pt))|0)+((8191&(i=(i=Math.imul(F,gt))+Math.imul(j,pt)|0))<<13)|0;return u=((a=Math.imul(j,gt))+(i>>>13)|0)+(It>>>26)|0,It&=67108863,l[0]=vt,l[1]=mt,l[2]=yt,l[3]=bt,l[4]=xt,l[5]=_t,l[6]=wt,l[7]=Mt,l[8]=At,l[9]=Tt,l[10]=kt,l[11]=Et,l[12]=Lt,l[13]=Ct,l[14]=St,l[15]=Pt,l[16]=Rt,l[17]=Ot,l[18]=It,0!==u&&(l[19]=u,r.length++),r};function d(t,e,r){return(new p).mulp(t,e,r)}function p(t,e){this.x=t,this.y=e}Math.imul||(f=h),i.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?f(this,t,e):r<63?h(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=67108863&n,l=Math.min(a,e.length-1),u=Math.max(0,a-t.length+1);u<=l;u++){var c=a-u,h=(0|t.words[c])*(0|e.words[u]),f=67108863&h;s=67108863&(f=f+s|0),i+=(o=(o=o+(h/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,t,e):d(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),r=i.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},p.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},p.prototype.permute=function(t,e,r,n,i,a){for(var o=0;o<a;o++)n[o]=e[t[o]],i[o]=r[t[o]]},p.prototype.transform=function(t,e,r,n,i,a){this.permute(a,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var h=l,f=u,d=0;d<o;d++){var p=r[c+d],g=n[c+d],v=r[c+d+o],m=n[c+d+o],y=h*v-f*m;m=h*m+f*v,v=y,r[c+d]=p+v,n[c+d]=g+m,r[c+d+o]=p-v,n[c+d+o]=g-m,d!==s&&(y=l*h-u*f,f=l*f+u*h,h=y)}},p.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},p.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},p.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},p.prototype.convert13b=function(t,e,n,i){for(var a=0,o=0;o<e;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*e;o<i;++o)n[o]=0;r(0===a),r(0==(-8192&a))},p.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},p.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),a=this.stub(n),o=new Array(n),s=new Array(n),l=new Array(n),u=new Array(n),c=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,a,s,l,n,i),this.transform(u,a,c,h,n,i);for(var d=0;d<n;d++){var p=s[d]*c[d]-l[d]*h[d];l[d]=s[d]*h[d]+l[d]*c[d],s[d]=p}return this.conjugate(s,l,n),this.transform(s,l,f,a,n,i),this.conjugate(f,a,n),this.normalize13b(f,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),d(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=a>>>26,this.words[n]=67108863&a}return 0!==e&&(this.words[n]=e,this.length++),this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var a=r.sqr();n<e.length;n++,a=a.sqr())0!==e[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(e=0;e<this.length;e++){var s=this.words[e]&a,l=(0|this.words[e])-s<<n;this.words[e]=l|o,o=s>>>26-n}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,l=n;if(i-=o,i=Math.max(0,i),l){for(var u=0;u<o;u++)l.words[u]=this.words[u];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var h=0|this.words[u];this.words[u]=c<<26-a|h>>>a,c=h&s}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var l=(0|t.words[i])*e;s=((a-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),a=t,o=0|a.words[a.length-1];0!==(r=26-this._countBits(o))&&(a=a.ushln(r),n.iushln(r),o=0|a.words[a.length-1]);var s,l=n.length-a.length;if("mod"!==e){(s=new i(null)).length=l+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var c=n.clone()._ishlnsubmul(a,1,l);0===c.negative&&(n=c,s&&(s.words[l]=1));for(var h=l-1;h>=0;h--){var f=67108864*(0|n.words[a.length+h])+(0|n.words[a.length+h-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(a,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(a,1,h),n.isZero()||(n.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(a=s.div.neg()),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:a,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(a=s.div.neg()),{div:a,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}:this._wordDiv(t,e);var a,o,s},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},i.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var a=new i(1),o=new i(0),s=new i(0),l=new i(1),u=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++u;for(var c=n.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(a.isOdd()||o.isOdd())&&(a.iadd(c),o.isub(h)),a.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(c),l.isub(h)),s.iushrn(1),l.iushrn(1);e.cmp(n)>=0?(e.isub(n),a.isub(s),o.isub(l)):(n.isub(e),s.isub(a),l.isub(o))}return{a:s,b:l,gcd:n.iushln(u)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var a,o=new i(1),s=new i(0),l=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;0==(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(s)):(n.isub(e),s.isub(o))}return(a=0===e.cmpn(1)?o:s).cmpn(0)<0&&a.iadd(t),a},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var a=e;e=r,r=a}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new _(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function w(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},n(m,v),m.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var a=0|t.words[n];t.words[n-10]=(4194303&a)<<4|i>>>22,i=a}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},m.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(y,v),n(b,v),n(x,v),x.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new m;else if("p224"===t)e=new y;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},_.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},_.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},_.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},_.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},_.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},_.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var a=this.m.subn(1),o=0;!a.isZero()&&0===a.andln(1);)o++,a.iushrn(1);r(!a.isZero());var s=new i(1).toRed(this),l=s.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var h=this.pow(c,a),f=this.pow(t,a.addn(1).iushrn(1)),d=this.pow(t,a),p=o;0!==d.cmp(s);){for(var g=d,v=0;0!==g.cmp(s);v++)g=g.redSqr();r(v<p);var m=this.pow(h,new i(1).iushln(p-v-1));f=f.redMul(m),h=m.redSqr(),d=d.redMul(h),p=v}return f},_.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},_.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var a=r[0],o=0,s=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=l-1;c>=0;c--){var h=u>>c&1;a!==r[0]&&(a=this.sqr(a)),0!==h||0!==o?(o<<=1,o|=h,(4===++s||0===n&&0===c)&&(a=this.mul(a,r[o]),s=0,o=0)):s=0}l=26}return a},_.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},_.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new w(t)},n(w,_),w.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},w.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},w.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},w.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},w.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Xy,this),Xy=Xy.exports;var Wy=function(t){return t.cmp(new Xy(0))};var Yy={};(function(t){var e=!1;if("undefined"!=typeof Float64Array){var r=new Float64Array(1),n=new Uint32Array(r.buffer);if(r[0]=1,e=!0,1072693248===n[1]){(Yy=function(t){return r[0]=t,[n[0],n[1]]}).pack=function(t,e){return n[0]=t,n[1]=e,r[0]},Yy.lo=function(t){return r[0]=t,n[0]},Yy.hi=function(t){return r[0]=t,n[1]}}else if(1072693248===n[0]){(Yy=function(t){return r[0]=t,[n[1],n[0]]}).pack=function(t,e){return n[1]=t,n[0]=e,r[0]},Yy.lo=function(t){return r[0]=t,n[1]},Yy.hi=function(t){return r[0]=t,n[0]}}else e=!1}if(!e){var i=new t(8);(Yy=function(t){return i.writeDoubleLE(t,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]}).pack=function(t,e){return i.writeUInt32LE(t,0,!0),i.writeUInt32LE(e,4,!0),i.readDoubleLE(0,!0)},Yy.lo=function(t){return i.writeDoubleLE(t,0,!0),i.readUInt32LE(0,!0)},Yy.hi=function(t){return i.writeDoubleLE(t,0,!0),i.readUInt32LE(4,!0)}}Yy.sign=function(t){return Yy.hi(t)>>>31},Yy.exponent=function(t){return(Yy.hi(t)<<1>>>21)-1023},Yy.fraction=function(t){var e=Yy.lo(t),r=Yy.hi(t),n=1048575&r;return 2146435072&r&&(n+=1<<20),[e,n]},Yy.denormalized=function(t){return!(2146435072&Yy.hi(t))}}).call(this,Yp.Buffer);var Zy=function(t){var e=Yy.exponent(t);return e<52?new Xy(t):new Xy(t*Math.pow(2,52-e)).ushln(e-52)};var Qy=function(t,e){var r=Wy(t),n=Wy(e);if(0===r)return[Zy(0),Zy(1)];if(0===n)return[Zy(0),Zy(0)];n<0&&(t=t.neg(),e=e.neg());var i=t.gcd(e);if(i.cmpn(1))return[t.div(i),e.div(i)];return[t,e]};var Ky=function(t,e){return Qy(t[0].mul(e[1]),t[1].mul(e[0]))};var $y=function(t){return t&&"object"==typeof t&&Boolean(t.words)};var Jy=function(t){return Array.isArray(t)&&2===t.length&&$y(t[0])&&$y(t[1])};var tb=function(t){return new Xy(t)};var eb=function t(e,r){if(Jy(e))return r?Ky(e,t(r)):[e[0].clone(),e[1].clone()];var n=0;var i,a;if($y(e))i=e.clone();else if("string"==typeof e)i=tb(e);else{if(0===e)return[Zy(0),Zy(1)];if(e===Math.floor(e))i=Zy(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),n-=256;i=Zy(e)}}if(Jy(r))i.mul(r[1]),a=r[0].clone();else if($y(r))a=r.clone();else if("string"==typeof r)a=tb(r);else if(r)if(r===Math.floor(r))a=Zy(r);else{for(;r!==Math.floor(r);)r*=Math.pow(2,256),n+=256;a=Zy(r)}else a=Zy(1);n>0?i=i.ushln(n):n<0&&(a=a.ushln(-n));return Qy(i,a)};var rb=function(t){var e=t.length,r=t.words,n=0;if(1===e)n=r[0];else if(2===e)n=r[0]+67108864*r[1];else for(var i=0;i<e;i++){var a=r[i];n+=a*Math.pow(67108864,i)}return Wy(t)*n};var nb=Np.countTrailingZeros,ib=function(t){var e=nb(Yy.lo(t));if(e<32)return e;var r=nb(Yy.hi(t));if(r>20)return 52;return r+32};var ab=function(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var n=e.abs().divmod(r.abs()),i=n.div,a=rb(i),o=n.mod,s=e.negative!==r.negative?-1:1;if(0===o.cmpn(0))return s*a;if(a){var l=ib(a)+4,u=rb(o.ushln(l).divRound(r));return s*(a+u*Math.pow(2,-l))}var c=r.bitLength()-o.bitLength()+53,u=rb(o.ushln(c).divRound(r));return c<1023?s*u*Math.pow(2,-c):(u*=Math.pow(2,-1023),s*u*Math.pow(2,1023-c))};var ob={},sb="d",lb="ax",ub="vv",cb="fp",hb="es",fb="rs",db="re",pb="rb",gb="ri",vb="rp",mb="bs",yb="be",bb="bb",xb="bi",_b="bp",wb="rv",Mb="Q",Ab=[sb,lb,ub,fb,db,pb,gb,mb,yb,bb,xb];function Tb(t){var e="bruteForce"+(t?"Full":"Partial"),r=[],n=Ab.slice();t||n.splice(3,0,cb);var i=["function "+e+"("+n.join()+"){"];function a(e,n){var a=function(t,e,r){var n="bruteForce"+(t?"Red":"Blue")+(e?"Flip":"")+(r?"Full":""),i=["function ",n,"(",Ab.join(),"){","var ",hb,"=2*",sb,";"],a="for(var i="+fb+","+vb+"="+hb+"*"+fb+";i<"+db+";++i,"+vb+"+="+hb+"){var x0="+pb+"["+lb+"+"+vb+"],x1="+pb+"["+lb+"+"+vb+"+"+sb+"],xi="+gb+"[i];",o="for(var j="+mb+","+_b+"="+hb+"*"+mb+";j<"+yb+";++j,"+_b+"+="+hb+"){var y0="+bb+"["+lb+"+"+_b+"],"+(r?"y1="+bb+"["+lb+"+"+_b+"+"+sb+"],":"")+"yi="+xb+"[j];";return t?i.push(a,Mb,":",o):i.push(o,Mb,":",a),r?i.push("if(y1<x0||x1<y0)continue;"):e?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+lb+"+1;k<"+sb+";++k){var r0="+pb+"[k+"+vb+"],r1="+pb+"[k+"+sb+"+"+vb+"],b0="+bb+"[k+"+_b+"],b1="+bb+"[k+"+sb+"+"+_b+"];if(r1<b0||b1<r0)continue "+Mb+";}var "+wb+"="+ub+"("),e?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+wb+"!==void 0)return "+wb+";}}}"),{name:n,code:i.join("")}}(e,n,t);r.push(a.code),i.push("return "+a.name+"("+Ab.join()+");")}i.push("if("+db+"-"+fb+">"+yb+"-"+mb+"){"),t?(a(!0,!1),i.push("}else{"),a(!1,!1)):(i.push("if("+cb+"){"),a(!0,!0),i.push("}else{"),a(!0,!1),i.push("}}else{if("+cb+"){"),a(!1,!0),i.push("}else{"),a(!1,!1),i.push("}")),i.push("}}return "+e);var o=r.join("")+i.join("");return new Function(o)()}ob.partial=Tb(!1),ob.full=Tb(!0);var kb=function(t,e){var r="abcdef".split("").concat(e),n=[];t.indexOf("lo")>=0&&n.push("lo=e[k+n]");t.indexOf("hi")>=0&&n.push("hi=e[k+o]");return r.push(Eb.replace("_",n.join()).replace("$",t)),Function.apply(void 0,r)},Eb="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";var Lb=function(t,e,r,n,i,a){if(n<=r+1)return r;var o=r,s=n,l=n+r>>>1,u=2*t,c=l,h=i[u*l+e];for(;o<s;){if(s-o<Sb){Pb(t,e,o,s,i,a),h=i[u*l+e];break}var f=s-o,d=Math.random()*f+o|0,p=i[u*d+e],g=Math.random()*f+o|0,v=i[u*g+e],m=Math.random()*f+o|0,y=i[u*m+e];p<=v?y>=v?(c=g,h=v):p>=y?(c=d,h=p):(c=m,h=y):v>=y?(c=g,h=v):y>=p?(c=d,h=p):(c=m,h=y);for(var b=u*(s-1),x=u*c,_=0;_<u;++_,++b,++x){var w=i[b];i[b]=i[x],i[x]=w}var M=a[s-1];a[s-1]=a[c],a[c]=M,c=Cb(t,e,o,s-1,i,a,h);for(var b=u*(s-1),x=u*c,_=0;_<u;++_,++b,++x){var w=i[b];i[b]=i[x],i[x]=w}var M=a[s-1];if(a[s-1]=a[c],a[c]=M,l<c){for(s=c-1;o<s&&i[u*(s-1)+e]===h;)s-=1;s+=1}else{if(!(c<l))break;for(o=c+1;o<s&&i[u*o+e]===h;)o+=1}}return Cb(t,e,r,l,i,a,i[u*l+e])},Cb=kb("lo<p0",["p0"]),Sb=8;function Pb(t,e,r,n,i,a){for(var o=2*t,s=o*(r+1)+e,l=r+1;l<n;++l,s+=o)for(var u=i[s],c=l,h=o*(l-1);c>r&&i[h+e]>u;--c,h-=o){for(var f=h,d=h+o,p=0;p<o;++p,++f,++d){var g=i[f];i[f]=i[d],i[d]=g}var v=a[c];a[c]=a[c-1],a[c-1]=v}}var Rb=function(t,e){e<=4*Ob?Ib(0,e-1,t):function t(e,r,n){var i=(r-e+1)/6|0,a=e+i,o=r-i,s=e+r>>1,l=s-i,u=s+i,c=a,h=l,f=s,d=u,p=o,g=e+1,v=r-1,m=0;jb(c,h,n)&&(m=c,c=h,h=m);jb(d,p,n)&&(m=d,d=p,p=m);jb(c,f,n)&&(m=c,c=f,f=m);jb(h,f,n)&&(m=h,h=f,f=m);jb(c,d,n)&&(m=c,c=d,d=m);jb(f,d,n)&&(m=f,f=d,d=m);jb(h,p,n)&&(m=h,h=p,p=m);jb(h,f,n)&&(m=h,h=f,f=m);jb(d,p,n)&&(m=d,d=p,p=m);var y=n[2*h];var b=n[2*h+1];var x=n[2*d];var _=n[2*d+1];var w=2*c;var M=2*f;var A=2*p;var T=2*a;var k=2*s;var E=2*o;for(var L=0;L<2;++L){var C=n[w+L],S=n[M+L],P=n[A+L];n[T+L]=C,n[k+L]=S,n[E+L]=P}Db(l,e,n);Db(u,r,n);for(var R=g;R<=v;++R)if(Bb(R,y,b,n))R!==g&&Nb(R,g,n),++g;else if(!Bb(R,x,_,n))for(;;){if(Bb(v,x,_,n)){Bb(v,y,b,n)?(zb(R,g,v,n),++g,--v):(Nb(R,v,n),--v);break}if(--v<R)break}Fb(e,g-1,y,b,n);Fb(r,v+1,x,_,n);g-2-e<=Ob?Ib(e,g-2,n):t(e,g-2,n);r-(v+2)<=Ob?Ib(v+2,r,n):t(v+2,r,n);v-g<=Ob?Ib(g,v,n):t(g,v,n)}(0,e-1,t)},Ob=32;function Ib(t,e,r){for(var n=2*(t+1),i=t+1;i<=e;++i){for(var a=r[n++],o=r[n++],s=i,l=n-2;s-- >t;){var u=r[l-2],c=r[l-1];if(u<a)break;if(u===a&&c<o)break;r[l]=u,r[l+1]=c,l-=2}r[l]=a,r[l+1]=o}}function Nb(t,e,r){e*=2;var n=r[t*=2],i=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=n,r[e+1]=i}function Db(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function zb(t,e,r,n){e*=2,r*=2;var i=n[t*=2],a=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=n[r],n[e+1]=n[r+1],n[r]=i,n[r+1]=a}function Fb(t,e,r,n,i){e*=2,i[t*=2]=i[e],i[e]=r,i[t+1]=i[e+1],i[e+1]=n}function jb(t,e,r){e*=2;var n=r[t*=2],i=r[e];return!(n<i)&&(n!==i||r[t+1]>r[e+1])}function Bb(t,e,r,n){var i=n[t*=2];return i<e||i===e&&n[t+1]<r}var Ub={init:function(t){var e=Np.nextPow2(t);Hb.length<e&&(Og.free(Hb),Hb=Og.mallocInt32(e));qb.length<e&&(Og.free(qb),qb=Og.mallocInt32(e));Gb.length<e&&(Og.free(Gb),Gb=Og.mallocInt32(e));Xb.length<e&&(Og.free(Xb),Xb=Og.mallocInt32(e));Wb.length<e&&(Og.free(Wb),Wb=Og.mallocInt32(e));Yb.length<e&&(Og.free(Yb),Yb=Og.mallocInt32(e));var r=8*e;Zb.length<r&&(Og.free(Zb),Zb=Og.mallocDouble(r))},sweepBipartite:function(t,e,r,n,i,a,o,s,l,u){for(var c=0,h=2*t,f=t-1,d=h-1,p=r;p<n;++p){var g=a[p],v=h*p;Zb[c++]=i[v+f],Zb[c++]=-(g+1),Zb[c++]=i[v+d],Zb[c++]=g}for(var p=o;p<s;++p){var g=u[p]+Vb,m=h*p;Zb[c++]=l[m+f],Zb[c++]=-g,Zb[c++]=l[m+d],Zb[c++]=g}var y=c>>>1;Rb(Zb,y);for(var b=0,x=0,p=0;p<y;++p){var _=0|Zb[2*p+1];if(_>=Vb)Qb(Gb,Xb,x--,_=_-Vb|0);else if(_>=0)Qb(Hb,qb,b--,_);else if(_<=-Vb){_=-_-Vb|0;for(var w=0;w<b;++w){var M=e(Hb[w],_);if(void 0!==M)return M}Kb(Gb,Xb,x++,_)}else{_=-_-1|0;for(var w=0;w<x;++w){var M=e(_,Gb[w]);if(void 0!==M)return M}Kb(Hb,qb,b++,_)}}},sweepComplete:function(t,e,r,n,i,a,o,s,l,u){for(var c=0,h=2*t,f=t-1,d=h-1,p=r;p<n;++p){var g=a[p]+1<<1,v=h*p;Zb[c++]=i[v+f],Zb[c++]=-g,Zb[c++]=i[v+d],Zb[c++]=g}for(var p=o;p<s;++p){var g=u[p]+1<<1,m=h*p;Zb[c++]=l[m+f],Zb[c++]=1|-g,Zb[c++]=l[m+d],Zb[c++]=1|g}var y=c>>>1;Rb(Zb,y);for(var b=0,x=0,_=0,p=0;p<y;++p){var w=0|Zb[2*p+1],M=1&w;if(p<y-1&&w>>1==Zb[2*p+3]>>1&&(M=2,p+=1),w<0){for(var A=-(w>>1)-1,T=0;T<_;++T){var k=e(Wb[T],A);if(void 0!==k)return k}if(0!==M)for(var T=0;T<b;++T){var k=e(Hb[T],A);if(void 0!==k)return k}if(1!==M)for(var T=0;T<x;++T){var k=e(Gb[T],A);if(void 0!==k)return k}0===M?Kb(Hb,qb,b++,A):1===M?Kb(Gb,Xb,x++,A):2===M&&Kb(Wb,Yb,_++,A)}else{var A=(w>>1)-1;0===M?Qb(Hb,qb,b--,A):1===M?Qb(Gb,Xb,x--,A):2===M&&Qb(Wb,Yb,_--,A)}}},scanBipartite:function(t,e,r,n,i,a,o,s,l,u,c,h){var f=0,d=2*t,p=e,g=e+t,v=1,m=1;n?m=Vb:v=Vb;for(var y=i;y<a;++y){var b=y+v,x=d*y;Zb[f++]=o[x+p],Zb[f++]=-b,Zb[f++]=o[x+g],Zb[f++]=b}for(var y=l;y<u;++y){var b=y+m,_=d*y;Zb[f++]=c[_+p],Zb[f++]=-b}var w=f>>>1;Rb(Zb,w);for(var M=0,y=0;y<w;++y){var A=0|Zb[2*y+1];if(A<0){var b=-A,T=!1;if(b>=Vb?(T=!n,b-=Vb):(T=!!n,b-=1),T)Kb(Hb,qb,M++,b);else{var k=h[b],E=d*b,L=c[E+e+1],C=c[E+e+1+t];t:for(var S=0;S<M;++S){var P=Hb[S],R=d*P;if(!(C<o[R+e+1]||o[R+e+1+t]<L)){for(var O=e+2;O<t;++O)if(c[E+O+t]<o[R+O]||o[R+O+t]<c[E+O])continue t;var I,N=s[P];if(void 0!==(I=n?r(k,N):r(N,k)))return I}}}}else Qb(Hb,qb,M--,A-v)}},scanComplete:function(t,e,r,n,i,a,o,s,l,u,c){for(var h=0,f=2*t,d=e,p=e+t,g=n;g<i;++g){var v=g+Vb,m=f*g;Zb[h++]=a[m+d],Zb[h++]=-v,Zb[h++]=a[m+p],Zb[h++]=v}for(var g=s;g<l;++g){var v=g+1,y=f*g;Zb[h++]=u[y+d],Zb[h++]=-v}var b=h>>>1;Rb(Zb,b);for(var x=0,g=0;g<b;++g){var _=0|Zb[2*g+1];if(_<0){var v=-_;if(v>=Vb)Hb[x++]=v-Vb;else{var w=c[v-=1],M=f*v,A=u[M+e+1],T=u[M+e+1+t];t:for(var k=0;k<x;++k){var E=Hb[k],L=o[E];if(L===w)break;var C=f*E;if(!(T<a[C+e+1]||a[C+e+1+t]<A)){for(var S=e+2;S<t;++S)if(u[M+S+t]<a[C+S]||a[C+S+t]<u[M+S])continue t;var P=r(L,w);if(void 0!==P)return P}}}}else{for(var v=_-Vb,k=x-1;k>=0;--k)if(Hb[k]===v){for(var S=k+1;S<x;++S)Hb[S-1]=Hb[S];break}--x}}}},Vb=1<<28,Hb=Og.mallocInt32(1024),qb=Og.mallocInt32(1024),Gb=Og.mallocInt32(1024),Xb=Og.mallocInt32(1024),Wb=Og.mallocInt32(1024),Yb=Og.mallocInt32(1024),Zb=Og.mallocDouble(8192);function Qb(t,e,r,n){var i=e[n],a=t[r-1];t[i]=a,e[a]=i}function Kb(t,e,r,n){t[r]=n,e[n]=r}var $b=function(t,e,r,n,i,a,o,s,l){!function(t,e){var r=8*Np.log2(e+1)*(t+1)|0,n=Np.nextPow2(cx*r);fx.length<n&&(Og.free(fx),fx=Og.mallocInt32(n));var i=Np.nextPow2(hx*r);dx<i&&(Og.free(dx),dx=Og.mallocDouble(i))}(t,n+o);var u,c=0,h=2*t;px(c++,0,0,n,0,o,r?16:0,-1/0,1/0),r||px(c++,0,0,o,0,n,1,-1/0,1/0);for(;c>0;){var f=(c-=1)*cx,d=fx[f],p=fx[f+1],g=fx[f+2],v=fx[f+3],m=fx[f+4],y=fx[f+5],b=c*hx,x=dx[b],_=dx[b+1],w=1&y,M=!!(16&y),A=i,T=a,k=s,E=l;if(w&&(A=s,T=l,k=i,E=a),!(2&y&&(g=ox(t,d,p,g,A,T,_),p>=g)||4&y&&(p=sx(t,d,p,g,A,T,x))>=g)){var L=g-p,C=m-v;if(M){if(t*L*(L+C)<nx){if(void 0!==(u=Ub.scanComplete(t,d,e,p,g,A,T,v,m,k,E)))return u;continue}}else{if(t*Math.min(L,C)<ex){if(void 0!==(u=Jb(t,d,e,w,p,g,A,T,v,m,k,E)))return u;continue}if(t*L*C<rx){if(void 0!==(u=Ub.scanBipartite(t,d,e,w,p,g,A,T,v,m,k,E)))return u;continue}}var S=ix(t,d,p,g,A,T,x,_);if(p<S)if(t*(S-p)<ex){if(void 0!==(u=tx(t,d+1,e,p,S,A,T,v,m,k,E)))return u}else if(d===t-2){if(void 0!==(u=w?Ub.sweepBipartite(t,e,v,m,k,E,p,S,A,T):Ub.sweepBipartite(t,e,p,S,A,T,v,m,k,E)))return u}else px(c++,d+1,p,S,v,m,w,-1/0,1/0),px(c++,d+1,v,m,p,S,1^w,-1/0,1/0);if(S<g){var P=Lb(t,d,v,m,k,E),R=k[h*P+d],O=ax(t,d,P,m,k,E,R);if(O<m&&px(c++,d,S,g,O,m,(4|w)+(M?16:0),R,_),v<P&&px(c++,d,S,g,v,P,(2|w)+(M?16:0),x,R),P+1===O){if(void 0!==(u=M?vx(t,d,e,S,g,A,T,P,k,E[P]):gx(t,d,e,w,S,g,A,T,P,k,E[P])))return u}else if(P<O){var I;if(M){if(I=lx(t,d,S,g,A,T,R),S<I){var N=ax(t,d,S,I,A,T,R);if(d===t-2){if(S<N&&void 0!==(u=Ub.sweepComplete(t,e,S,N,A,T,P,O,k,E)))return u;if(N<I&&void 0!==(u=Ub.sweepBipartite(t,e,N,I,A,T,P,O,k,E)))return u}else S<N&&px(c++,d+1,S,N,P,O,16,-1/0,1/0),N<I&&(px(c++,d+1,N,I,P,O,0,-1/0,1/0),px(c++,d+1,P,O,N,I,1,-1/0,1/0))}}else I=w?ux(t,d,S,g,A,T,R):lx(t,d,S,g,A,T,R),S<I&&(d===t-2?u=w?Ub.sweepBipartite(t,e,P,O,k,E,S,I,A,T):Ub.sweepBipartite(t,e,S,I,A,T,P,O,k,E):(px(c++,d+1,S,I,P,O,w,-1/0,1/0),px(c++,d+1,P,O,S,I,1^w,-1/0,1/0)))}}}}},Jb=ob.partial,tx=ob.full,ex=128,rx=1<<22,nx=1<<22,ix=kb("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),ax=kb("lo===p0",["p0"]),ox=kb("lo<p0",["p0"]),sx=kb("hi<=p0",["p0"]),lx=kb("lo<=p0&&p0<=hi",["p0"]),ux=kb("lo<p0&&p0<=hi",["p0"]),cx=6,hx=2,fx=Og.mallocInt32(1024),dx=Og.mallocDouble(1024);function px(t,e,r,n,i,a,o,s,l){var u=cx*t;fx[u]=e,fx[u+1]=r,fx[u+2]=n,fx[u+3]=i,fx[u+4]=a,fx[u+5]=o;var c=hx*t;dx[c]=s,dx[c+1]=l}function gx(t,e,r,n,i,a,o,s,l,u,c){var h=2*t,f=l*h,d=u[f+e];t:for(var p=i,g=i*h;p<a;++p,g+=h){var v=o[g+e],m=o[g+e+t];if(!(d<v||m<d)&&(!n||d!==v)){for(var y,b=s[p],x=e+1;x<t;++x){v=o[g+x],m=o[g+x+t];var _=u[f+x],w=u[f+x+t];if(m<_||w<v)continue t}if(void 0!==(y=n?r(c,b):r(b,c)))return y}}}function vx(t,e,r,n,i,a,o,s,l,u){var c=2*t,h=s*c,f=l[h+e];t:for(var d=n,p=n*c;d<i;++d,p+=c){var g=o[d];if(g!==u){var v=a[p+e],m=a[p+e+t];if(!(f<v||m<f)){for(var y=e+1;y<t;++y){v=a[p+y],m=a[p+y+t];var b=l[h+y],x=l[h+y+t];if(m<b||x<v)continue t}var _=r(g,u);if(void 0!==_)return _}}}}var mx,yx=function(t,e,r){switch(arguments.length){case 1:return mx=[],_x(n=t,n,wx,!0),mx;case 2:return"function"==typeof e?_x(t,t,e,!0):function(t,e){return mx=[],_x(t,e,wx,!1),mx}(t,e);case 3:return _x(t,e,r,!1);default:throw new Error("box-intersect: Invalid arguments")}var n};function bx(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}function xx(t,e,r,n){for(var i=0,a=0,o=0,s=t.length;o<s;++o){var l=t[o];if(!bx(e,l)){for(var u=0;u<2*e;++u)r[i++]=l[u];n[a++]=o}}return a}function _x(t,e,r,n){var i=t.length,a=e.length;if(!(i<=0||a<=0)){var o=t[0].length>>>1;if(!(o<=0)){var s,l=Og.mallocDouble(2*o*i),u=Og.mallocInt32(i);if((i=xx(t,o,l,u))>0){if(1===o&&n)Ub.init(i),s=Ub.sweepComplete(o,r,0,i,l,u,0,i,l,u);else{var c=Og.mallocDouble(2*o*a),h=Og.mallocInt32(a);(a=xx(e,o,c,h))>0&&(Ub.init(i+a),s=1===o?Ub.sweepBipartite(o,r,0,i,l,u,0,a,c,h):$b(o,r,n,i,l,u,a,c,h),Og.free(c),Og.free(h))}Og.free(l),Og.free(u)}return s}}}function wx(t,e){mx.push([t,e])}var Mx=function(t,e){return Qy(t[0].mul(e[0]),t[1].mul(e[1]))};var Ax=function(t){return Wy(t[0])*Wy(t[1])};var Tx=function(t,e){return Qy(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))};var kx=function(t,e){return Qy(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))};var Ex=function(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=kx(t[i],e[i]);return n};var Lx=function(t,e){for(var r=eb(e),n=t.length,i=new Array(n),a=0;a<n;++a)i[a]=Mx(t[a],r);return i};var Cx=function(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=Tx(t[i],e[i]);return n};var Sx=function(t,e,r,n){var i=Cx(e,t),a=Cx(n,r),o=Px(i,a);if(0===Ax(o))return null;var s=Cx(t,r),l=Px(a,s),u=Ky(l,o),c=Lx(i,u);return Ex(t,c)};function Px(t,e){return Tx(Mx(t[0],e[1]),Mx(t[1],e[0]))}var Rx=Math.pow(2,-1074),Ox=-1>>>0,Ix=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-Rx:Rx;var r=Yy.hi(t),n=Yy.lo(t);e>t==t>0?n===Ox?(r+=1,n=0):n+=1:0===n?(n=Ox,r-=1):n-=1;return Yy.pack(n,r)};var Nx=function(t){for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=eb(t[r]);return e};var Dx=function(t,e,r,n){var i=zx(t,r,n),a=zx(e,r,n);if(i>0&&a>0||i<0&&a<0)return!1;var o=zx(r,t,e),s=zx(n,t,e);if(o>0&&s>0||o<0&&s<0)return!1;if(0===i&&0===a&&0===o&&0===s)return function(t,e,r,n){for(var i=0;i<2;++i){var a=t[i],o=e[i],s=Math.min(a,o),l=Math.max(a,o),u=r[i],c=n[i],h=Math.min(u,c),f=Math.max(u,c);if(f<s||l<h)return!1}return!0}(t,e,r,n);return!0},zx=wm[3];var Fx=jx;function jx(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}var Bx=jx.prototype;Object.defineProperty(Bx,"length",{get:function(){return this.roots.length}}),Bx.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},Bx.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var n=r[e];r[e]=t,e=n}return t},Bx.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,a=this.roots,o=i[r],s=i[n];o<s?a[r]=n:s<o?a[n]=r:(a[n]=r,++i[r])}};var Ux=function(t,e,r){var n;if(r){n=e;for(var i=new Array(e.length),a=0;a<e.length;++a){var o=e[a];i[a]=[o[0],o[1],r[a]]}e=i}var s=function(t,e,r){var n=qx(t,[],Hx(t));return Wx(e,n,r),!!n}(t,e,!!r);for(;Yx(t,e,!!r);)s=!0;if(r&&s){n.length=0,r.length=0;for(var a=0;a<e.length;++a){var o=e[a];n.push([o[0],o[1]]),r.push(o[2])}}return s};function Vx(t){var e=ab(t);return[Ix(e,-1/0),Ix(e,1/0)]}function Hx(t){for(var e=new Array(t.length),r=0;r<t.length;++r){var n=t[r];e[r]=[Ix(n[0],-1/0),Ix(n[1],-1/0),Ix(n[0],1/0),Ix(n[1],1/0)]}return e}function qx(t,e,r){for(var n=e.length,i=new Fx(n),a=[],o=0;o<e.length;++o){var s=e[o],l=Vx(s[0]),u=Vx(s[1]);a.push([Ix(l[0],-1/0),Ix(u[0],-1/0),Ix(l[1],1/0),Ix(u[1],1/0)])}yx(a,function(t,e){i.link(t,e)});var c=!0,h=new Array(n);for(o=0;o<n;++o){(d=i.find(o))!==o&&(c=!1,t[d]=[Math.min(t[o][0],t[d][0]),Math.min(t[o][1],t[d][1])])}if(c)return null;var f=0;for(o=0;o<n;++o){var d;(d=i.find(o))===o?(h[o]=f,t[f++]=t[o]):h[o]=-1}t.length=f;for(o=0;o<n;++o)h[o]<0&&(h[o]=h[i.find(o)]);return h}function Gx(t,e){return t[0]-e[0]||t[1]-e[1]}function Xx(t,e){var r=t[0]-e[0]||t[1]-e[1];return r||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function Wx(t,e,r){if(0!==t.length){if(e)for(var n=0;n<t.length;++n){var i=e[(o=t[n])[0]],a=e[o[1]];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}else for(n=0;n<t.length;++n){var o;i=(o=t[n])[0],a=o[1];o[0]=Math.min(i,a),o[1]=Math.max(i,a)}r?t.sort(Xx):t.sort(Gx);var s=1;for(n=1;n<t.length;++n){var l=t[n-1],u=t[n];(u[0]!==l[0]||u[1]!==l[1]||r&&u[2]!==l[2])&&(t[s++]=u)}t.length=s}}function Yx(t,e,r){var n=function(t,e){for(var r=new Array(e.length),n=0;n<e.length;++n){var i=e[n],a=t[i[0]],o=t[i[1]];r[n]=[Ix(Math.min(a[0],o[0]),-1/0),Ix(Math.min(a[1],o[1]),-1/0),Ix(Math.max(a[0],o[0]),1/0),Ix(Math.max(a[1],o[1]),1/0)]}return r}(t,e),i=function(t,e,r){var n=[];return yx(r,function(r,i){var a=e[r],o=e[i];if(a[0]!==o[0]&&a[0]!==o[1]&&a[1]!==o[0]&&a[1]!==o[1]){var s=t[a[0]],l=t[a[1]],u=t[o[0]],c=t[o[1]];Dx(s,l,u,c)&&n.push([r,i])}}),n}(t,e,n),a=Hx(t),o=function(t,e,r,n){var i=[];return yx(r,n,function(r,n){var a=e[r];if(a[0]!==n&&a[1]!==n){var o=t[n],s=t[a[0]],l=t[a[1]];Dx(s,l,o,o)&&i.push([r,n])}}),i}(t,e,n,a),s=qx(t,function(t,e,r,n,i){var a,o,s=t.map(function(t){return[eb(t[0]),eb(t[1])]});for(a=0;a<r.length;++a){var l=r[a];o=l[0];var u=l[1],c=e[o],h=e[u],f=Sx(Nx(t[c[0]]),Nx(t[c[1]]),Nx(t[h[0]]),Nx(t[h[1]]));if(f){var d=t.length;t.push([ab(f[0]),ab(f[1])]),s.push(f),n.push([o,d],[u,d])}}for(n.sort(function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=s[t[1]],n=s[e[1]];return qy(r[0],n[0])||qy(r[1],n[1])}),a=n.length-1;a>=0;--a){var p=e[o=(w=n[a])[0]],g=p[0],v=p[1],m=t[g],y=t[v];if((m[0]-y[0]||m[1]-y[1])<0){var b=g;g=v,v=b}p[0]=g;var x,_=p[1]=w[1];for(i&&(x=p[2]);a>0&&n[a-1][0]===o;){var w,M=(w=n[--a])[1];i?e.push([_,M,x]):e.push([_,M]),_=M}i?e.push([_,v,x]):e.push([_,v])}return s}(t,e,i,o,r));return Wx(e,s,r),!!s||(i.length>0||o.length>0)}var Zx=function(t,e){var r=t.length;if("number"!=typeof e){e=0;for(var n=0;n<r;++n){var i=t[n];e=Math.max(e,i[0],i[1])}e=1+(0|e)}e|=0;for(var a=new Array(e),n=0;n<e;++n)a[n]=[];for(var n=0;n<r;++n){var i=t[n];a[i[0]].push(i[1]),a[i[1]].push(i[0])}for(var o=0;o<e;++o)cp(a[o],function(t,e){return t-e});return a};var Qx=function(t,e){if(1===t.length)return bm(e,t[0]);if(1===e.length)return bm(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(var n=0;n<t.length;++n)r=_m(r,bm(e,t[n]));else for(var n=0;n<e.length;++n)r=_m(r,bm(t,e[n]));return r};var Kx=function(t){return t<0?-1:t>0?1:0},$x=function(t,e,r,n){var i=wm(e,r,n);if(0===i){var a=Kx(wm(t,e,r)),o=Kx(wm(t,e,n));if(a===o){if(0===a){var s=Jx(t,e,r),l=Jx(t,e,n);return s===l?0:s?1:-1}return 0}return 0===o?a>0?-1:Jx(t,e,n)?-1:1:0===a?o>0?1:Jx(t,e,r)?1:-1:Kx(o-a)}var u=wm(t,e,r);if(u>0)return i>0&&wm(t,e,n)>0?1:-1;if(u<0)return i>0||wm(t,e,n)>0?1:-1;var c=wm(t,e,n);return c>0?1:Jx(t,e,r)?1:-1};function Jx(t,e,r){var n=ym(t[0],-e[0]),i=ym(t[1],-e[1]),a=ym(r[0],-e[0]),o=ym(r[1],-e[1]),s=_m(Qx(n,a),Qx(i,o));return s[s.length-1]>=0}var t_=function(t,e){for(var r=0|e.length,n=t.length,i=[new Array(r),new Array(r)],a=0;a<r;++a)i[0][a]=[],i[1][a]=[];for(var a=0;a<n;++a){var o=t[a];i[0][o[0]].push(o),i[1][o[1]].push(o)}for(var s=[],a=0;a<r;++a)i[0][a].length+i[1][a].length===0&&s.push([a]);function l(t,e){var r=i[e][t[e]];r.splice(r.indexOf(t),1)}function u(t,r,n){for(var a,o,s,u=0;u<2;++u)if(i[u][r].length>0){a=i[u][r][0],s=u;break}o=a[1^s];for(var c=0;c<2;++c)for(var h=i[c][r],f=0;f<h.length;++f){var d=h[f],p=d[1^c],g=$x(e[t],e[r],e[o],e[p]);g>0&&(a=d,o=p,s=c)}return n?o:(a&&l(a,s),o)}function c(t,r){var n=i[r][t][0],a=[t];l(n,r);for(var o=n[1^r];;){for(;o!==t;)a.push(o),o=u(a[a.length-2],o,!1);if(i[0][t].length+i[1][t].length===0)break;var s=a[a.length-1],c=t,h=a[1],f=u(s,c,!0);if($x(e[s],e[c],e[h],e[f])<0)break;a.push(t),o=u(s,c)}return a}function h(t,e){return e[1]===e[e.length-1]}for(var a=0;a<r;++a)for(var f=0;f<2;++f){for(var d=[];i[f][a].length>0;){i[0][a].length;var p=c(a,f);h(d,p)?d.push.apply(d,p):(d.length>0&&s.push(d),d=p)}d.length>0&&s.push(d)}return s};var e_=function(t,e){for(var r=Zx(t,e.length),n=new Array(e.length),i=new Array(e.length),a=[],o=0;o<e.length;++o){var s=r[o].length;i[o]=s,n[o]=!0,s<=1&&a.push(o)}for(;a.length>0;){var l=a.pop();n[l]=!1;for(var u=r[l],o=0;o<u.length;++o){var c=u[o];0==--i[c]&&a.push(c)}}for(var h=new Array(e.length),f=[],o=0;o<e.length;++o)if(n[o]){var l=f.length;h[o]=l,f.push(e[o])}else h[o]=-1;for(var d=[],o=0;o<t.length;++o){var p=t[o];n[p[0]]&&n[p[1]]&&d.push([h[p[0]],h[p[1]]])}return[d,f]};var r_=0,n_=1,i_=function(t){if(!t||0===t.length)return new y_(null);return new y_(m_(t))};function a_(t,e,r,n,i){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(r?r.count:0)+n.length}var o_=a_.prototype;function s_(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function l_(t,e){var r=m_(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function u_(t,e){var r=t.intervals([]);r.push(e),l_(t,r)}function c_(t,e){var r=t.intervals([]),n=r.indexOf(e);return n<0?r_:(r.splice(n,1),l_(t,r),n_)}function h_(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var i=r(t[n]);if(i)return i}}function f_(t,e,r){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var i=r(t[n]);if(i)return i}}function d_(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function p_(t,e){return t-e}function g_(t,e){var r=t[0]-e[0];return r||t[1]-e[1]}function v_(t,e){var r=t[1]-e[1];return r||t[0]-e[0]}function m_(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(p_);var n=e[e.length>>1],i=[],a=[],o=[];for(r=0;r<t.length;++r){var s=t[r];s[1]<n?i.push(s):n<s[0]?a.push(s):o.push(s)}var l=o,u=o.slice();return l.sort(g_),u.sort(v_),new a_(n,m_(i),m_(a),l,u)}function y_(t){this.root=t}o_.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},o_.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?u_(this,t):this.left.insert(t):this.left=m_([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?u_(this,t):this.right.insert(t):this.right=m_([t]);else{var r=Vf.ge(this.leftPoints,t,g_),n=Vf.ge(this.rightPoints,t,v_);this.leftPoints.splice(r,0,t),this.rightPoints.splice(n,0,t)}},o_.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid){return this.left?4*(this.right?this.right.count:0)>3*(e-1)?c_(this,t):2===(a=this.left.remove(t))?(this.left=null,this.count-=1,n_):(a===n_&&(this.count-=1),a):r_}else{if(!(t[0]>this.mid)){if(1===this.count)return this.leftPoints[0]===t?2:r_;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var i=this.left;a=this.right;r.count-=n.count,r.right=n.left,n.left=i,n.right=a}s_(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s_(this,this.left):s_(this,this.right);return n_}for(i=Vf.ge(this.leftPoints,t,g_);i<this.leftPoints.length&&this.leftPoints[i][0]===t[0];++i)if(this.leftPoints[i]===t){this.count-=1,this.leftPoints.splice(i,1);for(a=Vf.ge(this.rightPoints,t,v_);a<this.rightPoints.length&&this.rightPoints[a][1]===t[1];++a)if(this.rightPoints[a]===t)return this.rightPoints.splice(a,1),n_}return r_}return this.right?4*(this.left?this.left.count:0)>3*(e-1)?c_(this,t):2===(a=this.right.remove(t))?(this.right=null,this.count-=1,n_):(a===n_&&(this.count-=1),a):r_;var a}},o_.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(r=this.left.queryPoint(t,e))return r;return h_(this.leftPoints,t,e)}if(t>this.mid){var r;if(this.right)if(r=this.right.queryPoint(t,e))return r;return f_(this.rightPoints,t,e)}return d_(this.leftPoints,e)},o_.queryInterval=function(t,e,r){var n;if(t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,r)))return n;if(e>this.mid&&this.right&&(n=this.right.queryInterval(t,e,r)))return n;return e<this.mid?h_(this.leftPoints,e,r):t>this.mid?f_(this.rightPoints,t,r):d_(this.leftPoints,r)};var b_=y_.prototype;b_.insert=function(t){this.root?this.root.insert(t):this.root=new a_(t[0],null,null,[t],[t])},b_.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),e!==r_}return!1},b_.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},b_.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(b_,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(b_,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var x_=function(t){return new E_(t||R_,null)},__=0,w_=1;function M_(t,e,r,n,i,a){this._color=t,this.key=e,this.value=r,this.left=n,this.right=i,this._count=a}function A_(t){return new M_(t._color,t.key,t.value,t.left,t.right,t._count)}function T_(t,e){return new M_(t,e.key,e.value,e.left,e.right,e._count)}function k_(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function E_(t,e){this._compare=t,this.root=e}var L_=E_.prototype;function C_(t,e){this.tree=t,this._stack=e}Object.defineProperty(L_,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(L_,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(L_,"length",{get:function(){return this.root?this.root._count:0}}),L_.insert=function(t,e){for(var r=this._compare,n=this.root,i=[],a=[];n;){var o=r(t,n.key);i.push(n),a.push(o),n=o<=0?n.left:n.right}i.push(new M_(__,t,e,null,null,1));for(var s=i.length-2;s>=0;--s){n=i[s];a[s]<=0?i[s]=new M_(n._color,n.key,n.value,i[s+1],n.right,n._count+1):i[s]=new M_(n._color,n.key,n.value,n.left,i[s+1],n._count+1)}for(s=i.length-1;s>1;--s){var l=i[s-1];n=i[s];if(l._color===w_||n._color===w_)break;var u=i[s-2];if(u.left===l)if(l.left===n){if(!(c=u.right)||c._color!==__){if(u._color=__,u.left=l.right,l._color=w_,l.right=u,i[s-2]=l,i[s-1]=n,k_(u),k_(l),s>=3)(h=i[s-3]).left===u?h.left=l:h.right=l;break}l._color=w_,u.right=T_(w_,c),u._color=__,s-=1}else{if(!(c=u.right)||c._color!==__){if(l.right=n.left,u._color=__,u.left=n.right,n._color=w_,n.left=l,n.right=u,i[s-2]=n,i[s-1]=l,k_(u),k_(l),k_(n),s>=3)(h=i[s-3]).left===u?h.left=n:h.right=n;break}l._color=w_,u.right=T_(w_,c),u._color=__,s-=1}else if(l.right===n){if(!(c=u.left)||c._color!==__){if(u._color=__,u.right=l.left,l._color=w_,l.left=u,i[s-2]=l,i[s-1]=n,k_(u),k_(l),s>=3)(h=i[s-3]).right===u?h.right=l:h.left=l;break}l._color=w_,u.left=T_(w_,c),u._color=__,s-=1}else{var c;if(!(c=u.left)||c._color!==__){var h;if(l.left=n.right,u._color=__,u.right=n.left,n._color=w_,n.right=l,n.left=u,i[s-2]=n,i[s-1]=l,k_(u),k_(l),k_(n),s>=3)(h=i[s-3]).right===u?h.right=n:h.left=n;break}l._color=w_,u.left=T_(w_,c),u._color=__,s-=1}}return i[0]._color=w_,new E_(r,i[0])},L_.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return function t(e,r){var n;if(r.left&&(n=t(e,r.left)))return n;return(n=e(r.key,r.value))||(r.right?t(e,r.right):void 0)}(t,this.root);case 2:return function t(e,r,n,i){if(r(e,i.key)<=0){var a;if(i.left&&(a=t(e,r,n,i.left)))return a;if(a=n(i.key,i.value))return a}if(i.right)return t(e,r,n,i.right)}(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return function t(e,r,n,i,a){var o,s=n(e,a.key),l=n(r,a.key);if(s<=0){if(a.left&&(o=t(e,r,n,i,a.left)))return o;if(l>0&&(o=i(a.key,a.value)))return o}if(l>0&&a.right)return t(e,r,n,i,a.right)}(e,r,this._compare,t,this.root)}},Object.defineProperty(L_,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new C_(this,t)}}),Object.defineProperty(L_,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new C_(this,t)}}),L_.at=function(t){if(t<0)return new C_(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new C_(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new C_(this,[])},L_.ge=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var a=e(t,r.key);n.push(r),a<=0&&(i=n.length),r=a<=0?r.left:r.right}return n.length=i,new C_(this,n)},L_.gt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var a=e(t,r.key);n.push(r),a<0&&(i=n.length),r=a<0?r.left:r.right}return n.length=i,new C_(this,n)},L_.lt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var a=e(t,r.key);n.push(r),a>0&&(i=n.length),r=a<=0?r.left:r.right}return n.length=i,new C_(this,n)},L_.le=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var a=e(t,r.key);n.push(r),a>=0&&(i=n.length),r=a<0?r.left:r.right}return n.length=i,new C_(this,n)},L_.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var i=e(t,r.key);if(n.push(r),0===i)return new C_(this,n);r=i<=0?r.left:r.right}return new C_(this,[])},L_.remove=function(t){var e=this.find(t);return e?e.remove():this},L_.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var S_=C_.prototype;function P_(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function R_(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(S_,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(S_,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),S_.clone=function(){return new C_(this.tree,this._stack.slice())},S_.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new M_(r._color,r.key,r.value,r.left,r.right,r._count);for(var n=t.length-2;n>=0;--n){(r=t[n]).left===t[n+1]?e[n]=new M_(r._color,r.key,r.value,e[n+1],r.right,r._count):e[n]=new M_(r._color,r.key,r.value,r.left,e[n+1],r._count)}if((r=e[e.length-1]).left&&r.right){var i=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var a=e[i-1];e.push(new M_(r._color,a.key,a.value,r.left,r.right,r._count)),e[i-1].key=r.key,e[i-1].value=r.value;for(n=e.length-2;n>=i;--n)r=e[n],e[n]=new M_(r._color,r.key,r.value,r.left,e[n+1],r._count);e[i-1].left=e[i]}if((r=e[e.length-1])._color===__){var o=e[e.length-2];o.left===r?o.left=null:o.right===r&&(o.right=null),e.pop();for(n=0;n<e.length;++n)e[n]._count--;return new E_(this.tree._compare,e[0])}if(r.left||r.right){r.left?P_(r,r.left):r.right&&P_(r,r.right),r._color=w_;for(n=0;n<e.length-1;++n)e[n]._count--;return new E_(this.tree._compare,e[0])}if(1===e.length)return new E_(this.tree._compare,null);for(n=0;n<e.length;++n)e[n]._count--;var s=e[e.length-2];return function(t){for(var e,r,n,i,a=t.length-1;a>=0;--a){if(e=t[a],0===a)return void(e._color=w_);if((r=t[a-1]).left===e){if((n=r.right).right&&n.right._color===__)return i=(n=r.right=A_(n)).right=A_(n.right),r.right=n.left,n.left=r,n.right=i,n._color=r._color,e._color=w_,r._color=w_,i._color=w_,k_(r),k_(n),a>1&&((o=t[a-2]).left===r?o.left=n:o.right=n),void(t[a-1]=n);if(n.left&&n.left._color===__)return i=(n=r.right=A_(n)).left=A_(n.left),r.right=i.left,n.left=i.right,i.left=r,i.right=n,i._color=r._color,r._color=w_,n._color=w_,e._color=w_,k_(r),k_(n),k_(i),a>1&&((o=t[a-2]).left===r?o.left=i:o.right=i),void(t[a-1]=i);if(n._color===w_){if(r._color===__)return r._color=w_,void(r.right=T_(__,n));r.right=T_(__,n);continue}n=A_(n),r.right=n.left,n.left=r,n._color=r._color,r._color=__,k_(r),k_(n),a>1&&((o=t[a-2]).left===r?o.left=n:o.right=n),t[a-1]=n,t[a]=r,a+1<t.length?t[a+1]=e:t.push(e),a+=2}else{if((n=r.left).left&&n.left._color===__)return i=(n=r.left=A_(n)).left=A_(n.left),r.left=n.right,n.right=r,n.left=i,n._color=r._color,e._color=w_,r._color=w_,i._color=w_,k_(r),k_(n),a>1&&((o=t[a-2]).right===r?o.right=n:o.left=n),void(t[a-1]=n);if(n.right&&n.right._color===__)return i=(n=r.left=A_(n)).right=A_(n.right),r.left=i.right,n.right=i.left,i.right=r,i.left=n,i._color=r._color,r._color=w_,n._color=w_,e._color=w_,k_(r),k_(n),k_(i),a>1&&((o=t[a-2]).right===r?o.right=i:o.left=i),void(t[a-1]=i);if(n._color===w_){if(r._color===__)return r._color=w_,void(r.left=T_(__,n));r.left=T_(__,n);continue}var o;n=A_(n),r.left=n.right,n.right=r,n._color=r._color,r._color=__,k_(r),k_(n),a>1&&((o=t[a-2]).right===r?o.right=n:o.left=n),t[a-1]=n,t[a]=r,a+1<t.length?t[a+1]=e:t.push(e),a+=2}}}(e),s.left===r?s.left=null:s.right=null,new E_(this.tree._compare,e[0])},Object.defineProperty(S_,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(S_,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(S_,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),S_.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(S_,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),S_.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),n=e[e.length-1];r[r.length-1]=new M_(n._color,n.key,t,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i)(n=e[i]).left===e[i+1]?r[i]=new M_(n._color,n.key,n.value,r[i+1],n.right,n._count):r[i]=new M_(n._color,n.key,n.value,n.left,r[i+1],n._count);return new E_(this.tree._compare,r[0])},S_.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(S_,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}});var O_=function(t,e){var r,n,i,a;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0]))return I_(e,t);r=e[1],n=e[0]}if(t[0][0]<t[1][0])i=t[0],a=t[1];else{if(!(t[0][0]>t[1][0]))return-I_(t,e);i=t[1],a=t[0]}var o=wm(r,n,a),s=wm(r,n,i);if(o<0){if(s<=0)return o}else if(o>0){if(s>=0)return o}else if(s)return s;if(o=wm(a,i,n),s=wm(a,i,r),o<0){if(s<=0)return o}else if(o>0){if(s>=0)return o}else if(s)return s;return n[0]-a[0]};function I_(t,e){var r,n,i,a;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0])){var o=Math.min(t[0][1],t[1][1]),s=Math.max(t[0][1],t[1][1]),l=Math.min(e[0][1],e[1][1]),u=Math.max(e[0][1],e[1][1]);return s<l?s-l:o>u?o-u:s-u}r=e[1],n=e[0]}t[0][1]<t[1][1]?(i=t[0],a=t[1]):(i=t[1],a=t[0]);var c=wm(n,r,i);return c||((c=wm(n,r,a))||a-n)}var N_=function(t){for(var e=t.length,r=2*e,n=new Array(r),i=0;i<e;++i){var a=t[i],o=a[0][0]<a[1][0];n[2*i]=new B_(a[0][0],a,o,i),n[2*i+1]=new B_(a[1][0],a,!o,i)}n.sort(function(t,e){var r=t.x-e.x;return r||((r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1]))});for(var s=x_(O_),l=[],u=[],c=[],i=0;i<r;){for(var h=n[i].x,f=[];i<r;){var d=n[i];if(d.x!==h)break;i+=1,d.segment[0][0]===d.x&&d.segment[1][0]===d.x?d.create&&(d.segment[0][1]<d.segment[1][1]?(f.push(new j_(d.segment[0][1],d.index,!0,!0)),f.push(new j_(d.segment[1][1],d.index,!1,!1))):(f.push(new j_(d.segment[1][1],d.index,!0,!1)),f.push(new j_(d.segment[0][1],d.index,!1,!0)))):s=d.create?s.insert(d.segment,d.index):s.remove(d.segment)}l.push(s.root),u.push(h),c.push(f)}return new D_(l,u,c)};function D_(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function z_(t,e){return t.y-e}function F_(t,e){for(var r=null;t;){var n,i,a=t.key;a[0][0]<a[1][0]?(n=a[0],i=a[1]):(n=a[1],i=a[0]);var o=wm(n,i,e);if(o<0)t=t.left;else if(o>0)if(e[0]!==a[1][0])r=t,t=t.right;else{if(s=F_(t.right,e))return s;t=t.left}else{if(e[0]!==a[1][0])return t;var s;if(s=F_(t.right,e))return s;t=t.left}}return r}function j_(t,e,r,n){this.y=t,this.index=e,this.start=r,this.closed=n}function B_(t,e,r,n){this.x=t,this.segment=e,this.create=r,this.index=n}D_.prototype.castUp=function(t){var e=Vf.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var r=F_(this.slabs[e],t),n=-1;if(r&&(n=r.value),this.coordinates[e]===t[0]){var i=null;if(r&&(i=r.key),e>0){var a=F_(this.slabs[e-1],t);a&&(i?O_(a.key,i)>0&&(i=a.key,n=a.value):(n=a.value,i=a.key))}var o=this.horizontal[e];if(o.length>0){var s=Vf.ge(o,t[1],z_);if(s<o.length){var l=o[s];if(t[1]===l.y){if(l.closed)return l.index;for(;s<o.length-1&&o[s+1].y===t[1];)if((l=o[s+=1]).closed)return l.index;if(l.y===t[1]&&!l.start){if((s+=1)>=o.length)return n;l=o[s]}}if(l.start)if(i){var u=wm(i[0],i[1],[t[0],l.y]);i[0][0]>i[1][0]&&(u=-u),u>0&&(n=l.index)}else n=l.index;else l.y!==t[1]&&(n=l.index)}}}return n};var U_=function(t){for(var e=t.length,r=[],n=[],i=0;i<e;++i)for(var a=t[i],o=a.length,s=o-1,l=0;l<o;s=l++){var u=a[s],c=a[l];u[0]===c[0]?n.push([u,c]):r.push([u,c])}if(0===r.length)return 0===n.length?G_:(h=q_(n),function(t){return h(t[0],t[1])?0:1});var h;var f=N_(r),d=function(t,e){return function(r){var n=Vf.le(e,r[0]);if(n<0)return 1;var i=t[n];if(!i){if(!(n>0&&e[n]===r[0]))return 1;i=t[n-1]}for(var a=1;i;){var o=i.key,s=V_(r,o[0],o[1]);if(o[0][0]<o[1][0])if(s<0)i=i.left;else{if(!(s>0))return 0;a=-1,i=i.right}else if(s>0)i=i.left;else{if(!(s<0))return 0;a=1,i=i.right}}return a}}(f.slabs,f.coordinates);return 0===n.length?d:function(t,e){return function(r){return t(r[0],r[1])?0:e(r)}}(q_(n),d)},V_=wm[3];function H_(){return!0}function q_(t){for(var e={},r=0;r<t.length;++r){var n=t[r],i=n[0][0],a=n[0][1],o=n[1][1],s=[Math.min(a,o),Math.max(a,o)];i in e?e[i].push(s):e[i]=[s]}var l={},u=Object.keys(e);for(r=0;r<u.length;++r){var c=e[u[r]];l[u[r]]=i_(c)}return function(t){return function(e,r){var n=t[e];return!!n&&!!n.queryPoint(r,H_)}}(l)}function G_(t){return 1}var X_=function(t,e){var r=e_(t,e);t=r[0];for(var n=(e=r[1]).length,i=(t.length,Zx(t,e.length)),a=0;a<n;++a)if(i[a].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var o=t_(t,e);for(var s=(o=o.filter(function(t){for(var r=t.length,n=[0],i=0;i<r;++i){var a=e[t[i]],o=e[t[(i+1)%r]],s=vm(-a[0],a[1]),l=vm(-a[0],o[1]),u=vm(o[0],a[1]),c=vm(o[0],o[1]);n=_m(n,_m(_m(s,l),_m(u,c)))}return n[n.length-1]>0})).length,l=new Array(s),u=new Array(s),a=0;a<s;++a){l[a]=a;var c=new Array(s),h=o[a].map(function(t){return e[t]}),f=U_([h]),d=0;t:for(var p=0;p<s;++p)if(c[p]=0,a!==p){for(var g=o[p],v=g.length,m=0;m<v;++m){var y=f(e[g[m]]);if(0!==y){y<0&&(c[p]=1,d+=1);continue t}}c[p]=1,d+=1}u[a]=[d,a,c]}u.sort(function(t,e){return e[0]-t[0]});for(var a=0;a<s;++a)for(var c=u[a],b=c[1],x=c[2],p=0;p<s;++p)x[p]&&(l[p]=b);for(var _=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=[];return e}(s),a=0;a<s;++a)_[a].push(l[a]),_[l[a]].push(a);for(var w={},M=W_(n,!1),a=0;a<s;++a)for(var g=o[a],v=g.length,p=0;p<v;++p){var A=g[p],T=g[(p+1)%v],k=Math.min(A,T)+":"+Math.max(A,T);if(k in w){var E=w[k];_[E].push(a),_[a].push(E),M[A]=M[T]=!0}else w[k]=a}function L(t){for(var e=t.length,r=0;r<e;++r)if(!M[t[r]])return!1;return!0}for(var C=[],S=W_(s,-1),a=0;a<s;++a)l[a]!==a||L(o[a])?S[a]=-1:(C.push(a),S[a]=0);var r=[];for(;C.length>0;){var P=C.pop(),R=_[P];cp(R,function(t,e){return t-e});var O,I=R.length,N=S[P];if(0===N){var g=o[P];O=[g]}for(var a=0;a<I;++a){var D=R[a];if(!(S[D]>=0)&&(S[D]=1^N,C.push(D),0===N)){var g=o[D];L(g)||(g.reverse(),O.push(g))}}0===N&&r.push(O)}return r};function W_(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}var Y_={};function Z_(t,e){var r=t.length,n=t.length-e.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],o=e[0]+e[1];if(s=a+t[2]-(o+e[2]))return s;var s,l=i(t[0],t[1]),u=i(e[0],e[1]);return(s=i(l,t[2])-i(u,e[2]))||i(l+t[2],a)-i(u+e[2],o);default:var c=t.slice(0);c.sort();var h=e.slice(0);h.sort();for(var f=0;f<r;++f)if(n=c[f]-h[f])return n;return 0}}function Q_(t,e){return Z_(t[0],e[0])}function K_(t,e){if(e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=[t[i],e[i]];n.sort(Q_);for(i=0;i<r;++i)t[i]=n[i][0],e[i]=n[i][1];return t}return t.sort(Z_),t}function $_(t){if(0===t.length)return[];for(var e=1,r=t.length,n=1;n<r;++n){var i=t[n];if(Z_(i,t[n-1])){if(n===e){e++;continue}t[e++]=i}}return t.length=e,t}function J_(t,e){for(var r=0,n=t.length-1,i=-1;r<=n;){var a=r+n>>1,o=Z_(t[a],e);o<=0?(0===o&&(i=a),r=a+1):o>0&&(n=a-1)}return i}function tw(t,e){for(var r=new Array(t.length),n=0,i=r.length;n<i;++n)r[n]=[];for(var a=[],o=(n=0,e.length);n<o;++n)for(var s=e[n],l=s.length,u=1,c=1<<l;u<c;++u){a.length=Np.popCount(u);for(var h=0,f=0;f<l;++f)u&1<<f&&(a[h++]=s[f]);var d=J_(t,a);if(!(d<0))for(;r[d++].push(n),!(d>=t.length||0!==Z_(t[d],a)););}return r}function ew(t,e){if(e<0)return[];for(var r=[],n=(1<<e+1)-1,i=0;i<t.length;++i)for(var a=t[i],o=n;o<1<<a.length;o=Np.nextCombination(o)){for(var s=new Array(e+1),l=0,u=0;u<a.length;++u)o&1<<u&&(s[l++]=a[u]);r.push(s)}return K_(r)}Y_.dimension=function(t){for(var e=0,r=Math.max,n=0,i=t.length;n<i;++n)e=r(e,t[n].length);return e-1},Y_.countVertices=function(t){for(var e=-1,r=Math.max,n=0,i=t.length;n<i;++n)for(var a=t[n],o=0,s=a.length;o<s;++o)e=r(e,a[o]);return e+1},Y_.cloneCells=function(t){for(var e=new Array(t.length),r=0,n=t.length;r<n;++r)e[r]=t[r].slice(0);return e},Y_.compareCells=Z_,Y_.normalize=K_,Y_.unique=$_,Y_.findCell=J_,Y_.incidence=tw,Y_.dual=function(t,e){if(!e)return tw($_(ew(t,0)),t);for(var r=new Array(e),n=0;n<e;++n)r[n]=[];n=0;for(var i=t.length;n<i;++n)for(var a=t[n],o=0,s=a.length;o<s;++o)r[a[o]].push(n);return r},Y_.explode=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0|i.length,o=1,s=1<<a;o<s;++o){for(var l=[],u=0;u<a;++u)o>>>u&1&&l.push(i[u]);e.push(l)}return K_(e)},Y_.skeleton=ew,Y_.boundary=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,o=i.length;a<o;++a){for(var s=new Array(i.length-1),l=0,u=0;l<o;++l)l!==a&&(s[u++]=i[l]);e.push(s)}return K_(e)},Y_.connectedComponents=function(t,e){return e?function(t,e){for(var r=new Fx(e),n=0;n<t.length;++n)for(var i=t[n],a=0;a<i.length;++a)for(var o=a+1;o<i.length;++o)r.link(i[a],i[o]);var s=[],l=r.ranks;for(n=0;n<l.length;++n)l[n]=-1;for(n=0;n<t.length;++n){var u=r.find(t[n][0]);l[u]<0?(l[u]=s.length,s.push([t[n].slice(0)])):s[l[u]].push(t[n].slice(0))}return s}(t,e):function(t){for(var e=$_(K_(ew(t,0))),r=new Fx(e.length),n=0;n<t.length;++n)for(var i=t[n],a=0;a<i.length;++a)for(var o=J_(e,[i[a]]),s=a+1;s<i.length;++s)r.link(o,J_(e,[i[s]]));var l=[],u=r.ranks;for(n=0;n<u.length;++n)u[n]=-1;for(n=0;n<t.length;++n){var c=r.find(J_(e,[t[n][0]]));u[c]<0?(u[c]=l.length,l.push([t[n].slice(0)])):l[u[c]].push(t[n].slice(0))}return l}(t)};var rw={};function nw(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}rw.INT_BITS=32,rw.INT_MAX=2147483647,rw.INT_MIN=-1<<31,rw.sign=function(t){return(t>0)-(t<0)},rw.abs=function(t){var e=t>>31;return(t^e)-e},rw.min=function(t,e){return e^(t^e)&-(t<e)},rw.max=function(t,e){return t^(t^e)&-(t<e)},rw.isPow2=function(t){return!(t&t-1||!t)},rw.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},rw.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},rw.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},rw.countTrailingZeros=nw,rw.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},rw.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},rw.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var iw=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(iw),rw.reverse=function(t){return iw[255&t]<<24|iw[t>>>8&255]<<16|iw[t>>>16&255]<<8|iw[t>>>24&255]},rw.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},rw.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},rw.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},rw.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},rw.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>nw(t)+1};var aw=ow;function ow(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}ow.prototype.length=function(){return this.roots.length},ow.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},ow.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},ow.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,a=this.roots,o=i[r],s=i[n];o<s?a[r]=n:s<o?a[n]=r:(a[n]=r,++i[r])}};var sw={};function lw(t,e){var r=t.length,n=t.length-e.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],o=e[0]+e[1];if(s=a+t[2]-(o+e[2]))return s;var s,l=i(t[0],t[1]),u=i(e[0],e[1]);return(s=i(l,t[2])-i(u,e[2]))||i(l+t[2],a)-i(u+e[2],o);default:var c=t.slice(0);c.sort();var h=e.slice(0);h.sort();for(var f=0;f<r;++f)if(n=c[f]-h[f])return n;return 0}}function uw(t,e){return lw(t[0],e[0])}function cw(t,e){if(e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=[t[i],e[i]];n.sort(uw);for(i=0;i<r;++i)t[i]=n[i][0],e[i]=n[i][1];return t}return t.sort(lw),t}function hw(t){if(0===t.length)return[];for(var e=1,r=t.length,n=1;n<r;++n){var i=t[n];if(lw(i,t[n-1])){if(n===e){e++;continue}t[e++]=i}}return t.length=e,t}function fw(t,e){for(var r=0,n=t.length-1,i=-1;r<=n;){var a=r+n>>1,o=lw(t[a],e);o<=0?(0===o&&(i=a),r=a+1):o>0&&(n=a-1)}return i}function dw(t,e){for(var r=new Array(t.length),n=0,i=r.length;n<i;++n)r[n]=[];for(var a=[],o=(n=0,e.length);n<o;++n)for(var s=e[n],l=s.length,u=1,c=1<<l;u<c;++u){a.length=rw.popCount(u);for(var h=0,f=0;f<l;++f)u&1<<f&&(a[h++]=s[f]);var d=fw(t,a);if(!(d<0))for(;r[d++].push(n),!(d>=t.length||0!==lw(t[d],a)););}return r}function pw(t,e){if(e<0)return[];for(var r=[],n=(1<<e+1)-1,i=0;i<t.length;++i)for(var a=t[i],o=n;o<1<<a.length;o=rw.nextCombination(o)){for(var s=new Array(e+1),l=0,u=0;u<a.length;++u)o&1<<u&&(s[l++]=a[u]);r.push(s)}return cw(r)}sw.dimension=function(t){for(var e=0,r=Math.max,n=0,i=t.length;n<i;++n)e=r(e,t[n].length);return e-1},sw.countVertices=function(t){for(var e=-1,r=Math.max,n=0,i=t.length;n<i;++n)for(var a=t[n],o=0,s=a.length;o<s;++o)e=r(e,a[o]);return e+1},sw.cloneCells=function(t){for(var e=new Array(t.length),r=0,n=t.length;r<n;++r)e[r]=t[r].slice(0);return e},sw.compareCells=lw,sw.normalize=cw,sw.unique=hw,sw.findCell=fw,sw.incidence=dw,sw.dual=function(t,e){if(!e)return dw(hw(pw(t,0)),t);for(var r=new Array(e),n=0;n<e;++n)r[n]=[];n=0;for(var i=t.length;n<i;++n)for(var a=t[n],o=0,s=a.length;o<s;++o)r[a[o]].push(n);return r},sw.explode=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0|i.length,o=1,s=1<<a;o<s;++o){for(var l=[],u=0;u<a;++u)o>>>u&1&&l.push(i[u]);e.push(l)}return cw(e)},sw.skeleton=pw,sw.boundary=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],a=0,o=i.length;a<o;++a){for(var s=new Array(i.length-1),l=0,u=0;l<o;++l)l!==a&&(s[u++]=i[l]);e.push(s)}return cw(e)},sw.connectedComponents=function(t,e){return e?function(t,e){for(var r=new aw(e),n=0;n<t.length;++n)for(var i=t[n],a=0;a<i.length;++a)for(var o=a+1;o<i.length;++o)r.link(i[a],i[o]);var s=[],l=r.ranks;for(n=0;n<l.length;++n)l[n]=-1;for(n=0;n<t.length;++n){var u=r.find(t[n][0]);l[u]<0?(l[u]=s.length,s.push([t[n].slice(0)])):s[l[u]].push(t[n].slice(0))}return s}(t,e):function(t){for(var e=hw(cw(pw(t,0))),r=new aw(e.length),n=0;n<t.length;++n)for(var i=t[n],a=0;a<i.length;++a)for(var o=fw(e,[i[a]]),s=a+1;s<i.length;++s)r.link(o,fw(e,[i[s]]));var l=[],u=r.ranks;for(n=0;n<u.length;++n)u[n]=-1;for(n=0;n<t.length;++n){var c=r.find(fw(e,[t[n][0]]));u[c]<0?(u[c]=l.length,l.push([t[n].slice(0)])):l[u[c]].push(t[n].slice(0))}return l}(t)};var gw=function(t,e,r){for(var n=e.length,i=t.length,a=new Array(n),o=new Array(n),s=new Array(n),l=new Array(n),u=0;u<n;++u)a[u]=o[u]=-1,s[u]=1/0,l[u]=!1;for(var u=0;u<i;++u){var c=t[u];if(2!==c.length)throw new Error("Input must be a graph");var h=c[1],f=c[0];-1!==o[f]?o[f]=-2:o[f]=h,-1!==a[h]?a[h]=-2:a[h]=f}function d(t){if(l[t])return 1/0;var r,n,i,s,u,c=a[t],h=o[t];return c<0||h<0?1/0:(r=e[t],n=e[c],i=e[h],s=Math.abs(wm(r,n,i)),u=Math.sqrt(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)),s/u)}function p(t,e){var r=w[t],n=w[e];w[t]=n,w[e]=r,M[r]=e,M[n]=t}function g(t){return s[w[t]]}function v(t){return 1&t?t-1>>1:(t>>1)-1}function m(t){for(var e=g(t);;){var r=e,n=2*t+1,i=2*(t+1),a=t;if(n<T){var o=g(n);o<r&&(a=n,r=o)}if(i<T){var s=g(i);s<r&&(a=i)}if(a===t)return t;p(t,a),t=a}}function y(t){for(var e=g(t);t>0;){var r=v(t);if(r>=0){var n=g(r);if(e<n){p(t,r),t=r;continue}}return t}}function b(){if(T>0){var t=w[0];return p(0,T-1),T-=1,m(0),t}return-1}function x(t,e){var r=w[t];return s[r]===e?t:(s[r]=-1/0,y(t),b(),s[r]=e,y((T+=1)-1))}function _(t){if(!l[t]){l[t]=!0;var e=a[t],r=o[t];a[r]>=0&&(a[r]=e),o[e]>=0&&(o[e]=r),M[e]>=0&&x(M[e],d(e)),M[r]>=0&&x(M[r],d(r))}}for(var w=[],M=new Array(n),u=0;u<n;++u){var A=s[u]=d(u);A<1/0?(M[u]=w.length,w.push(u)):M[u]=-1}for(var T=w.length,u=T>>1;u>=0;--u)m(u);for(;;){var k=b();if(k<0||s[k]>r)break;_(k)}for(var E=[],u=0;u<n;++u)l[u]||(M[u]=E.length,E.push(e[u].slice()));E.length;function L(t,e){if(t[e]<0)return e;var r=e,n=e;do{var i=t[n];if(!l[n]||i<0||i===n)break;if(i=t[n=i],!l[n]||i<0||i===n)break;n=i,r=t[r]}while(r!==n);for(var a=e;a!==n;a=t[a])t[a]=n;return n}var C=[];return t.forEach(function(t){var e=L(a,t[0]),r=L(o,t[1]);if(e>=0&&r>=0&&e!==r){var n=M[e],i=M[r];n!==i&&C.push([n,i])}}),sw.unique(sw.normalize(C)),{positions:E,edges:C}};var vw=function(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r=t.order;Array.isArray(r)||e("Must specify order");var n=t.arrayArguments||1;n<1&&e("Must have at least one array argument");var i=t.scalarArguments||0;i<0&&e("Scalar arg count must be > 0");"function"!=typeof t.vertex&&e("Must specify vertex creation function");"function"!=typeof t.cell&&e("Must specify cell creation function");"function"!=typeof t.phase&&e("Must specify phase function");for(var a=t.getters||[],o=new Array(n),s=0;s<n;++s)a.indexOf(s)>=0?o[s]=!0:o[s]=!1;return function(t,e,r,n,i,a){var o=a.length,s=i.length;if(s<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var l="extractContour"+i.join("_"),u=[],c=[],h=[],f=0;f<o;++f)h.push(mw(f));for(var f=0;f<n;++f)h.push(Mw(f));for(var f=0;f<s;++f)c.push(xw(f)+"="+mw(0)+".shape["+f+"]|0");for(var f=0;f<o;++f){c.push(yw(f)+"="+mw(f)+".data",ww(f)+"="+mw(f)+".offset|0");for(var d=0;d<s;++d)c.push(_w(f,d)+"="+mw(f)+".stride["+d+"]|0")}for(var f=0;f<o;++f){c.push(Aw(f)+"="+ww(f)),c.push(bw(f,0));for(var d=1;d<1<<s;++d){for(var p=[],g=0;g<s;++g)d&1<<g&&p.push("-"+_w(f,g));c.push(Tw(f,d)+"=("+p.join("")+")|0"),c.push(bw(f,d)+"=0")}}for(var f=0;f<o;++f)for(var d=0;d<s;++d){var v=[_w(f,i[d])];d>0&&v.push(_w(f,i[d-1])+"*"+xw(i[d-1])),c.push(Ew(f,i[d])+"=("+v.join("-")+")|0")}for(var f=0;f<s;++f)c.push(kw(f)+"=0");c.push(Iw+"=0");for(var m=["2"],f=s-2;f>=0;--f)m.push(xw(i[f]));c.push(Nw+"=("+m.join("*")+")|0",Ow+"=mallocUint32("+Nw+")",Rw+"=mallocUint32("+Nw+")",Dw+"=0"),c.push(Lw(0)+"=0");for(var d=1;d<1<<s;++d){for(var y=[],b=[],g=0;g<s;++g)d&1<<g&&(0===b.length?y.push("1"):y.unshift(b.join("*"))),b.push(xw(i[g]));var x="";y[0].indexOf(xw(i[s-2]))<0&&(x="-");var _=Fw(s,d,i);c.push(Sw(_)+"=(-"+y.join("-")+")|0",Cw(_)+"=("+x+y.join("-")+")|0",Lw(_)+"=0")}function w(t,e){u.push("for(",kw(i[t]),"=",e,";",kw(i[t]),"<",xw(i[t]),";","++",kw(i[t]),"){")}function M(t){for(var e=0;e<o;++e)u.push(Aw(e),"+=",Ew(e,i[t]),";");u.push("}")}function A(){for(var t=1;t<1<<s;++t)u.push(zw,"=",Sw(t),";",Sw(t),"=",Cw(t),";",Cw(t),"=",zw,";")}c.push(Pw(0)+"=0",zw+"=0"),function t(e,r){if(e<0)return void function(t){for(var e=0;e<o;++e)a[e]?u.push(bw(e,0),"=",yw(e),".get(",Aw(e),");"):u.push(bw(e,0),"=",yw(e),"[",Aw(e),"];");for(var r=[],e=0;e<o;++e)r.push(bw(e,0));for(var e=0;e<n;++e)r.push(Mw(e));u.push(Lw(0),"=",Ow,"[",Dw,"]=phase(",r.join(),");");for(var i=1;i<1<<s;++i)u.push(Lw(i),"=",Ow,"[",Dw,"+",Sw(i),"];");for(var l=[],i=1;i<1<<s;++i)l.push("("+Lw(0)+"!=="+Lw(i)+")");u.push("if(",l.join("||"),"){");for(var c=[],e=0;e<s;++e)c.push(kw(e));for(var e=0;e<o;++e){c.push(bw(e,0));for(var i=1;i<1<<s;++i)a[e]?u.push(bw(e,i),"=",yw(e),".get(",Aw(e),"+",Tw(e,i),");"):u.push(bw(e,i),"=",yw(e),"[",Aw(e),"+",Tw(e,i),"];"),c.push(bw(e,i))}for(var e=0;e<1<<s;++e)c.push(Lw(e));for(var e=0;e<n;++e)c.push(Mw(e));u.push("vertex(",c.join(),");",Pw(0),"=",Rw,"[",Dw,"]=",Iw,"++;");for(var h=(1<<s)-1,f=Lw(h),i=0;i<s;++i)if(0==(t&~(1<<i))){for(var d=h^1<<i,p=Lw(d),g=[],v=d;v>0;v=v-1&d)g.push(Rw+"["+Dw+"+"+Sw(v)+"]");g.push(Pw(0));for(var v=0;v<o;++v)1&i?g.push(bw(v,h),bw(v,d)):g.push(bw(v,d),bw(v,h));1&i?g.push(f,p):g.push(p,f);for(var v=0;v<n;++v)g.push(Mw(v));u.push("if(",f,"!==",p,"){","face(",g.join(),")}")}u.push("}",Dw,"+=1;")}(r);!function(t){for(var e=t-1;e>=0;--e)w(e,0);for(var r=[],e=0;e<o;++e)a[e]?r.push(yw(e)+".get("+Aw(e)+")"):r.push(yw(e)+"["+Aw(e)+"]");for(var e=0;e<n;++e)r.push(Mw(e));u.push(Ow,"[",Dw,"++]=phase(",r.join(),");");for(var e=0;e<t;++e)M(e);for(var s=0;s<o;++s)u.push(Aw(s),"+=",Ew(s,i[t]),";")}(e);u.push("if(",xw(i[e]),">0){",kw(i[e]),"=1;");t(e-1,r|1<<i[e]);for(var l=0;l<o;++l)u.push(Aw(l),"+=",Ew(l,i[e]),";");e===s-1&&(u.push(Dw,"=0;"),A());w(e,2);t(e-1,r);e===s-1&&(u.push("if(",kw(i[s-1]),"&1){",Dw,"=0;}"),A());M(e);u.push("}")}(s-1,0),u.push("freeUint32(",Rw,");freeUint32(",Ow,");");var T=["'use strict';","function ",l,"(",h.join(),"){","var ",c.join(),";",u.join(""),"}","return ",l].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",T)(t,e,r,Og.mallocUint32,Og.freeUint32)}(t.vertex,t.cell,t.phase,i,r,o)};function mw(t){return"a"+t}function yw(t){return"d"+t}function bw(t,e){return"c"+t+"_"+e}function xw(t){return"s"+t}function _w(t,e){return"t"+t+"_"+e}function ww(t){return"o"+t}function Mw(t){return"x"+t}function Aw(t){return"p"+t}function Tw(t,e){return"d"+t+"_"+e}function kw(t){return"i"+t}function Ew(t,e){return"u"+t+"_"+e}function Lw(t){return"b"+t}function Cw(t){return"y"+t}function Sw(t){return"e"+t}function Pw(t){return"v"+t}var Rw="V",Ow="P",Iw="N",Nw="Q",Dw="X",zw="T";function Fw(t,e,r){for(var n=0,i=0;i<t;++i)e&1<<i&&(n|=1<<r[i]);return n}var jw={},Bw=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],Uw=607/128,Vw=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Hw(t){if(t<0)return Number("0/0");for(var e=Vw[0],r=Vw.length-1;r>0;--r)e+=Vw[r]/(t+r);var n=t+Uw+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(e)-Math.log(t)}(jw=function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));if(e>100)return Math.exp(Hw(e));e-=1;for(var r=Bw[0],n=1;n<9;n++)r+=Bw[n]/(e+n);var i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*r}).log=Hw;var qw=function(t){var e=t.length;if(e<Gw){for(var r=1,n=0;n<e;++n)for(var i=0;i<n;++i)if(t[n]<t[i])r=-r;else if(t[n]===t[i])return 0;return r}for(var a=Og.mallocUint8(e),n=0;n<e;++n)a[n]=0;for(var r=1,n=0;n<e;++n)if(!a[n]){var o=1;a[n]=1;for(var i=t[n];i!==n;i=t[i]){if(a[i])return Og.freeUint8(a),0;o+=1,a[i]=1}1&o||(r=-r)}return Og.freeUint8(a),r},Gw=32;var Xw=function(t,e){e=e||new Array(t.length);for(var r=0;r<t.length;++r)e[t[r]]=r;return e},Ww={};Ww.rank=function(t){var e=t.length;switch(e){case 0:case 1:return 0;case 2:return t[1]}var r,n,i,a=Og.mallocUint32(e),o=Og.mallocUint32(e),s=0;for(Xw(t,o),i=0;i<e;++i)a[i]=t[i];for(i=e-1;i>0;--i)n=o[i],r=a[i],a[i]=a[n],a[n]=r,o[i]=o[r],o[r]=n,s=(s+r)*i;return Og.freeUint32(o),Og.freeUint32(a),s},Ww.unrank=function(t,e,r){switch(t){case 0:return r||[];case 1:return r?(r[0]=0,r):[0];case 2:return r?(e?(r[0]=0,r[1]=1):(r[0]=1,r[1]=0),r):e?[0,1]:[1,0]}var n,i,a,o=1;for((r=r||new Array(t))[0]=0,a=1;a<t;++a)r[a]=a,o=o*a|0;for(a=t-1;a>0;--a)e=e-(n=e/o|0)*o|0,o=o/a|0,i=0|r[a],r[a]=0|r[n],r[n]=0|i;return r};var Yw=function(t){if(t<0)return[];if(0===t)return[[0]];for(var e=0|Math.round(jw(t+1)),r=[],n=0;n<e;++n){for(var i=Ww.unrank(t,n),a=[0],o=0,s=0;s<i.length;++s)o+=1<<i[s],a.push(o);qw(i)<1&&(a[0]=o,a[t]=0),r.push(a)}return r};var Zw=gp({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"}),Qw=function(t,e){var r=[];return e=+e||0,Zw(t.hi(t.shape[0]-1),r,e),r};var Kw=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var r=Qw(t,e),n=r.length,i=new Array(n),a=new Array(n),o=0;o<n;++o)i[o]=[r[o]],a[o]=[o];return{positions:i,cells:a}}(t,e);var r=t.order.join()+"-"+t.dtype,n=$w[r],e=+e||0;n||(n=$w[r]=function(t,e){var r=t.length,n=["'use strict';"],i="surfaceNets"+t.join("_")+"d"+e;n.push("var contour=genContour({","order:[",t.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===e&&n.push("getters:[0],");for(var a=[],o=[],s=0;s<r;++s)a.push("d"+s),o.push("d"+s);for(var s=0;s<1<<r;++s)a.push("v"+s),o.push("v"+s);for(var s=0;s<1<<r;++s)a.push("p"+s),o.push("p"+s);a.push("a","b","c"),o.push("a","c"),n.push("vertex:function vertexFunc(",a.join(),"){");for(var l=[],s=0;s<1<<r;++s)l.push("(p"+s+"<<"+s+")");n.push("var m=(",l.join("+"),")|0;if(m===0||m===",(1<<(1<<r))-1,"){return}");var u=[],c=[];1<<(1<<r)<=128?(n.push("switch(m){"),c=n):n.push("switch(m>>>7){");for(var s=0;s<1<<(1<<r);++s){if(1<<(1<<r)>128&&s%128==0){u.length>0&&c.push("}}");var h="vExtra"+u.length;n.push("case ",s>>>7,":",h,"(m&0x7f,",o.join(),");break;"),c=["function ",h,"(m,",o.join(),"){switch(m){"],u.push(c)}c.push("case ",127&s,":");for(var f=new Array(r),d=new Array(r),p=new Array(r),g=new Array(r),v=0,m=0;m<r;++m)f[m]=[],d[m]=[],p[m]=0,g[m]=0;for(var m=0;m<1<<r;++m)for(var y=0;y<r;++y){var b=m^1<<y;if(!(b>m)&&!(s&1<<b)!=!(s&1<<m)){var x=1;s&1<<b?d[y].push("v"+b+"-v"+m):(d[y].push("v"+m+"-v"+b),x=-x),x<0?(f[y].push("-v"+m+"-v"+b),p[y]+=2):(f[y].push("v"+m+"+v"+b),p[y]-=2),v+=1;for(var _=0;_<r;++_)_!==y&&(b&1<<_?g[_]+=1:g[_]-=1)}}for(var w=[],y=0;y<r;++y)if(0===f[y].length)w.push("d"+y+"-0.5");else{var M="";p[y]<0?M=p[y]+"*c":p[y]>0&&(M="+"+p[y]+"*c");var A=f[y].length/v*.5,T=.5+g[y]/v*.5;w.push("d"+y+"-"+T+"-"+A+"*("+f[y].join("+")+M+")/("+d[y].join("+")+")")}c.push("a.push([",w.join(),"]);","break;")}n.push("}},"),u.length>0&&c.push("}}");for(var k=[],s=0;s<1<<r-1;++s)k.push("v"+s);k.push("c0","c1","p0","p1","a","b","c"),n.push("cell:function cellFunc(",k.join(),"){");var E=Yw(r-1);n.push("if(p0){b.push(",E.map(function(t){return"["+t.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",E.map(function(t){var e=t.slice();return e.reverse(),"["+e.map(function(t){return"v"+t})+"]"}).join(),")}}});function ",i,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",i,";");for(var s=0;s<u.length;++s)n.push(u[s].join(""));return new Function("genContour",n.join(""))(vw)}(t.order,t.dtype));return n(t,e)};var $w={};var Jw={};function tM(t,e,r,n){var i=function(t,e){var r=Kw(t,128);return e?gw(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}(t,n),a=function(t,e,r){for(var n=e.textAlign||"start",i=e.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=t.length,l=0;l<s;++l)for(var u=t[l],c=0;c<2;++c)a[c]=0|Math.min(a[c],u[c]),o[c]=0|Math.max(o[c],u[c]);var h=0;switch(n){case"center":h=-.5*(a[0]+o[0]);break;case"right":case"end":h=-o[0];break;case"left":case"start":h=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var f=0;switch(i){case"hanging":case"top":f=-a[1];break;case"middle":f=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":f=-3*r;break;case"bottom":f=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var d=1/r;return"lineHeight"in e?d*=+e.lineHeight:"width"in e?d=e.width/(o[0]-a[0]):"height"in e&&(d=e.height/(o[1]-a[1])),t.map(function(t){return[d*(t[0]+h),d*(t[1]+f)]})}(i.positions,e,r),o=i.edges,s="ccw"===e.orientation;if(Ux(a,o),e.polygons||e.polygon||e.polyline){for(var l=X_(o,a),u=new Array(l.length),c=0;c<l.length;++c){for(var h=l[c],f=new Array(h.length),d=0;d<h.length;++d){for(var p=h[d],g=new Array(p.length),v=0;v<p.length;++v)g[v]=a[p[v]].slice();s&&g.reverse(),f[d]=g}u[c]=f}return u}return e.triangles||e.triangulate||e.triangle?{cells:By(a,o,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:o,positions:a}}function eM(t,e,r){try{return tM(t,e,r,!0)}catch(t){}try{return tM(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}(Jw=function(t,e,r,n){var i=n.size||64,a=n.font||"normal";return r.font=i+"px "+a,r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",eM(function(t,e,r,n){var i=0|Math.ceil(e.measureText(r).width+2*n);if(i>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var a=3*n;t.height<a&&(t.height=a),e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff",e.fillText(r,n,2*n);var o=e.getImageData(0,0,i,a);return Ip(o.data,[a,i,4]).pick(-1,-1,0).transpose(1,0)}(e,r,t,i),n,i)}).processPixels=eM;var rM=function(t,e){"object"==typeof e&&null!==e||(e={});return Jw(t,e.canvas||nM,e.context||iM,e)},nM=null,iM=null;"undefined"!=typeof document&&((nM=document.createElement("canvas")).width=8192,nM.height=1024,iM=nM.getContext("2d"));var aM={};(function(t){"use strict";aM=function(t,r,n,a,o,s){var l=jg(t),u=Xg(t,[{buffer:l,size:3}]),c=e(t);c.attributes.position.location=0;var h=new i(t,c,l,u);return h.update(r,n,a,o,s),h};var e=am.text,r=window||t.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={};function i(t,e,r,n){this.gl=t,this.shader=e,this.buffer=r,this.vao=n,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var a=i.prototype,o=[0,0];a.bind=function(t,e,r,n){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=t,i.view=e,i.projection=r,i.pixelScale=n,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=o},a.unbind=function(){this.vao.unbind()},a.update=function(t,e,r,i,a){this.gl;var o=[];function s(t,e,r,i){var a=n[r];a||(a=n[r]={});var s=a[e];s||(s=a[e]=function(t,e){try{return rM(t,e)}catch(t){return console.warn("error vectorizing text:",t),{cells:[],positions:[]}}}(e,{triangles:!0,font:r,textAlign:"center",textBaseline:"middle"}));for(var l=(i||12)/12,u=s.positions,c=s.cells,h=0,f=c.length;h<f;++h)for(var d=c[h],p=2;p>=0;--p){var g=u[d[p]];o.push(l*g[0],-l*g[1],t)}}for(var l=[0,0,0],u=[0,0,0],c=[0,0,0],h=[0,0,0],f=0;f<3;++f){c[f]=o.length/3|0,s(.5*(t[0][f]+t[1][f]),e[f],r),h[f]=(o.length/3|0)-c[f],l[f]=o.length/3|0;for(var d=0;d<i[f].length;++d)i[f][d].text&&s(i[f][d].x,i[f][d].text,i[f][d].font||a,i[f][d].fontSize||12);u[f]=(o.length/3|0)-l[f]}this.buffer.update(o),this.tickOffset=l,this.tickCount=u,this.labelOffset=c,this.labelCount=h};var s=[0,0,0];a.drawTicks=function(t,e,r,n,i){if(this.tickCount[t]){var a=s;a[0]=a[1]=a[2]=0,a[t]=1,this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}};var l=[0,0,0];a.drawLabel=function(t,e,r,n,i){this.labelCount[t]&&(this.shader.uniforms.axis=l,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},a.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,pe);var oM={};function sM(t,e){var r=t+"",n=r.indexOf("."),i=0;n>=0&&(i=r.length-n-1);var a=Math.pow(10,i),o=Math.round(t*e*a),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/a,u=o%a;o<0?(l=0|-Math.ceil(l),u=0|-u):(l=0|Math.floor(l),u|=0);var c=""+l;if(o<0&&(c="-"+c),i){for(var h=""+u;h.length<i;)h="0"+h;return c+"."+h}return c}oM.create=function(t,e){for(var r=[],n=0;n<3;++n){for(var i=[],a=(t[0][n],t[1][n],0);a*e[n]<=t[1][n];++a)i.push({x:a*e[n],text:sM(e[n],a)});for(var a=-1;a*e[n]>=t[0][n];--a)i.push({x:a*e[n],text:sM(e[n],a)});r.push(i)}return r},oM.equal=function(t,e){for(var r=0;r<3;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;++n){var i=t[r][n],a=e[r][n];if(i.x!==a.x||i.text!==a.text||i.font!==a.font||i.fontColor!==a.fontColor||i.fontSize!==a.fontSize||i.dx!==a.dx||i.dy!==a.dy)return!1}}return!0};var lM=function(t,e){var r=new hM(t);return r.update(e),r},uM=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function cM(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function hM(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=fm(t)}var fM=hM.prototype;function dM(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}fM.update=function(t){function e(e,r,n){if(n in t){var i,a=t[n],o=this[n];(e?Array.isArray(a)&&Array.isArray(a[0]):Array.isArray(a))?this[n]=i=[r(a[0]),r(a[1]),r(a[2])]:this[n]=i=[r(a),r(a),r(a)];for(var s=0;s<3;++s)if(i[s]!==o[s])return!0}return!1}t=t||{};var r,n=e.bind(this,!1,Number),i=e.bind(this,!1,Boolean),a=e.bind(this,!1,String),o=e.bind(this,!0,function(t){if(Array.isArray(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]}),s=!1,l=!1;if("bounds"in t)for(var u=t.bounds,c=0;c<2;++c)for(var h=0;h<3;++h)u[c][h]!==this.bounds[c][h]&&(l=!0),this.bounds[c][h]=u[c][h];if("ticks"in t){r=t.ticks,s=!0,this.autoTicks=!1;for(c=0;c<3;++c)this.tickSpacing[c]=0}else n("tickSpacing")&&(this.autoTicks=!0,l=!0);if(this._firstInit&&("ticks"in t||"tickSpacing"in t||(this.autoTicks=!0),l=!0,s=!0,this._firstInit=!1),l&&this.autoTicks&&(r=oM.create(this.bounds,this.tickSpacing),s=!0),s){for(c=0;c<3;++c)r[c].sort(function(t,e){return t.x-e.x});oM.equal(r,this.ticks)?s=!1:this.ticks=r}i("tickEnable"),a("tickFont")&&(s=!0),n("tickSize"),n("tickAngle"),n("tickPad"),o("tickColor");var f=a("labels");a("labelFont")&&(f=!0),i("labelEnable"),n("labelSize"),n("labelPad"),o("labelColor"),i("lineEnable"),i("lineMirror"),n("lineWidth"),o("lineColor"),i("lineTickEnable"),i("lineTickMirror"),n("lineTickLength"),n("lineTickWidth"),o("lineTickColor"),i("gridEnable"),n("gridWidth"),o("gridColor"),i("zeroEnable"),o("zeroLineColor"),n("zeroLineWidth"),i("backgroundEnable"),o("backgroundColor"),this._text?this._text&&(f||s)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=aM(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&s&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=Wm(this.gl,this.bounds,this.ticks))};var pM=[new dM,new dM,new dM];function gM(t,e,r,n,i){for(var a=t.primalOffset,o=t.primalMinor,s=t.mirrorOffset,l=t.mirrorMinor,u=n[e],c=0;c<3;++c)if(e!==c){var h=a,f=s,d=o,p=l;u&1<<c&&(h=s,f=a,d=l,p=o),h[c]=r[0][c],f[c]=r[1][c],i[c]>0?(d[c]=-1,p[c]=0):(d[c]=0,p[c]=1)}}var vM=[0,0,0],mM={model:uM,view:uM,projection:uM};fM.isOpaque=function(){return!0},fM.isTransparent=function(){return!1},fM.drawTransparent=function(t){};var yM=[0,0,0],bM=[0,0,0],xM=[0,0,0];fM.draw=function(t){t=t||mM;for(var e=this.gl,r=t.model||uM,n=t.view||uM,i=t.projection||uM,a=this.bounds,o=Nm(r,n,i,a),s=o.cubeEdges,l=o.axis,u=n[12],c=n[13],h=n[14],f=n[15],d=this.pixelRatio*(i[3]*u+i[7]*c+i[11]*h+i[15]*f)/e.drawingBufferHeight,p=0;p<3;++p)this.lastCubeProps.cubeEdges[p]=s[p],this.lastCubeProps.axis[p]=l[p];var g=pM;for(p=0;p<3;++p)gM(pM[p],p,this.bounds,s,l);e=this.gl;var v=vM;for(p=0;p<3;++p)this.backgroundEnable[p]?v[p]=l[p]:v[p]=0;this._background.draw(r,n,i,a,v,this.backgroundColor),this._lines.bind(r,n,i,this);for(p=0;p<3;++p){var m=[0,0,0];l[p]>0?m[p]=a[1][p]:m[p]=a[0][p];for(var y=0;y<2;++y){var b=(p+1+y)%3,x=(p+1+(1^y))%3;this.gridEnable[b]&&this._lines.drawGrid(b,x,this.bounds,m,this.gridColor[b],this.gridWidth[b]*this.pixelRatio)}for(y=0;y<2;++y){b=(p+1+y)%3,x=(p+1+(1^y))%3;this.zeroEnable[x]&&a[0][x]<=0&&a[1][x]>=0&&this._lines.drawZero(b,x,this.bounds,m,this.zeroLineColor[x],this.zeroLineWidth[x]*this.pixelRatio)}}for(p=0;p<3;++p){this.lineEnable[p]&&this._lines.drawAxisLine(p,this.bounds,g[p].primalOffset,this.lineColor[p],this.lineWidth[p]*this.pixelRatio),this.lineMirror[p]&&this._lines.drawAxisLine(p,this.bounds,g[p].mirrorOffset,this.lineColor[p],this.lineWidth[p]*this.pixelRatio);var _=cM(yM,g[p].primalMinor),w=cM(bM,g[p].mirrorMinor),M=this.lineTickLength;for(y=0;y<3;++y){var A=d/r[5*y];_[y]*=M[y]*A,w[y]*=M[y]*A}this.lineTickEnable[p]&&this._lines.drawAxisTicks(p,g[p].primalOffset,_,this.lineTickColor[p],this.lineTickWidth[p]*this.pixelRatio),this.lineTickMirror[p]&&this._lines.drawAxisTicks(p,g[p].mirrorOffset,w,this.lineTickColor[p],this.lineTickWidth[p]*this.pixelRatio)}this._lines.unbind(),this._text.bind(r,n,i,this.pixelRatio);for(p=0;p<3;++p){var T=g[p].primalMinor,k=cM(xM,g[p].primalOffset);for(y=0;y<3;++y)this.lineTickEnable[p]&&(k[y]+=d*T[y]*Math.max(this.lineTickLength[y],0)/r[5*y]);if(this.tickEnable[p]){for(y=0;y<3;++y)k[y]+=d*T[y]*this.tickPad[y]/r[5*y];this._text.drawTicks(p,this.tickSize[p],this.tickAngle[p],k,this.tickColor[p])}if(this.labelEnable[p]){for(y=0;y<3;++y)k[y]+=d*T[y]*this.labelPad[y]/r[5*y];k[p]+=.5*(a[0][p]+a[1][p]),this._text.drawLabel(p,this.labelSize[p],this.labelAngle[p],k,this.labelColor[p])}}this._text.unbind()},fM.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};var _M=function(t,e,r){var n=e||0,i=r||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[n*t[12]+t[8],n*t[13]+t[9],n*t[14]+t[10],n*t[15]+t[11]],[i*t[12]-t[8],i*t[13]-t[9],i*t[14]-t[10],i*t[15]-t[11]]]};var wM=function(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t};var MM=function(t,e,r,n,i){var a=e.model||AM,o=e.view||AM,s=e.projection||AM,l=t.bounds,u=(i=i||Nm(a,o,s,l)).axis;i.edges;dd(TM,o,a),dd(TM,s,TM);for(var c=SM,h=0;h<3;++h)c[h].lo=1/0,c[h].hi=-1/0,c[h].pixelsPerDataUnit=1/0;var f=_M(rd(TM,TM));rd(TM,TM);for(var d=0;d<3;++d){var p=(d+1)%3,g=(d+2)%3,v=PM;t:for(var h=0;h<2;++h){var m=[];if(u[d]<0!=!!h){v[d]=l[h][d];for(var y=0;y<2;++y){v[p]=l[y^h][p];for(var b=0;b<2;++b)v[g]=l[b^y^h][g],m.push(v.slice())}for(var y=0;y<f.length;++y){if(0===m.length)continue t;m=Rm.positive(m,f[y])}for(var y=0;y<m.length;++y)for(var g=m[y],x=CM(PM,TM,g,r,n),b=0;b<3;++b)c[b].lo=Math.min(c[b].lo,g[b]),c[b].hi=Math.max(c[b].hi,g[b]),b!==d&&(c[b].pixelsPerDataUnit=Math.min(c[b].pixelsPerDataUnit,Math.abs(x[b])))}}}return c},AM=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),TM=new Float32Array(16);function kM(t,e,r){this.lo=t,this.hi=e,this.pixelsPerDataUnit=r}var EM=[0,0,0,1],LM=[0,0,0,1];function CM(t,e,r,n,i){for(var a=0;a<3;++a){for(var o=EM,s=LM,l=0;l<3;++l)s[l]=o[l]=r[l];s[3]=o[3]=1,s[a]+=1,wM(s,s,e),s[3]<0&&(t[a]=1/0),o[a]-=1,wM(o,o,e),o[3]<0&&(t[a]=1/0);var u=(o[0]/o[3]-s[0]/s[3])*n,c=(o[1]/o[3]-s[1]/s[3])*i;t[a]=.25*Math.sqrt(u*u+c*c)}return t}var SM=[new kM(1/0,-1/0,1/0),new kM(1/0,-1/0,1/0),new kM(1/0,-1/0,1/0)],PM=[0,0,0];var RM=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");OM||function(t){OM=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],IM=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],NM=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}(t);if("number"==typeof arguments[1])return HM(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return HM(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1],r=DM(e)?e:e.raw;if(r)return function(t,e,r,n,i,a){var o=VM(t);return t.texImage2D(t.TEXTURE_2D,0,i,i,a,e),new jM(t,o,r,n,i,a)}(t,r,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return function(t,e){var r=e.dtype,n=e.shape.slice(),i=t.getParameter(t.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>i||n[1]<0||n[1]>i)throw new Error("gl-texture2d: Invalid texture size");var a=UM(n,e.stride.slice()),o=0;"float32"===r?o=t.FLOAT:"float64"===r?(o=t.FLOAT,a=!1,r="float32"):"uint8"===r?o=t.UNSIGNED_BYTE:(o=t.UNSIGNED_BYTE,a=!1,r="uint8");var s,l,u=0;if(2===n.length)u=t.LUMINANCE,n=[n[0],n[1],1],e=Ip(e.data,n,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])u=t.ALPHA;else if(2===n[2])u=t.LUMINANCE_ALPHA;else if(3===n[2])u=t.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");u=t.RGBA}}o!==t.FLOAT||t.getExtension("OES_texture_float")||(o=t.UNSIGNED_BYTE,a=!1);var c=e.size;if(a)s=0===e.offset&&e.data.length===c?e.data:e.data.subarray(e.offset,e.offset+c);else{var h=[n[2],n[2]*n[0],1];l=Og.malloc(c,r);var f=Ip(l,n,h,0);"float32"!==r&&"float64"!==r||o!==t.UNSIGNED_BYTE?vp.assign(f,e):zM(f,e),s=l.subarray(0,c)}var d=VM(t);t.texImage2D(t.TEXTURE_2D,0,u,n[0],n[1],0,u,o,s),a||Og.free(l);return new jM(t,d,n[0],n[1],u,o)}(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")},OM=null,IM=null,NM=null;function DM(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var zM=function(t,e){vp.muls(t,e,255)};function FM(t,e,r){var n=t.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function jM(t,e,r,n,i,a){this.gl=t,this.handle=e,this.format=i,this.type=a,this._shape=[r,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(t){return o.wrapS=t}},{get:function(){return o._wrapT},set:function(t){return o.wrapT=t}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(t){return o.width=t}},{get:function(){return o._shape[1]},set:function(t){return o.height=t}}]),this._shapeVector=l}var BM=jM.prototype;function UM(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function VM(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function HM(t,e,r,n,i){var a=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=VM(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,r,0,n,i,null),new jM(t,o,e,r,n,i)}Object.defineProperties(BM,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&OM.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),IM.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&OM.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),IM.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),NM.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),NM.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(NM.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return FM(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return FM(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,FM(this,this._shape[0],t),t}}}),BM.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},BM.dispose=function(){this.gl.deleteTexture(this.handle)},BM.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},BM.setPixels=function(t,e,r,n){var i=this.gl;this.bind(),Array.isArray(e)?(n=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),n=n||0;var a=DM(t)?t:t.raw;if(a){this._mipLevels.indexOf(n)<0?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,a),this._mipLevels.push(n)):i.texSubImage2D(i.TEXTURE_2D,n,e,r,this.format,this.type,a)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>n||r+t.shape[0]>this._shape[0]>>>n||e<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,r,n,i,a,o,s){var l=s.dtype,u=s.shape.slice();if(u.length<2||u.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,h=0,f=UM(u,s.stride.slice());"float32"===l?c=t.FLOAT:"float64"===l?(c=t.FLOAT,f=!1,l="float32"):"uint8"===l?c=t.UNSIGNED_BYTE:(c=t.UNSIGNED_BYTE,f=!1,l="uint8");if(2===u.length)h=t.LUMINANCE,u=[u[0],u[1],1],s=Ip(s.data,u,[s.stride[0],s.stride[1],1],s.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])h=t.ALPHA;else if(2===u[2])h=t.LUMINANCE_ALPHA;else if(3===u[2])h=t.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");h=t.RGBA}u[2]}h!==t.LUMINANCE&&h!==t.ALPHA||i!==t.LUMINANCE&&i!==t.ALPHA||(h=i);if(h!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var d=s.size,p=o.indexOf(n)<0;p&&o.push(n);if(c===a&&f)0===s.offset&&s.data.length===d?p?t.texImage2D(t.TEXTURE_2D,n,i,u[0],u[1],0,i,a,s.data):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],i,a,s.data):p?t.texImage2D(t.TEXTURE_2D,n,i,u[0],u[1],0,i,a,s.data.subarray(s.offset,s.offset+d)):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],i,a,s.data.subarray(s.offset,s.offset+d));else{var g;g=a===t.FLOAT?Og.mallocFloat32(d):Og.mallocUint8(d);var v=Ip(g,u,[u[2],u[2]*u[0],1]);c===t.FLOAT&&a===t.UNSIGNED_BYTE?zM(v,s):vp.assign(v,s),p?t.texImage2D(t.TEXTURE_2D,n,i,u[0],u[1],0,i,a,g.subarray(0,d)):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],i,a,g.subarray(0,d)),a===t.FLOAT?Og.freeFloat32(g):Og.freeUint8(g)}}(i,e,r,n,this.format,this.type,this._mipLevels,t)}};var qM,GM,XM,WM,YM=function(t,e,r,n){qM||(qM=t.FRAMEBUFFER_UNSUPPORTED,GM=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,XM=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,WM=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var i=t.getExtension("WEBGL_draw_buffers");!ZM&&i&&function(t,e){var r=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);ZM=new Array(r+1);for(var n=0;n<=r;++n){for(var i=new Array(r),a=0;a<n;++a)i[a]=t.COLOR_ATTACHMENT0+a;for(var a=n;a<r;++a)i[a]=t.NONE;ZM[n]=i}}(t,i);Array.isArray(e)&&(n=r,r=0|e[1],e=0|e[0]);if("number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var a=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>a||r<0||r>a)throw new Error("gl-fbo: Parameters are too large for FBO");var o=1;if("color"in(n=n||{})){if((o=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(o>1){if(!i)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(o>t.getParameter(i.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+o+" draw buffers")}}var s=t.UNSIGNED_BYTE,l=t.getExtension("OES_texture_float");if(n.float&&o>0){if(!l)throw new Error("gl-fbo: Context does not support floating point textures");s=t.FLOAT}else n.preferFloat&&o>0&&l&&(s=t.FLOAT);var u=!0;"depth"in n&&(u=!!n.depth);var c=!1;"stencil"in n&&(c=!!n.stencil);return new eA(t,e,r,s,o,u,c,i)},ZM=null;function QM(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function KM(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function $M(t){switch(t){case qM:throw new Error("gl-fbo: Framebuffer unsupported");case GM:throw new Error("gl-fbo: Framebuffer incomplete attachment");case XM:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case WM:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function JM(t,e,r,n,i,a){if(!n)return null;var o=RM(t,e,r,i,n);return o.magFilter=t.NEAREST,o.minFilter=t.NEAREST,o.mipSamples=1,o.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,a,t.TEXTURE_2D,o.handle,0),o}function tA(t,e,r,n,i){var a=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorage(t.RENDERBUFFER,n,e,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,a),a}function eA(t,e,r,n,i,a,o,s){this.gl=t,this._shape=[0|e,0|r],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var l=0;l<i;++l)this.color[l]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=a,this._useStencil=o;var u=this,c=[0|e,0|r];Object.defineProperties(c,{0:{get:function(){return u._shape[0]},set:function(t){return u.width=t}},1:{get:function(){return u._shape[1]},set:function(t){return u.height=t}}}),this._shapeVector=c,function(t){var e=QM(t.gl),r=t.gl,n=t.handle=r.createFramebuffer(),i=t._shape[0],a=t._shape[1],o=t.color.length,s=t._ext,l=t._useStencil,u=t._useDepth,c=t._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var h=0;h<o;++h)t.color[h]=JM(r,i,a,c,r.RGBA,r.COLOR_ATTACHMENT0+h);0===o?(t._color_rb=tA(r,i,a,r.RGBA4,r.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(ZM[0])):o>1&&s.drawBuffersWEBGL(ZM[o]);var f=r.getExtension("WEBGL_depth_texture");f?l?t.depth=JM(r,i,a,f.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):u&&(t.depth=JM(r,i,a,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):u&&l?t._depth_rb=tA(r,i,a,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):u?t._depth_rb=tA(r,i,a,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):l&&(t._depth_rb=tA(r,i,a,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var d=r.checkFramebufferStatus(r.FRAMEBUFFER);if(d!==r.FRAMEBUFFER_COMPLETE){for(t._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(r.deleteRenderbuffer(t._depth_rb),t._depth_rb=null),h=0;h<t.color.length;++h)t.color[h].dispose(),t.color[h]=null;t._color_rb&&(r.deleteRenderbuffer(t._color_rb),t._color_rb=null),KM(r,e),$M(d)}KM(r,e)}(this)}var rA=eA.prototype;function nA(t,e,r){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==r){var n=t.gl,i=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=r;for(var a=QM(n),o=0;o<t.color.length;++o)t.color[o].shape=t._shape;t._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,t._shape[0],t._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,t.handle);var s=n.checkFramebufferStatus(n.FRAMEBUFFER);s!==n.FRAMEBUFFER_COMPLETE&&(t.dispose(),KM(n,a),$M(s)),KM(n,a)}}Object.defineProperties(rA,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],r=0|t[1];return nA(this,e,r),[e,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return nA(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,nA(this,this._shape[0],t),t},enumerable:!1}}),rA.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},rA.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};var iA=function(t,e,r,n,i){var a=1/Math.tan(e/2),o=1/(n-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*o,t[15]=0,t};var aA=im(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),oA=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]),sA=function(t){return nm(t,aA,oA,null,[{name:"position",type:"vec2"}])},lA=gp,uA=function(t,e){var r=YM(t,e),n=Og.mallocUint8(e[0]*e[1]*4);return new fA(t,r,n)},cA=Np.nextPow2,hA=lA({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_52_arg0_<255||_inline_52_arg1_<255||_inline_52_arg2_<255||_inline_52_arg3_<255){var _inline_52_l=_inline_52_arg4_-_inline_52_arg6_[0],_inline_52_a=_inline_52_arg5_-_inline_52_arg6_[1],_inline_52_f=_inline_52_l*_inline_52_l+_inline_52_a*_inline_52_a;_inline_52_f<this_closestD2&&(this_closestD2=_inline_52_f,this_closestX=_inline_52_arg6_[0],this_closestY=_inline_52_arg6_[1])}}",args:[{name:"_inline_52_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_52_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_52_a","_inline_52_f","_inline_52_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});function fA(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var dA=fA.prototype;Object.defineProperty(dA,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){Og.free(this.buffer);for(var n=this.buffer=Og.mallocUint8(cA(r*e*4)),i=0;i<r*e*4;++i)n[i]=255}return t}}}),dA.begin=function(){var t=this.gl;this.shape;t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},dA.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},dA.query=function(t,e,r){if(!this.gl)return null;var n=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof r&&(r=1);var i=0|Math.min(Math.max(t-r,0),n[0]),a=0|Math.min(Math.max(t+r,0),n[0]),o=0|Math.min(Math.max(e-r,0),n[1]),s=0|Math.min(Math.max(e+r,0),n[1]);if(a<=i||s<=o)return null;var l=[a-i,s-o],u=Ip(this.buffer,[l[0],l[1],4],[4,4*n[0],1],4*(i+n[0]*o)),c=hA(u.hi(l[0],l[1],1),r,r),h=c[0],f=c[1];return h<0||Math.pow(this.radius,2)<c[2]?null:new function(t,e,r,n,i){this.coord=[t,e],this.id=r,this.value=n,this.distance=i}(h+i|0,f+o|0,u.get(h,f,0),[u.get(h,f,1),u.get(h,f,2),u.get(h,f,3)],Math.sqrt(c[2]))},dA.dispose=function(){this.gl&&(this.fbo.dispose(),Og.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};var pA=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),gA=im(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]),vA=function(t){return nm(t,pA,gA,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])},mA=function(t,e){var r=[];function n(t,e,n,i,a,o){var s=[t,e,n,0,0,0,1];s[i+3]=1,s[i]=a,r.push.apply(r,s),s[6]=-1,r.push.apply(r,s),s[i]=o,r.push.apply(r,s),r.push.apply(r,s),s[6]=1,r.push.apply(r,s),s[i]=a,r.push.apply(r,s)}n(0,0,0,0,0,1),n(0,0,0,1,0,1),n(0,0,0,2,0,1),n(1,0,0,1,-1,1),n(1,0,0,2,-1,1),n(0,1,0,0,-1,1),n(0,1,0,2,-1,1),n(0,0,1,0,-1,1),n(0,0,1,1,-1,1);var i=jg(t,r),a=Xg(t,[{type:t.FLOAT,buffer:i,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:i,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:i,size:1,offset:24,stride:28}]),o=vA(t);o.attributes.position.location=0,o.attributes.color.location=1,o.attributes.weight.location=2;var s=new bA(t,i,a,o);return s.update(e),s},yA=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function bA(t,e,r,n){this.gl=t,this.buffer=e,this.vao=r,this.shader=n,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var xA=bA.prototype,_A=[0,0,0],wA=[0,0,0],MA=[0,0];xA.isTransparent=function(){return!1},xA.drawTransparent=function(t){},xA.draw=function(t){var e=this.gl,r=this.vao,n=this.shader;r.bind(),n.bind();var i,a=t.model||yA,o=t.view||yA,s=t.projection||yA;this.axes&&(i=this.axes.lastCubeProps.axis);for(var l=_A,u=wA,c=0;c<3;++c)i&&i[c]<0?(l[c]=this.bounds[0][c],u[c]=this.bounds[1][c]):(l[c]=this.bounds[1][c],u[c]=this.bounds[0][c]);MA[0]=e.drawingBufferWidth,MA[1]=e.drawingBufferHeight,n.uniforms.model=a,n.uniforms.view=o,n.uniforms.projection=s,n.uniforms.coordinates=[this.position,l,u],n.uniforms.colors=this.colors,n.uniforms.screenShape=MA;for(c=0;c<3;++c)n.uniforms.lineWidth=this.lineWidth[c]*this.pixelRatio,this.enabled[c]&&(r.draw(e.TRIANGLES,6,6*c),this.drawSides[c]&&r.draw(e.TRIANGLES,12,18+12*c));r.unbind()},xA.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},xA.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};var AA=function(t){var e=!1,r=((t=t||{}).pixelRatio||parseFloat(window.devicePixelRatio),t.canvas);if(!r)if(r=document.createElement("canvas"),t.container){var n=t.container;n.appendChild(r)}else document.body.appendChild(r);var i=t.gl;i||(i=function(t,e){var r=null;try{(r=t.getContext("webgl",e))||(r=t.getContext("experimental-webgl",e))}catch(t){return null}return r}(r,t.glOptions||{premultipliedAlpha:!0,antialias:!0}));if(!i)throw new Error("webgl not supported");var a=t.bounds||[[-10,-10,-10],[10,10,10]],o=new function(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null},s=YM(i,[i.drawingBufferWidth,i.drawingBufferHeight],{preferFloat:!TA}),l=sA(i),u=t.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},c=t.axes||{},h=lM(i,c);h.enable=!c.disable;var f=t.spikes||{},d=mA(i,f),p=[],g=[],v=[],m=[],y=!0,b=!0,x=new Array(16),_=new Array(16),w={view:null,projection:x,model:_},b=!0,M=[i.drawingBufferWidth,i.drawingBufferHeight],A={gl:i,contextLost:!1,pixelRatio:t.pixelRatio||parseFloat(window.devicePixelRatio),canvas:r,selection:o,camera:up(r,u),axes:h,axesPixels:null,spikes:d,bounds:a,objects:p,shape:M,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:EA(t.autoResize),autoBounds:EA(t.autoBounds),autoScale:!!t.autoScale,autoCenter:EA(t.autoCenter),clipToBounds:EA(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:w,oncontextloss:null,mouseListener:null},T=[i.drawingBufferWidth/A.pixelRatio|0,i.drawingBufferHeight/A.pixelRatio|0];function k(){if(!e&&A.autoResize){var t=r.parentNode,n=1,i=1;t&&t!==document.body?(n=t.clientWidth,i=t.clientHeight):(n=window.innerWidth,i=window.innerHeight);var a=0|Math.ceil(n*A.pixelRatio),o=0|Math.ceil(i*A.pixelRatio);if(a!==r.width||o!==r.height){r.width=a,r.height=o;var s=r.style;s.position=s.position||"absolute",s.left="0px",s.top="0px",s.width=n+"px",s.height=i+"px",y=!0}}}A.autoResize&&k();function E(){for(var t=p.length,e=m.length,r=0;r<e;++r)v[r]=0;t:for(var r=0;r<t;++r){var n=p[r],a=n.pickSlots;if(a){for(var o=0;o<e;++o)if(v[o]+a<255){g[r]=o,n.setPickBase(v[o]+1),v[o]+=a;continue t}var s=uA(i,M);g[r]=e,m.push(s),v.push(a),n.setPickBase(1),e+=1}else g[r]=-1}for(;e>0&&0===v[e-1];)v.pop(),m.pop().dispose()}window.addEventListener("resize",k),A.update=function(t){e||(t=t||{},y=!0,b=!0)},A.add=function(t){e||(t.axes=h,p.push(t),g.push(-1),y=!0,b=!0,E())},A.remove=function(t){if(!e){var r=p.indexOf(t);r<0||(p.splice(r,1),g.pop(),y=!0,b=!0,E())}},A.dispose=function(){if(!e&&(e=!0,window.removeEventListener("resize",k),r.removeEventListener("webglcontextlost",S),A.mouseListener.enabled=!1,!A.contextLost)){h.dispose(),d.dispose();for(var t=0;t<p.length;++t)p[t].dispose();s.dispose();for(var t=0;t<m.length;++t)m[t].dispose();l.dispose(),i=null,h=null,d=null,p=[]}};var L=!1,C=0;function S(){if(A.contextLost)return!0;i.isContextLost()&&(A.contextLost=!0,A.mouseListener.enabled=!1,A.selection.object=null,A.oncontextloss&&A.oncontextloss())}A.mouseListener=ep(r,function(t,r,n){if(!e){var i=m.length,a=p.length,s=o.object;o.distance=1/0,o.mouse[0]=r,o.mouse[1]=n,o.object=null,o.screen=null,o.dataCoordinate=o.dataPosition=null;var l=!1;if(t&&C)L=!0;else{L&&(b=!0),L=!1;for(var u=0;u<i;++u){var c=m[u].query(r,T[1]-n-1,A.pickRadius);if(c){if(c.distance>o.distance)continue;for(var h=0;h<a;++h){var f=p[h];if(g[h]===u){var d=f.pick(c);d&&(o.buttons=t,o.screen=c.coord,o.distance=c.distance,o.object=f,o.index=d.distance,o.dataPosition=d.position,o.dataCoordinate=d.dataCoordinate,o.data=d,l=!0)}}}}}s&&s!==o.object&&(s.highlight&&s.highlight(null),y=!0),o.object&&(o.object.highlight&&o.object.highlight(o.data),y=!0),(l=l||o.object!==s)&&A.onselect&&A.onselect(o),1&t&&!(1&C)&&A.onclick&&A.onclick(o),C=t}}),r.addEventListener("webglcontextlost",S);var P=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=[P[0].slice(),P[1].slice()];function O(){if(!S()){k();var t=A.camera.tick();w.view=A.camera.matrix,y=y||t,b=b||t,h.pixelRatio=A.pixelRatio,d.pixelRatio=A.pixelRatio;var e=p.length,r=P[0],n=P[1];r[0]=r[1]=r[2]=1/0,n[0]=n[1]=n[2]=-1/0;for(var a=0;a<e;++a){var u=p[a];u.pixelRatio=A.pixelRatio,u.axes=A.axes,y=y||!!u.dirty,b=b||!!u.dirty;var c=u.bounds;if(c)for(var f=c[0],v=c[1],E=0;E<3;++E)r[E]=Math.min(r[E],f[E]),n[E]=Math.max(n[E],v[E])}var L=A.bounds;if(A.autoBounds)for(var E=0;E<3;++E){if(n[E]<r[E])r[E]=-1,n[E]=1;else{r[E]===n[E]&&(r[E]-=1,n[E]+=1);var C=.05*(n[E]-r[E]);r[E]=r[E]-C,n[E]=n[E]+C}L[0][E]=r[E],L[1][E]=n[E]}for(var O=!1,E=0;E<3;++E)O=O||R[0][E]!==L[0][E]||R[1][E]!==L[1][E],R[0][E]=L[0][E],R[1][E]=L[1][E];if(b=b||O,y=y||O){if(O){for(var I=[0,0,0],a=0;a<3;++a)I[a]=kA((L[1][a]-L[0][a])/10);h.autoTicks?h.update({bounds:L,tickSpacing:I}):h.update({bounds:L})}var N=i.drawingBufferWidth,D=i.drawingBufferHeight;M[0]=N,M[1]=D,T[0]=0|Math.max(N/A.pixelRatio,1),T[1]=0|Math.max(D/A.pixelRatio,1),iA(x,A.fovy,N/D,A.zNear,A.zFar);for(var a=0;a<16;++a)_[a]=0;_[15]=1;for(var z=0,a=0;a<3;++a)z=Math.max(z,L[1][a]-L[0][a]);for(var a=0;a<3;++a)A.autoScale?_[5*a]=A.aspect[a]/(L[1][a]-L[0][a]):_[5*a]=1/z,A.autoCenter&&(_[12+a]=.5*-_[5*a]*(L[0][a]+L[1][a]));for(var a=0;a<e;++a){var u=p[a];u.axesBounds=L,A.clipToBounds&&(u.clipBounds=L)}o.object&&(A.snapToData?d.position=o.dataCoordinate:d.position=o.dataPosition,d.bounds=L),b&&(b=!1,function(){if(S())return;i.colorMask(!0,!0,!0,!0),i.depthMask(!0),i.disable(i.BLEND),i.enable(i.DEPTH_TEST);for(var t=p.length,e=m.length,r=0;r<e;++r){var n=m[r];n.shape=T,n.begin();for(var a=0;a<t;++a)if(g[a]===r){var o=p[a];o.drawPick&&(o.pixelRatio=1,o.drawPick(w))}n.end()}}()),A.axesPixels=MM(A.axes,w,N,D),A.onrender&&A.onrender(),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,N,D);var F=A.clearColor;i.clearColor(F[0],F[1],F[2],F[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.depthMask(!0),i.colorMask(!0,!0,!0,!0),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL),i.disable(i.BLEND),i.disable(i.CULL_FACE);var j=!1;h.enable&&(j=j||h.isTransparent(),h.draw(w)),d.axes=h,o.object&&d.draw(w),i.disable(i.CULL_FACE);for(var a=0;a<e;++a){var u=p[a];u.axes=h,u.pixelRatio=A.pixelRatio,u.isOpaque&&u.isOpaque()&&u.draw(w),u.isTransparent&&u.isTransparent()&&(j=!0)}if(j){s.shape=M,s.bind(),i.clear(i.DEPTH_BUFFER_BIT),i.colorMask(!1,!1,!1,!1),i.depthMask(!0),i.depthFunc(i.LESS),h.enable&&h.isTransparent()&&h.drawTransparent(w);for(var a=0;a<e;++a){var u=p[a];u.isOpaque&&u.isOpaque()&&u.draw(w)}i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.colorMask(!0,!0,!0,!0),i.depthMask(!1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),h.isTransparent()&&h.drawTransparent(w);for(var a=0;a<e;++a){var u=p[a];u.isTransparent&&u.isTransparent()&&u.drawTransparent(w)}i.bindFramebuffer(i.FRAMEBUFFER,null),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.disable(i.DEPTH_TEST),l.bind(),s.color[0].bind(0),l.uniforms.accumBuffer=0,Zg(i),i.disable(i.BLEND)}y=!1;for(var a=0;a<e;++a)p[a].dirty=!1}}}return function t(){e||A.contextLost||(requestAnimationFrame(t),O())}(),A.redraw=function(){e||(y=!0,O())},A},TA=function(t){t||"undefined"==typeof navigator||(t=navigator.userAgent);t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]);return"string"==typeof t&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))}();function kA(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));if(e<0){var r=Math.round(Math.pow(10,-e));return Math.ceil(t*r)/r}if(e>0){r=Math.round(Math.pow(10,e));return Math.ceil(t/r)*r}return Math.ceil(t)}function EA(t){return"boolean"!=typeof t||t}var LA=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var r=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(r.width=e.width);"number"==typeof e.height&&(r.height=e.height);var n,i=e;try{var a=[t];0===t.indexOf("webgl")&&a.push("experimental-"+t);for(var o=0;o<a.length;o++)if(n=r.getContext(a[o],i))return n}catch(t){n=null}return n||null};var CA=function(t){return LA("webgl",t)},SA=function(){},PA=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=SA);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var r=document.createElement("div");return r.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",r.style.cursor="pointer",r.style.fontSize="24px",r.style.color=Ne.defaults[0],t.container.appendChild(r),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("http://get.webgl.org")},!1},RA=function(t,e,r){return e<r?t<e?e:t>r?r:t:t<r?r:t>e?e:t};var OA={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},IA=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},NA=Object.prototype.toString,DA=function(t){var e;return"[object Object]"===NA.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))},zA={};(function(t){"use strict";zA=function(r){var n,i,a=[],o=1;if("string"==typeof r)if(OA[r])a=OA[r].slice(),i="rgb";else if("transparent"===r)o=0,i="rgb",a=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var s=r.slice(1),l=s.length,u=l<=4;o=1,u?(a=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===l&&(o=parseInt(s[3]+s[3],16)/255)):(a=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===l&&(o=parseInt(s[6]+s[7],16)/255)),a[0]||(a[0]=0),a[1]||(a[1]=0),a[2]||(a[2]=0),i="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var c=n[1],s=c.replace(/a$/,"");i=s;var l="cmyk"===s?4:"gray"===s?1:3;a=n[2].trim().split(/\s*,\s*/).map(function(t,r){if(/%$/.test(t))return r===l?parseFloat(t)/100:"rgb"===s?255*parseFloat(t)/100:parseFloat(t);if("h"===s[r]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==e[t])return e[t]}return parseFloat(t)}),c===s&&a.push(1),o=void 0===a[l]?1:a[l],a=a.slice(0,l)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(a=r.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),i=r.match(/([a-z])/gi).join("").toLowerCase());else if("number"==typeof r)i="rgb",a=[r>>>16,(65280&r)>>>8,255&r];else if(DA(r)){var h=IA(r.r,r.red,r.R,null);null!==h?(i="rgb",a=[h,IA(r.g,r.green,r.G),IA(r.b,r.blue,r.B)]):(i="hsl",a=[IA(r.h,r.hue,r.H),IA(r.s,r.saturation,r.S),IA(r.l,r.lightness,r.L,r.b,r.brightness)]),o=IA(r.a,r.alpha,r.opacity,1),null!=r.opacity&&(o/=100)}else(Array.isArray(r)||t.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(a=[r[0],r[1],r[2]],i="rgb",o=4===r.length?r[3]:1);return{space:i,values:a,alpha:o}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var FA=function(t){var e,r,n,i,a,o=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[a=255*l,a,a];e=2*l-(r=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(n=o+1/3*-(u-1))<0?n++:n>1&&n--,a=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,i[u]=255*a;return i},jA=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var r=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}(e),n=new r(4);if(t instanceof r)return Array.isArray(t)?t.slice():(n.set(t),n);var i="uint8"!==e&&"uint8_clamped"!==e;return t instanceof Uint8Array||t instanceof Uint8ClampedArray?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:255,i&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(t.length&&"string"!=typeof t||((t=function(t){var e;if("string"!=typeof t)throw Error("Argument should be a string");var r=zA(t);return r.space?((e=Array(3))[0]=RA(r.values[0],0,255),e[1]=RA(r.values[1],0,255),e[2]=RA(r.values[2],0,255),"h"===r.space[0]&&(e=FA(e)),e.push(RA(r.alpha,0,1)),e):[]}(t))[0]/=255,t[1]/=255,t[2]/=255),i?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:1):(n[0]=RA(Math.round(255*t[0]),0,255),n[1]=RA(Math.round(255*t[1]),0,255),n[2]=RA(Math.round(255*t[2]),0,255),n[3]=null==t[3]?255:RA(Math.floor(255*t[3]),0,255)),n)};var BA=function(t){return t?jA(t):[0,0,0,1]},UA=function(t,e){t=t||document.body,e=e||{};var r=[.01,1/0];"distanceLimits"in e&&(r[0]=e.distanceLimits[0],r[1]=e.distanceLimits[1]);"zoomMin"in e&&(r[0]=e.zoomMin);"zoomMax"in e&&(r[1]=e.zoomMax);var n=Qd({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:r}),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0,o=t.clientWidth,s=t.clientHeight,l={keyBindingMode:"rotate",view:n,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:n.modes,tick:function(){var e=lp(),r=this.delay,l=e-2*r;n.idle(e-r),n.recalcMatrix(l),n.flush(e-(100+2*r));for(var u=!0,c=n.computedMatrix,h=0;h<16;++h)u=u&&i[h]===c[h],i[h]=c[h];var f=t.clientWidth===o&&t.clientHeight===s;return o=t.clientWidth,s=t.clientHeight,u?!f:(a=Math.exp(n.computedRadius[0]),!0)},lookAt:function(t,e,r){n.lookAt(n.lastT(),t,e,r)},rotate:function(t,e,r){n.rotate(n.lastT(),t,e,r)},pan:function(t,e,r){n.pan(n.lastT(),t,e,r)},translate:function(t,e,r){n.translate(n.lastT(),t,e,r)}};Object.defineProperties(l,{matrix:{get:function(){return n.computedMatrix},set:function(t){return n.setMatrix(n.lastT(),t),n.computedMatrix},enumerable:!0},mode:{get:function(){return n.getMode()},set:function(t){var e=n.computedUp.slice(),r=n.computedEye.slice(),i=n.computedCenter.slice();if(n.setMode(t),"turntable"===t){var a=lp();n._active.lookAt(a,r,i,e),n._active.lookAt(a+500,r,i,[0,0,1]),n._active.flush(a)}return n.getMode()},enumerable:!0},center:{get:function(){return n.computedCenter},set:function(t){return n.lookAt(n.lastT(),null,t),n.computedCenter},enumerable:!0},eye:{get:function(){return n.computedEye},set:function(t){return n.lookAt(n.lastT(),t),n.computedEye},enumerable:!0},up:{get:function(){return n.computedUp},set:function(t){return n.lookAt(n.lastT(),null,null,t),n.computedUp},enumerable:!0},distance:{get:function(){return a},set:function(t){return n.setDistance(n.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return n.getDistanceLimits(r)},set:function(t){return n.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",function(t){return t.preventDefault(),!1});var u=0,c=0,h={shift:!1,control:!1,alt:!1,meta:!1};function f(e,r,i,o){var s=l.keyBindingMode;if(!1!==s){var f="rotate"===s,d="pan"===s,p="zoom"===s,g=!!o.control,v=!!o.alt,m=!!o.shift,y=!!(1&e),b=!!(2&e),x=!!(4&e),_=1/t.clientHeight,w=_*(r-u),M=_*(i-c),A=l.flipX?1:-1,T=l.flipY?1:-1,k=lp(),E=Math.PI*l.rotateSpeed;if((f&&y&&!g&&!v&&!m||y&&!g&&!v&&m)&&n.rotate(k,A*E*w,-T*E*M,0),(d&&y&&!g&&!v&&!m||b||y&&g&&!v&&!m)&&n.pan(k,-l.translateSpeed*w*a,l.translateSpeed*M*a,0),p&&y&&!g&&!v&&!m||x||y&&!g&&v&&!m){var L=-l.zoomSpeed*M/window.innerHeight*(k-n.lastT())*100;n.pan(k,0,0,a*(Math.exp(L)-1))}return u=r,c=i,h=o,!0}}return l.mouseListener=ep(t,f),t.addEventListener("touchstart",function(e){var r=qe(e.changedTouches[0],t);f(0,r[0],r[1],h),f(1,r[0],r[1],h),e.preventDefault()},!!Ve&&{passive:!1}),t.addEventListener("touchmove",function(e){var r=qe(e.changedTouches[0],t);f(1,r[0],r[1],h),e.preventDefault()},!!Ve&&{passive:!1}),t.addEventListener("touchend",function(t){f(0,u,c,h),t.preventDefault()},!!Ve&&{passive:!1}),l.wheelListener=sp(t,function(t,e){if(!1!==l.keyBindingMode){var r=l.flipX?1:-1,i=l.flipY?1:-1,o=lp();if(Math.abs(t)>Math.abs(e))n.rotate(o,0,0,-t*r*Math.PI*l.rotateSpeed/window.innerWidth);else{var s=-l.zoomSpeed*i*e/window.innerHeight*(o-n.lastT())/20;n.pan(o,0,0,a*(Math.exp(s)-1))}}},!0),l};var VA=function(t){return t.split("").map(function(t){return t in HA?HA[t]:""}).join("")},HA={" ":" ",0:"\u2070",1:"\xb9",2:"\xb2",3:"\xb3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","+":"\u207a","-":"\u207b",a:"\u1d43",b:"\u1d47",c:"\u1d9c",d:"\u1d48",e:"\u1d49",f:"\u1da0",g:"\u1d4d",h:"\u02b0",i:"\u2071",j:"\u02b2",k:"\u1d4f",l:"\u02e1",m:"\u1d50",n:"\u207f",o:"\u1d52",p:"\u1d56",r:"\u02b3",s:"\u02e2",t:"\u1d57",u:"\u1d58",v:"\u1d5b",w:"\u02b7",x:"\u02e3",y:"\u02b8",z:"\u1dbb"};var qA=function(t){return""+function(t){for(var e=zr.entityToUnicode,r=0;(r=t.indexOf("&",r))>=0;){var n=t.indexOf(";",r);if(n<r)r+=1;else{var i=e[t.slice(r+1,n)];t=i?t.slice(0,r)+i+t.slice(n+1):t.slice(0,r)+t.slice(n+1)}}return t}(function(t){return t.replace(/\<.*\>/g,"")}(function(t){for(var e=0;(e=t.indexOf("<sup>",e))>=0;){var r=t.indexOf("</sup>",e);if(r<e)break;t=t.slice(0,e)+VA(t.slice(e+5,r))+t.slice(r+6)}return t}(t.replace(/\<br\>/g,"\n"))))},GA=["xaxis","yaxis","zaxis"];function XA(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}XA.prototype.merge=function(t){for(var e=0;e<3;++e){var r=t[GA[e]];r.visible?(this.labels[e]=qA(r.title),"titlefont"in r&&(r.titlefont.color&&(this.labelColor[e]=BA(r.titlefont.color)),r.titlefont.family&&(this.labelFont[e]=r.titlefont.family),r.titlefont.size&&(this.labelSize[e]=r.titlefont.size)),"showline"in r&&(this.lineEnable[e]=r.showline),"linecolor"in r&&(this.lineColor[e]=BA(r.linecolor)),"linewidth"in r&&(this.lineWidth[e]=r.linewidth),"showgrid"in r&&(this.gridEnable[e]=r.showgrid),"gridcolor"in r&&(this.gridColor[e]=BA(r.gridcolor)),"gridwidth"in r&&(this.gridWidth[e]=r.gridwidth),"log"===r.type?this.zeroEnable[e]=!1:"zeroline"in r&&(this.zeroEnable[e]=r.zeroline),"zerolinecolor"in r&&(this.zeroLineColor[e]=BA(r.zerolinecolor)),"zerolinewidth"in r&&(this.zeroLineWidth[e]=r.zerolinewidth),"ticks"in r&&r.ticks?this.lineTickEnable[e]=!0:this.lineTickEnable[e]=!1,"ticklen"in r&&(this.lineTickLength[e]=this._defaultLineTickLength[e]=r.ticklen),"tickcolor"in r&&(this.lineTickColor[e]=BA(r.tickcolor)),"tickwidth"in r&&(this.lineTickWidth[e]=r.tickwidth),"tickangle"in r&&(this.tickAngle[e]="auto"===r.tickangle?0:Math.PI*-r.tickangle/180),"showticklabels"in r&&(this.tickEnable[e]=r.showticklabels),"tickfont"in r&&(r.tickfont.color&&(this.tickColor[e]=BA(r.tickfont.color)),r.tickfont.family&&(this.tickFont[e]=r.tickfont.family),r.tickfont.size&&(this.tickSize[e]=r.tickfont.size)),"mirror"in r?-1!==["ticks","all","allticks"].indexOf(r.mirror)?(this.lineTickMirror[e]=!0,this.lineMirror[e]=!0):!0===r.mirror?(this.lineTickMirror[e]=!1,this.lineMirror[e]=!0):(this.lineTickMirror[e]=!1,this.lineMirror[e]=!1):this.lineMirror[e]=!1,"showbackground"in r&&!1!==r.showbackground?(this.backgroundEnable[e]=!0,this.backgroundColor[e]=BA(r.backgroundcolor)):this.backgroundEnable[e]=!1):(this.tickEnable[e]=!1,this.labelEnable[e]=!1,this.lineEnable[e]=!1,this.lineTickEnable[e]=!1,this.gridEnable[e]=!1,this.zeroEnable[e]=!1,this.backgroundEnable[e]=!1)}};var WA=function(t){var e=new XA;return e.merge(t),e},YA=["xaxis","yaxis","zaxis"];function ZA(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}ZA.prototype.merge=function(t){for(var e=0;e<3;++e){var r=t[YA[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=BA(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}};var QA,KA,$A=function(t){var e=new ZA;return e.merge(t),e},JA=function(t){for(var e=t.axesOptions,r=t.glplot.axesPixels,n=t.fullSceneLayout,i=[[],[],[]],a=0;a<3;++a){var o=n[tT[a]];if(o._length=(r[a].hi-r[a].lo)*r[a].pixelsPerDataUnit/t.dataScale[a],Math.abs(o._length)===1/0)i[a]=[];else{o._input_range=o.range.slice(),o.range[0]=r[a].lo/t.dataScale[a],o.range[1]=r[a].hi/t.dataScale[a],o._m=1/(t.dataScale[a]*r[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var s=o.tickmode;if("auto"===o.tickmode){o.tickmode="linear";var l=o.nticks||re.constrain(o._length/40,4,9);Ki.autoTicks(o,Math.abs(o.range[1]-o.range[0])/l)}for(var u=Ki.calcTicks(o),c=0;c<u.length;++c)u[c].x=u[c].x*t.dataScale[a],u[c].text=qA(u[c].text);i[a]=u,o.tickmode=s}}e.ticks=i;for(var a=0;a<3;++a){eT[a]=.5*(t.glplot.bounds[0][a]+t.glplot.bounds[1][a]);for(var c=0;c<2;++c)e.bounds[c][a]=t.glplot.bounds[c][a]}t.contourLevels=function(t){for(var e=new Array(3),r=0;r<3;++r){for(var n=t[r],i=new Array(n.length),a=0;a<n.length;++a)i[a]=n[a].x;e[r]=i}return e}(i)},tT=["xaxis","yaxis","zaxis"],eT=[0,0,0];function rT(t,e,r,n){var i={canvas:r,gl:n,container:t.container,axes:t.axesOptions,spikes:t.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(t.staticMode){if(!(KA||(QA=document.createElement("canvas"),KA=CA({canvas:QA,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");i.pixelRatio=t.pixelRatio,i.gl=KA,i.canvas=QA}try{t.glplot=AA(i)}catch(e){PA(t)}var a=function(t){if(!1!==t.fullSceneLayout.dragmode){var e={};e[t.id+".camera"]=lT(t.camera),t.saveCamera(t.graphDiv.layout),t.graphDiv.emit("plotly_relayout",e)}};if(t.glplot.canvas.addEventListener("mouseup",a.bind(null,t)),t.glplot.canvas.addEventListener("wheel",a.bind(null,t),!!Ve&&{passive:!1}),t.staticMode||t.glplot.canvas.addEventListener("webglcontextlost",function(t){re.warn("Lost WebGL context."),t.preventDefault()}),!t.camera){var o=t.fullSceneLayout.camera;t.camera=UA(t.container,{center:[o.center.x,o.center.y,o.center.z],eye:[o.eye.x,o.eye.y,o.eye.z],up:[o.up.x,o.up.y,o.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return t.glplot.camera=t.camera,t.glplot.oncontextloss=function(){t.recoverContext()},t.glplot.onrender=function(t){var e,r=t.svgContainer,n=t.container.getBoundingClientRect(),i=n.width,a=n.height;r.setAttributeNS(null,"viewBox","0 0 "+i+" "+a),r.setAttributeNS(null,"width",i),r.setAttributeNS(null,"height",a),JA(t),t.glplot.axes.update(t.axesOptions);for(var o,s=Object.keys(t.traces),l=null,u=t.glplot.selection,c=0;c<s.length;++c)"skip"!==(e=t.traces[s[c]]).data.hoverinfo&&e.handlePick(u)&&(l=e),e.setContourLevels&&e.setContourLevels();function h(e,r){var n=t.fullSceneLayout[e];return Ki.tickText(n,n.d2l(r),"hover").text}if(null!==l){var f=co(t.glplot.cameraParams,u.dataCoordinate);e=l.data;var d=u.index,p=Xa.castHoverinfo(e,t.fullLayout,d),g=h("xaxis",u.traceCoordinate[0]),v=h("yaxis",u.traceCoordinate[1]),m=h("zaxis",u.traceCoordinate[2]);if("all"!==p){var y=p.split("+");-1===y.indexOf("x")&&(g=void 0),-1===y.indexOf("y")&&(v=void 0),-1===y.indexOf("z")&&(m=void 0),-1===y.indexOf("text")&&(u.textLabel=void 0),-1===y.indexOf("name")&&(l.name=void 0)}t.fullSceneLayout.hovermode&&Xa.loneHover({x:(.5+.5*f[0]/f[3])*i,y:(.5-.5*f[1]/f[3])*a,xLabel:g,yLabel:v,zLabel:m,text:u.textLabel,name:l.name,color:Xa.castHoverOption(e,d,"bgcolor")||l.color,borderColor:Xa.castHoverOption(e,d,"bordercolor"),fontFamily:Xa.castHoverOption(e,d,"font.family"),fontSize:Xa.castHoverOption(e,d,"font.size"),fontColor:Xa.castHoverOption(e,d,"font.color")},{container:r,gd:t.graphDiv});var b={x:u.traceCoordinate[0],y:u.traceCoordinate[1],z:u.traceCoordinate[2],data:e._input,fullData:e,curveNumber:e.index,pointNumber:d};Xa.appendArrayPointValue(b,e,d);var x={points:[b]};u.buttons&&u.distance<5?t.graphDiv.emit("plotly_click",x):t.graphDiv.emit("plotly_hover",x),o=x}else Xa.loneUnhover(r),t.graphDiv.emit("plotly_unhover",o);t.drawAnnotations(t)}.bind(null,t),t.traces={},!0}function nT(t,e){var r=document.createElement("div"),n=t.container;this.graphDiv=t.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",r.appendChild(i),this.svgContainer=i,r.id=t.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",n.appendChild(r),this.fullLayout=e,this.id=t.id||"scene",this.fullSceneLayout=e[this.id],this.plotArgs=[[],{},{}],this.axesOptions=WA(e[this.id]),this.spikeOptions=$A(e[this.id]),this.container=r,this.staticMode=!!t.staticPlot,this.pixelRatio=t.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=R.getComponentMethod("annotations3d","convert"),this.drawAnnotations=R.getComponentMethod("annotations3d","draw"),rT(this)}var iT=nT.prototype;iT.recoverContext=function(){var t=this,e=this.glplot.gl,r=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(function n(){e.isContextLost()?requestAnimationFrame(n):rT(t,t.fullLayout,r,e)?t.plot.apply(t,t.plotArgs):re.error("Catastrophic and unrecoverable WebGL error. Context lost.")})};var aT=["xaxis","yaxis","zaxis"];function oT(t,e,r,n,i,a){var o;if(!re.isArrayOrTypedArray(e))return i[0][n]=Math.min(i[0][n],0),void(i[1][n]=Math.max(i[1][n],r-1));for(var s=0;s<(r||e.length);++s)if(re.isArrayOrTypedArray(e[s]))for(var l=0;l<e[s].length;++l)o=t.d2l(e[s][l],0,a),!isNaN(o)&&isFinite(o)&&(i[0][n]=Math.min(i[0][n],o),i[1][n]=Math.max(i[1][n],o));else o=t.d2l(e[s],0,a),!isNaN(o)&&isFinite(o)&&(i[0][n]=Math.min(i[0][n],o),i[1][n]=Math.max(i[1][n],o))}function sT(t,e,r){var n=t.fullSceneLayout;oT(n.xaxis,e.x,e._xlength,0,r,e.xcalendar),oT(n.yaxis,e.y,e._ylength,1,r,e.ycalendar),oT(n.zaxis,e.z,e._zlength,2,r,e.zcalendar)}function lT(t){return{up:{x:t.up[0],y:t.up[1],z:t.up[2]},center:{x:t.center[0],y:t.center[1],z:t.center[2]},eye:{x:t.eye[0],y:t.eye[1],z:t.eye[2]}}}iT.plot=function(t,e,r){if(this.plotArgs=[t,e,r],!this.glplot.contextLost){var n,i,a,o,s,l,u=e[this.id],c=r[this.id];u.bgcolor?this.glplot.clearColor=BA(u.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullLayout=e,this.fullSceneLayout=u,this.glplotLayout=u,this.axesOptions.merge(u),this.spikeOptions.merge(u),this.setCamera(u.camera),this.updateFx(u.dragmode,u.hovermode),this.glplot.update({}),this.setConvert(s),t?Array.isArray(t)||(t=[t]):t=[];var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(a=0;a<t.length;++a)!0===(n=t[a]).visible&&sT(this,n,h);var f=[1,1,1];for(o=0;o<3;++o)h[0][o]>h[1][o]?f[o]=1:h[1][o]===h[0][o]?f[o]=1:f[o]=1/(h[1][o]-h[0][o]);for(this.dataScale=f,this.convertAnnotations(this),a=0;a<t.length;++a)!0===(n=t[a]).visible&&((i=this.traces[n.uid])?i.update(n):(i=n._module.plot(this,n),this.traces[n.uid]=i),i.name=n.name);var d=Object.keys(this.traces);t:for(a=0;a<d.length;++a){for(o=0;o<t.length;++o)if(t[o].uid===d[a]&&!0===t[o].visible)continue t;(i=this.traces[d[a]]).dispose(),delete this.traces[d[a]]}this.glplot.objects.sort(function(t,e){return t._trace.data.index-e._trace.data.index});var p=[[0,0,0],[0,0,0]],g=[],v={};for(a=0;a<3;++a){if((l=(s=u[aT[a]]).type)in v?(v[l].acc*=f[a],v[l].count+=1):v[l]={acc:f[a],count:1},s.autorange){p[0][a]=1/0,p[1][a]=-1/0;var m=this.glplot.objects,y=this.fullSceneLayout.annotations||[],b=s._name.charAt(0);for(o=0;o<m.length;o++){var x=m[o].bounds;p[0][a]=Math.min(p[0][a],x[0][a]/f[a]),p[1][a]=Math.max(p[1][a],x[1][a]/f[a])}for(o=0;o<y.length;o++){var _=y[o];if(_.visible){var w=s.r2l(_[b]);p[0][a]=Math.min(p[0][a],w),p[1][a]=Math.max(p[1][a],w)}}if("rangemode"in s&&"tozero"===s.rangemode&&(p[0][a]=Math.min(p[0][a],0),p[1][a]=Math.max(p[1][a],0)),p[0][a]>p[1][a])p[0][a]=-1,p[1][a]=1;else{var M=p[1][a]-p[0][a];p[0][a]-=M/32,p[1][a]+=M/32}}else{var A=s.range;p[0][a]=s.r2l(A[0]),p[1][a]=s.r2l(A[1])}p[0][a]===p[1][a]&&(p[0][a]-=1,p[1][a]+=1),g[a]=p[1][a]-p[0][a],this.glplot.bounds[0][a]=p[0][a]*f[a],this.glplot.bounds[1][a]=p[1][a]*f[a]}var T=[1,1,1];for(a=0;a<3;++a){var k=v[l=(s=u[aT[a]]).type];T[a]=Math.pow(k.acc,1/k.count)/f[a]}var E;if("auto"===u.aspectmode)E=Math.max.apply(null,T)/Math.min.apply(null,T)<=4?T:[1,1,1];else if("cube"===u.aspectmode)E=[1,1,1];else if("data"===u.aspectmode)E=T;else{if("manual"!==u.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var L=u.aspectratio;E=[L.x,L.y,L.z]}u.aspectratio.x=c.aspectratio.x=E[0],u.aspectratio.y=c.aspectratio.y=E[1],u.aspectratio.z=c.aspectratio.z=E[2],this.glplot.aspect=E;var C=u.domain||null,S=e._size||null;if(C&&S){var P=this.container.style;P.position="absolute",P.left=S.l+C.x[0]*S.w+"px",P.top=S.t+(1-C.y[1])*S.h+"px",P.width=S.w*(C.x[1]-C.x[0])+"px",P.height=S.h*(C.y[1]-C.y[0])+"px"}this.glplot.redraw()}},iT.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=this.glplot.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},iT.getCamera=function(){return this.glplot.camera.view.recalcMatrix(this.camera.view.lastT()),lT(this.glplot.camera)},iT.setCamera=function(t){var e;this.glplot.camera.lookAt.apply(this,[[(e=t).eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]])},iT.saveCamera=function(t){var e=this.getCamera(),r=re.nestedProperty(t,this.id+".camera"),n=r.get(),i=!1;function a(t,e,r,n){var i=["up","center","eye"],a=["x","y","z"];return e[i[r]]&&t[i[r]][a[n]]===e[i[r]][a[n]]}if(void 0===n)i=!0;else for(var o=0;o<3;o++)for(var s=0;s<3;s++)if(!a(e,n,o,s)){i=!0;break}return i&&r.set(e),i},iT.updateFx=function(t,e){var r=this.camera;r&&("orbit"===t?(r.mode="orbit",r.keyBindingMode="rotate"):"turntable"===t?(r.up=[0,0,1],r.mode="turntable",r.keyBindingMode="rotate"):r.keyBindingMode=t),this.fullSceneLayout.hovermode=e},iT.toImage=function(t){t||(t="png"),this.staticMode&&this.container.appendChild(QA),this.glplot.redraw();var e=this.glplot.gl,r=e.drawingBufferWidth,n=e.drawingBufferHeight;e.bindFramebuffer(e.FRAMEBUFFER,null);var i=new Uint8Array(r*n*4);e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,i);for(var a=0,o=n-1;a<o;++a,--o)for(var s=0;s<r;++s)for(var l=0;l<4;++l){var u=i[4*(r*a+s)+l];i[4*(r*a+s)+l]=i[4*(r*o+s)+l],i[4*(r*o+s)+l]=u}var c=document.createElement("canvas");c.width=r,c.height=n;var h,f=c.getContext("2d"),d=f.createImageData(r,n);switch(d.data.set(i),f.putImageData(d,0,0),t){case"jpeg":h=c.toDataURL("image/jpeg");break;case"webp":h=c.toDataURL("image/webp");break;default:h=c.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(QA),h},iT.setConvert=function(){for(var t=0;t<3;t++){var e=this.fullSceneLayout[aT[t]];Ki.setConvert(e,this.fullLayout),e.setScale=re.noop}};var uT=nT,cT={},hT=gr.overrideAll,fT=Ps.getSubplotData;cT.name="gl3d",cT.attr="scene",cT.idRoot="scene",cT.idRegex=cT.attrRegex=re.counterRegex("scene"),cT.attributes={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}},cT.layoutAttributes=zf,cT.baseLayoutAttrOverrides=hT({hoverlabel:Ga.hoverlabel},"plot","nested"),cT.supplyLayoutDefaults=function(t,e,r){var n=e._basePlotModules.length>1;!function(t,e,r,n){var i,a,o=n.type,s=n.attributes,l=n.handleDefaults,u=n.partition||"x",c=e._subplots[o],h=c.length;function f(t,e){return re.coerce(i,a,s,t,e)}for(var d=0;d<h;d++){var p=c[d];i=t[p]?t[p]:t[p]={},e[p]=a={};var g={};g[u]=[d/h,(d+1)/h],Ff(a,e,f,g),n.id=p,l(i,a,f,n)}}(t,e,0,{type:"gl3d",attributes:zf,handleDefaults:jf,fullLayout:e,font:e.font,fullData:r,getDfltFromLayout:function(e){if(!n)return re.validate(t[e],zf[e])?t[e]:void 0},paper_bgcolor:e.paper_bgcolor,calendar:e.calendar})},cT.plot=function(t){for(var e=t._fullLayout,r=t._fullData,n=e._subplots.gl3d,i=0;i<n.length;i++){var a=n[i],o=fT(r,"gl3d",a),s=e[a],l=s._scene;l||(l=new uT({id:a,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},e),s._scene=l),l.cameraInitial||(l.cameraInitial=re.extendDeep({},s.camera)),l.plot(o,e,t.layout)}},cT.clean=function(t,e,r,n){for(var i=n._subplots.gl3d||[],a=0;a<i.length;a++){var o=i[a];!e[o]&&n[o]._scene&&(n[o]._scene.destroy(),n._infolayer&&n._infolayer.selectAll(".annotation-"+o).remove())}},cT.toSVG=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=e._size,i=0;i<r.length;i++){var a=e[r[i]],o=a.domain,s=a._scene,l=s.toImage("png");e._glimages.append("svg:image").attr({xmlns:Dr.svg,"xlink:href":l,x:n.l+n.w*o.x[0],y:n.t+n.h*(1-o.y[1]),width:n.w*(o.x[1]-o.x[0]),height:n.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},cT.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var e=t.substr(5);return"1"===e&&(e=""),"scene"+e}},cT.updateFx=function(t){for(var e=t._subplots.gl3d,r=0;r<e.length;r++){t[e[r]]._scene.updateFx(t.dragmode,t.hovermode)}};var dT={},pT=m.extendFlat,gT=gr.overrideAll;function vT(t){return{show:{valType:"boolean",dflt:!1},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:Ne.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:Ne.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var mT=dT=gT({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},surfacecolor:{valType:"data_array"},cauto:or.zauto,cmin:or.zmin,cmax:or.zmax,colorscale:or.colorscale,autocolorscale:pT({},or.autocolorscale,{dflt:!1}),reversescale:or.reversescale,showscale:or.showscale,colorbar:Ar,contours:{x:vT(),y:vT(),z:vT()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:pT({},or.zauto,{}),zmin:pT({},or.zmin,{}),zmax:pT({},or.zmax,{})},hoverinfo:pT({},L.hoverinfo)},"calc","nested");mT.x.editType=mT.y.editType=mT.z.editType="calc+clearAxisTypes";var yT=m.extendFlat,bT=yT(Un(0,"calc",!1),{x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},opacity:dT.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:yT({},dT.contours.x.show,{}),color:dT.contours.x.color,width:dT.contours.x.width,editType:"calc"},showscale:or.showscale,colorbar:Ar,lightposition:{x:yT({},dT.lightposition.x,{dflt:1e5}),y:yT({},dT.lightposition.y,{dflt:1e5}),z:yT({},dT.lightposition.z,{dflt:0}),editType:"calc"},lighting:yT({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},dT.lighting),hoverinfo:yT({},L.hoverinfo,{editType:"calc"})}),xT=function(t){for(var e=t.length,r=t[t.length-1],n=e,i=e-2;i>=0;--i){var a=r,o=t[i],s=(r=a+o)-a,l=o-s;l&&(t[--n]=r,r=l)}for(var u=0,i=n;i<e;++i){var a=t[i],o=r,s=(r=a+o)-a,l=o-s;l&&(t[u++]=l)}return t[u++]=r,t.length=u,t};var _T={},wT=6;function MT(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),a=0,o=0;a<t.length;++a)a!==e&&(i[o++]=t[n][a]);return r}function AT(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],r=0;r<t.length;++r)e.push(["scale(",AT(MT(t,r)),",",(n=r,1&n?"-":""),t[0][r],")"].join(""));return function t(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var r=e.length>>1;return["sum(",t(e.slice(0,r)),",",t(e.slice(r)),")"].join("")}(e);var n}function TT(t){return new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",AT(function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m[",r,"][",n,"]"].join("")}return e}(t)),")};return robustDeterminant",t].join(""))(_m,bm,vm,xT)}var kT=[function(){return[0]},function(t){return[t[0][0]]}];!function(){for(;kT.length<wT;)kT.push(TT(kT.length));for(var t=[],e=["function robustDeterminant(m){switch(m.length){"],r=0;r<wT;++r)t.push("det"+r),e.push("case ",r,":return det",r,"(m);");e.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),t.push("CACHE","gen",e.join(""));var n=Function.apply(void 0,t);for(_T=n.apply(void 0,kT.concat([kT,TT])),r=0;r<kT.length;++r)_T[r]=kT[r]}();var ET={},LT=6;function CT(t){for(var e="robustLinearSolve"+t+"d",r=["function ",e,"(A,b){return ["],n=0;n<t;++n){r.push("det([");for(var i=0;i<t;++i){i>0&&r.push(","),r.push("[");for(var a=0;a<t;++a)a>0&&r.push(","),a===n?r.push("+b[",i,"]"):r.push("+A[",i,"][",a,"]");r.push("]")}r.push("]),")}r.push("det(A)]}return ",e);var o=new Function("det",r.join(""));return o(t<6?_T[t]:_T)}var ST=[function(){return[0]},function(t,e){return[[e[0]],[t[0][0]]]}];function PT(t,e){for(var r=0,n=t.length,i=0;i<n;++i)r+=t[i]*e[i];return r}function RT(t){var e=t.length;if(0===e)return[];t[0].length;var r=Rg([t.length+1,t.length+1],1),n=Rg([t.length+1],1);r[e][e]=0;for(var i=0;i<e;++i){for(var a=0;a<=i;++a)r[a][i]=r[i][a]=2*PT(t[i],t[a]);n[i]=PT(t[i],t[i])}var o=ET(r,n),s=0,l=o[e+1];for(i=0;i<l.length;++i)s+=l[i];var u=new Array(e);for(i=0;i<e;++i){l=o[i];var c=0;for(a=0;a<l.length;++a)c+=l[a];u[i]=c/s}return u}function OT(t){if(0===t.length)return[];for(var e=t[0].length,r=Rg([e]),n=RT(t),i=0;i<t.length;++i)for(var a=0;a<e;++a)r[a]+=t[i][a]*n[i];return r}!function(){for(;ST.length<LT;)ST.push(CT(ST.length));for(var t=[],e=["function dispatchLinearSolve(A,b){switch(A.length){"],r=0;r<LT;++r)t.push("s"+r),e.push("case ",r,":return s",r,"(A,b);");e.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),t.push("CACHE","g",e.join(""));var n=Function.apply(void 0,t);for(ET=n.apply(void 0,ST.concat([ST,CT])),r=0;r<LT;++r)ET[r]=ST[r]}(),OT.barycenetric=RT;var IT=OT,NT=function(t){for(var e=IT(t),r=0,n=0;n<t.length;++n)for(var i=t[n],a=0;a<e.length;++a)r+=Math.pow(i[a]-e[a],2);return Math.sqrt(r/t.length)};var DT=function(t,e){var r=t.length;if(0===r)throw new Error("Must have at least d+1 points");var n=t[0].length;if(r<=n)throw new Error("Must input at least d+1 points");var i=t.slice(0,n+1),a=wm.apply(void 0,i);if(0===a)throw new Error("Input not in general position");for(var o=new Array(n+1),s=0;s<=n;++s)o[s]=s;a<0&&(o[0]=1,o[1]=0);for(var l=new FT(o,new Array(n+1),!1),u=l.adjacent,c=new Array(n+2),s=0;s<=n;++s){for(var h=o.slice(),f=0;f<=n;++f)f===s&&(h[f]=-1);var d=h[0];h[0]=h[1],h[1]=d;var p=new FT(h,new Array(n+1),!0);u[s]=p,c[s]=p}c[n+1]=l;for(var s=0;s<=n;++s)for(var h=u[s].vertices,g=u[s].adjacent,f=0;f<=n;++f){var v=h[f];if(v<0)g[f]=l;else for(var m=0;m<=n;++m)u[m].vertices.indexOf(v)<0&&(g[f]=u[m])}for(var y=new VT(n,i,c),b=!!e,s=n+1;s<r;++s)y.insert(t[s],b);return y.boundary()},zT=Y_.compareCells;function FT(t,e,r){this.vertices=t,this.adjacent=e,this.boundary=r,this.lastVisited=-1}function jT(t,e,r){this.vertices=t,this.cell=e,this.index=r}function BT(t,e){return zT(t.vertices,e.vertices)}FT.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var UT=[];function VT(t,e,r){this.dimension=t,this.vertices=e,this.simplices=r,this.interior=r.filter(function(t){return!t.boundary}),this.tuple=new Array(t+1);for(var n=0;n<=t;++n)this.tuple[n]=this.vertices[n];var i=UT[t];i||(i=UT[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],r=0;r<=t;++r)r>0&&e.push(","),e.push("tuple[",r,"]");e.push(")}return orient");var n=new Function("test",e.join("")),i=wm[t+1];return i||(i=wm),n(i)}(t)),this.orient=i}var HT=VT.prototype;HT.handleBoundaryDegeneracy=function(t,e){var r=this.dimension,n=this.vertices.length-1,i=this.tuple,a=this.vertices,o=[t];for(t.lastVisited=-n;o.length>0;){(t=o.pop()).vertices;for(var s=t.adjacent,l=0;l<=r;++l){var u=s[l];if(u.boundary&&!(u.lastVisited<=-n)){for(var c=u.vertices,h=0;h<=r;++h){var f=c[h];i[h]=f<0?e:a[f]}var d=this.orient();if(d>0)return u;u.lastVisited=-n,0===d&&o.push(u)}}}return null},HT.walk=function(t,e){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,a=this.tuple,o=e?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];t:for(;!s.boundary;){for(var l=s.vertices,u=s.adjacent,c=0;c<=n;++c)a[c]=i[l[c]];s.lastVisited=r;for(c=0;c<=n;++c){var h=u[c];if(!(h.lastVisited>=r)){var f=a[c];a[c]=t;var d=this.orient();if(a[c]=f,d<0){s=h;continue t}h.boundary?h.lastVisited=-r:h.lastVisited=r}}return}return s},HT.addPeaks=function(t,e){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,a=this.tuple,o=this.interior,s=this.simplices,l=[e];e.lastVisited=r,e.vertices[e.vertices.indexOf(-1)]=r,e.boundary=!1,o.push(e);for(var u=[];l.length>0;){var c=(e=l.pop()).vertices,h=e.adjacent,f=c.indexOf(r);if(!(f<0))for(var d=0;d<=n;++d)if(d!==f){var p=h[d];if(p.boundary&&!(p.lastVisited>=r)){var g=p.vertices;if(p.lastVisited!==-r){for(var v=0,m=0;m<=n;++m)g[m]<0?(v=m,a[m]=t):a[m]=i[g[m]];if(this.orient()>0){g[v]=r,p.boundary=!1,o.push(p),l.push(p),p.lastVisited=r;continue}p.lastVisited=-r}var y=p.adjacent,b=c.slice(),x=h.slice(),_=new FT(b,x,!0);s.push(_);var w=y.indexOf(e);if(!(w<0)){y[w]=_,x[f]=p,b[d]=-1,x[d]=e,h[d]=_,_.flip();for(m=0;m<=n;++m){var M=b[m];if(!(M<0||M===r)){for(var A=new Array(n-1),T=0,k=0;k<=n;++k){var E=b[k];E<0||k===m||(A[T++]=E)}u.push(new jT(A,_,m))}}}}}}u.sort(BT);for(d=0;d+1<u.length;d+=2){var L=u[d],C=u[d+1],S=L.index,P=C.index;S<0||P<0||(L.cell.adjacent[L.index]=C.cell,C.cell.adjacent[C.index]=L.cell)}},HT.insert=function(t,e){var r=this.vertices;r.push(t);var n=this.walk(t,e);if(n){for(var i=this.dimension,a=this.tuple,o=0;o<=i;++o){var s=n.vertices[o];a[o]=s<0?t:r[s]}var l=this.orient(a);l<0||(0!==l||(n=this.handleBoundaryDegeneracy(n,t)))&&this.addPeaks(t,n)}},HT.boundary=function(){for(var t=this.dimension,e=[],r=this.simplices,n=r.length,i=0;i<n;++i){var a=r[i];if(a.boundary){for(var o=new Array(t),s=a.vertices,l=0,u=0,c=0;c<=t;++c)s[c]>=0?o[l++]=s[c]:u=1&c;if(u===(1&t)){var h=o[0];o[0]=o[1],o[1]=h}e.push(o)}}return e};var qT=function(t,e){var r=t.length;if(0===r)return[];var n=t[0].length;if(n<1)return[];if(1===n)return function(t,e,r){if(1===t)return r?[[-1,0]]:[];var n=e.map(function(t,e){return[t[0],e]});n.sort(function(t,e){return t[0]-e[0]});for(var i=new Array(t-1),a=1;a<t;++a){var o=n[a-1],s=n[a];i[a-1]=[o[1],s[1]]}r&&i.push([-1,i[0][1]],[i[t-1][1],-1]);return i}(r,t,e);for(var i=new Array(r),a=1,o=0;o<r;++o){for(var s=t[o],l=new Array(n+1),u=0,c=0;c<n;++c){var h=s[c];l[c]=h,u+=h*h}l[n]=u,i[o]=new GT(l,o),a=Math.max(u,a)}cp(i,XT),r=i.length;for(var f=new Array(r+n+1),d=new Array(r+n+1),p=(n+1)*(n+1)*a,g=new Array(n+1),o=0;o<=n;++o)g[o]=0;g[n]=p,f[0]=g.slice(),d[0]=-1;for(var o=0;o<=n;++o){var l=g.slice();l[o]=1,f[o+1]=l,d[o+1]=-1}for(var o=0;o<r;++o){var v=i[o];f[o+n+1]=v.point,d[o+n+1]=v.index}var m=DT(f,!1);m=e?m.filter(function(t){for(var e=0,r=0;r<=n;++r){var i=d[t[r]];if(i<0&&++e>=2)return!1;t[r]=i}return!0}):m.filter(function(t){for(var e=0;e<=n;++e){var r=d[t[e]];if(r<0)return!1;t[e]=r}return!0});if(1&n)for(var o=0;o<m.length;++o){var v=m[o],l=v[0];v[0]=v[1],v[1]=l}return m};function GT(t,e){this.point=t,this.index=e}function XT(t,e){for(var r=t.point,n=e.point,i=r.length,a=0;a<i;++a){var o=n[a]-r[a];if(o)return o}return 0}var WT=function(t,e){return qT(e).filter(function(r){for(var n=new Array(r.length),i=0;i<r.length;++i)n[i]=e[r[i]];return NT(n)*t<1})};var YT=function(t){var e,r,n,i=t.length,a=0;for(e=0;e<i;++e)a+=t[e].length;var o=new Array(a),s=0;for(e=0;e<i;++e){var l=t[e],u=l.length;for(r=0;r<u;++r){var c=o[s++]=new Array(u-1),h=0;for(n=0;n<u;++n)n!==r&&(c[h++]=l[n]);if(1&r){var f=c[1];c[1]=c[0],c[0]=f}}}return o};var ZT=function(t){for(var e=1,r=1;r<t.length;++r)for(var n=0;n<r;++n)if(t[r]<t[n])e=-e;else if(t[n]===t[r])return 0;return e};var QT=function(t,e){var r=t.length,n=t.length-e.length;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return t[0]+t[1]-e[0]-e[1]||KT(t[0],t[1])-KT(e[0],e[1]);case 3:var i=t[0]+t[1],a=e[0]+e[1];if(n=i+t[2]-(a+e[2]))return n;var o=KT(t[0],t[1]),s=KT(e[0],e[1]);return KT(o,t[2])-KT(s,e[2])||KT(o+t[2],i)-KT(s+e[2],a);case 4:var l=t[0],u=t[1],c=t[2],h=t[3],f=e[0],d=e[1],p=e[2],g=e[3];return l+u+c+h-(f+d+p+g)||KT(l,u,c,h)-KT(f,d,p,g,f)||KT(l+u,l+c,l+h,u+c,u+h,c+h)-KT(f+d,f+p,f+g,d+p,d+g,p+g)||KT(l+u+c,l+u+h,l+c+h,u+c+h)-KT(f+d+p,f+d+g,f+p+g,d+p+g);default:for(var v=t.slice().sort($T),m=e.slice().sort($T),y=0;y<r;++y)if(n=v[y]-m[y])return n;return 0}},KT=Math.min;function $T(t,e){return t-e}var JT=function(t,e){return QT(t,e)||ZT(t)-ZT(e)};var tk=function(t){t.sort(JT);for(var e=t.length,r=0,n=0;n<e;++n){var i=t[n],a=ZT(i);if(0!==a){if(r>0){var o=t[r-1];if(0===QT(i,o)&&ZT(o)!==a){r-=1;continue}}t[r++]=i}}return t.length=r,t};var ek=function(t){return tk(YT(t))};var rk=function(t,e){return ek(WT(t,e))};var nk=function(t){for(var e=0,r=0,n=1;n<t.length;++n)t[n][0]<t[e][0]&&(e=n),t[n][0]>t[r][0]&&(r=n);return e<r?[[e],[r]]:e>r?[[r],[e]]:[[e]]};var ik=function(t){var e=t.length;if(e<3){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}for(var i=new Array(e),n=0;n<e;++n)i[n]=n;i.sort(function(e,r){var n=t[e][0]-t[r][0];return n||t[e][1]-t[r][1]});for(var a=[i[0],i[1]],o=[i[0],i[1]],n=2;n<e;++n){for(var s=i[n],l=t[s],u=a.length;u>1&&ak(t[a[u-2]],t[a[u-1]],l)<=0;)u-=1,a.pop();for(a.push(s),u=o.length;u>1&&ak(t[o[u-2]],t[o[u-1]],l)>=0;)u-=1,o.pop();o.push(s)}for(var r=new Array(o.length+a.length-2),c=0,n=0,h=a.length;n<h;++n)r[c++]=a[n];for(var f=o.length-2;f>0;--f)r[c++]=o[f];return r},ak=wm[3];var ok=function(t){var e=ik(t),r=e.length;if(r<=2)return[];for(var n=new Array(r),i=e[r-1],a=0;a<r;++a){var o=e[a];n[a]=[i,o],i=o}return n};var sk=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var r=t[0].length,n=[t[0]],i=[0],a=1;a<e;++a)if(n.push(t[a]),lk(n,r)){if(i.push(a),i.length===r+1)return i}else n.pop();return i};function lk(t,e){for(var r=new Array(e+1),n=0;n<t.length;++n)r[n]=t[n];for(n=0;n<=t.length;++n){for(var i=t.length;i<=e;++i){for(var a=new Array(e),o=0;o<e;++o)a[o]=Math.pow(i+1-n,o);r[i]=a}if(wm.apply(void 0,r))return!0}return!1}var uk=function(t,e){try{return DT(t,!0)}catch(a){var r=sk(t);if(r.length<=e)return[];var n=function(t,e){for(var r=t.length,n=new Array(r),i=0;i<e.length;++i)n[i]=t[e[i]];for(var a=e.length,i=0;i<r;++i)e.indexOf(i)<0&&(n[a++]=t[i]);return n}(t,r),i=DT(n,!0);return function(t,e){for(var r=t.length,n=e.length,i=0;i<r;++i)for(var a=t[i],o=0;o<a.length;++o){var s=a[o];if(s<n)a[o]=e[s];else{s-=n;for(var l=0;l<n;++l)s>=e[l]&&(s+=1);a[o]=s}}return t}(i,r)}};var ck=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var r=t[0].length;if(0===r)return[];if(1===r)return nk(t);if(2===r)return ok(t);return uk(t,r)};var hk={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]};var fk=function(t,e,r){return t*(1-r)+e*r},dk=function(t){var e,r,n,i,a,o,s,l,u,c;t||(t={});l=(t.nshades||72)-1,s=t.format||"hex",(o=t.colormap)||(o="jet");if("string"==typeof o){if(o=o.toLowerCase(),!hk[o])throw Error(o+" not a supported colorscale");a=hk[o]}else{if(!Array.isArray(o))throw Error("unsupported colormap option",o);a=o.slice()}if(a.length>l)throw new Error(o+" map requires nshades to be at least size "+a.length);u=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1];e=a.map(function(t){return Math.round(t.index*l)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var h=a.map(function(t,e){var r=a[e].index,n=a[e].rgb.slice();return 4===n.length&&n[3]>=0&&n[3]<=1?n:(n[3]=u[0]+(u[1]-u[0])*r,n)}),f=[];for(c=0;c<e.length-1;++c){i=e[c+1]-e[c],r=h[c],n=h[c+1];for(var d=0;d<i;d++){var p=d/i;f.push([Math.round(fk(r[0],n[0],p)),Math.round(fk(r[1],n[1],p)),Math.round(fk(r[2],n[2],p)),fk(r[3],n[3],p)])}}f.push(a[a.length-1].rgb.concat(u[1])),"hex"===s?f=f.map(gk):"rgbaString"===s?f=f.map(vk):"float"===s&&(f=f.map(pk));return f};function pk(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function gk(t){for(var e,r="#",n=0;n<3;++n)r+=("00"+(e=(e=t[n]).toString(16))).substr(e.length);return r}function vk(t){return"rgba("+t.join(",")+")"}var mk=function(t,e){for(var r=e.length,n=new Array(r+1),i=0;i<r;++i){for(var a=new Array(r+1),o=0;o<=r;++o)a[o]=t[o][i];n[i]=a}n[r]=new Array(r+1);for(var i=0;i<=r;++i)n[r][i]=1;for(var s=new Array(r+1),i=0;i<r;++i)s[i]=e[i];s[r]=1;var l=ET(n,s),u=yk(l[r+1]);0===u&&(u=1);for(var c=new Array(r+1),i=0;i<=r;++i)c[i]=yk(l[i])/u;return c};function yk(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return e}var bk=new Float64Array(4),xk=new Float64Array(4),_k=new Float64Array(4);var wk=function(t,e,r,n,i){bk.length<n.length&&(bk=new Float64Array(n.length),xk=new Float64Array(n.length),_k=new Float64Array(n.length));for(var a=0;a<n.length;++a)bk[a]=t[a]-n[a],xk[a]=e[a]-t[a],_k[a]=r[a]-t[a];var o=0,s=0,l=0,u=0,c=0,h=0;for(a=0;a<n.length;++a){var f=xk[a],d=_k[a],p=bk[a];o+=f*f,s+=f*d,l+=d*d,u+=p*f,c+=p*d,h+=p*p}var g,v,m,y,b,x=Math.abs(o*l-s*s),_=s*c-l*u,w=s*u-o*c;if(_+w<=x)if(_<0)w<0&&u<0?(w=0,-u>=o?(_=1,g=o+2*u+h):g=u*(_=-u/o)+h):(_=0,c>=0?(w=0,g=h):-c>=l?(w=1,g=l+2*c+h):g=c*(w=-c/l)+h);else if(w<0)w=0,u>=0?(_=0,g=h):-u>=o?(_=1,g=o+2*u+h):g=u*(_=-u/o)+h;else{var M=1/x;g=(_*=M)*(o*_+s*(w*=M)+2*u)+w*(s*_+l*w+2*c)+h}else _<0?(m=l+c)>(v=s+u)?(y=m-v)>=(b=o-2*s+l)?(_=1,w=0,g=o+2*u+h):g=(_=y/b)*(o*_+s*(w=1-_)+2*u)+w*(s*_+l*w+2*c)+h:(_=0,m<=0?(w=1,g=l+2*c+h):c>=0?(w=0,g=h):g=c*(w=-c/l)+h):w<0?(m=o+u)>(v=s+c)?(y=m-v)>=(b=o-2*s+l)?(w=1,_=0,g=l+2*c+h):g=(_=1-(w=y/b))*(o*_+s*w+2*u)+w*(s*_+l*w+2*c)+h:(w=0,m<=0?(_=1,g=o+2*u+h):u>=0?(_=0,g=h):g=u*(_=-u/o)+h):(y=l+c-s-u)<=0?(_=0,w=1,g=l+2*c+h):y>=(b=o-2*s+l)?(_=1,w=0,g=o+2*u+h):g=(_=y/b)*(o*_+s*(w=1-_)+2*u)+w*(s*_+l*w+2*c)+h;var A=1-_-w;for(a=0;a<n.length;++a)i[a]=A*t[a]+_*e[a]+w*r[a];return g<0?0:g},Mk=function(t,e,r,n,i,a){if(1===t.length)return[0,t[0].slice()];for(var o=new Array(t.length),s=0;s<t.length;++s)o[s]=Tk(t[s],r,n,i,a);for(var l=0,u=1/0,s=0;s<o.length;++s){for(var c=0,h=0;h<2;++h)c+=Math.pow(o[s][h]-e[h],2);c<u&&(u=c,l=s)}for(var f=function(t,e){if(2===t.length){for(var r=0,n=0,i=0;i<2;++i)r+=Math.pow(e[i]-t[0][i],2),n+=Math.pow(e[i]-t[1][i],2);return r=Math.sqrt(r),n=Math.sqrt(n),r+n<1e-6?[1,0]:[n/(r+n),r/(n+r)]}if(3===t.length){var a=[0,0];return wk(t[0],t[1],t[2],e,a),mk(t,a)}return[]}(o,e),d=0,s=0;s<3;++s){if(f[s]<-.001||f[s]>1.0001)return null;d+=f[s]}if(Math.abs(d-1)>.001)return null;return[l,function(t,e){for(var r=[0,0,0],n=0;n<t.length;++n)for(var i=t[n],a=e[n],o=0;o<3;++o)r[o]+=a*i[o];return r}(t,f),f]};function Ak(t,e){for(var r=[0,0,0,0],n=0;n<4;++n)for(var i=0;i<4;++i)r[i]+=t[4*n+i]*e[n];return r}function Tk(t,e,r,n,i){for(var a=Ak(n,Ak(r,Ak(e,[t[0],t[1],t[2],1]))),o=0;o<3;++o)a[o]/=a[3];return[.5*i[0]*(1+a[0]),.5*i[1]*(1-a[1])]}var kk={},Ek=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}"]),Lk=im(["precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}"]),Ck=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),Sk=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),Pk=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),Rk=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),Ok=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),Ik=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),Nk=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),Dk=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),zk=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n"]);kk.meshShader={vertex:Ek,fragment:Lk,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},kk.wireShader={vertex:Ck,fragment:Sk,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},kk.pointShader={vertex:Pk,fragment:Rk,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},kk.pickShader={vertex:Ok,fragment:Ik,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},kk.pointPickShader={vertex:Nk,fragment:Ik,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},kk.contourShader={vertex:Dk,fragment:zk,attributes:[{name:"position",type:"vec3"}]};var Fk={};Fk.vertexNormals=function(t,e,r){for(var n=e.length,i=new Array(n),a=void 0===r?1e-6:r,o=0;o<n;++o)i[o]=[0,0,0];for(o=0;o<t.length;++o)for(var s=t[o],l=0,u=s[s.length-1],c=s[0],h=0;h<s.length;++h){l=u,u=c,c=s[(h+1)%s.length];for(var f=e[l],d=e[u],p=e[c],g=new Array(3),v=0,m=new Array(3),y=0,b=0;b<3;++b)g[b]=f[b]-d[b],v+=g[b]*g[b],m[b]=p[b]-d[b],y+=m[b]*m[b];if(v*y>a){var x=i[u],_=1/Math.sqrt(v*y);for(b=0;b<3;++b){var w=(b+1)%3,M=(b+2)%3;x[b]+=_*(m[w]*g[M]-m[M]*g[w])}}}for(o=0;o<n;++o){x=i[o];var A=0;for(b=0;b<3;++b)A+=x[b]*x[b];if(A>a)for(_=1/Math.sqrt(A),b=0;b<3;++b)x[b]*=_;else for(b=0;b<3;++b)x[b]=0}return i},Fk.faceNormals=function(t,e,r){for(var n=t.length,i=new Array(n),a=void 0===r?1e-6:r,o=0;o<n;++o){for(var s=t[o],l=new Array(3),u=0;u<3;++u)l[u]=e[s[u]];var c=new Array(3),h=new Array(3);for(u=0;u<3;++u)c[u]=l[1][u]-l[0][u],h[u]=l[2][u]-l[0][u];var f=new Array(3),d=0;for(u=0;u<3;++u){var p=(u+1)%3,g=(u+2)%3;f[u]=c[p]*h[g]-c[g]*h[p],d+=f[u]*f[u]}d=d>a?1/Math.sqrt(d):0;for(u=0;u<3;++u)f[u]*=d;i[o]=f}return i};var jk=32;function Bk(t){switch(t){case"uint8":return[Og.mallocUint8,Og.freeUint8];case"uint16":return[Og.mallocUint16,Og.freeUint16];case"uint32":return[Og.mallocUint32,Og.freeUint32];case"int8":return[Og.mallocInt8,Og.freeInt8];case"int16":return[Og.mallocInt16,Og.freeInt16];case"int32":return[Og.mallocInt32,Og.freeInt32];case"float32":return[Og.mallocFloat,Og.freeFloat];case"float64":return[Og.mallocDouble,Og.freeDouble];default:return null}}function Uk(t){for(var e=[],r=0;r<t;++r)e.push("s"+r);for(r=0;r<t;++r)e.push("n"+r);for(r=1;r<t;++r)e.push("d"+r);for(r=1;r<t;++r)e.push("e"+r);for(r=1;r<t;++r)e.push("f"+r);return e}var Vk=function(t,e){var r=["'use strict'"],n=["ndarraySortWrapper",t.join("d"),e].join("");r.push(["function ",n,"(",["array"].join(","),"){"].join(""));for(var i=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],a=0;a<t.length;++a)i.push(["s",a,"=stride[",a,"]|0,n",a,"=shape[",a,"]|0"].join(""));var o=new Array(t.length),s=[];for(a=0;a<t.length;++a)0!==(c=t[a])&&(0===s.length?o[c]="1":o[c]=s.join("*"),s.push("n"+c));var l=-1,u=-1;for(a=0;a<t.length;++a){var c,h=t[a];0!==h&&(l>0?i.push(["d",h,"=s",h,"-d",l,"*n",l].join("")):i.push(["d",h,"=s",h].join("")),l=h),0!=(c=t.length-1-a)&&(u>0?i.push(["e",c,"=s",c,"-e",u,"*n",u,",f",c,"=",o[c],"-f",u,"*n",u].join("")):i.push(["e",c,"=s",c,",f",c,"=",o[c]].join("")),u=c)}r.push("var "+i.join(","));var f=["0","n0-1","data","offset"].concat(Uk(t.length));r.push(["if(n0<=",jk,"){","insertionSort(",f.join(","),")}else{","quickSort(",f.join(","),")}"].join("")),r.push("}return "+n);var d=new Function("insertionSort","quickSort",r.join("\n")),p=function(t,e){var r=["'use strict'"],n=["ndarrayInsertionSort",t.join("d"),e].join(""),i=["left","right","data","offset"].concat(Uk(t.length)),a=Bk(e),o=["i,j,cptr,ptr=left*s0+offset"];if(t.length>1){for(var s=[],l=1;l<t.length;++l)o.push("i"+l),s.push("n"+l);a?o.push("scratch=malloc("+s.join("*")+")"):o.push("scratch=new Array("+s.join("*")+")"),o.push("dptr","sptr","a","b")}else o.push("scratch");function u(t){return"generic"===e?["data.get(",t,")"].join(""):["data[",t,"]"].join("")}function c(t,r){return"generic"===e?["data.set(",t,",",r,")"].join(""):["data[",t,"]=",r].join("")}if(r.push(["function ",n,"(",i.join(","),"){var ",o.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),t.length>1){for(r.push("dptr=0;sptr=ptr"),l=t.length-1;l>=0;--l)0!==(h=t[l])&&r.push(["for(i",h,"=0;i",h,"<n",h,";++i",h,"){"].join(""));for(r.push("scratch[dptr++]=",u("sptr")),l=0;l<t.length;++l)0!==(h=t[l])&&r.push("sptr+=d"+h,"}");for(r.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0"),l=1;l<t.length;++l)1===l&&r.push("__l:"),r.push(["for(i",l,"=0;i",l,"<n",l,";++i",l,"){"].join(""));for(r.push(["a=",u("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join("")),l=t.length-1;l>=1;--l)r.push("sptr+=e"+l,"dptr+=f"+l,"}");for(r.push("dptr=cptr;sptr=cptr-s0"),l=t.length-1;l>=0;--l)0!==(h=t[l])&&r.push(["for(i",h,"=0;i",h,"<n",h,";++i",h,"){"].join(""));for(r.push(c("dptr",u("sptr"))),l=0;l<t.length;++l)0!==(h=t[l])&&r.push(["dptr+=d",h,";sptr+=d",h].join(""),"}");for(r.push("cptr-=s0\n}"),r.push("dptr=cptr;sptr=0"),l=t.length-1;l>=0;--l)0!==(h=t[l])&&r.push(["for(i",h,"=0;i",h,"<n",h,";++i",h,"){"].join(""));for(r.push(c("dptr","scratch[sptr++]")),l=0;l<t.length;++l){var h;0!==(h=t[l])&&r.push("dptr+=d"+h,"}")}}else r.push("scratch="+u("ptr"),"while((j--\x3eleft)&&("+u("cptr-s0")+">scratch)){",c("cptr",u("cptr-s0")),"cptr-=s0","}",c("cptr","scratch"));return r.push("}"),t.length>1&&a&&r.push("free(scratch)"),r.push("} return "+n),a?new Function("malloc","free",r.join("\n"))(a[0],a[1]):new Function(r.join("\n"))()}(t,e);return d(p,function(t,e,r){var n=["'use strict'"],i=["ndarrayQuickSort",t.join("d"),e].join(""),a=["left","right","data","offset"].concat(Uk(t.length)),o=Bk(e),s=0;n.push(["function ",i,"(",a.join(","),"){"].join(""));var l=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(t.length>1){for(var u=[],c=1;c<t.length;++c)u.push("n"+c),l.push("i"+c);for(c=0;c<8;++c)l.push("b_ptr"+c);l.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+u.join("*")),o?l.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):l.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else l.push("pivot1","pivot2");function h(t){return["(offset+",t,"*s0)"].join("")}function f(t){return"generic"===e?["data.get(",t,")"].join(""):["data[",t,"]"].join("")}function d(t,r){return"generic"===e?["data.set(",t,",",r,")"].join(""):["data[",t,"]=",r].join("")}function p(e,r,i){if(1===e.length)n.push("ptr0="+h(e[0]));else for(var a=0;a<e.length;++a)n.push(["b_ptr",a,"=s0*",e[a]].join(""));for(r&&n.push("pivot_ptr=0"),n.push("ptr_shift=offset"),a=t.length-1;a>=0;--a)0!==(o=t[a])&&n.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(e.length>1)for(a=0;a<e.length;++a)n.push(["ptr",a,"=b_ptr",a,"+ptr_shift"].join(""));for(n.push(i),r&&n.push("++pivot_ptr"),a=0;a<t.length;++a){var o;0!==(o=t[a])&&(e.length>1?n.push("ptr_shift+=d"+o):n.push("ptr0+=d"+o),n.push("}"))}}function g(e,r,i,a){if(1===r.length)n.push("ptr0="+h(r[0]));else{for(var o=0;o<r.length;++o)n.push(["b_ptr",o,"=s0*",r[o]].join(""));n.push("ptr_shift=offset")}for(i&&n.push("pivot_ptr=0"),e&&n.push(e+":"),o=1;o<t.length;++o)n.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(r.length>1)for(o=0;o<r.length;++o)n.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));for(n.push(a),o=t.length-1;o>=1;--o)i&&n.push("pivot_ptr+=f"+o),r.length>1?n.push("ptr_shift+=e"+o):n.push("ptr0+=e"+o),n.push("}")}function v(){t.length>1&&o&&n.push("free(pivot1)","free(pivot2)")}function m(e,r){var i="el"+e,a="el"+r;if(t.length>1){var o="__l"+ ++s;g(o,[i,a],!1,["comp=",f("ptr0"),"-",f("ptr1"),"\n","if(comp>0){tmp0=",i,";",i,"=",a,";",a,"=tmp0;break ",o,"}\n","if(comp<0){break ",o,"}"].join(""))}else n.push(["if(",f(h(i)),">",f(h(a)),"){tmp0=",i,";",i,"=",a,";",a,"=tmp0}"].join(""))}function y(e,r){t.length>1?p([e,r],!1,d("ptr0",f("ptr1"))):n.push(d(h(e),f(h(r))))}function b(e,r,i){if(t.length>1){var a="__l"+ ++s;g(a,[r],!0,[e,"=",f("ptr0"),"-pivot",i,"[pivot_ptr]\n","if(",e,"!==0){break ",a,"}"].join(""))}else n.push([e,"=",f(h(r)),"-pivot",i].join(""))}function x(e,r){t.length>1?p([e,r],!1,["tmp=",f("ptr0"),"\n",d("ptr0",f("ptr1")),"\n",d("ptr1","tmp")].join("")):n.push(["ptr0=",h(e),"\n","ptr1=",h(r),"\n","tmp=",f("ptr0"),"\n",d("ptr0",f("ptr1")),"\n",d("ptr1","tmp")].join(""))}function _(e,r,i){t.length>1?(p([e,r,i],!1,["tmp=",f("ptr0"),"\n",d("ptr0",f("ptr1")),"\n",d("ptr1",f("ptr2")),"\n",d("ptr2","tmp")].join("")),n.push("++"+r,"--"+i)):n.push(["ptr0=",h(e),"\n","ptr1=",h(r),"\n","ptr2=",h(i),"\n","++",r,"\n","--",i,"\n","tmp=",f("ptr0"),"\n",d("ptr0",f("ptr1")),"\n",d("ptr1",f("ptr2")),"\n",d("ptr2","tmp")].join(""))}function w(t,e){x(t,e),n.push("--"+e)}function M(e,r,i){t.length>1?p([e,r],!0,[d("ptr0",f("ptr1")),"\n",d("ptr1",["pivot",i,"[pivot_ptr]"].join(""))].join("")):n.push(d(h(e),f(h(r))),d(h(r),"pivot"+i))}function A(e,r){n.push(["if((",r,"-",e,")<=",jk,"){\n","insertionSort(",e,",",r,",data,offset,",Uk(t.length).join(","),")\n","}else{\n",i,"(",e,",",r,",data,offset,",Uk(t.length).join(","),")\n","}"].join(""))}function T(e,r,i){t.length>1?(n.push(["__l",++s,":while(true){"].join("")),p([e],!0,["if(",f("ptr0"),"!==pivot",r,"[pivot_ptr]){break __l",s,"}"].join("")),n.push(i,"}")):n.push(["while(",f(h(e)),"===pivot",r,"){",i,"}"].join(""))}return n.push("var "+l.join(",")),m(1,2),m(4,5),m(1,3),m(2,3),m(1,4),m(3,4),m(2,5),m(2,3),m(4,5),t.length>1?p(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",f("ptr1"),"\n","pivot2[pivot_ptr]=",f("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",f("ptr0"),"\n","y=",f("ptr2"),"\n","z=",f("ptr4"),"\n",d("ptr5","x"),"\n",d("ptr6","y"),"\n",d("ptr7","z")].join("")):n.push(["pivot1=",f(h("el2")),"\n","pivot2=",f(h("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",f(h("el1")),"\n","y=",f(h("el3")),"\n","z=",f(h("el5")),"\n",d(h("index1"),"x"),"\n",d(h("index3"),"y"),"\n",d(h("index5"),"z")].join("")),y("index2","left"),y("index4","right"),n.push("if(pivots_are_equal){"),n.push("for(k=less;k<=great;++k){"),b("comp","k",1),n.push("if(comp===0){continue}"),n.push("if(comp<0){"),n.push("if(k!==less){"),x("k","less"),n.push("}"),n.push("++less"),n.push("}else{"),n.push("while(true){"),b("comp","great",1),n.push("if(comp>0){"),n.push("great--"),n.push("}else if(comp<0){"),_("k","less","great"),n.push("break"),n.push("}else{"),w("k","great"),n.push("break"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}else{"),n.push("for(k=less;k<=great;++k){"),b("comp_pivot1","k",1),n.push("if(comp_pivot1<0){"),n.push("if(k!==less){"),x("k","less"),n.push("}"),n.push("++less"),n.push("}else{"),b("comp_pivot2","k",2),n.push("if(comp_pivot2>0){"),n.push("while(true){"),b("comp","great",2),n.push("if(comp>0){"),n.push("if(--great<k){break}"),n.push("continue"),n.push("}else{"),b("comp","great",1),n.push("if(comp<0){"),_("k","less","great"),n.push("}else{"),w("k","great"),n.push("}"),n.push("break"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),M("left","(less-1)",1),M("right","(great+1)",2),A("left","(less-2)"),A("(great+2)","right"),n.push("if(pivots_are_equal){"),v(),n.push("return"),n.push("}"),n.push("if(less<index1&&great>index5){"),T("less",1,"++less"),T("great",2,"--great"),n.push("for(k=less;k<=great;++k){"),b("comp_pivot1","k",1),n.push("if(comp_pivot1===0){"),n.push("if(k!==less){"),x("k","less"),n.push("}"),n.push("++less"),n.push("}else{"),b("comp_pivot2","k",2),n.push("if(comp_pivot2===0){"),n.push("while(true){"),b("comp","great",2),n.push("if(comp===0){"),n.push("if(--great<k){break}"),n.push("continue"),n.push("}else{"),b("comp","great",1),n.push("if(comp<0){"),_("k","less","great"),n.push("}else{"),w("k","great"),n.push("}"),n.push("break"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),v(),A("less","great"),n.push("}return "+i),t.length>1&&o?new Function("insertionSort","malloc","free",n.join("\n"))(r,o[0],o[1]):new Function("insertionSort",n.join("\n"))(r)}(t,e,p))},Hk={};var qk=function(t){var e=t.order,r=t.dtype,n=[e,r].join(":"),i=Hk[n];return i||(Hk[n]=i=Vk(e,r)),i(t),t},Gk=function(t){for(var e=1<<t+1,r=new Array(e),n=0;n<e;++n)r[n]=Wk(t,n);return r};function Xk(t,e,r){for(var n=new Array(t),i=0;i<t;++i)n[i]=0,i===e&&(n[i]+=.5),i===r&&(n[i]+=.5);return n}function Wk(t,e){if(0===e||e===(1<<t+1)-1)return[];for(var r=[],n=[],i=0;i<=t;++i)if(e&1<<i){r.push(Xk(t,i-1,i-1)),n.push(null);for(var a=0;a<=t;++a)~e&1<<a&&(r.push(Xk(t,i-1,a-1)),n.push([i,a]))}var o=ck(r),s=[];t:for(i=0;i<o.length;++i){var l=o[i],u=[];for(a=0;a<l.length;++a){if(!n[l[a]])continue t;u.push(n[l[a]].slice())}s.push(u)}return s}var Yk=function(t){var e=Zk[t];e||(e=Zk[t]=function(t){var e=0,r=new Array(t+1);r[0]=[[]];for(var n=1;n<=t;++n)for(var i=r[n]=Gk(n),a=0;a<i.length;++a)e=Math.max(e,i[n].length);var o=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",t,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function s(t){if(!(t.length<=0)){o.push("R.push(");for(var e=0;e<t.length;++e){var r=t[e];e>0&&o.push(","),o.push("[");for(var n=0;n<r.length;++n){var i=r[n];n>0&&o.push(","),o.push("B(C,E,c[",i[0],"],c[",i[1],"])")}o.push("]")}o.push(");")}}for(var n=t+1;n>1;--n){n<t+1&&o.push("else "),o.push("if(l===",n,"){");for(var l=[],a=0;a<n;++a)l.push("(S[c["+a+"]]<<"+a+")");o.push("var M=",l.join("+"),";if(M===0||M===",(1<<n)-1,"){continue}switch(M){");for(var i=r[n-1],a=0;a<i.length;++a)o.push("case ",a,":"),s(i[a]),o.push("break;");o.push("}}")}return o.push("}return R;};return getContour",t,"d"),new Function("pool",o.join(""))(Og)}(t));return e},Zk={};var Qk=function(t,e,r,n){r=r||0,void 0===n&&(n=function(t){for(var e=t.length,r=0,n=0;n<e;++n)r=0|Math.max(r,t[n].length);return r-1}(t));if(0===t.length||n<1)return{cells:[],vertexIds:[],vertexWeights:[]};var i=function(t,e){for(var r=t.length,n=Og.mallocUint8(r),i=0;i<r;++i)n[i]=t[i]<e|0;return n}(e,+r),a=function(t,e){for(var r=t.length,n=e*(e+1)/2*r|0,i=Og.mallocUint32(2*n),a=0,o=0;o<r;++o)for(var s=t[o],e=s.length,l=0;l<e;++l)for(var u=0;u<l;++u){var c=s[u],h=s[l];i[a++]=0|Math.min(c,h),i[a++]=0|Math.max(c,h)}qk(Ip(i,[a/2|0,2]));for(var f=2,o=2;o<a;o+=2)i[o-2]===i[o]&&i[o-1]===i[o+1]||(i[f++]=i[o],i[f++]=i[o+1]);return Ip(i,[f/2|0,2])}(t,n),o=function(t,e,r,n){for(var i=t.data,a=t.shape[0],o=Og.mallocDouble(a),s=0,l=0;l<a;++l){var u=i[2*l],c=i[2*l+1];if(r[u]!==r[c]){var h=e[u],f=e[c];i[2*s]=u,i[2*s+1]=c,o[s++]=(f-n)/(f-h)}}return t.shape[0]=s,Ip(o,[s])}(a,e,i,+r),s=function(t,e){var r=Og.mallocInt32(2*e),n=t.shape[0],i=t.data;r[0]=0;for(var a=0,o=0;o<n;++o){var s=i[2*o];if(s!==a){for(r[2*a+1]=o;++a<s;)r[2*a]=o,r[2*a+1]=o;r[2*a]=o}}r[2*a+1]=n;for(;++a<e;)r[2*a]=r[2*a+1]=n;return r}(a,0|e.length),l=Yk(n)(t,a.data,s,i),u=function(t){for(var e=0|t.shape[0],r=t.data,n=new Array(e),i=0;i<e;++i)n[i]=[r[2*i],r[2*i+1]];return n}(a),c=[].slice.call(o.data,0,o.shape[0]);return Og.free(i),Og.free(a.data),Og.free(o.data),Og.free(s),{cells:l,vertexIds:u,vertexWeights:c}};var Kk=kk.meshShader,$k=kk.wireShader,Jk=kk.pointShader,tE=kk.pickShader,eE=kk.pointPickShader,rE=kk.contourShader,nE=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function iE(t,e,r,n,i,a,o,s,l,u,c,h,f,d,p,g,v,m,y,b,x,_,w,M,A,T,k){this.gl=t,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.lineShader=n,this.pointShader=i,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=c,this.triangleNormals=f,this.triangleUVs=h,this.triangleIds=u,this.triangleVAO=d,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=v,this.edgeUVs=m,this.edgeIds=g,this.edgeVAO=y,this.edgeCount=0,this.pointPositions=b,this.pointColors=_,this.pointUVs=w,this.pointSizes=M,this.pointIds=x,this.pointVAO=A,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=T,this.contourVAO=k,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=nE,this._view=nE,this._projection=nE,this._resolution=[1,1]}var aE=iE.prototype;function oE(t){var e=nm(t,Jk.vertex,Jk.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.pointSize.location=4,e}function sE(t){var e=nm(t,tE.vertex,tE.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e}function lE(t){var e=nm(t,eE.vertex,eE.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e.attributes.pointSize.location=4,e}function uE(t){var e=nm(t,rE.vertex,rE.fragment);return e.attributes.position.location=0,e}aE.isOpaque=function(){return this.opacity>=1},aE.isTransparent=function(){return this.opacity<1},aE.pickSlots=1,aE.setPickBase=function(t){this.pickId=t},aE.highlight=function(t){if(t&&this.contourEnable){for(var e=Qk(this.cells,this.intensity,t.intensity),r=e.cells,n=e.vertexIds,i=e.vertexWeights,a=r.length,o=Og.mallocFloat32(6*a),s=0,l=0;l<a;++l)for(var u=r[l],c=0;c<2;++c){var h=u[0];2===u.length&&(h=u[c]);for(var f=n[h][0],d=n[h][1],p=i[h],g=1-p,v=this.positions[f],m=this.positions[d],y=0;y<3;++y)o[s++]=p*v[y]+g*m[y]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),Og.free(o)}else this.contourCount=0},aE.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),"opacity"in t&&(this.opacity=t.opacity),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=RM(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t){for(var e=dk({colormap:t,nshades:256,format:"rgba"}),r=new Uint8Array(1024),n=0;n<256;++n){for(var i=e[n],a=0;a<3;++a)r[4*n+a]=i[a];r[4*n+3]=255*i[3]}return Ip(r,[256,256,4],[4,0,1])}(t.colormap)),this.texture.generateMipmap());var r=t.cells,n=t.positions;if(n&&r){var i=[],a=[],o=[],s=[],l=[],u=[],c=[],h=[],f=[],d=[],p=[],g=[],v=[],m=[];this.cells=r,this.positions=n;var y=t.vertexNormals,b=t.cellNormals,x=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,_=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!b&&(b=Fk.faceNormals(r,n,_)),b||y||(y=Fk.vertexNormals(r,n,x));var w=t.vertexColors,M=t.cellColors,A=t.meshColor||[1,1,1,1],T=t.vertexUVs,k=t.vertexIntensity,E=t.cellUVs,L=t.cellIntensity,C=1/0,S=-1/0;if(!T&&!E)if(k)if(t.vertexIntensityBounds)C=+t.vertexIntensityBounds[0],S=+t.vertexIntensityBounds[1];else for(var P=0;P<k.length;++P){var R=k[P];C=Math.min(C,R),S=Math.max(S,R)}else if(L)for(P=0;P<L.length;++P){R=L[P];C=Math.min(C,R),S=Math.max(S,R)}else for(P=0;P<n.length;++P){R=n[P][2];C=Math.min(C,R),S=Math.max(S,R)}this.intensity=k||(L?function(t,e,r){for(var n=new Array(e),i=0;i<e;++i)n[i]=0;var a=t.length;for(i=0;i<a;++i)for(var o=t[i],s=0;s<o.length;++s)n[o[s]]=r[i];return n}(r,n.length,L):function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=t[n][2];return r}(n));var O=t.pointSizes,I=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(P=0;P<n.length;++P)for(var N=n[P],D=0;D<3;++D)!isNaN(N[D])&&isFinite(N[D])&&(this.bounds[0][D]=Math.min(this.bounds[0][D],N[D]),this.bounds[1][D]=Math.max(this.bounds[1][D],N[D]));var z=0,F=0,j=0;t:for(P=0;P<r.length;++P){var B=r[P];switch(B.length){case 1:for(N=n[V=B[0]],D=0;D<3;++D)if(isNaN(N[D])||!isFinite(N[D]))continue t;d.push(N[0],N[1],N[2]),3===(H=w?w[V]:M?M[P]:A).length?p.push(H[0],H[1],H[2],1):p.push(H[0],H[1],H[2],H[3]),q=T?T[V]:k?[(k[V]-C)/(S-C),0]:E?E[P]:L?[(L[P]-C)/(S-C),0]:[(N[2]-C)/(S-C),0],g.push(q[0],q[1]),O?v.push(O[V]):v.push(I),m.push(P),j+=1;break;case 2:for(D=0;D<2;++D){N=n[V=B[D]];for(var U=0;U<3;++U)if(isNaN(N[U])||!isFinite(N[U]))continue t}for(D=0;D<2;++D){N=n[V=B[D]];u.push(N[0],N[1],N[2]),3===(H=w?w[V]:M?M[P]:A).length?c.push(H[0],H[1],H[2],1):c.push(H[0],H[1],H[2],H[3]),q=T?T[V]:k?[(k[V]-C)/(S-C),0]:E?E[P]:L?[(L[P]-C)/(S-C),0]:[(N[2]-C)/(S-C),0],h.push(q[0],q[1]),f.push(P)}F+=1;break;case 3:for(D=0;D<3;++D)for(N=n[V=B[D]],U=0;U<3;++U)if(isNaN(N[U])||!isFinite(N[U]))continue t;for(D=0;D<3;++D){var V,H,q,G;N=n[V=B[D]];i.push(N[0],N[1],N[2]),3===(H=w?w[V]:M?M[P]:A).length?a.push(H[0],H[1],H[2],1):a.push(H[0],H[1],H[2],H[3]),q=T?T[V]:k?[(k[V]-C)/(S-C),0]:E?E[P]:L?[(L[P]-C)/(S-C),0]:[(N[2]-C)/(S-C),0],s.push(q[0],q[1]),G=y?y[V]:b[P],o.push(G[0],G[1],G[2]),l.push(P)}z+=1}}this.pointCount=j,this.edgeCount=F,this.triangleCount=z,this.pointPositions.update(d),this.pointColors.update(p),this.pointUVs.update(g),this.pointSizes.update(v),this.pointIds.update(new Uint32Array(m)),this.edgePositions.update(u),this.edgeColors.update(c),this.edgeUVs.update(h),this.edgeIds.update(new Uint32Array(f)),this.trianglePositions.update(i),this.triangleColors.update(a),this.triangleUVs.update(s),this.triangleNormals.update(o),this.triangleIds.update(new Uint32Array(l))}},aE.drawTransparent=aE.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||nE,n=t.view||nE,i=t.projection||nE,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var s={model:r,view:n,projection:i,clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var l=new Array(16);dd(l,s.view,s.model),dd(l,s.projection,l),Hf(l,l);for(o=0;o<3;++o)s.eyePosition[o]=l[12+o]/l[15];var u,c=l[15];for(o=0;o<3;++o)c+=this.lightPosition[o]*l[4*o+3];for(o=0;o<3;++o){for(var h=l[12+o],f=0;f<3;++f)h+=l[4*f+o]*this.lightPosition[f];s.lightPosition[o]=h/c}this.triangleCount>0&&((u=this.triShader).bind(),u.uniforms=s,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());this.edgeCount>0&&this.lineWidth>0&&((u=this.lineShader).bind(),u.uniforms=s,this.edgeVAO.bind(),e.lineWidth(this.lineWidth),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());this.pointCount>0&&((u=this.pointShader).bind(),u.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((u=this.contourShader).bind(),u.uniforms=s,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind())},aE.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||nE,n=t.view||nE,i=t.projection||nE,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s,l={model:r,view:n,projection:i,clipBounds:a,pickId:this.pickId/255};((s=this.pickShader).bind(),s.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0)&&((s=this.pointPickShader).bind(),s.uniforms=l,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind())},aE.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],n=this.positions,i=new Array(r.length),a=0;a<r.length;++a)i[a]=n[r[a]];var o=Mk(i,[t.coord[0],this._resolution[1]-t.coord[1]],this._model,this._view,this._projection,this._resolution);if(!o)return null;var s=o[2],l=0;for(a=0;a<r.length;++a)l+=s[a]*this.intensity[r[a]];return{position:o[1],index:r[o[0]],cell:r,cellId:e,intensity:l,dataCoordinate:this.positions[r[o[0]]]}},aE.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};var cE=function(t,e){1===arguments.length&&(t=(e=t).gl);var r=function(t){var e=nm(t,Kk.vertex,Kk.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.normal.location=4,e}(t),n=function(t){var e=nm(t,$k.vertex,$k.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e}(t),i=oE(t),a=sE(t),o=lE(t),s=uE(t),l=RM(t,Ip(new Uint8Array([255,255,255,255]),[1,1,4]));l.generateMipmap(),l.minFilter=t.LINEAR_MIPMAP_LINEAR,l.magFilter=t.LINEAR;var u=jg(t),c=jg(t),h=jg(t),f=jg(t),d=jg(t),p=Xg(t,[{buffer:u,type:t.FLOAT,size:3},{buffer:d,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:c,type:t.FLOAT,size:4},{buffer:h,type:t.FLOAT,size:2},{buffer:f,type:t.FLOAT,size:3}]),g=jg(t),v=jg(t),m=jg(t),y=jg(t),b=Xg(t,[{buffer:g,type:t.FLOAT,size:3},{buffer:y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:v,type:t.FLOAT,size:4},{buffer:m,type:t.FLOAT,size:2}]),x=jg(t),_=jg(t),w=jg(t),M=jg(t),A=jg(t),T=Xg(t,[{buffer:x,type:t.FLOAT,size:3},{buffer:A,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:t.FLOAT,size:4},{buffer:w,type:t.FLOAT,size:2},{buffer:M,type:t.FLOAT,size:1}]),k=jg(t),E=new iE(t,l,r,n,i,a,o,s,u,d,c,h,f,p,g,y,v,m,b,x,A,_,w,M,T,k,Xg(t,[{buffer:k,type:t.FLOAT,size:3}]));return E.update(e),E};function hE(t,e,r){this.scene=t,this.uid=r,this.mesh=e,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var fE=hE.prototype;function dE(t){return t.map(BA)}function pE(t,e,r){for(var n=new Array(t.length),i=0;i<t.length;++i)n[i]=[t[i],e[i],r[i]];return n}fE.handlePick=function(t){if(t.object===this.mesh){var e=t.index=t.data.index;t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]];var r=this.data.text;return Array.isArray(r)&&void 0!==r[e]?t.textLabel=r[e]:r&&(t.textLabel=r),!0}},fE.update=function(t){var e=this.scene,r=e.fullSceneLayout;function n(t,e,r,n){return e.map(function(e){return t.d2l(e,0,n)*r})}this.data=t;var i,a=pE(n(r.xaxis,t.x,e.dataScale[0],t.xcalendar),n(r.yaxis,t.y,e.dataScale[1],t.ycalendar),n(r.zaxis,t.z,e.dataScale[2],t.zcalendar));if(t.i&&t.j&&t.k)i=pE(t.i,t.j,t.k);else if(0===t.alphahull)i=ck(a);else if(t.alphahull>0)i=rk(t.alphahull,a);else{var o=["x","y","z"].indexOf(t.delaunayaxis);i=qT(a.map(function(t){return[t[(o+1)%3],t[(o+2)%3]]}))}var l={positions:a,cells:i,lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:BA(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading};t.intensity?(this.color="#fff",l.vertexIntensity=t.intensity,l.vertexIntensityBounds=[t.cmin,t.cmax],l.colormap=t.colorscale.map(function(t){var e=t[0],r=s(t[1]).toRgb();return{index:e,rgb:[r.r,r.g,r.b,1]}})):t.vertexcolor?(this.color=t.vertexcolor[0],l.vertexColors=dE(t.vertexcolor)):t.facecolor?(this.color=t.facecolor[0],l.cellColors=dE(t.facecolor)):(this.color=t.color,l.meshColor=BA(t.color)),this.mesh.update(l)},fE.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var gE=function(t,e){var r=t.glplot.gl,n=cE({gl:r}),i=new hE(t,n,e.uid);return n._trace=i,i.update(e),t.glplot.add(n),i},vE={};vE.attributes=bT,vE.supplyDefaults=function(t,e,r,n){function i(r,n){return re.coerce(t,e,bT,r,n)}function a(t){var e=t.map(function(t){var e=i(t);return e&&re.isArrayOrTypedArray(e)?e:null});return e.every(function(t){return t&&t.length===e[0].length})&&e}var o=a(["x","y","z"]),s=a(["i","j","k"]);o?(s&&s.forEach(function(t){for(var e=0;e<t.length;++e)t[e]|=0}),R.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(t){i(t)}),"intensity"in t?(i("intensity"),Sr(t,e,n,i,{prefix:"",cLetter:"c"})):(e.showscale=!1,"facecolor"in t?i("facecolor"):"vertexcolor"in t?i("vertexcolor"):i("color",r)),i("text")):e.visible=!1},vE.calc=function(t,e){e.intensity&&lr(e,e.intensity,"","c")},vE.colorbar=function(t,r){var n=r[0].trace,i="cb"+n.uid,a=n.cmin,o=n.cmax,s=n.intensity||[];if(e(a)||(a=re.aggNums(Math.min,null,s)),e(o)||(o=re.aggNums(Math.max,null,s)),t._fullLayout._infolayer.selectAll("."+i).remove(),n.showscale){var l=r[0].t.cb=nf(t,i),u=Or.makeColorScaleFunc(Or.extractScale(n.colorscale,a,o),{noNumericCheck:!0});l.fillcolor(u).filllevels({start:a,end:o,size:(o-a)/254}).options(n.colorbar)()}else vi.autoMargin(t,i)},vE.plot=gE,vE.moduleType="trace",vE.name="mesh3d",vE.basePlotModule=cT,vE.categories=["gl3d"],vE.meta={};var mE=vE,yE={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"},bE={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},xE={},_E=m.extendFlat,wE=gr.overrideAll,ME=Gn.line,AE=Gn.marker,TE=AE.line;var kE=xE=wE({x:Gn.x,y:Gn.y,z:{valType:"data_array"},text:_E({},Gn.text,{}),hovertext:_E({},Gn.hovertext,{}),mode:_E({},Gn.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:Gn.connectgaps,line:_E({width:ME.width,dash:{valType:"enumerated",values:Object.keys(bE),dflt:"solid"},showscale:{valType:"boolean",dflt:!1}},Un()),marker:_E({symbol:{valType:"enumerated",values:Object.keys(yE),dflt:"circle",arrayOk:!0},size:_E({},AE.size,{dflt:8}),sizeref:AE.sizeref,sizemin:AE.sizemin,sizemode:AE.sizemode,opacity:_E({},AE.opacity,{arrayOk:!1}),showscale:AE.showscale,colorbar:AE.colorbar,line:_E({width:_E({},TE.width,{arrayOk:!1})},Un())},Un()),textposition:_E({},Gn.textposition,{dflt:"top center"}),textfont:Gn.textfont,hoverinfo:_E({},L.hoverinfo)},"calc","nested");kE.x.editType=kE.y.editType=kE.z.editType="calc+clearAxisTypes";var EE=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),LE=im(["precision mediump float;\n#define GLSLIFY 1\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}"]),CE=function(t){return nm(t,EE,LE,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])},SE=function(t){var e=t.gl,r=jg(e),n=Xg(e,[{buffer:r,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:r,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:r,type:e.FLOAT,size:3,offset:28,stride:40}]),i=CE(e);i.attributes.position.location=0,i.attributes.color.location=1,i.attributes.offset.location=2;var a=new RE(e,r,n,i);return a.update(t),a},PE=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function RE(t,e,r,n){this.gl=t,this.shader=n,this.buffer=e,this.vao=r,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}var OE=RE.prototype;function IE(t,e){for(var r=0;r<3;++r)t[0][r]=Math.min(t[0][r],e[r]),t[1][r]=Math.max(t[1][r],e[r])}OE.isOpaque=function(){return this.opacity>=1},OE.isTransparent=function(){return this.opacity<1},OE.drawTransparent=OE.draw=function(t){var e=this.gl,r=this.shader.uniforms;this.shader.bind();var n=r.view=t.view||PE,i=r.projection=t.projection||PE;r.model=t.model||PE,r.clipBounds=this.clipBounds,r.opacity=this.opacity;var a=n[12],o=n[13],s=n[14],l=n[15],u=this.pixelRatio*(i[3]*a+i[7]*o+i[11]*s+i[15]*l)/e.drawingBufferHeight;this.vao.bind();for(var c=0;c<3;++c)e.lineWidth(this.lineWidth[c]),r.capSize=this.capSize[c]*u,this.lineCount[c]&&e.drawArrays(e.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var NE=function(){for(var t=new Array(3),e=0;e<3;++e){for(var r=[],n=1;n<=2;++n)for(var i=-1;i<=1;i+=2){var a=[0,0,0];a[(n+e)%3]=i,r.push(a)}t[e]=r}return t}();function DE(t,e,r,n){for(var i=NE[n],a=0;a<i.length;++a){var o=i[a];t.push(e[0],e[1],e[2],r[0],r[1],r[2],r[3],o[0],o[1],o[2])}return i.length}OE.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in t&&(this.opacity=t.opacity);var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],r=t.position,n=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),r&&n){var i=[],a=r.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;t:for(var l=0;l<a;++l){for(var u=r[l],c=0;c<3;++c)if(isNaN(u[c])||!isFinite(u[c]))continue t;var h=n[l],f=e[s];if(Array.isArray(f[0])&&(f=e[l]),3===f.length&&(f=[f[0],f[1],f[2],1]),!isNaN(h[0][s])&&!isNaN(h[1][s])){var d;if(h[0][s]<0)(d=u.slice())[s]+=h[0][s],i.push(u[0],u[1],u[2],f[0],f[1],f[2],f[3],0,0,0,d[0],d[1],d[2],f[0],f[1],f[2],f[3],0,0,0),IE(this.bounds,d),o+=2+DE(i,d,f,s);if(h[1][s]>0)(d=u.slice())[s]+=h[1][s],i.push(u[0],u[1],u[2],f[0],f[1],f[2],f[3],0,0,0,d[0],d[1],d[2],f[0],f[1],f[2],f[3],0,0,0),IE(this.bounds,d),o+=2+DE(i,d,f,s)}}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(i)}},OE.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};var zE={},FE=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),jE=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),BE=im(["precision mediump float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1540259130(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1540259130(pixelArcLength).xyz);\n}"]),UE=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];zE.createShader=function(t){return nm(t,FE,jE,null,UE)},zE.createPickShader=function(t){return nm(t,FE,BE,null,UE)};var VE=function(t,e,r,n){return HE[0]=n,HE[1]=r,HE[2]=e,HE[3]=t,qE[0]},HE=new Uint8Array(4),qE=new Float32Array(HE.buffer);var GE=function(t){var e=t.gl||t.scene&&t.scene.gl,r=XE(e);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;var n=WE(e);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;for(var i=jg(e),a=Xg(e,[{buffer:i,size:3,offset:0,stride:48},{buffer:i,size:3,offset:12,stride:48},{buffer:i,size:1,offset:24,stride:48},{buffer:i,size:1,offset:28,stride:48},{buffer:i,size:4,offset:32,stride:48}]),o=Ip(new Array(1024),[256,1,4]),s=0;s<1024;++s)o.data[s]=255;var l=RM(e,o);l.wrap=e.REPEAT;var u=new $E(e,r,n,i,a,l);return u.update(t),u},XE=zE.createShader,WE=zE.createPickShader,YE=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function ZE(t,e){for(var r=0,n=0;n<3;++n){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}function QE(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],r=0;r<3;++r)e[0][r]=Math.max(t[0][r],e[0][r]),e[1][r]=Math.min(t[1][r],e[1][r]);return e}function KE(t,e,r,n){this.arcLength=t,this.position=e,this.index=r,this.dataCoordinate=n}function $E(t,e,r,n,i,a){this.gl=t,this.shader=e,this.pickShader=r,this.buffer=n,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}var JE=$E.prototype;JE.isTransparent=function(){return this.opacity<1},JE.isOpaque=function(){return this.opacity>=1},JE.pickSlots=1,JE.setPickBase=function(t){this.pickId=t},JE.drawTransparent=JE.draw=function(t){var e=this.gl,r=this.shader,n=this.vao;r.bind(),r.uniforms={model:t.model||YE,view:t.view||YE,projection:t.projection||YE,clipBounds:QE(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()},JE.drawPick=function(t){var e=this.gl,r=this.pickShader,n=this.vao;r.bind(),r.uniforms={model:t.model||YE,view:t.view||YE,projection:t.projection||YE,pickId:this.pickId,clipBounds:QE(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()},JE.update=function(t){var e,r;this.dirty=!0;var n=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),"opacity"in t&&(this.opacity=+t.opacity);var i=t.position||t.positions;if(i){var a=t.color||t.colors||[0,0,0,1],o=t.lineWidth||1,s=[],l=[],u=[],c=0,h=0,f=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],d=!1;t:for(e=1;e<i.length;++e){var p,g,v,m=i[e-1],y=i[e];for(l.push(c),u.push(m.slice()),r=0;r<3;++r){if(isNaN(m[r])||isNaN(y[r])||!isFinite(m[r])||!isFinite(y[r])){if(!n&&s.length>0){for(var b=0;b<24;++b)s.push(s[s.length-12]);h+=2,d=!0}continue t}f[0][r]=Math.min(f[0][r],m[r],y[r]),f[1][r]=Math.max(f[1][r],m[r],y[r])}Array.isArray(a[0])?(p=a[e-1],g=a[e]):p=g=a,3===p.length&&(p=[p[0],p[1],p[2],1]),3===g.length&&(g=[g[0],g[1],g[2],1]),v=Array.isArray(o)?o[e-1]:o;var x=c;if(c+=ZE(m,y),d){for(r=0;r<2;++r)s.push(m[0],m[1],m[2],y[0],y[1],y[2],x,v,p[0],p[1],p[2],p[3]);h+=2,d=!1}s.push(m[0],m[1],m[2],y[0],y[1],y[2],x,v,p[0],p[1],p[2],p[3],m[0],m[1],m[2],y[0],y[1],y[2],x,-v,p[0],p[1],p[2],p[3],y[0],y[1],y[2],m[0],m[1],m[2],c,-v,g[0],g[1],g[2],g[3],y[0],y[1],y[2],m[0],m[1],m[2],c,v,g[0],g[1],g[2],g[3]),h+=4}if(this.buffer.update(s),l.push(c),u.push(i[i.length-1].slice()),this.bounds=f,this.vertexCount=h,this.points=u,this.arcLength=l,"dashes"in t){var _=t.dashes.slice();for(_.unshift(0),e=1;e<_.length;++e)_[e]=_[e-1]+_[e];var w=Ip(new Array(1024),[256,1,4]);for(e=0;e<256;++e){for(r=0;r<4;++r)w.set(e,0,r,0);1&Vf.le(_,_[_.length-1]*e/255)?w.set(e,0,0,0):w.set(e,0,0,255)}this.texture.setPixels(w)}}},JE.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},JE.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=VE(t.value[0],t.value[1],t.value[2],0),r=Vf.le(this.arcLength,e);if(r<0)return null;if(r===this.arcLength.length-1)return new KE(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r);for(var n=this.points[r],i=this.points[Math.min(r+1,this.points.length-1)],a=(e-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),o=1-a,s=[0,0,0],l=0;l<3;++l)s[l]=o*n[l]+a*i[l];var u=Math.min(a<.5?r:r+1,this.points.length-1);return new KE(e,s,u,this.points[u])};var tL=function(t,e){var r=eL[e];r||(r=eL[e]={});if(t in r)return r[t];for(var n=rM(t,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:e}),i=rM(t,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:e}),a=[[1/0,1/0],[-1/0,-1/0]],o=0;o<n.positions.length;++o)for(var s=n.positions[o],l=0;l<2;++l)a[0][l]=Math.min(a[0][l],s[l]),a[1][l]=Math.max(a[1][l],s[l]);return r[t]=[i,n,a]},eL={};var rL={},nL=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),iL=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),aL=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),oL=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n"]),sL=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}"]),lL=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],uL={vertex:nL,fragment:oL,attributes:lL},cL={vertex:iL,fragment:oL,attributes:lL},hL={vertex:aL,fragment:oL,attributes:lL},fL={vertex:nL,fragment:sL,attributes:lL},dL={vertex:iL,fragment:sL,attributes:lL},pL={vertex:aL,fragment:sL,attributes:lL};function gL(t,e){var r=nm(t,e),n=r.attributes;return n.position.location=0,n.color.location=1,n.glyph.location=2,n.id.location=3,r}rL.createPerspective=function(t){return gL(t,uL)},rL.createOrtho=function(t){return gL(t,cL)},rL.createProject=function(t){return gL(t,hL)},rL.createPickPerspective=function(t){return gL(t,fL)},rL.createPickOrtho=function(t){return gL(t,dL)},rL.createPickProject=function(t){return gL(t,pL)};var vL=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],mL=function(t){var e=t.gl,r=rL.createPerspective(e),n=rL.createOrtho(e),i=rL.createProject(e),a=rL.createPickPerspective(e),o=rL.createPickOrtho(e),s=rL.createPickProject(e),l=jg(e),u=jg(e),c=jg(e),h=jg(e),f=Xg(e,[{buffer:l,size:3,type:e.FLOAT},{buffer:u,size:4,type:e.FLOAT},{buffer:c,size:2,type:e.FLOAT},{buffer:h,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),d=new xL(e,r,n,i,l,u,c,h,f,a,o,s);return d.update(t),d};function yL(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];return t[0]=e[0]*r+e[4]*n+e[8]*i+e[12]*a,t[1]=e[1]*r+e[5]*n+e[9]*i+e[13]*a,t[2]=e[2]*r+e[6]*n+e[10]*i+e[14]*a,t[3]=e[3]*r+e[7]*n+e[11]*i+e[15]*a,t}function bL(t,e,r,n){return yL(n,n),yL(n,n),yL(n,n)}function xL(t,e,r,n,i,a,o,s,l,u,c,h){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=r,this.projectShader=n,this.pointBuffer=i,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=u,this.pickOrthoShader=c,this.pickProjectShader=h,this.points=[],this._selectResult=new function(t,e){this.index=t,this.dataCoordinate=this.position=e}(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var _L=xL.prototype;_L.pickSlots=1,_L.setPickBase=function(t){this.pickId=t},_L.isTransparent=function(){if(this.opacity<1)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectOpacity[t]<1)return!0;return!1},_L.isOpaque=function(){if(this.opacity>=1)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectOpacity[t]>=1)return!0;return!1};var wL=[0,0],ML=[0,0,0],AL=[0,0,0],TL=[0,0,0,1],kL=[0,0,0,1],EL=vL.slice(),LL=[0,0,0],CL=[[0,0,0],[0,0,0]];function SL(t){return t[0]=t[1]=t[2]=0,t}function PL(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function RL(t,e,r,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[r]=n,t}function OL(t,e,r,n,i){var a,o=e.axesProject,s=e.gl,l=t.uniforms,u=r.model||vL,c=r.view||vL,h=r.projection||vL,f=e.axesBounds,d=function(t){for(var e=CL,r=0;r<2;++r)for(var n=0;n<3;++n)e[r][n]=Math.max(Math.min(t[r][n],1e8),-1e8);return e}(e.clipBounds);a=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],wL[0]=2/s.drawingBufferWidth,wL[1]=2/s.drawingBufferHeight,t.bind(),l.view=c,l.projection=h,l.screenSize=wL,l.highlightId=e.highlightId,l.highlightScale=e.highlightScale,l.clipBounds=d,l.pickGroup=e.pickId/255,l.pixelRatio=e.pixelRatio;for(var p=0;p<3;++p)if(o[p]&&e.projectOpacity[p]<1===n){l.scale=e.projectScale[p],l.opacity=e.projectOpacity[p];for(var g=EL,v=0;v<16;++v)g[v]=0;for(v=0;v<4;++v)g[5*v]=1;g[5*p]=0,a[p]<0?g[12+p]=f[0][p]:g[12+p]=f[1][p],dd(g,u,g),l.model=g;var m=(p+1)%3,y=(p+2)%3,b=SL(ML),x=SL(AL);b[m]=1,x[y]=1;var _=bL(0,0,0,PL(TL,b)),w=bL(0,0,0,PL(kL,x));if(Math.abs(_[1])>Math.abs(w[1])){var M=_;_=w,w=M,M=b,b=x,x=M;var A=m;m=y,y=A}_[0]<0&&(b[m]=-1),w[1]>0&&(x[y]=-1);var T=0,k=0;for(v=0;v<4;++v)T+=Math.pow(u[4*m+v],2),k+=Math.pow(u[4*y+v],2);b[m]/=Math.sqrt(T),x[y]/=Math.sqrt(k),l.axes[0]=b,l.axes[1]=x,l.fragClipBounds[0]=RL(LL,d[0],p,-1e8),l.fragClipBounds[1]=RL(LL,d[1],p,1e8),e.vao.draw(s.TRIANGLES,e.vertexCount),e.lineWidth>0&&(s.lineWidth(e.lineWidth),e.vao.draw(s.LINES,e.lineVertexCount,e.vertexCount))}}var IL=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function NL(t,e,r,n,i,a){var o=r.gl;if(r.vao.bind(),i===r.opacity<1||a){t.bind();var s=t.uniforms;s.model=n.model||vL,s.view=n.view||vL,s.projection=n.projection||vL,wL[0]=2/o.drawingBufferWidth,wL[1]=2/o.drawingBufferHeight,s.screenSize=wL,s.highlightId=r.highlightId,s.highlightScale=r.highlightScale,s.fragClipBounds=IL,s.clipBounds=r.axes.bounds,s.opacity=r.opacity,s.pickGroup=r.pickId/255,s.pixelRatio=r.pixelRatio,r.vao.draw(o.TRIANGLES,r.vertexCount),r.lineWidth>0&&(o.lineWidth(r.lineWidth),r.vao.draw(o.LINES,r.lineVertexCount,r.vertexCount))}OL(e,r,n,i),r.vao.unbind()}_L.draw=function(t){NL(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,!1,!1)},_L.drawTransparent=function(t){NL(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,!0,!1)},_L.drawPick=function(t){NL(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,!1,!0)},_L.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var r=this.points[e],n=this._selectResult;n.index=e;for(var i=0;i<3;++i)n.position[i]=n.dataCoordinate[i]=r[i];return n},_L.highlight=function(t){if(t){var e=t.index,r=255&e,n=e>>8&255,i=e>>16&255;this.highlightId=[r/255,n/255,i/255,0]}else this.highlightId=[1,1,1,1]},_L.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t)if(Array.isArray(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}if("projectScale"in t)if(Array.isArray(t.projectScale))this.projectScale=t.projectScale.slice();else{var r=+t.projectScale;this.projectScale=[r,r,r]}if("projectOpacity"in t)if(Array.isArray(t.projectOpacity))this.projectOpacity=t.projectOpacity.slice();else{r=+t.projectOpacity;this.projectOpacity=[r,r,r]}"opacity"in t&&(this.opacity=t.opacity),this.dirty=!0;var n=t.position;if(n){var i=t.font||"normal",a=t.alignment||[0,0],o=[1/0,1/0,1/0],s=[-1/0,-1/0,-1/0],l=t.glyph,u=t.color,c=t.size,h=t.angle,f=t.lineColor,d=0,p=0,g=0,v=n.length;t:for(var m=0;m<v;++m){for(var y=n[m],b=0;b<3;++b)if(isNaN(y[b])||!isFinite(y[b]))continue t;var x=(N=Array.isArray(l)?tL(l[m],i):tL(l||"\u25cf",i))[0],_=N[1],w=N[2];p+=3*x.cells.length,g+=2*_.edges.length}var M=p+g,A=Og.mallocFloat(3*M),T=Og.mallocFloat(4*M),k=Og.mallocFloat(2*M),E=Og.mallocUint32(M),L=[0,a[1]],C=0,S=p,P=[0,0,0,1],R=[0,0,0,1],O=Array.isArray(u)&&Array.isArray(u[0]),I=Array.isArray(f)&&Array.isArray(f[0]);t:for(m=0;m<v;++m){var N;for(y=n[m],b=0;b<3;++b){if(isNaN(y[b])||!isFinite(y[b])){d+=1;continue t}s[b]=Math.max(s[b],y[b]),o[b]=Math.min(o[b],y[b])}var D;x=(N=Array.isArray(l)?tL(l[m],i):tL(l||"\u25cf",i))[0],_=N[1],w=N[2];if(Array.isArray(u)){if(3===(D=O?u[m]:u).length){for(b=0;b<3;++b)P[b]=D[b];P[3]=1}else if(4===D.length)for(b=0;b<4;++b)P[b]=D[b]}else P[0]=P[1]=P[2]=0,P[3]=1;if(Array.isArray(f)){if(3===(D=I?f[m]:f).length){for(b=0;b<3;++b)R[b]=D[b];R[b]=1}else if(4===D.length)for(b=0;b<4;++b)R[b]=D[b]}else R[0]=R[1]=R[2]=0,R[3]=1;var z=.5;Array.isArray(c)?z=+c[m]:c?z=+c:this.useOrtho&&(z=12);var F=0;Array.isArray(h)?F=+h[m]:h&&(F=+h);var j=Math.cos(F),B=Math.sin(F);for(y=n[m],b=0;b<3;++b)s[b]=Math.max(s[b],y[b]),o[b]=Math.min(o[b],y[b]);a[0]<0?L[0]=a[0]*(1+w[1][0]):a[0]>0&&(L[0]=-a[0]*(1+w[0][0]));var U=x.cells,V=x.positions;for(b=0;b<U.length;++b)for(var H=U[b],q=0;q<3;++q){for(var G=0;G<3;++G)A[3*C+G]=y[G];for(G=0;G<4;++G)T[4*C+G]=P[G];E[C]=d;var X=V[H[q]];k[2*C]=z*(j*X[0]-B*X[1]+L[0]),k[2*C+1]=z*(B*X[0]+j*X[1]+L[1]),C+=1}for(U=_.edges,V=_.positions,b=0;b<U.length;++b)for(H=U[b],q=0;q<2;++q){for(G=0;G<3;++G)A[3*S+G]=y[G];for(G=0;G<4;++G)T[4*S+G]=R[G];E[S]=d;X=V[H[q]];k[2*S]=z*(j*X[0]-B*X[1]+L[0]),k[2*S+1]=z*(B*X[0]+j*X[1]+L[1]),S+=1}d+=1}this.vertexCount=p,this.lineVertexCount=g,this.pointBuffer.update(A),this.colorBuffer.update(T),this.glyphBuffer.update(k),this.idBuffer.update(new Uint32Array(E)),Og.free(A),Og.free(T),Og.free(k),Og.free(E),this.bounds=[o,s],this.points=n,this.pointCount=n.length}},_L.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};var DL=C.defaultLine,zL=jA(DL),FL=1;function jL(t,e){var r=t;return r[3]*=e,r}function BL(t){if(e(t))return zL;var r=jA(t);return r.length?r:zL}function UL(t){return e(t)?t:FL}var VL=function(t,e,r){var n,i,a,o,s,l=t.color,u=Array.isArray(l),c=Array.isArray(e),h=[];if(n=void 0!==t.colorscale?Or.makeColorScaleFunc(Or.extractScale(t.colorscale,t.cmin,t.cmax)):BL,i=u?function(t,e){return void 0===t[e]?zL:jA(n(t[e]))}:BL,a=c?function(t,e){return void 0===t[e]?FL:UL(t[e])}:UL,u||c)for(var f=0;f<r;f++)o=i(l,f),s=a(e,f),h[f]=jL(o,s);else h=jL(jA(l),e);return h};function HL(t,e,r){if(!e||!e.visible)return null;for(var n=vo(e),i=new Array(t.length),a=0;a<t.length;a++){var o=n(+t[a],a);i[a]=[-o[0]*r,o[1]*r]}return i}var qL=function(t,e){var r=[HL(t.x,t.error_x,e[0]),HL(t.y,t.error_y,e[1]),HL(t.z,t.error_z,e[2])],n=function(t){for(var e=0;e<t.length;e++)if(t[e])return t[e].length;return 0}(r);if(0===n)return null;for(var i=new Array(n),a=0;a<n;a++){for(var o=[[0,0,0],[0,0,0]],s=0;s<3;s++)if(r[s])for(var l=0;l<2;l++)o[l][s]=r[s][a][l];i[a]=o}return i};function GL(t,e){this.scene=t,this.uid=e,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var XL=GL.prototype;function WL(t,e){return e(4*t)}function YL(t){return yE[t]}function ZL(t,e,r,n,i){var a=null;if(re.isArrayOrTypedArray(t)){a=[];for(var o=0;o<e;o++)void 0===t[o]?a[o]=n:a[o]=r(t[o],i)}else a=r(t,re.identity);return a}function QL(t,e){var r,n,i,a,o,s,l,u,c=[],h=t.fullSceneLayout,f=t.dataScale,d=h.xaxis,p=h.yaxis,g=h.zaxis,v=e.marker,m=e.line,y=e.x||[],b=e.y||[],x=e.z||[],_=y.length,w=e.xcalendar,M=e.ycalendar,A=e.zcalendar;for(n=0;n<_;n++)i=d.d2l(y[n],0,w)*f[0],a=p.d2l(b[n],0,M)*f[1],o=g.d2l(x[n],0,A)*f[2],c[n]=[i,a,o];if(Array.isArray(e.text))s=e.text;else if(void 0!==e.text)for(s=new Array(_),n=0;n<_;n++)s[n]=e.text;if(r={position:c,mode:e.mode,text:s},"line"in e&&(r.lineColor=VL(m,1,_),r.lineWidth=m.width,r.lineDashes=m.dash),"marker"in e){var T=un(e);r.scatterColor=VL(v,1,_),r.scatterSize=ZL(v.size,_,WL,20,T),r.scatterMarker=ZL(v.symbol,_,YL,"\u25cf"),r.scatterLineWidth=v.line.width,r.scatterLineColor=VL(v.line,1,_),r.scatterAngle=0}"textposition"in e&&(r.textOffset=(l=e.textposition,u=[0,0],Array.isArray(l)?[0,-1]:(l.indexOf("bottom")>=0&&(u[1]+=1),l.indexOf("top")>=0&&(u[1]-=1),l.indexOf("left")>=0&&(u[0]-=1),l.indexOf("right")>=0&&(u[0]+=1),u)),r.textColor=VL(e.textfont,1,_),r.textSize=ZL(e.textfont.size,_,re.identity,12),r.textFont=e.textfont.family,r.textAngle=0);var k=["x","y","z"];for(r.project=[!1,!1,!1],r.projectScale=[1,1,1],r.projectOpacity=[1,1,1],n=0;n<3;++n){var E=e.projection[k[n]];(r.project[n]=E.show)&&(r.projectOpacity[n]=E.opacity,r.projectScale[n]=E.scale)}r.errorBounds=qL(e,f);var L=function(t){for(var e=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],n=[0,0,0],i=0;i<3;i++){var a=t[i];a&&!1!==a.copy_zstyle&&(a=t[2]),a&&(e[i]=a.width/2,r[i]=BA(a.color),n=a.thickness)}return{capSize:e,color:r,lineWidth:n}}([e.error_x,e.error_y,e.error_z]);return r.errorColor=L.color,r.errorLineWidth=L.lineWidth,r.errorCapSize=L.capSize,r.delaunayAxis=e.surfaceaxis,r.delaunayColor=BA(e.surfacecolor),r}function KL(t){if(Array.isArray(t)){var e=t[0];return Array.isArray(e)&&(t=e),"rgb("+t.slice(0,3).map(function(t){return Math.round(255*t)})+")"}return null}XL.handlePick=function(t){if(t.object&&(t.object===this.linePlot||t.object===this.delaunayMesh||t.object===this.textMarkers||t.object===this.scatterPlot)){t.object.highlight&&t.object.highlight(null),this.scatterPlot&&(t.object=this.scatterPlot,this.scatterPlot.highlight(t.data)),this.textLabels?void 0!==this.textLabels[t.data.index]?t.textLabel=this.textLabels[t.data.index]:t.textLabel=this.textLabels:t.textLabel="";var e=t.index=t.data.index;return t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]],!0}},XL.update=function(t){var e,r,n,i,a=this.scene.glplot.gl,o=bE.solid;this.data=t;var s=QL(this.scene,t);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in bE&&(o=bE[s.lineDashes]),this.color=KL(s.scatterColor)||KL(s.lineColor),this.dataPoints=s.position,e={gl:a,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:t.opacity,connectGaps:t.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(e):(this.linePlot=GE(e),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=t.opacity;if(t.marker&&t.marker.opacity&&(l*=t.marker.opacity),r={gl:a,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(r):(this.scatterPlot=mL(r),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),i={gl:a,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:t.opacity},this.textLabels=t.hovertext||t.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(i):(this.textMarkers=mL(i),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:a,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:t.opacity},this.errorBars?s.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=SE(n),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var u=function(t,e,r){var n,i=(r+1)%3,a=(r+2)%3,o=[],s=[];for(n=0;n<t.length;++n){var l=t[n];!isNaN(l[i])&&isFinite(l[i])&&!isNaN(l[a])&&isFinite(l[a])&&(o.push([l[i],l[a]]),s.push(n))}var u=qT(o);for(n=0;n<u.length;++n)for(var c=u[n],h=0;h<c.length;++h)c[h]=s[c[h]];return{positions:t,cells:u,meshColor:e}}(s.position,s.delaunayColor,s.delaunayAxis);u.opacity=t.opacity,this.delaunayMesh?this.delaunayMesh.update(u):(u.gl=a,this.delaunayMesh=cE(u),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},XL.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};var $L=function(t,e){var r=new GL(t,e.uid);return r.update(e),r};var JL={};JL.plot=$L,JL.attributes=xE,JL.markerSymbols=yE,JL.supplyDefaults=function(t,e,r,n){function i(r,n){return re.coerce(t,e,xE,r,n)}if(function(t,e,r,n){var i=0,a=r("x"),o=r("y"),s=r("z");return R.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],n),a&&o&&s&&(i=Math.min(a.length,o.length,s.length),e._xlength=e._ylength=e._zlength=i),i}(t,e,i,n)){i("text"),i("hovertext"),i("mode"),cn.hasLines(e)&&(i("connectgaps"),lf(t,e,r,n,i)),cn.hasMarkers(e)&&cf(t,e,r,n,i,{noSelect:!0}),cn.hasText(e)&&hf(0,0,n,i,{noSelect:!0});var a=(e.line||{}).color,o=(e.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",a||o);for(var s=["x","y","z"],l=0;l<3;++l){var u="projection."+s[l];i(u+".show")&&(i(u+".opacity"),i(u+".scale"))}var c=R.getComponentMethod("errorbars","supplyDefaults");c(t,e,r,{axis:"z"}),c(t,e,r,{axis:"y",inherit:"z"}),c(t,e,r,{axis:"x",inherit:"z"})}else e.visible=!1},JL.colorbar=af,JL.calc=function(t,e){var r=[{x:!1,y:!1,trace:e,t:{}}];return Xh(r,e),Yh(e),r},JL.moduleType="trace",JL.name="scatter3d",JL.basePlotModule=cT,JL.categories=["gl3d","symbols","markerColorscale","showLegend"],JL.meta={};var tC=JL,eC={},rC=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),nC=im(["precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor = step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) + step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),iC=im(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = f;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),aC=im(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);eC.createShader=function(t){var e=nm(t,rC,nC,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},eC.createPickShader=function(t){var e=nm(t,rC,aC,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},eC.createContourShader=function(t){var e=nm(t,iC,nC,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},eC.createPickContourShader=function(t){var e=nm(t,iC,aC,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e};var oC=function(t,e,r){if(Array.isArray(r)){if(r.length!==e.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else r=Rg(e.dimension,"string"==typeof r?r:"clamp");if(t.dimension!==e.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(t.shape[e.dimension]!==e.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var n=0;n<e.dimension;++n)if(t.shape[n]!==e.shape[n])throw new Error("ndarray-gradient: shape mismatch");if(0===e.size)return t;if(e.dimension<=0)return t.set(0),t;return function(t){var e=t.join();if(f=lC[e])return f;var r=t.length,n=["function gradient(dst,src){var s=src.shape.slice();"];function i(e){for(var i=r-e.length,a=[],o=[],s=[],l=0;l<r;++l)e.indexOf(l+1)>=0?s.push("0"):e.indexOf(-(l+1))>=0?s.push("s["+l+"]-1"):(s.push("-1"),a.push("1"),o.push("s["+l+"]-2"));var u=".lo("+a.join()+").hi("+o.join()+")";if(0===a.length&&(u=""),i>0){n.push("if(1");for(var l=0;l<r;++l)e.indexOf(l+1)>=0||e.indexOf(-(l+1))>=0||n.push("&&s[",l,"]>2");n.push("){grad",i,"(src.pick(",s.join(),")",u);for(var l=0;l<r;++l)e.indexOf(l+1)>=0||e.indexOf(-(l+1))>=0||n.push(",dst.pick(",s.join(),",",l,")",u);n.push(");")}for(var l=0;l<e.length;++l){var c=Math.abs(e[l])-1,h="dst.pick("+s.join()+","+c+")"+u;switch(t[c]){case"clamp":var f=s.slice(),d=s.slice();e[l]<0?f[c]="s["+c+"]-2":d[c]="1",0===i?n.push("if(s[",c,"]>1){dst.set(",s.join(),",",c,",0.5*(src.get(",f.join(),")-src.get(",d.join(),")))}else{dst.set(",s.join(),",",c,",0)};"):n.push("if(s[",c,"]>1){diff(",h,",src.pick(",f.join(),")",u,",src.pick(",d.join(),")",u,");}else{zero(",h,");};");break;case"mirror":0===i?n.push("dst.set(",s.join(),",",c,",0);"):n.push("zero(",h,");");break;case"wrap":var p=s.slice(),g=s.slice();e[l]<0?(p[c]="s["+c+"]-2",g[c]="0"):(p[c]="s["+c+"]-1",g[c]="1"),0===i?n.push("if(s[",c,"]>2){dst.set(",s.join(),",",c,",0.5*(src.get(",p.join(),")-src.get(",g.join(),")))}else{dst.set(",s.join(),",",c,",0)};"):n.push("if(s[",c,"]>2){diff(",h,",src.pick(",p.join(),")",u,",src.pick(",g.join(),")",u,");}else{zero(",h,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}i>0&&n.push("};")}for(var a=0;a<1<<r;++a){for(var o=[],s=0;s<r;++s)a&1<<s&&o.push(s+1);for(var l=0;l<1<<o.length;++l){for(var u=o.slice(),s=0;s<o.length;++s)l&1<<s&&(u[s]=-u[s]);i(u)}}n.push("return dst;};return gradient");for(var c=["diff","zero"],h=[cC,hC],a=1;a<=r;++a)c.push("grad"+a),h.push(fC(a));c.push(n.join(""));var f=Function.apply(void 0,c).apply(void 0,h);return sC[e]=f,f}(r)(t,e)},sC={},lC={},uC={body:"",args:[],thisVars:[],localVars:[]},cC=gp({args:["array","array","array"],pre:uC,post:uC,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),hC=gp({args:["array"],pre:uC,post:uC,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"});function fC(t){if(t in sC)return sC[t];for(var e=[],r=0;r<t;++r)e.push("out",r,"s=0.5*(inp",r,"l-inp",r,"r);");var n=["array"],i=["junk"];for(r=0;r<t;++r){n.push("array"),i.push("out"+r+"s");var a=Rg(t);a[r]=-1,n.push({array:0,offset:a.slice()}),a[r]=1,n.push({array:0,offset:a.slice()}),i.push("inp"+r+"l","inp"+r+"r")}return sC[t]=gp({args:n,pre:uC,post:uC,body:{body:e.join(""),args:i.map(function(t){return{name:t,lvalue:0===t.indexOf("out"),rvalue:0===t.indexOf("inp"),count:"junk"!==t|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+t})}var dC=gp({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),pC=function(t,e){for(var r=[],n=t,i=1;Array.isArray(n);)r.push(n.length),i*=n.length,n=n[0];return 0===r.length?Ip():(e||(e=Ip(new Float64Array(i),r)),dC(e,t),e)},gC=function(t){var e=t.gl,r=vC(e),n=yC(e),i=mC(e),a=bC(e),o=jg(e),s=Xg(e,[{buffer:o,size:4,stride:xC,offset:0},{buffer:o,size:3,stride:xC,offset:16},{buffer:o,size:3,stride:xC,offset:28}]),l=jg(e),u=Xg(e,[{buffer:l,size:4,stride:20,offset:0},{buffer:l,size:1,stride:20,offset:16}]),c=jg(e),h=Xg(e,[{buffer:c,size:2,type:e.FLOAT}]),f=RM(e,1,AC,e.RGBA,e.UNSIGNED_BYTE);f.minFilter=e.LINEAR,f.magFilter=e.LINEAR;var d=new TC(e,[0,0],[[0,0,0],[0,0,0]],r,n,o,s,f,i,a,l,u,c,h),p={levels:[[],[],[]]};for(var g in t)p[g]=t[g];return p.colormap=p.colormap||"jet",d.update(p),d},vC=eC.createShader,mC=eC.createContourShader,yC=eC.createPickShader,bC=eC.createPickContourShader,xC=40,_C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],wC=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],MC=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var t=0;t<3;++t){var e=MC[t],r=(t+2)%3;e[(t+1)%3+0]=1,e[r+3]=1,e[t+6]=1}}();var AC=256;function TC(t,e,r,n,i,a,o,s,l,u,c,h,f,d){this.gl=t,this.shape=e,this.bounds=r,this.intensityBounds=[],this._shader=n,this._pickShader=i,this._coordinateBuffer=a,this._vao=o,this._colorMap=s,this._contourShader=l,this._contourPickShader=u,this._contourBuffer=c,this._contourVAO=h,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new function(t,e,r,n,i){this.position=t,this.index=e,this.uv=r,this.level=n,this.dataCoordinate=i}([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=f,this._dynamicVAO=d,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[Ip(Og.mallocFloat(1024),[0,0]),Ip(Og.mallocFloat(1024),[0,0]),Ip(Og.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var kC=TC.prototype;kC.isTransparent=function(){return this.opacity<1},kC.isOpaque=function(){if(this.opacity>=1)return!0;for(var t=0;t<3;++t)if(this._contourCounts[t].length>0||this._dynamicCounts[t]>0)return!0;return!1},kC.pickSlots=1,kC.setPickBase=function(t){this.pickId=t};var EC=[0,0,0],LC={showSurface:!1,showContour:!1,projections:[_C.slice(),_C.slice(),_C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function CC(t,e){var r,n,i,a=e.axes&&e.axes.lastCubeProps.axis||EC,o=e.showSurface,s=e.showContour;for(r=0;r<3;++r)for(o=o||e.surfaceProject[r],n=0;n<3;++n)s=s||e.contourProject[r][n];for(r=0;r<3;++r){var l=LC.projections[r];for(n=0;n<16;++n)l[n]=0;for(n=0;n<4;++n)l[5*n]=1;l[5*r]=0,l[12+r]=e.axesBounds[+(a[r]>0)][r],dd(l,t.model,l);var u=LC.clipBounds[r];for(i=0;i<2;++i)for(n=0;n<3;++n)u[i][n]=t.clipBounds[i][n];u[0][r]=-1e8,u[1][r]=1e8}return LC.showSurface=o,LC.showContour=s,LC}var SC={model:_C,view:_C,projection:_C,inverseModel:_C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},PC=_C.slice(),RC=[1,0,0,0,1,0,0,0,1];function OC(t,e){t=t||{};var r=this.gl;r.disable(r.CULL_FACE),this._colorMap.bind(0);var n=SC;n.model=t.model||_C,n.view=t.view||_C,n.projection=t.projection||_C,n.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],n.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],n.contourColor=this.contourColor[0],n.inverseModel=Hf(n.inverseModel,n.model);for(var i=0;i<2;++i)for(var a=n.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);n.kambient=this.ambientLight,n.kdiffuse=this.diffuseLight,n.kspecular=this.specularLight,n.roughness=this.roughness,n.fresnel=this.fresnel,n.opacity=this.opacity,n.height=0,n.permutation=RC,n.vertexColor=this.vertexColor;var s=PC;for(dd(s,n.view,n.model),dd(s,n.projection,s),Hf(s,s),i=0;i<3;++i)n.eyePosition[i]=s[12+i]/s[15];var l=s[15];for(i=0;i<3;++i)l+=this.lightPosition[i]*s[4*i+3];for(i=0;i<3;++i){var u=s[12+i];for(o=0;o<3;++o)u+=s[4*o+i]*this.lightPosition[o];n.lightPosition[i]=u/l}var c=CC(n,this);if(c.showSurface&&e===this.opacity<1){for(this._shader.bind(),this._shader.uniforms=n,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=c.projections[i],this._shader.uniforms.clipBounds=c.clipBounds[i],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour&&!e){var h=this._contourShader;n.kambient=1,n.kdiffuse=0,n.kspecular=0,n.opacity=1,h.bind(),h.uniforms=n;var f=this._contourVAO;for(f.bind(),i=0;i<3;++i)for(h.uniforms.permutation=MC[i],r.lineWidth(this.contourWidth[i]),o=0;o<this.contourLevels[i].length;++o)this._contourCounts[i][o]&&(o===this.highlightLevel[i]?(h.uniforms.contourColor=this.highlightColor[i],h.uniforms.contourTint=this.highlightTint[i]):0!==o&&o-1!==this.highlightLevel[i]||(h.uniforms.contourColor=this.contourColor[i],h.uniforms.contourTint=this.contourTint[i]),h.uniforms.height=this.contourLevels[i][o],f.draw(r.LINES,this._contourCounts[i][o],this._contourOffsets[i][o]));for(i=0;i<3;++i)for(h.uniforms.model=c.projections[i],h.uniforms.clipBounds=c.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){h.uniforms.permutation=MC[o],r.lineWidth(this.contourWidth[o]);for(var d=0;d<this.contourLevels[o].length;++d)d===this.highlightLevel[o]?(h.uniforms.contourColor=this.highlightColor[o],h.uniforms.contourTint=this.highlightTint[o]):0!==d&&d-1!==this.highlightLevel[o]||(h.uniforms.contourColor=this.contourColor[o],h.uniforms.contourTint=this.contourTint[o]),h.uniforms.height=this.contourLevels[o][d],f.draw(r.LINES,this._contourCounts[o][d],this._contourOffsets[o][d])}for(f.unbind(),(f=this._dynamicVAO).bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(h.uniforms.model=n.model,h.uniforms.clipBounds=n.clipBounds,h.uniforms.permutation=MC[i],r.lineWidth(this.dynamicWidth[i]),h.uniforms.contourColor=this.dynamicColor[i],h.uniforms.contourTint=this.dynamicTint[i],h.uniforms.height=this.dynamicLevel[i],f.draw(r.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),o=0;o<3;++o)this.contourProject[o][i]&&(h.uniforms.model=c.projections[o],h.uniforms.clipBounds=c.clipBounds[o],f.draw(r.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));f.unbind()}}kC.draw=function(t){return OC.call(this,t,!1)},kC.drawTransparent=function(t){return OC.call(this,t,!0)};var IC={model:_C,view:_C,projection:_C,inverseModel:_C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function NC(t,e){var r=e.shape.slice(),n=t.shape.slice();vp.assign(t.lo(1,1).hi(r[0],r[1]),e),vp.assign(t.lo(1).hi(r[0],1),e.hi(r[0],1)),vp.assign(t.lo(1,n[1]-1).hi(r[0],1),e.lo(0,r[1]-1).hi(r[0],1)),vp.assign(t.lo(0,1).hi(1,r[1]),e.hi(1)),vp.assign(t.lo(n[0]-1,1).hi(1,r[1]),e.lo(r[0]-1)),t.set(0,0,e.get(0,0)),t.set(0,n[1]-1,e.get(0,r[1]-1)),t.set(n[0]-1,0,e.get(r[0]-1,0)),t.set(n[0]-1,n[1]-1,e.get(r[0]-1,r[1]-1))}function DC(t,e){return Array.isArray(t)?[e(t[0]),e(t[1]),e(t[2])]:[e(t),e(t),e(t)]}function zC(t){return Array.isArray(t)?3===t.length?[t[0],t[1],t[2],1]:[t[0],t[1],t[2],t[3]]:[0,0,0,1]}function FC(t){if(Array.isArray(t)){if(Array.isArray(t))return[zC(t[0]),zC(t[1]),zC(t[2])];var e=zC(t);return[e.slice(),e.slice(),e.slice()]}}kC.drawPick=function(t){t=t||{};var e=this.gl;e.disable(e.CULL_FACE);var r=IC;r.model=t.model||_C,r.view=t.view||_C,r.projection=t.projection||_C,r.shape=this._field[2].shape,r.pickId=this.pickId/255,r.lowerBound=this.bounds[0],r.upperBound=this.bounds[1],r.permutation=RC;for(var n=0;n<2;++n)for(var i=r.clipBounds[n],a=0;a<3;++a)i[a]=Math.min(Math.max(this.clipBounds[n][a],-1e8),1e8);var o=CC(r,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=r,this._vao.bind(),this._vao.draw(e.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&(this._pickShader.uniforms.model=o.projections[n],this._pickShader.uniforms.clipBounds=o.clipBounds[n],this._vao.draw(e.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=r;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(e.lineWidth(this.contourWidth[a]),s.uniforms.permutation=MC[a],n=0;n<this.contourLevels[a].length;++n)this._contourCounts[a][n]&&(s.uniforms.height=this.contourLevels[a][n],l.draw(e.LINES,this._contourCounts[a][n],this._contourOffsets[a][n]));for(n=0;n<3;++n)for(s.uniforms.model=o.projections[n],s.uniforms.clipBounds=o.clipBounds[n],a=0;a<3;++a)if(this.contourProject[n][a]){s.uniforms.permutation=MC[a],e.lineWidth(this.contourWidth[a]);for(var u=0;u<this.contourLevels[a].length;++u)this._contourCounts[a][u]&&(s.uniforms.height=this.contourLevels[a][u],l.draw(e.LINES,this._contourCounts[a][u],this._contourOffsets[a][u]))}l.unbind()}},kC.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=this._field[2].shape,r=this._pickResult,n=e[0]*(t.value[0]+(t.value[2]>>4)/16)/255,i=Math.floor(n),a=n-i,o=e[1]*(t.value[1]+(15&t.value[2])/16)/255,s=Math.floor(o),l=o-s;i+=1,s+=1;var u=r.position;u[0]=u[1]=u[2]=0;for(var c=0;c<2;++c)for(var h=c?a:1-a,f=0;f<2;++f)for(var d=i+c,p=s+f,g=h*(f?l:1-l),v=0;v<3;++v)u[v]+=this._field[v].get(d,p)*g;for(var m=this._pickResult.level,y=0;y<3;++y)if(m[y]=Vf.le(this.contourLevels[y],u[y]),m[y]<0)this.contourLevels[y].length>0&&(m[y]=0);else if(m[y]<this.contourLevels[y].length-1){var b=this.contourLevels[y][m[y]],x=this.contourLevels[y][m[y]+1];Math.abs(b-u[y])>Math.abs(x-u[y])&&(m[y]+=1)}for(r.index[0]=a<.5?i:i+1,r.index[1]=l<.5?s:s+1,r.uv[0]=n/e[0],r.uv[1]=o/e[1],v=0;v<3;++v)r.dataCoordinate[v]=this._field[v].get(r.index[0],r.index[1]);return r},kC.update=function(t){t=t||{},this.dirty=!0,"contourWidth"in t&&(this.contourWidth=DC(t.contourWidth,Number)),"showContour"in t&&(this.showContour=DC(t.showContour,Boolean)),"showSurface"in t&&(this.showSurface=!!t.showSurface),"contourTint"in t&&(this.contourTint=DC(t.contourTint,Boolean)),"contourColor"in t&&(this.contourColor=FC(t.contourColor)),"contourProject"in t&&(this.contourProject=DC(t.contourProject,function(t){return DC(t,Boolean)})),"surfaceProject"in t&&(this.surfaceProject=t.surfaceProject),"dynamicColor"in t&&(this.dynamicColor=FC(t.dynamicColor)),"dynamicTint"in t&&(this.dynamicTint=DC(t.dynamicTint,Number)),"dynamicWidth"in t&&(this.dynamicWidth=DC(t.dynamicWidth,Number)),"opacity"in t&&(this.opacity=t.opacity),"colorBounds"in t&&(this.colorBounds=t.colorBounds),"vertexColor"in t&&(this.vertexColor=t.vertexColor?1:0);var e=t.field||t.coords&&t.coords[2]||null,r=!1;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in t||"coords"in t){var n=(e.shape[0]+2)*(e.shape[1]+2);n>this._field[2].data.length&&(Og.freeFloat(this._field[2].data),this._field[2].data=Og.mallocFloat(Np.nextPow2(n))),this._field[2]=Ip(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]),NC(this._field[2],e),this.shape=e.shape.slice();for(var i=this.shape,a=0;a<2;++a)this._field[2].size>this._field[a].data.length&&(Og.freeFloat(this._field[a].data),this._field[a].data=Og.mallocFloat(this._field[2].size)),this._field[a]=Ip(this._field[a].data,[i[0]+2,i[1]+2]);if(t.coords){var o=t.coords;if(!Array.isArray(o)||3!==o.length)throw new Error("gl-surface: invalid coordinates for x/y");for(a=0;a<2;++a){var s=o[a];for(f=0;f<2;++f)if(s.shape[f]!==i[f])throw new Error("gl-surface: coords have incorrect shape");NC(this._field[a],s)}}else if(t.ticks){var l=t.ticks;if(!Array.isArray(l)||2!==l.length)throw new Error("gl-surface: invalid ticks");for(a=0;a<2;++a){var u=l[a];if((Array.isArray(u)||u.length)&&(u=Ip(u)),u.shape[0]!==i[a])throw new Error("gl-surface: invalid tick length");var c=Ip(u.data,i);c.stride[a]=u.stride[0],c.stride[1^a]=0,NC(this._field[a],c)}}else{for(a=0;a<2;++a){var h=[0,0];h[a]=1,this._field[a]=Ip(this._field[a].data,[i[0]+2,i[1]+2],h,0)}this._field[0].set(0,0,0);for(var f=0;f<i[0];++f)this._field[0].set(f+1,0,f);for(this._field[0].set(i[0]+1,0,i[0]-1),this._field[1].set(0,0,0),f=0;f<i[1];++f)this._field[1].set(0,f+1,f);this._field[1].set(0,i[1]+1,i[1]-1)}var d=this._field,p=Ip(Og.mallocFloat(3*d[2].size*2),[3,i[0]+2,i[1]+2,2]);for(a=0;a<3;++a)oC(p.pick(a),d[a],"mirror");var g=Ip(Og.mallocFloat(3*d[2].size),[i[0]+2,i[1]+2,3]);for(a=0;a<i[0]+2;++a)for(f=0;f<i[1]+2;++f){var v=p.get(0,a,f,0),m=p.get(0,a,f,1),y=p.get(1,a,f,0),b=p.get(1,a,f,1),x=p.get(2,a,f,0),_=p.get(2,a,f,1),w=y*_-b*x,M=x*m-_*v,A=v*b-m*y,T=Math.sqrt(w*w+M*M+A*A);T<1e-8?(T=Math.max(Math.abs(w),Math.abs(M),Math.abs(A)))<1e-8?(A=1,M=w=0,T=1):T=1/T:T=1/Math.sqrt(T),g.set(a,f,0,w*T),g.set(a,f,1,M*T),g.set(a,f,2,A*T)}Og.free(p.data);var k=[1/0,1/0,1/0],E=[-1/0,-1/0,-1/0],L=1/0,C=-1/0,S=(i[0]-1)*(i[1]-1)*6,P=Og.mallocFloat(Np.nextPow2(10*S)),R=0,O=0;for(a=0;a<i[0]-1;++a)t:for(f=0;f<i[1]-1;++f){for(var I=0;I<2;++I)for(var N=0;N<2;++N)for(var D=0;D<3;++D){var z=this._field[D].get(1+a+I,1+f+N);if(isNaN(z)||!isFinite(z))continue t}for(D=0;D<6;++D){var F=a+wC[D][0],j=f+wC[D][1],B=this._field[0].get(F+1,j+1),U=this._field[1].get(F+1,j+1),V=z=this._field[2].get(F+1,j+1);w=g.get(F+1,j+1,0),M=g.get(F+1,j+1,1),A=g.get(F+1,j+1,2),t.intensity&&(V=t.intensity.get(F,j)),P[R++]=F,P[R++]=j,P[R++]=B,P[R++]=U,P[R++]=z,P[R++]=0,P[R++]=V,P[R++]=w,P[R++]=M,P[R++]=A,k[0]=Math.min(k[0],B),k[1]=Math.min(k[1],U),k[2]=Math.min(k[2],z),L=Math.min(L,V),E[0]=Math.max(E[0],B),E[1]=Math.max(E[1],U),E[2]=Math.max(E[2],z),C=Math.max(C,V),O+=1}}for(t.intensityBounds&&(L=+t.intensityBounds[0],C=+t.intensityBounds[1]),a=6;a<R;a+=10)P[a]=(P[a]-L)/(C-L);this._vertexCount=O,this._coordinateBuffer.update(P.subarray(0,R)),Og.freeFloat(P),Og.free(g.data),this.bounds=[k,E],this.intensity=t.intensity||this._field[2],this.intensityBounds[0]===L&&this.intensityBounds[1]===C||(r=!0),this.intensityBounds=[L,C]}if("levels"in t){var H=t.levels;for(H=Array.isArray(H[0])?H.slice():[[],[],H],a=0;a<3;++a)H[a]=H[a].slice(),H.sort(function(t,e){return t-e});t:for(a=0;a<3;++a){if(H[a].length!==this.contourLevels[a].length){r=!0;break}for(f=0;f<H[a].length;++f)if(H[a][f]!==this.contourLevels[a][f]){r=!0;break t}}this.contourLevels=H}if(r){d=this._field,i=this.shape;for(var q=[],G=0;G<3;++G){H=this.contourLevels[G];var X=[],W=[],Y=[0,0,0];for(a=0;a<H.length;++a){var Z=Kw(this._field[G],H[a]);X.push(q.length/5|0),O=0;t:for(f=0;f<Z.cells.length;++f){var Q=Z.cells[f];for(D=0;D<2;++D){var K=Z.positions[Q[D]],$=K[0],J=0|Math.floor($),tt=$-J,et=K[1],rt=0|Math.floor(et),nt=et-rt,it=!1;e:for(var at=0;at<3;++at){Y[at]=0;var ot=(G+at+1)%3;for(I=0;I<2;++I){var st=I?tt:1-tt;for(F=0|Math.min(Math.max(J+I,0),i[0]),N=0;N<2;++N){var lt=N?nt:1-nt;if(j=0|Math.min(Math.max(rt+N,0),i[1]),z=at<2?this._field[ot].get(F,j):(this.intensity.get(F,j)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(z)||isNaN(z)){it=!0;break e}var ut=st*lt;Y[at]+=ut*z}}}if(it){if(D>0){for(var ct=0;ct<5;++ct)q.pop();O-=1}continue t}q.push(Y[0],Y[1],K[0],K[1],Y[2]),O+=1}}W.push(O)}this._contourOffsets[G]=X,this._contourCounts[G]=W}var ht=Og.mallocFloat(q.length);for(a=0;a<q.length;++a)ht[a]=q[a];this._contourBuffer.update(ht),Og.freeFloat(ht)}t.colormap&&this._colorMap.setPixels(function(t){var e=pC([dk({colormap:t,nshades:AC,format:"rgba"}).map(function(t){return[t[0],t[1],t[2],255*t[3]]})]);return vp.divseq(e,255),e}(t.colormap))},kC.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var t=0;t<3;++t)Og.freeFloat(this._field[t].data)},kC.highlight=function(t){if(!t)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(var e=0;e<3;++e)this.enableHighlight[e]?this.highlightLevel[e]=t.level[e]:this.highlightLevel[e]=-1;var r;if(r=this.snapToData?t.dataCoordinate:t.position,this.enableDynamic[0]&&r[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&r[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&r[2]!==this.dynamicLevel[2]){for(var n=0,i=this.shape,a=Og.mallocFloat(12*i[0]*i[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=r[o];var s=(o+1)%3,l=(o+2)%3,u=this._field[o],c=this._field[s],h=this._field[l],f=(this.intensity,Kw(u,r[o])),d=f.cells,p=f.positions;for(this._dynamicOffsets[o]=n,e=0;e<d.length;++e)for(var g=d[e],v=0;v<2;++v){var m=p[g[v]],y=+m[0],b=0|y,x=0|Math.min(b+1,i[0]),_=y-b,w=1-_,M=+m[1],A=0|M,T=0|Math.min(A+1,i[1]),k=M-A,E=1-k,L=w*E,C=w*k,S=_*E,P=_*k,R=L*c.get(b,A)+C*c.get(b,T)+S*c.get(x,A)+P*c.get(x,T),O=L*h.get(b,A)+C*h.get(b,T)+S*h.get(x,A)+P*h.get(x,T);if(isNaN(R)||isNaN(O)){v&&(n-=1);break}a[2*n+0]=R,a[2*n+1]=O,n+=1}this._dynamicCounts[o]=n-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*n)),Og.freeFloat(a)}};var jC=lA({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_37_arg1_=_inline_37_arg2_.apply(void 0,_inline_37_arg0_)}",args:[{name:"_inline_37_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_37_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_37_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),BC=function(t,e){return jC(t,e),t},UC=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*a-i*n;return o?(o=1/o,t[0]=a*o,t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t):null};var VC=function(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*o-s*u,f=-c*a+s*l,d=u*a-o*l,p=r*h+n*f+i*d;return p?(p=1/p,t[0]=h*p,t[1]=(-c*n+i*u)*p,t[2]=(s*n-i*o)*p,t[3]=f*p,t[4]=(c*r-i*l)*p,t[5]=(-s*r+i*a)*p,t[6]=d*p,t[7]=(-u*r+n*l)*p,t[8]=(o*r-n*a)*p,t):null};var HC=function(t,e){switch(e.length){case 0:break;case 1:t[0]=1/e[0];break;case 4:UC(t,e);break;case 9:VC(t,e);break;case 16:Hf(t,e);break;default:throw new Error("currently supports matrices up to 4x4")}return t};var qC={};function GC(t,e){var r=Math.floor(e),n=e-r,i=0<=r&&r<t.shape[0],a=0<=r+1&&r+1<t.shape[0];return(1-n)*(i?+t.get(r):0)+n*(a?+t.get(r+1):0)}function XC(t,e,r){var n=Math.floor(e),i=e-n,a=0<=n&&n<t.shape[0],o=0<=n+1&&n+1<t.shape[0],s=Math.floor(r),l=r-s,u=0<=s&&s<t.shape[1],c=0<=s+1&&s+1<t.shape[1],h=a&&u?t.get(n,s):0,f=a&&c?t.get(n,s+1):0;return(1-l)*((1-i)*h+i*(o&&u?t.get(n+1,s):0))+l*((1-i)*f+i*(o&&c?t.get(n+1,s+1):0))}function WC(t,e,r,n){var i=Math.floor(e),a=e-i,o=0<=i&&i<t.shape[0],s=0<=i+1&&i+1<t.shape[0],l=Math.floor(r),u=r-l,c=0<=l&&l<t.shape[1],h=0<=l+1&&l+1<t.shape[1],f=Math.floor(n),d=n-f,p=0<=f&&f<t.shape[2],g=0<=f+1&&f+1<t.shape[2],v=o&&c&&p?t.get(i,l,f):0,m=o&&h&&p?t.get(i,l+1,f):0,y=s&&c&&p?t.get(i+1,l,f):0,b=s&&h&&p?t.get(i+1,l+1,f):0,x=o&&c&&g?t.get(i,l,f+1):0,_=o&&h&&g?t.get(i,l+1,f+1):0;return(1-d)*((1-u)*((1-a)*v+a*y)+u*((1-a)*m+a*b))+d*((1-u)*((1-a)*x+a*(s&&c&&g?t.get(i+1,l,f+1):0))+u*((1-a)*_+a*(s&&h&&g?t.get(i+1,l+1,f+1):0)))}(qC=function(t,e,r,n){switch(t.shape.length){case 0:return 0;case 1:return GC(t,e);case 2:return XC(t,e,r);case 3:return WC(t,e,r,n);default:return function(t){var e,r,n=0|t.shape.length,i=new Array(n),a=new Array(n),o=new Array(n),s=new Array(n);for(e=0;e<n;++e)r=+arguments[e+1],i[e]=Math.floor(r),a[e]=r-i[e],o[e]=0<=i[e]&&i[e]<t.shape[e],s[e]=0<=i[e]+1&&i[e]+1<t.shape[e];var l,u,c,h=0;t:for(e=0;e<1<<n;++e){for(u=1,c=t.offset,l=0;l<n;++l)if(e&1<<l){if(!s[l])continue t;u*=a[l],c+=t.stride[l]*(i[l]+1)}else{if(!o[l])continue t;u*=1-a[l],c+=t.stride[l]*i[l]}h+=u*t.data[c]}return h}.apply(void 0,arguments)}}).d1=GC,qC.d2=XC,qC.d3=WC;var YC=lA({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_39_arg4_)}",args:[{name:"_inline_39_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_39_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_39_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_39_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_39_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_40_arg2_(this_warped,_inline_40_arg0_),_inline_40_arg1_=_inline_40_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_40_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_40_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_40_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_40_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_40_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),ZC=lA({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_43_arg2_(this_warped,_inline_43_arg0_),_inline_43_arg1_=_inline_43_arg3_(_inline_43_arg4_,this_warped[0])}",args:[{name:"_inline_43_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_43_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_43_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_43_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_43_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),QC=lA({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_46_arg2_(this_warped,_inline_46_arg0_),_inline_46_arg1_=_inline_46_arg3_(_inline_46_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_46_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_46_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_46_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),KC=lA({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_49_arg2_(this_warped,_inline_49_arg0_),_inline_49_arg1_=_inline_49_arg3_(_inline_49_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_49_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_49_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_49_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64}),$C=function(t,e,r){switch(e.shape.length){case 1:ZC(t,r,qC.d1,e);break;case 2:QC(t,r,qC.d2,e);break;case 3:KC(t,r,qC.d3,e);break;default:YC(t,r,qC.bind(void 0,e),e.shape.length)}return t},JC=function(t,e,r){var n=e.dimension,i=HC([],r);return $C(t,e,function(t,e){for(var r=0;r<n;++r){t[r]=i[(n+1)*n+r];for(var a=0;a<n;++a)t[r]+=i[(n+1)*a+r]*e[a]}var o=i[(n+1)*(n+1)-1];for(a=0;a<n;++a)o+=i[(n+1)*a+n]*e[a];var s=1/o;for(r=0;r<n;++r)t[r]*=s;return t}),t};var tS=re.isArrayOrTypedArray,eS=128;function rS(t,e,r){this.scene=t,this.uid=r,this.surface=e,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}var nS=rS.prototype;function iS(t){var e=t.shape,r=[e[0]+2,e[1]+2],n=Ip(new Float32Array(r[0]*r[1]),r);return vp.assign(n.lo(1,1).hi(e[0],e[1]),t),vp.assign(n.lo(1).hi(e[0],1),t.hi(e[0],1)),vp.assign(n.lo(1,r[1]-1).hi(e[0],1),t.lo(0,e[1]-1).hi(e[0],1)),vp.assign(n.lo(0,1).hi(1,e[1]),t.hi(1)),vp.assign(n.lo(r[0]-1,1).hi(1,e[1]),t.lo(e[0]-1)),n.set(0,0,t.get(0,0)),n.set(0,r[1]-1,t.get(0,e[1]-1)),n.set(r[0]-1,0,t.get(e[0]-1,0)),n.set(r[0]-1,r[1]-1,t.get(e[0]-1,e[1]-1)),n}nS.handlePick=function(t){if(t.object===this.surface){var e=t.index=[Math.min(0|Math.round(t.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(t.data.index[1]/this.dataScale-1),this.data.z.length-1)],r=[0,0,0];tS(this.data.x)?tS(this.data.x[0])?r[0]=this.data.x[e[1]][e[0]]:r[0]=this.data.x[e[0]]:r[0]=e[0],tS(this.data.y)?tS(this.data.y[0])?r[1]=this.data.y[e[1]][e[0]]:r[1]=this.data.y[e[1]]:r[1]=e[1],r[2]=this.data.z[e[1]][e[0]],t.traceCoordinate=r;var n=this.scene.fullSceneLayout;t.dataCoordinate=[n.xaxis.d2l(r[0],0,this.data.xcalendar)*this.scene.dataScale[0],n.yaxis.d2l(r[1],0,this.data.ycalendar)*this.scene.dataScale[1],n.zaxis.d2l(r[2],0,this.data.zcalendar)*this.scene.dataScale[2]];var i=this.data.text;return Array.isArray(i)&&i[e[1]]&&void 0!==i[e[1]][e[0]]?t.textLabel=i[e[1]][e[0]]:t.textLabel=i||"",t.data.dataCoordinate=t.dataCoordinate.slice(),this.surface.highlight(t.data),this.scene.glplot.spikes.position=t.dataCoordinate,!0}},nS.setContourLevels=function(){for(var t=[[],[],[]],e=!1,r=0;r<3;++r)this.showContour[r]&&(e=!0,t[r]=this.scene.contourLevels[r]);e&&this.surface.update({levels:t})},nS.update=function(t){var e,r=this.scene,n=r.fullSceneLayout,i=this.surface,a=t.opacity,o=function(t,e){return void 0===e&&(e=1),t.map(function(t){var r=t[0],n=s(t[1]).toRgb();return{index:r,rgb:[n.r,n.g,n.b,e]}})}(t.colorscale,a),l=t.z,u=t.x,c=t.y,h=n.xaxis,f=n.yaxis,d=n.zaxis,p=r.dataScale,g=l[0].length,v=t._ylength,m=[Ip(new Float32Array(g*v),[g,v]),Ip(new Float32Array(g*v),[g,v]),Ip(new Float32Array(g*v),[g,v])],y=m[0],b=m[1],x=r.contourLevels;this.data=t;var _=t.xcalendar,w=t.ycalendar,M=t.zcalendar;BC(m[2],function(t,e){return d.d2l(l[e][t],0,M)*p[2]}),tS(u)?tS(u[0])?BC(y,function(t,e){return h.d2l(u[e][t],0,_)*p[0]}):BC(y,function(t){return h.d2l(u[t],0,_)*p[0]}):BC(y,function(t){return h.d2l(t,0,_)*p[0]}),tS(u)?tS(c[0])?BC(b,function(t,e){return f.d2l(c[e][t],0,w)*p[1]}):BC(b,function(t,e){return f.d2l(c[e],0,w)*p[1]}):BC(b,function(t,e){return f.d2l(e,0,_)*p[1]});var A={colormap:o,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!t.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:t.opacity};if(A.intensityBounds=[t.cmin,t.cmax],t.surfacecolor){var T=Ip(new Float32Array(g*v),[g,v]);BC(T,function(e,r){return t.surfacecolor[r][e]}),m.push(T)}else A.intensityBounds[0]*=p[2],A.intensityBounds[1]*=p[2];this.dataScale=function(t){var e=Math.max(t[0].shape[0],t[0].shape[1]);if(e<eS){for(var r=eS/e,n=[0|Math.floor(t[0].shape[0]*r+1),0|Math.floor(t[0].shape[1]*r+1)],i=n[0]*n[1],a=0;a<t.length;++a){var o=iS(t[a]),s=Ip(new Float32Array(i),n);JC(s,o,[r,0,0,0,r,0,0,0,1]),t[a]=s}return r}return 1}(m),t.surfacecolor&&(A.intensity=m.pop());var k=[!0,!0,!0],E=["x","y","z"];for(e=0;e<3;++e){var L=t.contours[E[e]];k[e]=L.highlight,A.showContour[e]=L.show||L.highlight,A.showContour[e]&&(A.contourProject[e]=[L.project.x,L.project.y,L.project.z],L.show?(this.showContour[e]=!0,A.levels[e]=x[e],i.highlightColor[e]=A.contourColor[e]=BA(L.color),L.usecolormap?i.highlightTint[e]=A.contourTint[e]=0:i.highlightTint[e]=A.contourTint[e]=1,A.contourWidth[e]=L.width):this.showContour[e]=!1,L.highlight&&(A.dynamicColor[e]=BA(L.highlightcolor),A.dynamicWidth[e]=L.highlightwidth))}(function(t){var e=t[0].rgb,r=t[t.length-1].rgb;return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]})(o)&&(A.vertexColor=!0),A.coords=m,i.update(A),i.visible=t.visible,i.enableDynamic=k,i.snapToData=!0,"lighting"in t&&(i.ambientLight=t.lighting.ambient,i.diffuseLight=t.lighting.diffuse,i.specularLight=t.lighting.specular,i.roughness=t.lighting.roughness,i.fresnel=t.lighting.fresnel),"lightposition"in t&&(i.lightPosition=[t.lightposition.x,t.lightposition.y,t.lightposition.z]),a&&a<1&&(i.supportsTransparency=!0)},nS.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};var aS=function(t,e){var r=t.glplot.gl,n=gC({gl:r}),i=new rS(t,n,e.uid);return n._trace=i,i.update(e),t.glplot.add(n),i};function oS(t,e,r){e in t&&!(r in t)&&(t[r]=t[e])}var sS={};sS.attributes=dT,sS.supplyDefaults=function(t,e,r,n){var i,a;function o(r,n){return re.coerce(t,e,dT,r,n)}var s=o("z");if(s){var l=o("x");o("y"),e._xlength=Array.isArray(l)&&re.isArrayOrTypedArray(l[0])?s.length:s[0].length,e._ylength=s.length,R.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],n),o("text"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","opacity"].forEach(function(t){o(t)});var u=o("surfacecolor");o("colorscale");var c=["x","y","z"];for(i=0;i<3;++i){var h="contours."+c[i],f=o(h+".show"),d=o(h+".highlight");if(f||d)for(a=0;a<3;++a)o(h+".project."+c[a]);f&&(o(h+".color"),o(h+".width"),o(h+".usecolormap")),d&&(o(h+".highlightcolor"),o(h+".highlightwidth"))}u||(oS(t,"zmin","cmin"),oS(t,"zmax","cmax"),oS(t,"zauto","cauto")),Sr(t,e,n,o,{prefix:"",cLetter:"c"})}else e.visible=!1},sS.colorbar=function(t,r){var n=r[0].trace,i="cb"+n.uid,a=n.cmin,o=n.cmax,s=n.surfacecolor||n.z;if(e(a)||(a=re.aggNums(Math.min,null,s)),e(o)||(o=re.aggNums(Math.max,null,s)),t._fullLayout._infolayer.selectAll("."+i).remove(),n.showscale){var l=r[0].t.cb=nf(t,i),u=Or.makeColorScaleFunc(Or.extractScale(n.colorscale,a,o),{noNumericCheck:!0});l.fillcolor(u).filllevels({start:a,end:o,size:(o-a)/254}).options(n.colorbar)()}else vi.autoMargin(t,i)},sS.calc=function(t,e){e.surfacecolor?lr(e,e.surfacecolor,"","c"):lr(e,e.z,"","c")},sS.plot=aS,sS.moduleType="trace",sS.name="surface",sS.basePlotModule=cT,sS.categories=["gl3d","2dMap","noOpacity"],sS.meta={};var lS=sS;return Lf.register([tC,lS,mE]),Lf});